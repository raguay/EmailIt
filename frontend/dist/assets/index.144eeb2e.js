const SI=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}};SI();function lt(){}function xI(r,e){for(const t in e)r[t]=e[t];return r}function k4(r){return r()}function qx(){return Object.create(null)}function yt(r){r.forEach(k4)}function w4(r){return typeof r=="function"}function ki(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}function CI(r){return Object.keys(r).length===0}function AI(r,...e){if(r==null)return lt;const t=r.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Re(r,e,t){r.$$.on_destroy.push(AI(e,t))}function Jd(r,e,t,i){if(r){const n=y4(r,e,t,i);return r[0](n)}}function y4(r,e,t,i){return r[1]&&i?xI(t.ctx.slice(),r[1](i(e))):t.ctx}function ep(r,e,t,i){if(r[2]&&i){const n=r[2](i(t));if(e.dirty===void 0)return n;if(typeof n=="object"){const s=[],o=Math.max(e.dirty.length,n.length);for(let l=0;l<o;l+=1)s[l]=e.dirty[l]|n[l];return s}return e.dirty|n}return e.dirty}function tp(r,e,t,i,n,s){if(n){const o=y4(e,t,i,s);r.p(o,n)}}function ip(r){if(r.ctx.length>32){const e=[],t=r.ctx.length/32;for(let i=0;i<t;i++)e[i]=-1;return e}return-1}function fe(r,e,t){return r.set(t),e}function TI(r){return r&&w4(r.destroy)?r.destroy:lt}function A(r,e){r.appendChild(e)}function K(r,e,t){r.insertBefore(e,t||null)}function Y(r){r.parentNode.removeChild(r)}function In(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function B(r){return document.createElement(r)}function PI(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function ne(r){return document.createTextNode(r)}function F(){return ne(" ")}function bn(){return ne("")}function U(r,e,t,i){return r.addEventListener(e,t,i),()=>r.removeEventListener(e,t,i)}function _I(r){return function(e){return e.preventDefault(),r.call(this,e)}}function P(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function $I(r){return Array.from(r.childNodes)}function tt(r,e){e=""+e,r.wholeText!==e&&(r.data=e)}function Xe(r,e){r.value=e==null?"":e}function O(r,e,t,i){t===null?r.style.removeProperty(e):r.style.setProperty(e,t,i?"important":"")}function Zu(r,e){for(let t=0;t<r.options.length;t+=1){const i=r.options[t];if(i.__value===e){i.selected=!0;return}}r.selectedIndex=-1}function D2(r){const e=r.querySelector(":checked")||r.options[0];return e&&e.__value}function Tu(r,e,t){r.classList[t?"add":"remove"](e)}function MI(r,e,{bubbles:t=!1,cancelable:i=!1}={}){const n=document.createEvent("CustomEvent");return n.initCustomEvent(r,t,i,e),n}class v4{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,i=null){this.e||(this.is_svg?this.e=PI(t.nodeName):this.e=B(t.nodeName),this.t=t,this.c(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)K(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(Y)}}let fd;function Hc(r){fd=r}function E2(){if(!fd)throw new Error("Function called outside component initialization");return fd}function Sr(r){E2().$$.on_mount.push(r)}function jh(r){E2().$$.after_update.push(r)}function Xa(){const r=E2();return(e,t,{cancelable:i=!1}={})=>{const n=r.$$.callbacks[e];if(n){const s=MI(e,t,{cancelable:i});return n.slice().forEach(o=>{o.call(r,s)}),!s.defaultPrevented}return!0}}const Tc=[],sr=[],bm=[],ww=[],S4=Promise.resolve();let yw=!1;function x4(){yw||(yw=!0,S4.then(C4))}function B2(){return x4(),S4}function Gu(r){bm.push(r)}function N2(r){ww.push(r)}const pO=new Set;let Lp=0;function C4(){const r=fd;do{for(;Lp<Tc.length;){const e=Tc[Lp];Lp++,Hc(e),RI(e.$$)}for(Hc(null),Tc.length=0,Lp=0;sr.length;)sr.pop()();for(let e=0;e<bm.length;e+=1){const t=bm[e];pO.has(t)||(pO.add(t),t())}bm.length=0}while(Tc.length);for(;ww.length;)ww.pop()();yw=!1,pO.clear(),Hc(r)}function RI(r){if(r.fragment!==null){r.update(),yt(r.before_update);const e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(Gu)}}const Om=new Set;let fh;function Bn(){fh={r:0,c:[],p:fh}}function Nn(){fh.r||yt(fh.c),fh=fh.p}function Se(r,e){r&&r.i&&(Om.delete(r),r.i(e))}function Me(r,e,t,i){if(r&&r.o){if(Om.has(r))return;Om.add(r),fh.c.push(()=>{Om.delete(r),i&&(t&&r.d(1),i())}),r.o(e)}else i&&i()}function I2(r,e,t){const i=r.$$.props[e];i!==void 0&&(r.$$.bound[i]=t,t(r.$$.ctx[i]))}function Kt(r){r&&r.c()}function Vt(r,e,t,i){const{fragment:n,on_mount:s,on_destroy:o,after_update:l}=r.$$;n&&n.m(e,t),i||Gu(()=>{const a=s.map(k4).filter(w4);o?o.push(...a):yt(a),r.$$.on_mount=[]}),l.forEach(Gu)}function jt(r,e){const t=r.$$;t.fragment!==null&&(yt(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function QI(r,e){r.$$.dirty[0]===-1&&(Tc.push(r),x4(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function Pi(r,e,t,i,n,s,o,l=[-1]){const a=fd;Hc(r);const h=r.$$={fragment:null,ctx:null,props:s,update:lt,not_equal:n,bound:qx(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:qx(),dirty:l,skip_bound:!1,root:e.target||a.$$.root};o&&o(h.root);let u=!1;if(h.ctx=t?t(r,e.props||{},(f,c,...d)=>{const g=d.length?d[0]:c;return h.ctx&&n(h.ctx[f],h.ctx[f]=g)&&(!h.skip_bound&&h.bound[f]&&h.bound[f](g),u&&QI(r,f)),c}):[],h.update(),u=!0,yt(h.before_update),h.fragment=i?i(h.ctx):!1,e.target){if(e.hydrate){const f=$I(e.target);h.fragment&&h.fragment.l(f),f.forEach(Y)}else h.fragment&&h.fragment.c();e.intro&&Se(r.$$.fragment),Vt(r,e.target,e.anchor,e.customElement),C4()}Hc(a)}class _i{$destroy(){jt(this,1),this.$destroy=lt}$on(e,t){const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{const n=i.indexOf(t);n!==-1&&i.splice(n,1)}}$set(e){this.$$set&&!CI(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}class _t{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){let n=[];return this.decompose(0,e,n,2),i.length&&i.decompose(0,i.length,n,3),this.decompose(t,this.length,n,1),Mo.from(n,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let i=[];return this.decompose(e,t,i,0),Mo.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),n=new qc(this),s=new qc(e);for(let o=t,l=t;;){if(n.next(o),s.next(o),o=0,n.lineBreak!=s.lineBreak||n.done!=s.done||n.value!=s.value)return!1;if(l+=n.value.length,n.done||l>=i)return!0}}iter(e=1){return new qc(this,e)}iterRange(e,t=this.length){return new A4(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let n=this.line(e).from;i=this.iterRange(n,Math.max(n,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new T4(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?_t.empty:e.length<=32?new Bi(e):Mo.from(Bi.split(e,[]))}}class Bi extends _t{constructor(e,t=DI(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,n){for(let s=0;;s++){let o=this.text[s],l=n+o.length;if((t?i:l)>=e)return new EI(n,l,i,o);n=l+1,i++}}decompose(e,t,i,n){let s=e<=0&&t>=this.length?this:new Bi(Xx(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(n&1){let o=i.pop(),l=km(s.text,o.text.slice(),0,s.length);if(l.length<=32)i.push(new Bi(l,o.length+s.length));else{let a=l.length>>1;i.push(new Bi(l.slice(0,a)),new Bi(l.slice(a)))}}else i.push(s)}replace(e,t,i){if(!(i instanceof Bi))return super.replace(e,t,i);let n=km(this.text,km(i.text,Xx(this.text,0,e)),t),s=this.length+i.length-(t-e);return n.length<=32?new Bi(n,s):Mo.from(Bi.split(n,[]),s)}sliceString(e,t=this.length,i=`
`){let n="";for(let s=0,o=0;s<=t&&o<this.text.length;o++){let l=this.text[o],a=s+l.length;s>e&&o&&(n+=i),e<a&&t>s&&(n+=l.slice(Math.max(0,e-s),t-s)),s=a+1}return n}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],n=-1;for(let s of e)i.push(s),n+=s.length+1,i.length==32&&(t.push(new Bi(i,n)),i=[],n=-1);return n>-1&&t.push(new Bi(i,n)),t}}class Mo extends _t{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,n){for(let s=0;;s++){let o=this.children[s],l=n+o.length,a=i+o.lines-1;if((t?a:l)>=e)return o.lineInner(e,t,i,n);n=l+1,i=a+1}}decompose(e,t,i,n){for(let s=0,o=0;o<=t&&s<this.children.length;s++){let l=this.children[s],a=o+l.length;if(e<=a&&t>=o){let h=n&((o<=e?1:0)|(a>=t?2:0));o>=e&&a<=t&&!h?i.push(l):l.decompose(e-o,t-o,i,h)}o=a+1}}replace(e,t,i){if(i.lines<this.lines)for(let n=0,s=0;n<this.children.length;n++){let o=this.children[n],l=s+o.length;if(e>=s&&t<=l){let a=o.replace(e-s,t-s,i),h=this.lines-o.lines+a.lines;if(a.lines<h>>5-1&&a.lines>h>>5+1){let u=this.children.slice();return u[n]=a,new Mo(u,this.length-(t-e)+i.length)}return super.replace(s,l,a)}s=l+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){let n="";for(let s=0,o=0;s<this.children.length&&o<=t;s++){let l=this.children[s],a=o+l.length;o>e&&s&&(n+=i),e<a&&t>o&&(n+=l.sliceString(e-o,t-o,i)),o=a+1}return n}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Mo))return 0;let i=0,[n,s,o,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;n+=t,s+=t){if(n==o||s==l)return i;let a=this.children[n],h=e.children[s];if(a!=h)return i+a.scanIdentical(h,t);i+=a.length+1}}static from(e,t=e.reduce((i,n)=>i+n.length+1,-1)){let i=0;for(let d of e)i+=d.lines;if(i<32){let d=[];for(let g of e)g.flatten(d);return new Bi(d,t)}let n=Math.max(32,i>>5),s=n<<1,o=n>>1,l=[],a=0,h=-1,u=[];function f(d){let g;if(d.lines>s&&d instanceof Mo)for(let w of d.children)f(w);else d.lines>o&&(a>o||!a)?(c(),l.push(d)):d instanceof Bi&&a&&(g=u[u.length-1])instanceof Bi&&d.lines+g.lines<=32?(a+=d.lines,h+=d.length+1,u[u.length-1]=new Bi(g.text.concat(d.text),g.length+1+d.length)):(a+d.lines>n&&c(),a+=d.lines,h+=d.length+1,u.push(d))}function c(){a!=0&&(l.push(u.length==1?u[0]:Mo.from(u,h)),h=-1,a=u.length=0)}for(let d of e)f(d);return c(),l.length==1?l[0]:new Mo(l,t)}}_t.empty=new Bi([""],0);function DI(r){let e=-1;for(let t of r)e+=t.length+1;return e}function km(r,e,t=0,i=1e9){for(let n=0,s=0,o=!0;s<r.length&&n<=i;s++){let l=r[s],a=n+l.length;a>=t&&(a>i&&(l=l.slice(0,i-n)),n<t&&(l=l.slice(t-n)),o?(e[e.length-1]+=l,o=!1):e.push(l)),n=a+1}return e}function Xx(r,e,t){return km(r,[""],e,t)}class qc{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Bi?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,n=this.nodes[i],s=this.offsets[i],o=s>>1,l=n instanceof Bi?n.text.length:n.children.length;if(o==(t>0?l:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(n instanceof Bi){let a=n.text[o+(t<0?-1:0)];if(this.offsets[i]+=t,a.length>Math.max(0,e))return this.value=e==0?a:t>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=n.children[o+(t<0?-1:0)];e>a.length?(e-=a.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(a),this.offsets.push(t>0?1:(a instanceof Bi?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class A4{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new qc(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:n}=this.cursor.next(e);return this.pos+=(n.length+e)*t,this.value=n.length<=i?n:t<0?n.slice(n.length-i):n.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class T4{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:n}=this.inner.next(e);return t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=n,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol!="undefined"&&(_t.prototype[Symbol.iterator]=function(){return this.iter()},qc.prototype[Symbol.iterator]=A4.prototype[Symbol.iterator]=T4.prototype[Symbol.iterator]=function(){return this});class EI{constructor(e,t,i,n){this.from=e,this.to=t,this.number=i,this.text=n}get length(){return this.to-this.from}}let Mu="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(r=>r?parseInt(r,36):1);for(let r=1;r<Mu.length;r++)Mu[r]+=Mu[r-1];function BI(r){for(let e=1;e<Mu.length;e+=2)if(Mu[e]>r)return Mu[e-1]<=r;return!1}function Zx(r){return r>=127462&&r<=127487}const Gx=8205;function Kr(r,e,t=!0,i=!0){return(t?P4:NI)(r,e,i)}function P4(r,e,t){if(e==r.length)return e;e&&_4(r.charCodeAt(e))&&$4(r.charCodeAt(e-1))&&e--;let i=Ru(r,e);for(e+=t0(i);e<r.length;){let n=Ru(r,e);if(i==Gx||n==Gx||t&&BI(n))e+=t0(n),i=n;else if(Zx(n)){let s=0,o=e-2;for(;o>=0&&Zx(Ru(r,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function NI(r,e,t){for(;e>0;){let i=P4(r,e-2,t);if(i<e)return i;e--}return 0}function _4(r){return r>=56320&&r<57344}function $4(r){return r>=55296&&r<56320}function Ru(r,e){let t=r.charCodeAt(e);if(!$4(t)||e+1==r.length)return t;let i=r.charCodeAt(e+1);return _4(i)?(t-55296<<10)+(i-56320)+65536:t}function II(r){return r<=65535?String.fromCharCode(r):(r-=65536,String.fromCharCode((r>>10)+55296,(r&1023)+56320))}function t0(r){return r<65536?1:2}const vw=/\r\n?|\n/;var gr=function(r){return r[r.Simple=0]="Simple",r[r.TrackDel=1]="TrackDel",r[r.TrackBefore=2]="TrackBefore",r[r.TrackAfter=3]="TrackAfter",r}(gr||(gr={}));class jo{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,n=0;t<this.sections.length;){let s=this.sections[t++],o=this.sections[t++];o<0?(e(i,n,s),n+=s):n+=o,i+=s}}iterChangedRanges(e,t=!1){Sw(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];n<0?e.push(i,n):e.push(n,i)}return new jo(e)}composeDesc(e){return this.empty?e:e.empty?this:M4(this,e)}mapDesc(e,t=!1){return e.empty?this:xw(this,e,t)}mapPos(e,t=-1,i=gr.Simple){let n=0,s=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],h=n+l;if(a<0){if(h>e)return s+(e-n);s+=l}else{if(i!=gr.Simple&&h>=e&&(i==gr.TrackDel&&n<e&&h>e||i==gr.TrackBefore&&n<e||i==gr.TrackAfter&&h>e))return null;if(h>e||h==e&&t<0&&!l)return e==n||t<0?s:s+a;s+=a}n=h}if(e>n)throw new RangeError(`Position ${e} is out of range for changeset of length ${n}`);return s}touchesRange(e,t=e){for(let i=0,n=0;i<this.sections.length&&n<=t;){let s=this.sections[i++],o=this.sections[i++],l=n+s;if(o>=0&&n<=t&&l>=e)return n<e&&l>t?"cover":!0;n=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];e+=(e?" ":"")+i+(n>=0?":"+n:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new jo(e)}static create(e){return new jo(e)}}class Ki extends jo{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Sw(this,(t,i,n,s,o)=>e=e.replace(n,n+(i-t),o),!1),e}mapDesc(e,t=!1){return xw(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let n=0,s=0;n<t.length;n+=2){let o=t[n],l=t[n+1];if(l>=0){t[n]=l,t[n+1]=o;let a=n>>1;for(;i.length<a;)i.push(_t.empty);i.push(o?e.slice(s,s+o):_t.empty)}s+=o}return new Ki(t,i)}compose(e){return this.empty?e:e.empty?this:M4(this,e,!0)}map(e,t=!1){return e.empty?this:xw(this,e,t,!0)}iterChanges(e,t=!1){Sw(this,e,t)}get desc(){return jo.create(this.sections)}filter(e){let t=[],i=[],n=[],s=new cd(this);e:for(let o=0,l=0;;){let a=o==e.length?1e9:e[o++];for(;l<a||l==a&&s.len==0;){if(s.done)break e;let u=Math.min(s.len,a-l);zn(n,u,-1);let f=s.ins==-1?-1:s.off==0?s.ins:0;zn(t,u,f),f>0&&ra(i,t,s.text),s.forward(u),l+=u}let h=e[o++];for(;l<h;){if(s.done)break e;let u=Math.min(s.len,h-l);zn(t,u,-1),zn(n,u,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(u),l+=u}}return{changes:new Ki(t,i),filtered:jo.create(n)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],n=this.sections[t+1];n<0?e.push(i):n==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let n=[],s=[],o=0,l=null;function a(u=!1){if(!u&&!n.length)return;o<t&&zn(n,t-o,-1);let f=new Ki(n,s);l=l?l.compose(f.map(l)):f,n=[],s=[],o=0}function h(u){if(Array.isArray(u))for(let f of u)h(f);else if(u instanceof Ki){if(u.length!=t)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${t})`);a(),l=l?l.compose(u.map(l)):u}else{let{from:f,to:c=f,insert:d}=u;if(f>c||f<0||c>t)throw new RangeError(`Invalid change range ${f} to ${c} (in doc of length ${t})`);let g=d?typeof d=="string"?_t.of(d.split(i||vw)):d:_t.empty,w=g.length;if(f==c&&w==0)return;f<o&&a(),f>o&&zn(n,f-o,-1),zn(n,c-f,w),ra(s,n,g),o=c}}return h(e),a(!l),l}static empty(e){return new Ki(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let n=0;n<e.length;n++){let s=e[n];if(typeof s=="number")t.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)t.push(s[0],0);else{for(;i.length<n;)i.push(_t.empty);i[n]=_t.of(s.slice(1)),t.push(s[0],i[n].length)}}}return new Ki(t,i)}static createSet(e,t){return new Ki(e,t)}}function zn(r,e,t,i=!1){if(e==0&&t<=0)return;let n=r.length-2;n>=0&&t<=0&&t==r[n+1]?r[n]+=e:e==0&&r[n]==0?r[n+1]+=t:i?(r[n]+=e,r[n+1]+=t):r.push(e,t)}function ra(r,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<r.length)r[r.length-1]=r[r.length-1].append(t);else{for(;r.length<i;)r.push(_t.empty);r.push(t)}}function Sw(r,e,t){let i=r.inserted;for(let n=0,s=0,o=0;o<r.sections.length;){let l=r.sections[o++],a=r.sections[o++];if(a<0)n+=l,s+=l;else{let h=n,u=s,f=_t.empty;for(;h+=l,u+=a,a&&i&&(f=f.append(i[o-2>>1])),!(t||o==r.sections.length||r.sections[o+1]<0);)l=r.sections[o++],a=r.sections[o++];e(n,h,s,u,f),n=h,s=u}}}function xw(r,e,t,i=!1){let n=[],s=i?[]:null,o=new cd(r),l=new cd(e);for(let a=-1;;)if(o.ins==-1&&l.ins==-1){let h=Math.min(o.len,l.len);zn(n,h,-1),o.forward(h),l.forward(h)}else if(l.ins>=0&&(o.ins<0||a==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!t))){let h=l.len;for(zn(n,l.ins,-1);h;){let u=Math.min(o.len,h);o.ins>=0&&a<o.i&&o.len<=u&&(zn(n,0,o.ins),s&&ra(s,n,o.text),a=o.i),o.forward(u),h-=u}l.next()}else if(o.ins>=0){let h=0,u=o.len;for(;u;)if(l.ins==-1){let f=Math.min(u,l.len);h+=f,u-=f,l.forward(f)}else if(l.ins==0&&l.len<u)u-=l.len,l.next();else break;zn(n,h,a<o.i?o.ins:0),s&&a<o.i&&ra(s,n,o.text),a=o.i,o.forward(o.len-u)}else{if(o.done&&l.done)return s?Ki.createSet(n,s):jo.create(n);throw new Error("Mismatched change set lengths")}}function M4(r,e,t=!1){let i=[],n=t?[]:null,s=new cd(r),o=new cd(e);for(let l=!1;;){if(s.done&&o.done)return n?Ki.createSet(i,n):jo.create(i);if(s.ins==0)zn(i,s.len,0,l),s.next();else if(o.len==0&&!o.done)zn(i,0,o.ins,l),n&&ra(n,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(s.len2,o.len),h=i.length;if(s.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;zn(i,a,u,l),n&&u&&ra(n,i,o.text)}else o.ins==-1?(zn(i,s.off?0:s.len,a,l),n&&ra(n,i,s.textBit(a))):(zn(i,s.off?0:s.len,o.off?0:o.ins,l),n&&!o.off&&ra(n,i,o.text));l=(s.ins>a||o.ins>=0&&o.len>a)&&(l||i.length>h),s.forward2(a),o.forward(a)}}}}class cd{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?_t.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?_t.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class ch{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,t=-1){let i,n;return this.empty?i=n=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),n=e.mapPos(this.to,-1)),i==this.from&&n==this.to?this:new ch(i,n,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return se.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return se.range(this.anchor,i)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return se.range(e.anchor,e.head)}static create(e,t,i){return new ch(e,t,i)}}class se{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:se.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new se([this.main],0)}addRange(e,t=!0){return se.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,se.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new se(e.ranges.map(t=>ch.fromJSON(t)),e.main)}static single(e,t=e){return new se([se.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,n=0;n<e.length;n++){let s=e[n];if(s.empty?s.from<=i:s.from<i)return se.normalized(e.slice(),t);i=s.to}return new se(e,t)}static cursor(e,t=0,i,n){return ch.create(e,e,(t==0?0:t<0?4:8)|(i==null?3:Math.min(2,i))|(n!=null?n:33554431)<<5)}static range(e,t,i){let n=(i!=null?i:33554431)<<5;return t<e?ch.create(t,e,16|n|8):ch.create(e,t,n|(t>e?4:0))}static normalized(e,t=0){let i=e[t];e.sort((n,s)=>n.from-s.from),t=e.indexOf(i);for(let n=1;n<e.length;n++){let s=e[n],o=e[n-1];if(s.empty?s.from<=o.to:s.from<o.to){let l=o.from,a=Math.max(s.to,o.to);n<=t&&t--,e.splice(--n,2,s.anchor>s.head?se.range(a,l):se.range(l,a))}}return new se(e,t)}}function R4(r,e){for(let t of r.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let L2=0;class Ie{constructor(e,t,i,n,s){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=n,this.id=L2++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}static define(e={}){return new Ie(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:z2),!!e.static,e.enables)}of(e){return new wm([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new wm(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new wm(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function z2(r,e){return r==e||r.length==e.length&&r.every((t,i)=>t===e[i])}class wm{constructor(e,t,i,n){this.dependencies=e,this.facet=t,this.type=i,this.value=n,this.id=L2++}dynamicSlot(e){var t;let i=this.value,n=this.facet.compareInput,s=this.id,o=e[s]>>1,l=this.type==2,a=!1,h=!1,u=[];for(let f of this.dependencies)f=="doc"?a=!0:f=="selection"?h=!0:(((t=e[f.id])!==null&&t!==void 0?t:1)&1)==0&&u.push(e[f.id]);return{create(f){return f.values[o]=i(f),1},update(f,c){if(a&&c.docChanged||h&&(c.docChanged||c.selection)||Cw(f,u)){let d=i(f);if(l?!Ux(d,f.values[o],n):!n(d,f.values[o]))return f.values[o]=d,1}return 0},reconfigure:(f,c)=>{let d=i(f),g=c.config.address[s];if(g!=null){let w=n0(c,g);if(this.dependencies.every(S=>S instanceof Ie?c.facet(S)===f.facet(S):S instanceof or?c.field(S,!1)==f.field(S,!1):!0)||(l?Ux(d,w,n):n(d,w)))return f.values[o]=w,0}return f.values[o]=d,1}}}}function Ux(r,e,t){if(r.length!=e.length)return!1;for(let i=0;i<r.length;i++)if(!t(r[i],e[i]))return!1;return!0}function Cw(r,e){let t=!1;for(let i of e)Xc(r,i)&1&&(t=!0);return t}function LI(r,e,t){let i=t.map(a=>r[a.id]),n=t.map(a=>a.type),s=i.filter(a=>!(a&1)),o=r[e.id]>>1;function l(a){let h=[];for(let u=0;u<i.length;u++){let f=n0(a,i[u]);if(n[u]==2)for(let c of f)h.push(c);else h.push(f)}return e.combine(h)}return{create(a){for(let h of i)Xc(a,h);return a.values[o]=l(a),1},update(a,h){if(!Cw(a,s))return 0;let u=l(a);return e.compare(u,a.values[o])?0:(a.values[o]=u,1)},reconfigure(a,h){let u=Cw(a,i),f=h.config.facets[e.id],c=h.facet(e);if(f&&!u&&z2(t,f))return a.values[o]=c,0;let d=l(a);return e.compare(d,c)?(a.values[o]=c,0):(a.values[o]=d,1)}}}const Yx=Ie.define({static:!0});class or{constructor(e,t,i,n,s){this.id=e,this.createF=t,this.updateF=i,this.compareF=n,this.spec=s,this.provides=void 0}static define(e){let t=new or(L2++,e.create,e.update,e.compare||((i,n)=>i===n),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Yx).find(i=>i.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,n)=>{let s=i.values[t],o=this.updateF(s,n);return this.compareF(s,o)?0:(i.values[t]=o,1)},reconfigure:(i,n)=>n.config.address[this.id]!=null?(i.values[t]=n.field(this),0):(i.values[t]=this.create(i),1)}}init(e){return[this,Yx.of({field:this,create:e})]}get extension(){return this}}const wu={lowest:4,low:3,default:2,high:1,highest:0};function Uf(r){return e=>new Q4(e,r)}const Ff={highest:Uf(wu.highest),high:Uf(wu.high),default:Uf(wu.default),low:Uf(wu.low),lowest:Uf(wu.lowest)};class Q4{constructor(e,t){this.inner=e,this.prec=t}}class vb{of(e){return new Aw(this,e)}reconfigure(e){return vb.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Aw{constructor(e,t){this.compartment=e,this.inner=t}}class i0{constructor(e,t,i,n,s,o){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=n,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let n=[],s=Object.create(null),o=new Map;for(let c of zI(e,t,o))c instanceof or?n.push(c):(s[c.facet.id]||(s[c.facet.id]=[])).push(c);let l=Object.create(null),a=[],h=[];for(let c of n)l[c.id]=h.length<<1,h.push(d=>c.slot(d));let u=i==null?void 0:i.config.facets;for(let c in s){let d=s[c],g=d[0].facet,w=u&&u[c]||[];if(d.every(S=>S.type==0))if(l[g.id]=a.length<<1|1,z2(w,d))a.push(i.facet(g));else{let S=g.combine(d.map(x=>x.value));a.push(i&&g.compare(S,i.facet(g))?i.facet(g):S)}else{for(let S of d)S.type==0?(l[S.id]=a.length<<1|1,a.push(S.value)):(l[S.id]=h.length<<1,h.push(x=>S.dynamicSlot(x)));l[g.id]=h.length<<1,h.push(S=>LI(S,g,d))}}let f=h.map(c=>c(l));return new i0(e,o,f,l,a,s)}}function zI(r,e,t){let i=[[],[],[],[],[]],n=new Map;function s(o,l){let a=n.get(o);if(a!=null){if(a<=l)return;let h=i[a].indexOf(o);h>-1&&i[a].splice(h,1),o instanceof Aw&&t.delete(o.compartment)}if(n.set(o,l),Array.isArray(o))for(let h of o)s(h,l);else if(o instanceof Aw){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let h=e.get(o.compartment)||o.inner;t.set(o.compartment,h),s(h,l)}else if(o instanceof Q4)s(o.inner,o.prec);else if(o instanceof or)i[l].push(o),o.provides&&s(o.provides,l);else if(o instanceof wm)i[l].push(o),o.facet.extensions&&s(o.facet.extensions,l);else{let h=o.extension;if(!h)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(h,l)}}return s(r,wu.default),i.reduce((o,l)=>o.concat(l))}function Xc(r,e){if(e&1)return 2;let t=e>>1,i=r.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;r.status[t]=4;let n=r.computeSlot(r,r.config.dynamicSlots[t]);return r.status[t]=2|n}function n0(r,e){return e&1?r.config.staticValues[e>>1]:r.values[e>>1]}const D4=Ie.define(),E4=Ie.define({combine:r=>r.some(e=>e),static:!0}),B4=Ie.define({combine:r=>r.length?r[0]:void 0,static:!0}),N4=Ie.define(),I4=Ie.define(),L4=Ie.define(),z4=Ie.define({combine:r=>r.length?r[0]:!1});class Fh{constructor(e,t){this.type=e,this.value=t}static define(){return new WI}}class WI{of(e){return new Fh(this,e)}}class VI{constructor(e){this.map=e}of(e){return new xt(this,e)}}class xt{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new xt(this.type,t)}is(e){return this.type==e}static define(e={}){return new VI(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let n of e){let s=n.map(t);s&&i.push(s)}return i}}xt.reconfigure=xt.define();xt.appendConfig=xt.define();class Ji{constructor(e,t,i,n,s,o){this.startState=e,this.changes=t,this.selection=i,this.effects=n,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&R4(i,t.newLength),s.some(l=>l.type==Ji.time)||(this.annotations=s.concat(Ji.time.of(Date.now())))}static create(e,t,i,n,s,o){return new Ji(e,t,i,n,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Ji.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Ji.time=Fh.define();Ji.userEvent=Fh.define();Ji.addToHistory=Fh.define();Ji.remote=Fh.define();function jI(r,e){let t=[];for(let i=0,n=0;;){let s,o;if(i<r.length&&(n==e.length||e[n]>=r[i]))s=r[i++],o=r[i++];else if(n<e.length)s=e[n++],o=e[n++];else return t;!t.length||t[t.length-1]<s?t.push(s,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function W4(r,e,t){var i;let n,s,o;return t?(n=e.changes,s=Ki.empty(e.changes.length),o=r.changes.compose(e.changes)):(n=e.changes.map(r.changes),s=r.changes.mapDesc(e.changes,!0),o=r.changes.compose(n)),{changes:o,selection:e.selection?e.selection.map(s):(i=r.selection)===null||i===void 0?void 0:i.map(n),effects:xt.mapEffects(r.effects,n).concat(xt.mapEffects(e.effects,s)),annotations:r.annotations.length?r.annotations.concat(e.annotations):e.annotations,scrollIntoView:r.scrollIntoView||e.scrollIntoView}}function Tw(r,e,t){let i=e.selection,n=Qu(e.annotations);return e.userEvent&&(n=n.concat(Ji.userEvent.of(e.userEvent))),{changes:e.changes instanceof Ki?e.changes:Ki.of(e.changes||[],t,r.facet(B4)),selection:i&&(i instanceof se?i:se.single(i.anchor,i.head)),effects:Qu(e.effects),annotations:n,scrollIntoView:!!e.scrollIntoView}}function V4(r,e,t){let i=Tw(r,e.length?e[0]:{},r.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(t=!1);let o=!!e[s].sequential;i=W4(i,Tw(r,e[s],o?i.changes.newLength:r.doc.length),o)}let n=Ji.create(r,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return HI(t?FI(n):n)}function FI(r){let e=r.startState,t=!0;for(let n of e.facet(N4)){let s=n(r);if(s===!1){t=!1;break}Array.isArray(s)&&(t=t===!0?s:jI(t,s))}if(t!==!0){let n,s;if(t===!1)s=r.changes.invertedDesc,n=Ki.empty(e.doc.length);else{let o=r.changes.filter(t);n=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}r=Ji.create(e,n,r.selection&&r.selection.map(s),xt.mapEffects(r.effects,s),r.annotations,r.scrollIntoView)}let i=e.facet(I4);for(let n=i.length-1;n>=0;n--){let s=i[n](r);s instanceof Ji?r=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Ji?r=s[0]:r=V4(e,Qu(s),!1)}return r}function HI(r){let e=r.startState,t=e.facet(L4),i=r;for(let n=t.length-1;n>=0;n--){let s=t[n](r);s&&Object.keys(s).length&&(i=W4(r,Tw(e,s,r.changes.newLength),!0))}return i==r?r:Ji.create(e,r.changes,r.selection,i.effects,i.annotations,i.scrollIntoView)}const qI=[];function Qu(r){return r==null?qI:Array.isArray(r)?r:[r]}var Jr=function(r){return r[r.Word=0]="Word",r[r.Space=1]="Space",r[r.Other=2]="Other",r}(Jr||(Jr={}));const XI=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Pw;try{Pw=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function ZI(r){if(Pw)return Pw.test(r);for(let e=0;e<r.length;e++){let t=r[e];if(/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||XI.test(t)))return!0}return!1}function GI(r){return e=>{if(!/\S/.test(e))return Jr.Space;if(ZI(e))return Jr.Word;for(let t=0;t<r.length;t++)if(e.indexOf(r[t])>-1)return Jr.Word;return Jr.Other}}class it{constructor(e,t,i,n,s,o){this.config=e,this.doc=t,this.selection=i,this.values=n,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)Xc(this,l<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return Xc(this,i),n0(this,i)}update(...e){return V4(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:n}=t;for(let o of e.effects)o.is(vb.reconfigure)?(t&&(n=new Map,t.compartments.forEach((l,a)=>n.set(a,l)),t=null),n.set(o.value.compartment,o.value.extension)):o.is(xt.reconfigure)?(t=null,i=o.value):o.is(xt.appendConfig)&&(t=null,i=Qu(i).concat(o.value));let s;t?s=e.startState.values.slice():(t=i0.resolve(i,n,this),s=new it(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(l,a)=>a.reconfigure(l,this),null).values),new it(t,e.newDoc,e.newSelection,s,(o,l)=>l.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:se.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),n=this.changes(i.changes),s=[i.range],o=Qu(i.effects);for(let l=1;l<t.ranges.length;l++){let a=e(t.ranges[l]),h=this.changes(a.changes),u=h.map(n);for(let c=0;c<l;c++)s[c]=s[c].map(u);let f=n.mapDesc(h,!0);s.push(a.range.map(f)),n=n.compose(u),o=xt.mapEffects(o,u).concat(xt.mapEffects(Qu(a.effects),f))}return{changes:n,selection:se.create(s,t.mainIndex),effects:o}}changes(e=[]){return e instanceof Ki?e:Ki.of(e,this.doc.length,this.facet(it.lineSeparator))}toText(e){return _t.of(e.split(this.facet(it.lineSeparator)||vw))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Xc(this,t),n0(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let n=e[i];n instanceof or&&this.config.address[n.id]!=null&&(t[i]=n.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let n=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(e,s)){let o=i[s],l=e[s];n.push(o.init(a=>o.spec.fromJSON(l,a)))}}return it.create({doc:e.doc,selection:se.fromJSON(e.selection),extensions:t.extensions?n.concat([t.extensions]):n})}static create(e={}){let t=i0.resolve(e.extensions||[],new Map),i=e.doc instanceof _t?e.doc:_t.of((e.doc||"").split(t.staticFacet(it.lineSeparator)||vw)),n=e.selection?e.selection instanceof se?e.selection:se.single(e.selection.anchor,e.selection.head):se.single(0);return R4(n,i.length),t.staticFacet(E4)||(n=n.asSingle()),new it(t,i,n,t.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(it.tabSize)}get lineBreak(){return this.facet(it.lineSeparator)||`
`}get readOnly(){return this.facet(z4)}phrase(e,...t){for(let i of this.facet(it.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,n)=>{if(n=="$")return"$";let s=+(n||1);return!s||s>t.length?i:t[s-1]})),e}languageDataAt(e,t,i=-1){let n=[];for(let s of this.facet(D4))for(let o of s(this,t,i))Object.prototype.hasOwnProperty.call(o,e)&&n.push(o[e]);return n}charCategorizer(e){return GI(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:n}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,l=e-i;for(;o>0;){let a=Kr(t,o,!1);if(s(t.slice(a,o))!=Jr.Word)break;o=a}for(;l<n;){let a=Kr(t,l);if(s(t.slice(l,a))!=Jr.Word)break;l=a}return o==l?null:se.range(o+i,l+i)}}it.allowMultipleSelections=E4;it.tabSize=Ie.define({combine:r=>r.length?r[0]:4});it.lineSeparator=B4;it.readOnly=z4;it.phrases=Ie.define({compare(r,e){let t=Object.keys(r),i=Object.keys(e);return t.length==i.length&&t.every(n=>r[n]==e[n])}});it.languageData=D4;it.changeFilter=N4;it.transactionFilter=I4;it.transactionExtender=L4;vb.reconfigure=xt.define();function np(r,e,t={}){let i={};for(let n of r)for(let s of Object.keys(n)){let o=n[s],l=i[s];if(l===void 0)i[s]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(t,s))i[s]=t[s](l,o);else throw new Error("Config merge conflict for field "+s)}for(let n in e)i[n]===void 0&&(i[n]=e[n]);return i}class Dh{eq(e){return this==e}range(e,t=e){return dd.create(e,t,this)}}Dh.prototype.startSide=Dh.prototype.endSide=0;Dh.prototype.point=!1;Dh.prototype.mapMode=gr.TrackDel;class dd{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new dd(e,t,i)}}function _w(r,e){return r.from-e.from||r.value.startSide-e.value.startSide}class W2{constructor(e,t,i,n){this.from=e,this.to=t,this.value=i,this.maxPoint=n}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,n=0){let s=i?this.to:this.from;for(let o=n,l=s.length;;){if(o==l)return o;let a=o+l>>1,h=s[a]-e||(i?this.value[a].endSide:this.value[a].startSide)-t;if(a==o)return h>=0?o:l;h>=0?l=a:o=a+1}}between(e,t,i,n){for(let s=this.findIndex(t,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(n(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,t){let i=[],n=[],s=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let h=this.value[a],u=this.from[a]+e,f=this.to[a]+e,c,d;if(u==f){let g=t.mapPos(u,h.startSide,h.mapMode);if(g==null||(c=d=g,h.startSide!=h.endSide&&(d=t.mapPos(u,h.endSide),d<c)))continue}else if(c=t.mapPos(u,h.startSide),d=t.mapPos(f,h.endSide),c>d||c==d&&h.startSide>0&&h.endSide<=0)continue;(d-c||h.endSide-h.startSide)<0||(o<0&&(o=c),h.point&&(l=Math.max(l,d-c)),i.push(h),n.push(c-o),s.push(d-o))}return{mapped:i.length?new W2(n,s,i,l):null,pos:o}}}class ai{constructor(e,t,i,n){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=n}static create(e,t,i,n){return new ai(e,t,i,n)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:n=0,filterTo:s=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(i&&(t=t.slice().sort(_w)),this.isEmpty)return t.length?ai.of(t):this;let l=new j4(this,null,-1).goto(0),a=0,h=[],u=new Uu;for(;l.value||a<t.length;)if(a<t.length&&(l.from-t[a].from||l.startSide-t[a].value.startSide)>=0){let f=t[a++];u.addInner(f.from,f.to,f.value)||h.push(f)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(l.chunkIndex)<t[a].from)&&(!o||n>this.chunkEnd(l.chunkIndex)||s<this.chunkPos[l.chunkIndex])&&u.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||n>l.to||s<l.from||o(l.from,l.to,l.value))&&(u.addInner(l.from,l.to,l.value)||h.push(dd.create(l.from,l.to,l.value))),l.next());return u.finishInner(this.nextLayer.isEmpty&&!h.length?ai.empty:this.nextLayer.update({add:h,filter:o,filterFrom:n,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],n=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],h=e.touchesRange(l,l+a.length);if(h===!1)n=Math.max(n,a.maxPoint),t.push(a),i.push(e.mapPos(l));else if(h===!0){let{mapped:u,pos:f}=a.map(l,e);u&&(n=Math.max(n,u.maxPoint),t.push(u),i.push(f))}}let s=this.nextLayer.map(e);return t.length==0?s:new ai(i,t,s||ai.empty,n)}between(e,t,i){if(!this.isEmpty){for(let n=0;n<this.chunk.length;n++){let s=this.chunkPos[n],o=this.chunk[n];if(t>=s&&e<=s+o.length&&o.between(s,e-s,t-s,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return pd.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return pd.from(e).goto(t)}static compare(e,t,i,n,s=-1){let o=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=s),l=t.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=s),a=Kx(o,l,i),h=new Yf(o,a,s),u=new Yf(l,a,s);i.iterGaps((f,c,d)=>Jx(h,f,u,c,d,n)),i.empty&&i.length==0&&Jx(h,0,u,0,0,n)}static eq(e,t,i=0,n){n==null&&(n=1e9);let s=e.filter(u=>!u.isEmpty&&t.indexOf(u)<0),o=t.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let l=Kx(s,o),a=new Yf(s,l,0).goto(i),h=new Yf(o,l,0).goto(i);for(;;){if(a.to!=h.to||!$w(a.active,h.active)||a.point&&(!h.point||!a.point.eq(h.point)))return!1;if(a.to>n)return!0;a.next(),h.next()}}static spans(e,t,i,n,s=-1){let o=new Yf(e,null,s).goto(t),l=t,a=o.openStart;for(;;){let h=Math.min(o.to,i);if(o.point?(n.point(l,h,o.point,o.activeForPoint(o.to),a,o.pointRank),a=o.openEnd(h)+(o.to>h?1:0)):h>l&&(n.span(l,h,o.active,a),a=o.openEnd(h)),o.to>i)break;l=o.to,o.next()}return a}static of(e,t=!1){let i=new Uu;for(let n of e instanceof dd?[e]:t?UI(e):e)i.add(n.from,n.to,n.value);return i.finish()}}ai.empty=new ai([],[],null,-1);function UI(r){if(r.length>1)for(let e=r[0],t=1;t<r.length;t++){let i=r[t];if(_w(e,i)>0)return r.slice().sort(_w);e=i}return r}ai.empty.nextLayer=ai.empty;class Uu{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new W2(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new Uu)).add(e,t,i)}addInner(e,t,i){let n=e-this.lastTo||i.startSide-this.last.endSide;if(n<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return n<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(ai.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=ai.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function Kx(r,e,t){let i=new Map;for(let s of r)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let n=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let l=i.get(s.chunk[o]);l!=null&&(t?t.mapPos(l):l)==s.chunkPos[o]&&!(t!=null&&t.touchesRange(l,l+s.chunk[o].length))&&n.add(s.chunk[o])}return n}class j4{constructor(e,t,i,n=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=n}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let n=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(n)||this.layer.chunkEnd(this.chunkIndex)<e||n.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let n=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<n)&&this.setRangeIndex(n)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class pd{constructor(e){this.heap=e}static from(e,t=null,i=-1){let n=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&n.push(new j4(o,t,i,s));return n.length==1?n[0]:new pd(n)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)gO(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)gO(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),gO(this.heap,0)}}}function gO(r,e){for(let t=r[e];;){let i=(e<<1)+1;if(i>=r.length)break;let n=r[i];if(i+1<r.length&&n.compare(r[i+1])>=0&&(n=r[i+1],i++),t.compare(n)<0)break;r[i]=t,r[e]=n,e=i}}class Yf{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=pd.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){zp(this.active,e),zp(this.activeTo,e),zp(this.activeRank,e),this.minActive=eC(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:n,rank:s}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=s;)t++;Wp(this.active,t,i),Wp(this.activeTo,t,n),Wp(this.activeRank,t,s),e&&Wp(e,t,this.cursor.from),this.minActive=eC(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null,n=0;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),i&&zp(i,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.from<e&&(n=1),this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){let s=0;for(;s<i.length&&i[s]<e;)s++;this.openStart=s+n}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function Jx(r,e,t,i,n,s){r.goto(e),t.goto(i);let o=i+n,l=i,a=i-e;for(;;){let h=r.to+a-t.to||r.endSide-t.endSide,u=h<0?r.to+a:t.to,f=Math.min(u,o);if(r.point||t.point?r.point&&t.point&&(r.point==t.point||r.point.eq(t.point))&&$w(r.activeForPoint(r.to+a),t.activeForPoint(t.to))||s.comparePoint(l,f,r.point,t.point):f>l&&!$w(r.active,t.active)&&s.compareRange(l,f,r.active,t.active),u>o)break;l=u,h<=0&&r.next(),h>=0&&t.next()}}function $w(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!=e[t]&&!r[t].eq(e[t]))return!1;return!0}function zp(r,e){for(let t=e,i=r.length-1;t<i;t++)r[t]=r[t+1];r.pop()}function Wp(r,e,t){for(let i=r.length-1;i>=e;i--)r[i+1]=r[i];r[e]=t}function eC(r,e){let t=-1,i=1e9;for(let n=0;n<e.length;n++)(e[n]-i||r[n].endSide-r[t].endSide)<0&&(t=n,i=e[n]);return t}function rp(r,e,t=r.length){let i=0;for(let n=0;n<t;)r.charCodeAt(n)==9?(i+=e-i%e,n++):(i++,n=Kr(r,n));return i}function Mw(r,e,t,i){for(let n=0,s=0;;){if(s>=e)return n;if(n==r.length)break;s+=r.charCodeAt(n)==9?t-s%t:1,n=Kr(r,n)}return i===!0?-1:r.length}const Rw="\u037C",tC=typeof Symbol=="undefined"?"__"+Rw:Symbol.for(Rw),Qw=typeof Symbol=="undefined"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),iC=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:{};class Ct{constructor(e,t){this.rules=[];let{finish:i}=t||{};function n(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,l,a,h){let u=[],f=/^@(\w+)\b/.exec(o[0]),c=f&&f[1]=="keyframes";if(f&&l==null)return a.push(o[0]+";");for(let d in l){let g=l[d];if(/&/.test(d))s(d.split(/,\s*/).map(w=>o.map(S=>w.replace(/&/,S))).reduce((w,S)=>w.concat(S)),g,a);else if(g&&typeof g=="object"){if(!f)throw new RangeError("The value of a property ("+d+") should be a primitive value.");s(n(d),g,u,c)}else g!=null&&u.push(d.replace(/_.*/,"").replace(/[A-Z]/g,w=>"-"+w.toLowerCase())+": "+g+";")}(u.length||c)&&a.push((i&&!f&&!h?o.map(i):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)s(n(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=iC[tC]||1;return iC[tC]=e+1,Rw+e.toString(36)}static mount(e,t){(e[Qw]||new YI(e)).mount(Array.isArray(t)?t:[t])}}let Vp=null;class YI{constructor(e){if(!e.head&&e.adoptedStyleSheets&&typeof CSSStyleSheet!="undefined"){if(Vp)return e.adoptedStyleSheets=[Vp.sheet].concat(e.adoptedStyleSheets),e[Qw]=Vp;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet].concat(e.adoptedStyleSheets),Vp=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let t=e.head||e;t.insertBefore(this.styleTag,t.firstChild)}this.modules=[],e[Qw]=this}mount(e){let t=this.sheet,i=0,n=0;for(let s=0;s<e.length;s++){let o=e[s],l=this.modules.indexOf(o);if(l<n&&l>-1&&(this.modules.splice(l,1),n--,l=-1),l==-1){if(this.modules.splice(n++,0,o),t)for(let a=0;a<o.rules.length;a++)t.insertRule(o.rules[a],i++)}else{for(;n<l;)i+=this.modules[n++].rules.length;i+=o.rules.length,n++}}if(!t){let s="";for(let o=0;o<this.modules.length;o++)s+=this.modules[o].getRules()+`
`;this.styleTag.textContent=s}}}var Pl={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},Yu={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},nC=typeof navigator!="undefined"&&/Chrome\/(\d+)/.exec(navigator.userAgent),KI=typeof navigator!="undefined"&&/Apple Computer/.test(navigator.vendor),JI=typeof navigator!="undefined"&&/Gecko\/\d+/.test(navigator.userAgent),rC=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),eL=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),tL=nC&&(rC||+nC[1]<57)||JI&&rC;for(var Sn=0;Sn<10;Sn++)Pl[48+Sn]=Pl[96+Sn]=String(Sn);for(var Sn=1;Sn<=24;Sn++)Pl[Sn+111]="F"+Sn;for(var Sn=65;Sn<=90;Sn++)Pl[Sn]=String.fromCharCode(Sn+32),Yu[Sn]=String.fromCharCode(Sn);for(var mO in Pl)Yu.hasOwnProperty(mO)||(Yu[mO]=Pl[mO]);function F4(r){var e=tL&&(r.ctrlKey||r.altKey||r.metaKey)||(KI||eL)&&r.shiftKey&&r.key&&r.key.length==1,t=!e&&r.key||(r.shiftKey?Yu:Pl)[r.keyCode]||r.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function r0(r){let e;return r.nodeType==11?e=r.getSelection?r:r.ownerDocument:e=r,e.getSelection()}function Ku(r,e){return e?r==e||r.contains(e.nodeType!=1?e.parentNode:e):!1}function iL(){let r=document.activeElement;for(;r&&r.shadowRoot;)r=r.shadowRoot.activeElement;return r}function Dw(r,e){if(!e.anchorNode)return!1;try{return Ku(r,e.anchorNode)}catch{return!1}}function gd(r){return r.nodeType==3?Ju(r,0,r.nodeValue.length).getClientRects():r.nodeType==1?r.getClientRects():[]}function s0(r,e,t,i){return t?sC(r,e,t,i,-1)||sC(r,e,t,i,1):!1}function Ew(r){for(var e=0;;e++)if(r=r.previousSibling,!r)return e}function sC(r,e,t,i,n){for(;;){if(r==t&&e==i)return!0;if(e==(n<0?0:o0(r))){if(r.nodeName=="DIV")return!1;let s=r.parentNode;if(!s||s.nodeType!=1)return!1;e=Ew(r)+(n<0?0:1),r=s}else if(r.nodeType==1){if(r=r.childNodes[e+(n<0?-1:0)],r.nodeType==1&&r.contentEditable=="false")return!1;e=n<0?o0(r):0}else return!1}}function o0(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}const H4={left:0,right:0,top:0,bottom:0};function Sb(r,e){let t=e?r.left:r.right;return{left:t,right:t,top:r.top,bottom:r.bottom}}function nL(r){return{left:0,right:r.innerWidth,top:0,bottom:r.innerHeight}}function rL(r,e,t,i,n,s,o,l){let a=r.ownerDocument,h=a.defaultView;for(let u=r;u;)if(u.nodeType==1){let f,c=u==a.body;if(c)f=nL(h);else{if(u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.parentNode;continue}let w=u.getBoundingClientRect();f={left:w.left,right:w.left+u.clientWidth,top:w.top,bottom:w.top+u.clientHeight}}let d=0,g=0;if(n=="nearest")e.top<f.top?(g=-(f.top-e.top+o),t>0&&e.bottom>f.bottom+g&&(g=e.bottom-f.bottom+g+o)):e.bottom>f.bottom&&(g=e.bottom-f.bottom+o,t<0&&e.top-g<f.top&&(g=-(f.top+g-e.top+o)));else{let w=e.bottom-e.top,S=f.bottom-f.top;g=(n=="center"&&w<=S?e.top+w/2-S/2:n=="start"||n=="center"&&t<0?e.top-o:e.bottom-S+o)-f.top}if(i=="nearest"?e.left<f.left?(d=-(f.left-e.left+s),t>0&&e.right>f.right+d&&(d=e.right-f.right+d+s)):e.right>f.right&&(d=e.right-f.right+s,t<0&&e.left<f.left+d&&(d=-(f.left+d-e.left+s))):d=(i=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:i=="start"==l?e.left-s:e.right-(f.right-f.left)+s)-f.left,d||g)if(c)h.scrollBy(d,g);else{if(g){let w=u.scrollTop;u.scrollTop+=g,g=u.scrollTop-w}if(d){let w=u.scrollLeft;u.scrollLeft+=d,d=u.scrollLeft-w}e={left:e.left-d,top:e.top-g,right:e.right-d,bottom:e.bottom-g}}if(c)break;u=u.assignedSlot||u.parentNode,i=n="nearest"}else if(u.nodeType==11)u=u.host;else break}class sL{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,t,i,n){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=n}}let pu=null;function q4(r){if(r.setActive)return r.setActive();if(pu)return r.focus(pu);let e=[];for(let t=r;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(r.focus(pu==null?{get preventScroll(){return pu={preventScroll:!0},!0}}:void 0),!pu){pu=!1;for(let t=0;t<e.length;){let i=e[t++],n=e[t++],s=e[t++];i.scrollTop!=n&&(i.scrollTop=n),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let oC;function Ju(r,e,t=e){let i=oC||(oC=document.createRange());return i.setEnd(r,t),i.setStart(r,e),i}function Zc(r,e,t){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0},n=new KeyboardEvent("keydown",i);n.synthetic=!0,r.dispatchEvent(n);let s=new KeyboardEvent("keyup",i);return s.synthetic=!0,r.dispatchEvent(s),n.defaultPrevented||s.defaultPrevented}function oL(r){for(;r;){if(r&&(r.nodeType==9||r.nodeType==11&&r.host))return r;r=r.assignedSlot||r.parentNode}return null}function X4(r){for(;r.attributes.length;)r.removeAttributeNode(r.attributes[0])}class Tn{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new Tn(e.parentNode,Ew(e),t)}static after(e,t){return new Tn(e.parentNode,Ew(e)+1,t)}}const V2=[];class Oi{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e){if(this.dirty&2){let t=this.dom,i=null,n;for(let s of this.children){if(s.dirty){if(!s.dom&&(n=i?i.nextSibling:t.firstChild)){let o=Oi.get(n);(!o||!o.parent&&o.constructor==s.constructor)&&s.reuseDOM(n)}s.sync(e),s.dirty=0}if(n=i?i.nextSibling:t.firstChild,e&&!e.written&&e.node==t&&n!=s.dom&&(e.written=!0),s.dom.parentNode==t)for(;n&&n!=s.dom;)n=lC(n);else t.insertBefore(s.dom,n);i=s.dom}for(n=i?i.nextSibling:t.firstChild,n&&e&&e.node==t&&(e.written=!0);n;)n=lC(n)}else if(this.dirty&1)for(let t of this.children)t.dirty&&(t.sync(e),t.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let n=o0(e)==0?0:t==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;n==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?n=-1:n=1),e=s}n<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Oi.get(i);)i=i.nextSibling;if(!i)return this.length;for(let n=0,s=0;;n++){let o=this.children[n];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,t,i=0){let n=-1,s=-1,o=-1,l=-1;for(let a=0,h=i,u=i;a<this.children.length;a++){let f=this.children[a],c=h+f.length;if(h<e&&c>t)return f.domBoundsAround(e,t,h);if(c>=e&&n==-1&&(n=a,s=h),h>t&&f.dom.parentNode==this.dom){o=a,l=u;break}u=c,h=c+f.breakAfter}return{from:s,to:l<0?i+this.length:l,startDOM:(n?this.children[n-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),t.dirty&1)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=V2){this.markDirty();for(let n=e;n<t;n++){let s=this.children[n];s.parent==this&&s.destroy()}this.children.splice(e,t-e,...i);for(let n=0;n<i.length;n++)i[n].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Z4(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}merge(e,t,i,n,s,o){return!1}become(e){return!1}getSide(){return 0}destroy(){this.parent=null}}Oi.prototype.breakAfter=0;function lC(r){let e=r.nextSibling;return r.parentNode.removeChild(r),e}class Z4{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function G4(r,e,t,i,n,s,o,l,a){let{children:h}=r,u=h.length?h[e]:null,f=s.length?s[s.length-1]:null,c=f?f.breakAfter:o;if(!(e==i&&u&&!o&&!c&&s.length<2&&u.merge(t,n,s.length?f:null,t==0,l,a))){if(i<h.length){let d=h[i];d&&n<d.length?(e==i&&(d=d.split(n),n=0),!c&&f&&d.merge(0,n,f,!0,0,a)?s[s.length-1]=d:(n&&d.merge(0,n,null,!1,0,a),s.push(d))):d!=null&&d.breakAfter&&(f?f.breakAfter=1:o=1),i++}for(u&&(u.breakAfter=o,t>0&&(!o&&s.length&&u.merge(t,u.length,s[0],!1,l,0)?u.breakAfter=s.shift().breakAfter:(t<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(t,u.length,null,!1,l,0),e++));e<i&&s.length;)if(h[i-1].become(s[s.length-1]))i--,s.pop(),a=s.length?0:l;else if(h[e].become(s[0]))e++,s.shift(),l=s.length?0:a;else break;!s.length&&e&&i<h.length&&!h[e-1].breakAfter&&h[i].merge(0,0,h[e-1],!1,l,a)&&e--,(e<i||s.length)&&r.replaceChildren(e,i,s)}}function U4(r,e,t,i,n,s){let o=r.childCursor(),{i:l,off:a}=o.findPos(t,1),{i:h,off:u}=o.findPos(e,-1),f=e-t;for(let c of i)f+=c.length;r.length+=f,G4(r,h,u,l,a,i,0,n,s)}let Hr=typeof navigator!="undefined"?navigator:{userAgent:"",vendor:"",platform:""},Bw=typeof document!="undefined"?document:{documentElement:{style:{}}};const Nw=/Edge\/(\d+)/.exec(Hr.userAgent),Y4=/MSIE \d/.test(Hr.userAgent),Iw=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Hr.userAgent),xb=!!(Y4||Iw||Nw),aC=!xb&&/gecko\/(\d+)/i.test(Hr.userAgent),bO=!xb&&/Chrome\/(\d+)/.exec(Hr.userAgent),hC="webkitFontSmoothing"in Bw.documentElement.style,K4=!xb&&/Apple Computer/.test(Hr.vendor),uC=K4&&(/Mobile\/\w+/.test(Hr.userAgent)||Hr.maxTouchPoints>2);var Be={mac:uC||/Mac/.test(Hr.platform),windows:/Win/.test(Hr.platform),linux:/Linux|X11/.test(Hr.platform),ie:xb,ie_version:Y4?Bw.documentMode||6:Iw?+Iw[1]:Nw?+Nw[1]:0,gecko:aC,gecko_version:aC?+(/Firefox\/(\d+)/.exec(Hr.userAgent)||[0,0])[1]:0,chrome:!!bO,chrome_version:bO?+bO[1]:0,ios:uC,android:/Android\b/.test(Hr.userAgent),webkit:hC,safari:K4,webkit_version:hC?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:Bw.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const lL=256;class Ba extends Oi{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return i&&(!(i instanceof Ba)||this.length-(t-e)+i.length>lL)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Ba(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new Tn(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return Lw(this.dom,e,t)}}class Xo extends Oi{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let n of t)n.setParent(this)}setAttrs(e){if(X4(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e)}merge(e,t,i,n,s,o){return i&&(!(i instanceof Xo&&i.mark.eq(this.mark))||e&&s<=0||t<this.length&&o<=0)?!1:(U4(this,e,t,i?i.children:[],s-1,o-1),this.markDirty(),!0)}split(e){let t=[],i=0,n=-1,s=0;for(let l of this.children){let a=i+l.length;a>e&&t.push(i<e?l.split(e-i):l),n<0&&i>=e&&(n=s),i=a,s++}let o=this.length-e;return this.length=e,n>-1&&(this.children.length=n,this.markDirty()),new Xo(this.mark,t,o)}domAtPos(e){return tM(this.dom,this.children,e)}coordsAt(e,t){return nM(this,e,t)}}function Lw(r,e,t){let i=r.nodeValue.length;e>i&&(e=i);let n=e,s=e,o=0;e==0&&t<0||e==i&&t>=0?Be.chrome||Be.gecko||(e?(n--,o=1):s<i&&(s++,o=-1)):t<0?n--:s<i&&s++;let l=Ju(r,n,s).getClientRects();if(!l.length)return H4;let a=l[(o?o<0:t>=0)?0:l.length-1];return Be.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,h=>h.width)||a),o?Sb(a,o<0):a||null}class sa extends Oi{constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}static create(e,t,i){return new(e.customView||sa)(e,t,i)}split(e){let t=sa.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,i,n,s,o){return i&&(!(i instanceof sa)||!this.widget.compare(i.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e.length==this.length&&e instanceof sa&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return _t.empty;let e=this;for(;e.parent;)e=e.parent;let t=e.editorView,i=t&&t.state.doc,n=this.posAtStart;return i?i.slice(n,n+this.length):_t.empty}domAtPos(e){return e==0?Tn.before(this.dom):Tn.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.dom.getClientRects(),n=null;if(!i.length)return H4;for(let s=e>0?i.length-1:0;n=i[s],!(e>0?s==0:s==i.length-1||n.top<n.bottom);s+=e>0?-1:1);return e==0&&t>0||e==this.length&&t<=0?n:Sb(n,e==0)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class J4 extends sa{domAtPos(e){let{topView:t,text:i}=this.widget;return t?zw(e,0,t,i,(n,s)=>n.domAtPos(s),n=>new Tn(i,Math.min(n,i.nodeValue.length))):new Tn(i,Math.min(e,i.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:i,text:n}=this.widget;return i?eM(e,t,i,n):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:i,text:n}=this.widget;return i?zw(e,t,i,n,(s,o,l)=>s.coordsAt(o,l),(s,o)=>Lw(n,s,o)):Lw(n,e,t)}destroy(){var e;super.destroy(),(e=this.widget.topView)===null||e===void 0||e.destroy()}get isEditable(){return!0}}function zw(r,e,t,i,n,s){if(t instanceof Xo){for(let o of t.children){let l=Ku(o.dom,i),a=l?i.nodeValue.length:o.length;if(r<a||r==a&&o.getSide()<=0)return l?zw(r,e,o,i,n,s):n(o,r,e);r-=a}return n(t,t.length,-1)}else return t.dom==i?s(r,e):n(t,r,e)}function eM(r,e,t,i){if(t instanceof Xo)for(let n of t.children){let s=0,o=Ku(n.dom,i);if(Ku(n.dom,r))return s+(o?eM(r,e,n,i):n.localPosFromDOM(r,e));s+=o?i.nodeValue.length:n.length}else if(t.dom==i)return Math.min(e,i.nodeValue.length);return t.localPosFromDOM(r,e)}class ef extends Oi{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof ef&&e.side==this.side}split(){return new ef(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return Tn.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let t=this.dom.getBoundingClientRect(),i=aL(this,this.side>0?-1:1);return i&&i.top<t.bottom&&i.bottom>t.top?{left:t.left,right:t.right,top:i.top,bottom:i.bottom}:t}get overrideDOMText(){return _t.empty}}Ba.prototype.children=sa.prototype.children=ef.prototype.children=V2;function aL(r,e){let t=r.parent,i=t?t.children.indexOf(r):-1;for(;t&&i>=0;)if(e<0?i>0:i<t.children.length){let n=t.children[i+e];if(n instanceof Ba){let s=n.coordsAt(e<0?n.length:0,e);if(s)return s}i+=e}else if(t instanceof Xo&&t.parent)i=t.parent.children.indexOf(t)+(e<0?0:1),t=t.parent;else{let n=t.dom.lastChild;if(n&&n.nodeName=="BR")return n.getClientRects()[0];break}}function tM(r,e,t){let i=0;for(let n=0;i<e.length;i++){let s=e[i],o=n+s.length;if(!(o==n&&s.getSide()<=0)){if(t>n&&t<o&&s.dom.parentNode==r)return s.domAtPos(t-n);if(t<=n)break;n=o}}for(;i>0;i--){let n=e[i-1].dom;if(n.parentNode==r)return Tn.after(n)}return new Tn(r,0)}function iM(r,e,t){let i,{children:n}=r;t>0&&e instanceof Xo&&n.length&&(i=n[n.length-1])instanceof Xo&&i.mark.eq(e.mark)?iM(i,e.children[0],t-1):(n.push(e),e.setParent(r)),r.length+=e.length}function nM(r,e,t){for(let s=0,o=0;o<r.children.length;o++){let l=r.children[o],a=s+l.length,h;if((t<=0||a==r.length||l.getSide()>0?a>=e:a>e)&&(e<a||o+1==r.children.length||(h=r.children[o+1]).length||h.getSide()>0)){let u=0;if(a==s){if(l.getSide()<=0)continue;u=t=-l.getSide()}let f=l.coordsAt(Math.max(0,e-s),t);return u&&f?Sb(f,t<0):f}s=a}let i=r.dom.lastChild;if(!i)return r.dom.getBoundingClientRect();let n=gd(i);return n[n.length-1]||null}function Ww(r,e){for(let t in r)t=="class"&&e.class?e.class+=" "+r.class:t=="style"&&e.style?e.style+=";"+r.style:e[t]=r[t];return e}function j2(r,e){if(r==e)return!0;if(!r||!e)return!1;let t=Object.keys(r),i=Object.keys(e);if(t.length!=i.length)return!1;for(let n of t)if(i.indexOf(n)==-1||r[n]!==e[n])return!1;return!0}function Vw(r,e,t){let i=null;if(e)for(let n in e)t&&n in t||r.removeAttribute(i=n);if(t)for(let n in t)e&&e[n]==t[n]||r.setAttribute(i=n,t[n]);return!!i}class Hh{eq(e){return!1}updateDOM(e){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}destroy(e){}}var Xt=function(r){return r[r.Text=0]="Text",r[r.WidgetBefore=1]="WidgetBefore",r[r.WidgetAfter=2]="WidgetAfter",r[r.WidgetRange=3]="WidgetRange",r}(Xt||(Xt={}));class ot extends Dh{constructor(e,t,i,n){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=n}get heightRelevant(){return!1}static mark(e){return new Cb(e)}static widget(e){let t=e.side||0,i=!!e.block;return t+=i?t>0?3e8:-4e8:t>0?1e8:-1e8,new Eh(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,n;if(e.isBlockGap)i=-5e8,n=4e8;else{let{start:s,end:o}=rM(e,t);i=(s?t?-3e8:-1:5e8)-1,n=(o?t?2e8:1:-6e8)+1}return new Eh(e,i,n,t,e.widget||null,!0)}static line(e){return new sp(e)}static set(e,t=!1){return ai.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}ot.none=ai.empty;class Cb extends ot{constructor(e){let{start:t,end:i}=rM(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof Cb&&this.tagName==e.tagName&&this.class==e.class&&j2(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Cb.prototype.point=!1;class sp extends ot{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof sp&&j2(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}sp.prototype.mapMode=gr.TrackBefore;sp.prototype.point=!0;class Eh extends ot{constructor(e,t,i,n,s,o){super(t,i,s,e),this.block=n,this.isReplace=o,this.mapMode=n?t<=0?gr.TrackBefore:gr.TrackAfter:gr.TrackDel}get type(){return this.startSide<this.endSide?Xt.WidgetRange:this.startSide<=0?Xt.WidgetBefore:Xt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof Eh&&hL(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Eh.prototype.point=!0;function rM(r,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=r;return t==null&&(t=r.inclusive),i==null&&(i=r.inclusive),{start:t!=null?t:e,end:i!=null?i:e}}function hL(r,e){return r==e||!!(r&&e&&r.compare(e))}function jw(r,e,t,i=0){let n=t.length-1;n>=0&&t[n]+i>=r?t[n]=Math.max(t[n],e):t.push(r,e)}class mr extends Oi{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,n,s,o){if(i){if(!(i instanceof mr))return!1;this.dom||i.transferDOM(this)}return n&&this.setDeco(i?i.attrs:null),U4(this,e,t,i?i.children:[],s,o),!0}split(e){let t=new mr;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:n}=this.childPos(e);n&&(t.append(this.children[i].split(n),0),this.children[i].merge(n,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)t.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){!this.dom||(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){j2(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){iM(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=Ww(t,this.attrs||{})),i&&(this.attrs=Ww({class:i},this.attrs||{}))}domAtPos(e){return tM(this.dom,this.children,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.dirty|=6)}sync(e){var t;this.dom?this.dirty&4&&(X4(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Vw(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e);let i=this.dom.lastChild;for(;i&&Oi.get(i)instanceof Xo;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((t=Oi.get(i))===null||t===void 0?void 0:t.isEditable)==!1&&(!Be.ios||!this.children.some(n=>n instanceof Ba))){let n=document.createElement("BR");n.cmIgnore=!0,this.dom.appendChild(n)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0;for(let t of this.children){if(!(t instanceof Ba))return null;let i=gd(t.dom);if(i.length!=1)return null;e+=i[0].width}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}}coordsAt(e,t){return nM(this,e,t)}become(e){return!1}get type(){return Xt.Text}static find(e,t){for(let i=0,n=0;i<e.children.length;i++){let s=e.children[i],o=n+s.length;if(o>=t){if(s instanceof mr)return s;if(o>t)break}n=o+s.breakAfter}return null}}class vh extends Oi{constructor(e,t,i){super(),this.widget=e,this.length=t,this.type=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,n,s,o){return i&&(!(i instanceof vh)||!this.widget.compare(i.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?Tn.before(this.dom):Tn.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new vh(this.widget,t,this.type);return i.breakAfter=this.breakAfter,i}get children(){return V2}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):_t.empty}domBoundsAround(){return null}become(e){return e instanceof vh&&e.type==this.type&&e.widget.constructor==this.widget.constructor?(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class F2{constructor(e,t,i,n){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=n,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof vh&&e.type==Xt.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new mr),this.atCursorPos=!0),this.curLine}flushBuffer(e){this.pendingBuffer&&(this.curLine.append(jp(new ef(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer([]),this.curLine=null,this.content.push(e)}finish(e){e?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,e--;continue}else this.text=s,this.textOff=0}let n=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(0,i)),this.getLine().append(jp(new Ba(this.text.slice(this.textOff,this.textOff+n)),t),i),this.atCursorPos=!0,this.textOff+=n,e-=n,i=0}}span(e,t,i,n){this.buildText(t-e,i,n),this.pos=t,this.openStart<0&&(this.openStart=n)}point(e,t,i,n,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof Eh){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=t-e;if(i instanceof Eh)if(i.block){let{type:a}=i;a==Xt.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new vh(i.widget||new fC("div"),l,a))}else{let a=sa.create(i.widget||new fC("span"),l,i.startSide),h=this.atCursorPos&&!a.isEditable&&s<=n.length&&(e<t||i.startSide>0),u=!a.isEditable&&(e<t||i.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!h&&(this.pendingBuffer=0),this.flushBuffer(n),h&&(f.append(jp(new ef(1),n),s),s=n.length+Math.max(0,s-n.length)),f.append(jp(a,n),s),this.atCursorPos=u,this.pendingBuffer=u?e<t?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=s)}static build(e,t,i,n,s){let o=new F2(e,t,i,s);return o.openEnd=ai.spans(n,t,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function jp(r,e){for(let t of e)r=new Xo(t,[r],r.length);return r}class fC extends Hh{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}}const sM=Ie.define(),oM=Ie.define(),lM=Ie.define(),aM=Ie.define(),Fw=Ie.define(),hM=Ie.define(),uM=Ie.define({combine:r=>r.some(e=>e)});class l0{constructor(e,t="nearest",i="nearest",n=5,s=5){this.range=e,this.y=t,this.x=i,this.yMargin=n,this.xMargin=s}map(e){return e.empty?this:new l0(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const cC=xt.define({map:(r,e)=>r.map(e)});function hs(r,e,t){let i=r.facet(aM);i.length?i[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const Ab=Ie.define({combine:r=>r.length?r[0]:!0});let uL=0;const Pc=Ie.define();class fn{constructor(e,t,i,n){this.id=e,this.create=t,this.domEventHandlers=i,this.extension=n(this)}static define(e,t){const{eventHandlers:i,provide:n,decorations:s}=t||{};return new fn(uL++,e,i,o=>{let l=[Pc.of(o)];return s&&l.push(md.of(a=>{let h=a.plugin(o);return h?s(h):ot.none})),n&&l.push(n(o)),l})}static fromClass(e,t){return fn.define(i=>new e(i),t)}}class OO{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(hs(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){hs(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){hs(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const fM=Ie.define(),cM=Ie.define(),md=Ie.define(),dM=Ie.define(),pM=Ie.define(),_c=Ie.define();class fl{constructor(e,t,i,n){this.fromA=e,this.toA=t,this.fromB=i,this.toB=n}join(e){return new fl(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let n=e[t-1];if(!(n.fromA>i.toA)){if(n.toA<i.fromA)break;i=i.join(n),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let n=0,s=0,o=0,l=0;;n++){let a=n==e.length?null:e[n],h=o-l,u=a?a.fromB:1e9;for(;s<t.length&&t[s]<u;){let f=t[s],c=t[s+1],d=Math.max(l,f),g=Math.min(u,c);if(d<=g&&new fl(d+h,g+h,d,g).addToSet(i),c>u)break;s+=2}if(!a)return i;new fl(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),o=a.toA,l=a.toB}}}class a0{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Ki.empty(this.startState.doc.length);for(let o of i)this.changes=this.changes.compose(o.changes);let n=[];this.changes.iterChangedRanges((o,l,a,h)=>n.push(new fl(o,l,a,h))),this.changedRanges=n;let s=e.hasFocus;s!=e.inputState.notifiedFocused&&(e.inputState.notifiedFocused=s,this.flags|=1)}static create(e,t,i){return new a0(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var Gi=function(r){return r[r.LTR=0]="LTR",r[r.RTL=1]="RTL",r}(Gi||(Gi={}));const Hw=Gi.LTR,fL=Gi.RTL;function gM(r){let e=[];for(let t=0;t<r.length;t++)e.push(1<<+r[t]);return e}const cL=gM("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),dL=gM("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),qw=Object.create(null),Ls=[];for(let r of["()","[]","{}"]){let e=r.charCodeAt(0),t=r.charCodeAt(1);qw[e]=t,qw[t]=-e}function pL(r){return r<=247?cL[r]:1424<=r&&r<=1524?2:1536<=r&&r<=1785?dL[r-1536]:1774<=r&&r<=2220?4:8192<=r&&r<=8203||r==8204?256:1}const gL=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;class Du{constructor(e,t,i){this.from=e,this.to=t,this.level=i}get dir(){return this.level%2?fL:Hw}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,i,n){let s=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=t&&l.to>=t){if(l.level==i)return o;(s<0||(n!=0?n<0?l.from<t:l.to>t:e[s].level>l.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}const wi=[];function mL(r,e){let t=r.length,i=e==Hw?1:2,n=e==Hw?2:1;if(!r||i==1&&!gL.test(r))return mM(t);for(let o=0,l=i,a=i;o<t;o++){let h=pL(r.charCodeAt(o));h==512?h=l:h==8&&a==4&&(h=16),wi[o]=h==4?2:h,h&7&&(a=h),l=h}for(let o=0,l=i,a=i;o<t;o++){let h=wi[o];if(h==128)o<t-1&&l==wi[o+1]&&l&24?h=wi[o]=l:wi[o]=256;else if(h==64){let u=o+1;for(;u<t&&wi[u]==64;)u++;let f=o&&l==8||u<t&&wi[u]==8?a==1?1:8:256;for(let c=o;c<u;c++)wi[c]=f;o=u-1}else h==8&&a==1&&(wi[o]=1);l=h,h&7&&(a=h)}for(let o=0,l=0,a=0,h,u,f;o<t;o++)if(u=qw[h=r.charCodeAt(o)])if(u<0){for(let c=l-3;c>=0;c-=3)if(Ls[c+1]==-u){let d=Ls[c+2],g=d&2?i:d&4?d&1?n:i:0;g&&(wi[o]=wi[Ls[c]]=g),l=c;break}}else{if(Ls.length==189)break;Ls[l++]=o,Ls[l++]=h,Ls[l++]=a}else if((f=wi[o])==2||f==1){let c=f==i;a=c?0:1;for(let d=l-3;d>=0;d-=3){let g=Ls[d+2];if(g&2)break;if(c)Ls[d+2]|=2;else{if(g&4)break;Ls[d+2]|=4}}}for(let o=0;o<t;o++)if(wi[o]==256){let l=o+1;for(;l<t&&wi[l]==256;)l++;let a=(o?wi[o-1]:i)==1,h=(l<t?wi[l]:i)==1,u=a==h?a?1:2:i;for(let f=o;f<l;f++)wi[f]=u;o=l-1}let s=[];if(i==1)for(let o=0;o<t;){let l=o,a=wi[o++]!=1;for(;o<t&&a==(wi[o]!=1);)o++;if(a)for(let h=o;h>l;){let u=h,f=wi[--h]!=2;for(;h>l&&f==(wi[h-1]!=2);)h--;s.push(new Du(h,u,f?2:1))}else s.push(new Du(l,o,0))}else for(let o=0;o<t;){let l=o,a=wi[o++]==2;for(;o<t&&a==(wi[o]==2);)o++;s.push(new Du(l,o,a?1:2))}return s}function mM(r){return[new Du(0,r,0)]}let bM="";function bL(r,e,t,i,n){var s;let o=i.head-r.from,l=-1;if(o==0){if(!n||!r.length)return null;e[0].level!=t&&(o=e[0].side(!1,t),l=0)}else if(o==r.length){if(n)return null;let c=e[e.length-1];c.level!=t&&(o=c.side(!0,t),l=e.length-1)}l<0&&(l=Du.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc));let a=e[l];o==a.side(n,t)&&(a=e[l+=n?1:-1],o=a.side(!n,t));let h=n==(a.dir==t),u=Kr(r.text,o,h);if(bM=r.text.slice(Math.min(o,u),Math.max(o,u)),u!=a.side(n,t))return se.cursor(u+r.from,h?-1:1,a.level);let f=l==(n?e.length-1:0)?null:e[l+(n?1:-1)];return!f&&a.level!=t?se.cursor(n?r.to:r.from,n?-1:1,t):f&&f.level<a.level?se.cursor(f.side(!n,t)+r.from,n?1:-1,f.level):se.cursor(u+r.from,n?-1:1,a.level)}const oa="\uFFFF";class OM{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(it.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=oa}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let n=e;;){this.findPointBefore(i,n),this.readNode(n);let s=n.nextSibling;if(s==t)break;let o=Oi.get(n),l=Oi.get(s);(o&&l?o.breakAfter:(o?o.breakAfter:dC(n))||dC(s)&&(n.nodeName!="BR"||n.cmIgnore))&&this.lineBreak(),n=s}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,n=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,l;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(l=n.exec(t))&&(s=l.index,o=l[0].length),this.append(t.slice(i,s<0?t.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let t=Oi.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let n=i.iter();!n.next().done;)n.lineBreak?this.lineBreak():this.append(n.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+Math.min(t,i.offset))}}function dC(r){return r.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(r.nodeName)}class pC{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class gC extends Oi{constructor(e){super(),this.view=e,this.compositionDeco=ot.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new mr],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new fl(0,0,0,e.state.doc.length)],0)}get root(){return this.view.root}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every(({fromA:o,toA:l})=>l<this.minWidthFrom||o>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=ot.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=kL(this.view,e.changes)),(Be.ie||Be.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let i=this.decorations,n=this.updateDeco(),s=SL(i,n,e.changes);return t=fl.extendWithRanges(t,s),this.dirty==0&&t.length==0?!1:(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=Be.chrome||Be.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(s),this.dirty=0,s&&(s.written||i.selectionRange.focusNode!=s.node)&&(this.forceSelection=!0),this.dom.style.height=""});let n=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.children)s instanceof vh&&s.widget instanceof mC&&n.push(s.dom);i.updateGaps(n)}updateChildren(e,t){let i=this.childCursor(t);for(let n=e.length-1;;n--){let s=n>=0?e[n]:null;if(!s)break;let{fromA:o,toA:l,fromB:a,toB:h}=s,{content:u,breakAtStart:f,openStart:c,openEnd:d}=F2.build(this.view.state.doc,a,h,this.decorations,this.dynamicDecorationMap),{i:g,off:w}=i.findPos(l,1),{i:S,off:x}=i.findPos(o,-1);G4(this,S,x,g,w,u,f,c,d)}}updateSelection(e=!1,t=!1){if((e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange(),!(t||this.mayControlSelection())||Be.ios&&this.view.inputState.rapidCompositionStart)return;let i=this.forceSelection;this.forceSelection=!1;let n=this.view.state.selection.main,s=this.domAtPos(n.anchor),o=n.empty?s:this.domAtPos(n.head);if(Be.gecko&&n.empty&&OL(s)){let a=document.createTextNode("");this.view.observer.ignore(()=>s.node.insertBefore(a,s.node.childNodes[s.offset]||null)),s=o=new Tn(a,0),i=!0}let l=this.view.observer.selectionRange;(i||!l.focusNode||!s0(s.node,s.offset,l.anchorNode,l.anchorOffset)||!s0(o.node,o.offset,l.focusNode,l.focusOffset))&&(this.view.observer.ignore(()=>{Be.android&&Be.chrome&&this.dom.contains(l.focusNode)&&xL(l.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let a=r0(this.root);if(a)if(n.empty){if(Be.gecko){let h=yL(s.node,s.offset);if(h&&h!=3){let u=wM(s.node,s.offset,h==1?1:-1);u&&(s=new Tn(u,h==1?0:u.nodeValue.length))}}a.collapse(s.node,s.offset),n.bidiLevel!=null&&l.cursorBidiLevel!=null&&(l.cursorBidiLevel=n.bidiLevel)}else if(a.extend)a.collapse(s.node,s.offset),a.extend(o.node,o.offset);else{let h=document.createRange();n.anchor>n.head&&([s,o]=[o,s]),h.setEnd(o.node,o.offset),h.setStart(s.node,s.offset),a.removeAllRanges(),a.addRange(h)}}),this.view.observer.setSelectionRange(s,o)),this.impreciseAnchor=s.precise?null:new Tn(l.anchorNode,l.anchorOffset),this.impreciseHead=o.precise?null:new Tn(l.focusNode,l.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let e=this.view.state.selection.main,t=r0(this.root);if(!t||!e.empty||!e.assoc||!t.modify)return;let i=mr.find(this,e.head);if(!i)return;let n=i.posAtStart;if(e.head==n||e.head==n+i.length)return;let s=this.coordsAt(e.head,-1),o=this.coordsAt(e.head,1);if(!s||!o||s.bottom>o.top)return;let l=this.domAtPos(e.head+e.assoc);t.collapse(l.node,l.offset),t.modify("move",e.assoc<0?"forward":"backward","lineboundary")}mayControlSelection(){let e=this.root.activeElement;return e==this.dom||Dw(this.dom,this.view.observer.selectionRange)&&!(e&&this.dom.contains(e))}nearest(e){for(let t=e;t;){let i=Oi.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let n=this.children[t];if(i<n.length||n instanceof mr)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){for(let i=this.length,n=this.children.length-1;;n--){let s=this.children[n],o=i-s.breakAfter-s.length;if(e>o||e==o&&s.type!=Xt.WidgetBefore&&s.type!=Xt.WidgetAfter&&(!n||t==2||this.children[n-1].breakAfter||this.children[n-1].type==Xt.WidgetBefore&&t>-2))return s.coordsAt(e-o,t);i=o}}measureVisibleLineHeights(e){let t=[],{from:i,to:n}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==Gi.LTR;for(let h=0,u=0;u<this.children.length;u++){let f=this.children[u],c=h+f.length;if(c>n)break;if(h>=i){let d=f.dom.getBoundingClientRect();if(t.push(d.height),o){let g=f.dom.lastChild,w=g?gd(g):[];if(w.length){let S=w[w.length-1],x=a?S.right-d.left:d.right-S.left;x>l&&(l=x,this.minWidth=s,this.minWidthFrom=h,this.minWidthTo=c)}}}h=c+f.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?Gi.RTL:Gi.LTR}measureTextSize(){for(let n of this.children)if(n instanceof mr){let s=n.measureTextSize();if(s)return s}let e=document.createElement("div"),t,i;return e.className="cm-line",e.style.width="99999px",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let n=gd(e.firstChild)[0];t=e.getBoundingClientRect().height,i=n?n.width/27:7,e.remove()}),{lineHeight:t,charWidth:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new Z4(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,n=0;;n++){let s=n==t.viewports.length?null:t.viewports[n],o=s?s.from-1:this.length;if(o>i){let l=t.lineBlockAt(o).bottom-t.lineBlockAt(i).top;e.push(ot.replace({widget:new mC(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return ot.set(e)}updateDeco(){let e=this.view.state.facet(md).map((t,i)=>(this.dynamicDecorationMap[i]=typeof t=="function")?t(this.view):t);for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),n;if(!i)return;!t.empty&&(n=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,n.left),top:Math.min(i.top,n.top),right:Math.max(i.right,n.right),bottom:Math.max(i.bottom,n.bottom)});let s=0,o=0,l=0,a=0;for(let u of this.view.state.facet(pM).map(f=>f(this.view)))if(u){let{left:f,right:c,top:d,bottom:g}=u;f!=null&&(s=Math.max(s,f)),c!=null&&(o=Math.max(o,c)),d!=null&&(l=Math.max(l,d)),g!=null&&(a=Math.max(a,g))}let h={left:i.left-s,top:i.top-l,right:i.right+o,bottom:i.bottom+a};rL(this.view.scrollDOM,h,t.head<t.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==Gi.LTR)}}function OL(r){return r.node.nodeType==1&&r.node.firstChild&&(r.offset==0||r.node.childNodes[r.offset-1].contentEditable=="false")&&(r.offset==r.node.childNodes.length||r.node.childNodes[r.offset].contentEditable=="false")}class mC extends Hh{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function kM(r){let e=r.observer.selectionRange,t=e.focusNode&&wM(e.focusNode,e.focusOffset,0);if(!t)return null;let i=r.docView.nearest(t);if(!i)return null;if(i instanceof mr){let n=t;for(;n.parentNode!=i.dom;)n=n.parentNode;let s=n.previousSibling;for(;s&&!Oi.get(s);)s=s.previousSibling;let o=s?Oi.get(s).posAtEnd:i.posAtStart;return{from:o,to:o,node:n,text:t}}else{for(;;){let{parent:s}=i;if(!s)return null;if(s instanceof mr)break;i=s}let n=i.posAtStart;return{from:n,to:n+i.length,node:i.dom,text:t}}}function kL(r,e){let t=kM(r);if(!t)return ot.none;let{from:i,to:n,node:s,text:o}=t,l=e.mapPos(i,1),a=Math.max(l,e.mapPos(n,-1)),{state:h}=r,u=s.nodeType==3?s.nodeValue:new OM([],h).readRange(s.firstChild,null).text;if(a-l<u.length)if(h.doc.sliceString(l,Math.min(h.doc.length,l+u.length),oa)==u)a=l+u.length;else if(h.doc.sliceString(Math.max(0,a-u.length),a,oa)==u)l=a-u.length;else return ot.none;else if(h.doc.sliceString(l,a,oa)!=u)return ot.none;let f=Oi.get(s);return f instanceof J4?f=f.widget.topView:f&&(f.parent=null),ot.set(ot.replace({widget:new wL(s,o,f),inclusive:!0}).range(l,a))}class wL extends Hh{constructor(e,t,i){super(),this.top=e,this.text=t,this.topView=i}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return J4}}function wM(r,e,t){for(;;){if(r.nodeType==3)return r;if(r.nodeType==1&&e>0&&t<=0)r=r.childNodes[e-1],e=o0(r);else if(r.nodeType==1&&e<r.childNodes.length&&t>=0)r=r.childNodes[e],e=0;else return null}}function yL(r,e){return r.nodeType!=1?0:(e&&r.childNodes[e-1].contentEditable=="false"?1:0)|(e<r.childNodes.length&&r.childNodes[e].contentEditable=="false"?2:0)}class vL{constructor(){this.changes=[]}compareRange(e,t){jw(e,t,this.changes)}comparePoint(e,t){jw(e,t,this.changes)}}function SL(r,e,t){let i=new vL;return ai.compare(r,e,t,i),i.changes}function xL(r,e){for(let t=r;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function CL(r,e,t=1){let i=r.charCategorizer(e),n=r.doc.lineAt(e),s=e-n.from;if(n.length==0)return se.cursor(e);s==0?t=1:s==n.length&&(t=-1);let o=s,l=s;t<0?o=Kr(n.text,s,!1):l=Kr(n.text,s);let a=i(n.text.slice(o,l));for(;o>0;){let h=Kr(n.text,o,!1);if(i(n.text.slice(h,o))!=a)break;o=h}for(;l<n.length;){let h=Kr(n.text,l);if(i(n.text.slice(l,h))!=a)break;l=h}return se.range(o+n.from,l+n.from)}function AL(r,e){return e.left>r?e.left-r:Math.max(0,r-e.right)}function TL(r,e){return e.top>r?e.top-r:Math.max(0,r-e.bottom)}function kO(r,e){return r.top<e.bottom-1&&r.bottom>e.top+1}function bC(r,e){return e<r.top?{top:e,left:r.left,right:r.right,bottom:r.bottom}:r}function OC(r,e){return e>r.bottom?{top:r.top,left:r.left,right:r.right,bottom:e}:r}function Xw(r,e,t){let i,n,s,o,l,a,h,u;for(let d=r.firstChild;d;d=d.nextSibling){let g=gd(d);for(let w=0;w<g.length;w++){let S=g[w];n&&kO(n,S)&&(S=bC(OC(S,n.bottom),n.top));let x=AL(e,S),Q=TL(t,S);if(x==0&&Q==0)return d.nodeType==3?kC(d,e,t):Xw(d,e,t);(!i||o>Q||o==Q&&s>x)&&(i=d,n=S,s=x,o=Q),x==0?t>S.bottom&&(!h||h.bottom<S.bottom)?(l=d,h=S):t<S.top&&(!u||u.top>S.top)&&(a=d,u=S):h&&kO(h,S)?h=OC(h,S.bottom):u&&kO(u,S)&&(u=bC(u,S.top))}}if(h&&h.bottom>=t?(i=l,n=h):u&&u.top<=t&&(i=a,n=u),!i)return{node:r,offset:0};let f=Math.max(n.left,Math.min(n.right,e));if(i.nodeType==3)return kC(i,f,t);if(!s&&i.contentEditable=="true")return Xw(i,f,t);let c=Array.prototype.indexOf.call(r.childNodes,i)+(e>=(n.left+n.right)/2?1:0);return{node:r,offset:c}}function kC(r,e,t){let i=r.nodeValue.length,n=-1,s=1e9,o=0;for(let l=0;l<i;l++){let a=Ju(r,l,l+1).getClientRects();for(let h=0;h<a.length;h++){let u=a[h];if(u.top==u.bottom)continue;o||(o=e-u.left);let f=(u.top>t?u.top-t:t-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&f<s){let c=e>=(u.left+u.right)/2,d=c;if((Be.chrome||Be.gecko)&&Ju(r,l).getBoundingClientRect().left==u.right&&(d=!c),f<=0)return{node:r,offset:l+(d?1:0)};n=l+(d?1:0),s=f}}}return{node:r,offset:n>-1?n:o>0?r.nodeValue.length:0}}function yM(r,{x:e,y:t},i,n=-1){var s;let o=r.contentDOM.getBoundingClientRect(),l=o.top+r.viewState.paddingTop,a,{docHeight:h}=r.viewState,u=t-l;if(u<0)return 0;if(u>h)return r.state.doc.length;for(let x=r.defaultLineHeight/2,Q=!1;a=r.elementAtHeight(u),a.type!=Xt.Text;)for(;u=n>0?a.bottom+x:a.top-x,!(u>=0&&u<=h);){if(Q)return i?null:0;Q=!0,n=-n}t=l+u;let f=a.from;if(f<r.viewport.from)return r.viewport.from==0?0:i?null:wC(r,o,a,e,t);if(f>r.viewport.to)return r.viewport.to==r.state.doc.length?r.state.doc.length:i?null:wC(r,o,a,e,t);let c=r.dom.ownerDocument,d=r.root.elementFromPoint?r.root:c,g=d.elementFromPoint(e,t);g&&!r.contentDOM.contains(g)&&(g=null),g||(e=Math.max(o.left+1,Math.min(o.right-1,e)),g=d.elementFromPoint(e,t),g&&!r.contentDOM.contains(g)&&(g=null));let w,S=-1;if(g&&((s=r.docView.nearest(g))===null||s===void 0?void 0:s.isEditable)!=!1){if(c.caretPositionFromPoint){let x=c.caretPositionFromPoint(e,t);x&&({offsetNode:w,offset:S}=x)}else if(c.caretRangeFromPoint){let x=c.caretRangeFromPoint(e,t);x&&({startContainer:w,startOffset:S}=x,(Be.safari&&PL(w,S,e)||Be.chrome&&_L(w,S,e))&&(w=void 0))}}if(!w||!r.docView.dom.contains(w)){let x=mr.find(r.docView,f);if(!x)return u>a.top+a.height/2?a.to:a.from;({node:w,offset:S}=Xw(x.dom,e,t))}return r.docView.posFromDOM(w,S)}function wC(r,e,t,i,n){let s=Math.round((i-e.left)*r.defaultCharacterWidth);r.lineWrapping&&t.height>r.defaultLineHeight*1.5&&(s+=Math.floor((n-t.top)/r.defaultLineHeight)*r.viewState.heightOracle.lineLength);let o=r.state.sliceDoc(t.from,t.to);return t.from+Mw(o,s,r.state.tabSize)}function PL(r,e,t){let i;if(r.nodeType!=3||e!=(i=r.nodeValue.length))return!1;for(let n=r.nextSibling;n;n=n.nextSibling)if(n.nodeType!=1||n.nodeName!="BR")return!1;return Ju(r,i-1,i).getBoundingClientRect().left>t}function _L(r,e,t){if(e!=0)return!1;for(let n=r;;){let s=n.parentNode;if(!s||s.nodeType!=1||s.firstChild!=n)return!1;if(s.classList.contains("cm-line"))break;n=s}let i=r.nodeType==1?r.getBoundingClientRect():Ju(r,0,Math.max(r.nodeValue.length,1)).getBoundingClientRect();return t-i.left>5}function $L(r,e,t,i){let n=r.state.doc.lineAt(e.head),s=!i||!r.lineWrapping?null:r.coordsAtPos(e.assoc<0&&e.head>n.from?e.head-1:e.head);if(s){let a=r.dom.getBoundingClientRect(),h=r.textDirectionAt(n.from),u=r.posAtCoords({x:t==(h==Gi.LTR)?a.right-1:a.left+1,y:(s.top+s.bottom)/2});if(u!=null)return se.cursor(u,t?-1:1)}let o=mr.find(r.docView,e.head),l=o?t?o.posAtEnd:o.posAtStart:t?n.to:n.from;return se.cursor(l,t?-1:1)}function yC(r,e,t,i){let n=r.state.doc.lineAt(e.head),s=r.bidiSpans(n),o=r.textDirectionAt(n.from);for(let l=e,a=null;;){let h=bL(n,s,o,l,t),u=bM;if(!h){if(n.number==(t?r.state.doc.lines:1))return l;u=`
`,n=r.state.doc.line(n.number+(t?1:-1)),s=r.bidiSpans(n),h=se.cursor(t?n.from:n.to)}if(a){if(!a(u))return l}else{if(!i)return h;a=i(u)}l=h}}function ML(r,e,t){let i=r.state.charCategorizer(e),n=i(t);return s=>{let o=i(s);return n==Jr.Space&&(n=o),n==o}}function RL(r,e,t,i){let n=e.head,s=t?1:-1;if(n==(t?r.state.doc.length:0))return se.cursor(n,e.assoc);let o=e.goalColumn,l,a=r.contentDOM.getBoundingClientRect(),h=r.coordsAtPos(n),u=r.documentTop;if(h)o==null&&(o=h.left-a.left),l=s<0?h.top:h.bottom;else{let d=r.viewState.lineBlockAt(n);o==null&&(o=Math.min(a.right-a.left,r.defaultCharacterWidth*(n-d.from))),l=(s<0?d.top:d.bottom)+u}let f=a.left+o,c=i!=null?i:r.defaultLineHeight>>1;for(let d=0;;d+=10){let g=l+(c+d)*s,w=yM(r,{x:f,y:g},!1,s);if(g<a.top||g>a.bottom||(s<0?w<n:w>n))return se.cursor(w,e.assoc,void 0,o)}}function wO(r,e,t){let i=r.state.facet(dM).map(n=>n(r));for(;;){let n=!1;for(let s of i)s.between(t.from-1,t.from+1,(o,l,a)=>{t.from>o&&t.from<l&&(t=e.from>t.from?se.cursor(o,1):se.cursor(l,-1),n=!0)});if(!n)return t}}class QL{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.rapidCompositionStart=!1,this.mouseSelection=null;for(let t in cn){let i=cn[t];e.contentDOM.addEventListener(t,n=>{!vC(e,n)||this.ignoreDuringComposition(n)||t=="keydown"&&this.keydown(e,n)||(this.mustFlushObserver(n)&&e.observer.forceFlush(),this.runCustomHandlers(t,e,n)?n.preventDefault():i(e,n))}),this.registeredEvents.push(t)}Be.chrome&&Be.chrome_version>=102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,Be.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var i;let n;this.customHandlers=[];for(let s of t)if(n=(i=s.update(e).spec)===null||i===void 0?void 0:i.domEventHandlers){this.customHandlers.push({plugin:s.value,handlers:n});for(let o in n)this.registeredEvents.indexOf(o)<0&&o!="scroll"&&(this.registeredEvents.push(o),e.contentDOM.addEventListener(o,l=>{!vC(e,l)||this.runCustomHandlers(o,e,l)&&l.preventDefault()}))}}runCustomHandlers(e,t,i){for(let n of this.customHandlers){let s=n.handlers[e];if(s)try{if(s.call(n.plugin,i,t)||i.defaultPrevented)return!0}catch(o){hs(t.state,o)}}return!1}runScrollHandlers(e,t){for(let i of this.customHandlers){let n=i.handlers.scroll;if(n)try{n.call(i.plugin,t,e)}catch(s){hs(e.state,s)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(Be.android&&Be.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let i;return Be.ios&&(i=vM.find(n=>n.keyCode==t.keyCode))&&!(t.ctrlKey||t.altKey||t.metaKey)&&!t.synthetic?(this.pendingIOSKey=i,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let t=this.pendingIOSKey;return t?(this.pendingIOSKey=void 0,Zc(e.contentDOM,t.key,t.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Be.safari&&Date.now()-this.compositionEndedAt<100?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229||e.type=="compositionend"&&!Be.ios}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const vM=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],SM=[16,17,18,20,91,92,224,225];class DL{constructor(e,t,i,n){this.view=e,this.style=i,this.mustSelect=n,this.lastEvent=t;let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(it.allowMultipleSelections)&&EL(e,t),this.dragMove=BL(e,t),this.dragging=NL(e,t)&&H2(t)==1?null:!1,this.dragging===!1&&(t.preventDefault(),this.select(t))}move(e){if(e.buttons==0)return this.destroy();this.dragging===!1&&this.select(this.lastEvent=e)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(e){let t=this.style.get(e,this.extend,this.multiple);(this.mustSelect||!t.eq(this.view.state.selection)||t.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:t,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function EL(r,e){let t=r.state.facet(sM);return t.length?t[0](e):Be.mac?e.metaKey:e.ctrlKey}function BL(r,e){let t=r.state.facet(oM);return t.length?t[0](e):Be.mac?!e.altKey:!e.ctrlKey}function NL(r,e){let{main:t}=r.state.selection;if(t.empty)return!1;let i=r0(r.root);if(!i||i.rangeCount==0)return!0;let n=i.getRangeAt(0).getClientRects();for(let s=0;s<n.length;s++){let o=n[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function vC(r,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=r.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=Oi.get(t))&&i.ignoreEvent(e))return!1;return!0}const cn=Object.create(null),xM=Be.ie&&Be.ie_version<15||Be.ios&&Be.webkit_version<604;function IL(r){let e=r.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{r.focus(),t.remove(),CM(r,t.value)},50)}function CM(r,e){let{state:t}=r,i,n=1,s=t.toText(e),o=s.lines==t.selection.ranges.length;if(Zw!=null&&t.selection.ranges.every(a=>a.empty)&&Zw==s.toString()){let a=-1;i=t.changeByRange(h=>{let u=t.doc.lineAt(h.from);if(u.from==a)return{range:h};a=u.from;let f=t.toText((o?s.line(n++).text:e)+t.lineBreak);return{changes:{from:u.from,insert:f},range:se.cursor(h.from+f.length)}})}else o?i=t.changeByRange(a=>{let h=s.line(n++);return{changes:{from:a.from,to:a.to,insert:h.text},range:se.cursor(a.from+h.length)}}):i=t.replaceSelection(s);r.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}cn.keydown=(r,e)=>{r.inputState.setSelectionOrigin("select"),e.keyCode==27?r.inputState.lastEscPress=Date.now():SM.indexOf(e.keyCode)<0&&(r.inputState.lastEscPress=0)};let AM=0;cn.touchstart=(r,e)=>{AM=Date.now(),r.inputState.setSelectionOrigin("select.pointer")};cn.touchmove=r=>{r.inputState.setSelectionOrigin("select.pointer")};cn.mousedown=(r,e)=>{if(r.observer.flush(),AM>Date.now()-2e3&&H2(e)==1)return;let t=null;for(let i of r.state.facet(lM))if(t=i(r,e),t)break;if(!t&&e.button==0&&(t=WL(r,e)),t){let i=r.root.activeElement!=r.contentDOM;i&&r.observer.ignore(()=>q4(r.contentDOM)),r.inputState.startMouseSelection(new DL(r,e,t,i))}};function SC(r,e,t,i){if(i==1)return se.cursor(e,t);if(i==2)return CL(r.state,e,t);{let n=mr.find(r.docView,e),s=r.state.doc.lineAt(n?n.posAtEnd:e),o=n?n.posAtStart:s.from,l=n?n.posAtEnd:s.to;return l<r.state.doc.length&&l==s.to&&l++,se.range(o,l)}}let TM=(r,e)=>r>=e.top&&r<=e.bottom,xC=(r,e,t)=>TM(e,t)&&r>=t.left&&r<=t.right;function LL(r,e,t,i){let n=mr.find(r.docView,e);if(!n)return 1;let s=e-n.posAtStart;if(s==0)return 1;if(s==n.length)return-1;let o=n.coordsAt(s,-1);if(o&&xC(t,i,o))return-1;let l=n.coordsAt(s,1);return l&&xC(t,i,l)?1:o&&TM(i,o)?-1:1}function CC(r,e){let t=r.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:LL(r,t,e.clientX,e.clientY)}}const zL=Be.ie&&Be.ie_version<=11;let AC=null,TC=0,PC=0;function H2(r){if(!zL)return r.detail;let e=AC,t=PC;return AC=r,PC=Date.now(),TC=!e||t>Date.now()-400&&Math.abs(e.clientX-r.clientX)<2&&Math.abs(e.clientY-r.clientY)<2?(TC+1)%3:1}function WL(r,e){let t=CC(r,e),i=H2(e),n=r.state.selection,s=t,o=e;return{update(l){l.docChanged&&(t&&(t.pos=l.changes.mapPos(t.pos)),n=n.map(l.changes),o=null)},get(l,a,h){let u;if(o&&l.clientX==o.clientX&&l.clientY==o.clientY?u=s:(u=s=CC(r,l),o=l),!u||!t)return n;let f=SC(r,u.pos,u.bias,i);if(t.pos!=u.pos&&!a){let c=SC(r,t.pos,t.bias,i),d=Math.min(c.from,f.from),g=Math.max(c.to,f.to);f=d<f.from?se.range(d,g):se.range(g,d)}return a?n.replaceRange(n.main.extend(f.from,f.to)):h&&n.ranges.length>1&&n.ranges.some(c=>c.eq(f))?VL(n,f):h?n.addRange(f):se.create([f])}}}function VL(r,e){for(let t=0;;t++)if(r.ranges[t].eq(e))return se.create(r.ranges.slice(0,t).concat(r.ranges.slice(t+1)),r.mainIndex==t?0:r.mainIndex-(r.mainIndex>t?1:0))}cn.dragstart=(r,e)=>{let{selection:{main:t}}=r.state,{mouseSelection:i}=r.inputState;i&&(i.dragging=t),e.dataTransfer&&(e.dataTransfer.setData("Text",r.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove")};function _C(r,e,t,i){if(!t)return;let n=r.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:s}=r.inputState,o=i&&s&&s.dragging&&s.dragMove?{from:s.dragging.from,to:s.dragging.to}:null,l={from:n,insert:t},a=r.state.changes(o?[o,l]:l);r.focus(),r.dispatch({changes:a,selection:{anchor:a.mapPos(n,-1),head:a.mapPos(n,1)},userEvent:o?"move.drop":"input.drop"})}cn.drop=(r,e)=>{if(!e.dataTransfer)return;if(r.state.readOnly)return e.preventDefault();let t=e.dataTransfer.files;if(t&&t.length){e.preventDefault();let i=Array(t.length),n=0,s=()=>{++n==t.length&&_C(r,e,i.filter(o=>o!=null).join(r.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let l=new FileReader;l.onerror=s,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[o]=l.result),s()},l.readAsText(t[o])}}else _C(r,e,e.dataTransfer.getData("Text"),!0)};cn.paste=(r,e)=>{if(r.state.readOnly)return e.preventDefault();r.observer.flush();let t=xM?null:e.clipboardData;t?(CM(r,t.getData("text/plain")),e.preventDefault()):IL(r)};function jL(r,e){let t=r.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),r.focus()},50)}function FL(r){let e=[],t=[],i=!1;for(let n of r.selection.ranges)n.empty||(e.push(r.sliceDoc(n.from,n.to)),t.push(n));if(!e.length){let n=-1;for(let{from:s}of r.selection.ranges){let o=r.doc.lineAt(s);o.number>n&&(e.push(o.text),t.push({from:o.from,to:Math.min(r.doc.length,o.to+1)})),n=o.number}i=!0}return{text:e.join(r.lineBreak),ranges:t,linewise:i}}let Zw=null;cn.copy=cn.cut=(r,e)=>{let{text:t,ranges:i,linewise:n}=FL(r.state);if(!t&&!n)return;Zw=n?t:null;let s=xM?null:e.clipboardData;s?(e.preventDefault(),s.clearData(),s.setData("text/plain",t)):jL(r,t),e.type=="cut"&&!r.state.readOnly&&r.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"})};function PM(r){setTimeout(()=>{r.hasFocus!=r.inputState.notifiedFocused&&r.update([])},10)}cn.focus=PM;cn.blur=r=>{r.observer.clearSelectionRange(),PM(r)};function _M(r,e){if(r.docView.compositionDeco.size){r.inputState.rapidCompositionStart=e;try{r.update([])}finally{r.inputState.rapidCompositionStart=!1}}}cn.compositionstart=cn.compositionupdate=r=>{r.inputState.compositionFirstChange==null&&(r.inputState.compositionFirstChange=!0),r.inputState.composing<0&&(r.inputState.composing=0,r.docView.compositionDeco.size&&(r.observer.flush(),_M(r,!0)))};cn.compositionend=r=>{r.inputState.composing=-1,r.inputState.compositionEndedAt=Date.now(),r.inputState.compositionFirstChange=null,setTimeout(()=>{r.inputState.composing<0&&_M(r,!1)},50)};cn.contextmenu=r=>{r.inputState.lastContextMenu=Date.now()};cn.beforeinput=(r,e)=>{var t;let i;if(Be.chrome&&Be.android&&(i=vM.find(n=>n.inputType==e.inputType))&&(r.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let n=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>n+10&&r.hasFocus&&(r.contentDOM.blur(),r.focus())},100)}};const $C=["pre-wrap","normal","pre-line","break-spaces"];class HL{constructor(){this.doc=_t.empty,this.lineWrapping=!1,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength)),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return $C.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let n=e[i];n<0?i++:this.heightSamples[Math.floor(n*10)]||(t=!0,this.heightSamples[Math.floor(n*10)]=!0)}return t}refresh(e,t,i,n,s){let o=$C.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=t,this.charWidth=i,this.lineLength=n,l){this.heightSamples={};for(let a=0;a<s.length;a++){let h=s[a];h<0?a++:this.heightSamples[Math.floor(h*10)]=!0}}return l}}class qL{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class la{constructor(e,t,i,n,s){this.from=e,this.length=t,this.top=i,this.height=n,this.type=s}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new la(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var ei=function(r){return r[r.ByPos=0]="ByPos",r[r.ByHeight=1]="ByHeight",r[r.ByPosNoHeight=2]="ByPosNoHeight",r}(ei||(ei={}));const ym=.001;class $r{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>ym&&(e.heightChanged=!0),this.height=t)}replace(e,t,i){return $r.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,n){let s=this;for(let o=n.length-1;o>=0;o--){let{fromA:l,toA:a,fromB:h,toB:u}=n[o],f=s.lineAt(l,ei.ByPosNoHeight,t,0,0),c=f.to>=a?f:s.lineAt(a,ei.ByPosNoHeight,t,0,0);for(u+=c.to-a,a=c.to;o>0&&f.from<=n[o-1].toA;)l=n[o-1].fromA,h=n[o-1].fromB,o--,l<f.from&&(f=s.lineAt(l,ei.ByPosNoHeight,t,0,0));h+=f.from-l,l=f.from;let d=q2.build(i,e,h,u);s=s.replace(l,a,d)}return s.updateHeight(i,0)}static empty(){return new zr(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,n=0,s=0;for(;;)if(t==i)if(n>s*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),i+=1+l.break,n-=l.size}else if(s>n*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,s-=l.size}else break;else if(n<s){let l=e[t++];l&&(n+=l.size)}else{let l=e[--i];l&&(s+=l.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,i++),new XL($r.of(e.slice(0,t)),o,$r.of(e.slice(i)))}}$r.prototype.size=1;class $M extends $r{constructor(e,t,i){super(e,t),this.type=i}blockAt(e,t,i,n){return new la(n,this.length,i,this.height,this.type)}lineAt(e,t,i,n,s){return this.blockAt(0,i,n,s)}forEachLine(e,t,i,n,s,o){e<=s+this.length&&t>=s&&o(this.blockAt(0,i,n,s))}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more&&this.setHeight(e,n.heights[n.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class zr extends $M{constructor(e,t){super(e,t,Xt.Text),this.collapsed=0,this.widgetHeight=0}replace(e,t,i){let n=i[0];return i.length==1&&(n instanceof zr||n instanceof On&&n.flags&4)&&Math.abs(this.length-n.length)<10?(n instanceof On?n=new zr(n.length,this.height):n.height=this.height,this.outdated||(n.outdated=!1),n):$r.of(i)}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more?this.setHeight(e,n.heights[n.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class On extends $r{constructor(e){super(e,0)}lines(e,t){let i=e.lineAt(t).number,n=e.lineAt(t+this.length).number;return{firstLine:i,lastLine:n,lineHeight:this.height/(n-i+1)}}blockAt(e,t,i,n){let{firstLine:s,lastLine:o,lineHeight:l}=this.lines(t,n),a=Math.max(0,Math.min(o-s,Math.floor((e-i)/l))),{from:h,length:u}=t.line(s+a);return new la(h,u,i+l*a,l,Xt.Text)}lineAt(e,t,i,n,s){if(t==ei.ByHeight)return this.blockAt(e,i,n,s);if(t==ei.ByPosNoHeight){let{from:f,to:c}=i.lineAt(e);return new la(f,c-f,0,0,Xt.Text)}let{firstLine:o,lineHeight:l}=this.lines(i,s),{from:a,length:h,number:u}=i.lineAt(e);return new la(a,h,n+l*(u-o),l,Xt.Text)}forEachLine(e,t,i,n,s,o){let{firstLine:l,lineHeight:a}=this.lines(i,s);for(let h=Math.max(e,s),u=Math.min(s+this.length,t);h<=u;){let f=i.lineAt(h);h==e&&(n+=a*(f.number-l)),o(new la(f.from,f.length,n,a,Xt.Text)),n+=a,h=f.to+1}}replace(e,t,i){let n=this.length-t;if(n>0){let s=i[i.length-1];s instanceof On?i[i.length-1]=new On(s.length+n):i.push(null,new On(n-1))}if(e>0){let s=i[0];s instanceof On?i[0]=new On(e+s.length):i.unshift(new On(e-1),null)}return $r.of(i)}decomposeLeft(e,t){t.push(new On(e-1),null)}decomposeRight(e,t){t.push(null,new On(this.length-e-1))}updateHeight(e,t=0,i=!1,n){let s=t+this.length;if(n&&n.from<=t+this.length&&n.more){let o=[],l=Math.max(t,n.from),a=-1,h=e.heightChanged;for(n.from>t&&o.push(new On(n.from-t-1).updateHeight(e,t));l<=s&&n.more;){let f=e.doc.lineAt(l).length;o.length&&o.push(null);let c=n.heights[n.index++];a==-1?a=c:Math.abs(c-a)>=ym&&(a=-2);let d=new zr(f,c);d.outdated=!1,o.push(d),l+=f+1}l<=s&&o.push(null,new On(s-l).updateHeight(e,l));let u=$r.of(o);return e.heightChanged=h||a<0||Math.abs(u.height-this.height)>=ym||Math.abs(a-this.lines(e.doc,t).lineHeight)>=ym,u}else(i||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class XL extends $r{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,n){let s=i+this.left.height;return e<s?this.left.blockAt(e,t,i,n):this.right.blockAt(e,t,s,n+this.left.length+this.break)}lineAt(e,t,i,n,s){let o=n+this.left.height,l=s+this.left.length+this.break,a=t==ei.ByHeight?e<o:e<l,h=a?this.left.lineAt(e,t,i,n,s):this.right.lineAt(e,t,i,o,l);if(this.break||(a?h.to<l:h.from>l))return h;let u=t==ei.ByPosNoHeight?ei.ByPosNoHeight:ei.ByPos;return a?h.join(this.right.lineAt(l,u,i,o,l)):this.left.lineAt(l,u,i,n,s).join(h)}forEachLine(e,t,i,n,s,o){let l=n+this.left.height,a=s+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,i,n,s,o),t>=a&&this.right.forEachLine(e,t,i,l,a,o);else{let h=this.lineAt(a,ei.ByPos,i,n,s);e<h.from&&this.left.forEachLine(e,h.from-1,i,n,s,o),h.to>=e&&h.from<=t&&o(h),t>h.to&&this.right.forEachLine(h.to+1,t,i,l,a,o)}}replace(e,t,i){let n=this.left.length+this.break;if(t<n)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-n,t-n,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let l of i)s.push(l);if(e>0&&MC(s,o-1),t<this.length){let l=s.length;this.decomposeRight(t,s),MC(s,l)}return $r.of(s)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,n=i+this.break;if(e>=n)return this.right.decomposeRight(e-n,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<n&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?$r.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,n){let{left:s,right:o}=this,l=t+s.length+this.break,a=null;return n&&n.from<=t+s.length&&n.more?a=s=s.updateHeight(e,t,i,n):s.updateHeight(e,t,i),n&&n.from<=l+o.length&&n.more?a=o=o.updateHeight(e,l,i,n):o.updateHeight(e,l,i),a?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function MC(r,e){let t,i;r[e]==null&&(t=r[e-1])instanceof On&&(i=r[e+1])instanceof On&&r.splice(e-1,3,new On(t.length+1+i.length))}const ZL=5;class q2{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof zr?n.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new zr(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let n=i.widget?i.widget.estimatedHeight:0;n<0&&(n=this.oracle.lineHeight);let s=t-e;i.block?this.addBlock(new $M(s,n,i.type)):(s||n>=ZL)&&this.addLineDeco(n,s)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new zr(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new On(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof zr)return e;let t=new zr(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type==Xt.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=Xt.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let i=this.ensureLine();i.length+=t,i.collapsed+=t,i.widgetHeight=Math.max(i.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof zr)&&!this.isCovered?this.nodes.push(new zr(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let n of this.nodes)n instanceof zr&&n.updateHeight(this.oracle,i),i+=n?n.length:1;return this.nodes}static build(e,t,i,n){let s=new q2(i,e);return ai.spans(t,i,n,s,0),s.finish(i)}}function GL(r,e,t){let i=new UL;return ai.compare(r,e,t,i,0),i.changes}class UL{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,n){(e<t||i&&i.heightRelevant||n&&n.heightRelevant)&&jw(e,t,this.changes,5)}}function YL(r,e){let t=r.getBoundingClientRect(),i=Math.max(0,t.left),n=Math.min(innerWidth,t.right),s=Math.max(0,t.top),o=Math.min(innerHeight,t.bottom),l=r.ownerDocument.body;for(let a=r.parentNode;a&&a!=l;)if(a.nodeType==1){let h=a,u=window.getComputedStyle(h);if((h.scrollHeight>h.clientHeight||h.scrollWidth>h.clientWidth)&&u.overflow!="visible"){let f=h.getBoundingClientRect();i=Math.max(i,f.left),n=Math.min(n,f.right),s=Math.max(s,f.top),o=Math.min(o,f.bottom)}a=u.position=="absolute"||u.position=="fixed"?h.offsetParent:h.parentNode}else if(a.nodeType==11)a=a.host;else break;return{left:i-t.left,right:Math.max(i,n)-t.left,top:s-(t.top+e),bottom:Math.max(s,o)-(t.top+e)}}function KL(r,e){let t=r.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class yO{constructor(e,t,i){this.from=e,this.to=t,this.size=i}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let n=e[i],s=t[i];if(n.from!=s.from||n.to!=s.to||n.size!=s.size)return!1}return!0}draw(e){return ot.replace({widget:new JL(this.size,e)}).range(this.from,this.to)}}class JL extends Hh{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class RC{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.heightOracle=new HL,this.scaler=EC,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Gi.RTL,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.stateDeco=e.facet(md).filter(t=>typeof t!="function"),this.heightMap=$r.empty().applyChanges(this.stateDeco,_t.empty,this.heightOracle.setDoc(e.doc),[new fl(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=ot.set(this.lineGaps.map(t=>t.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let n=i?t.head:t.anchor;if(!e.some(({from:s,to:o})=>n>=s&&n<=o)){let{from:s,to:o}=this.lineBlockAt(n);e.push(new Fp(s,o))}}this.viewports=e.sort((i,n)=>i.from-n.from),this.scaler=this.heightMap.height<=7e6?EC:new i6(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:$c(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(md).filter(h=>typeof h!="function");let n=e.changedRanges,s=fl.extendWithRanges(n,GL(i,this.stateDeco,e?e.changes:Ki.empty(this.state.doc.length))),o=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=o&&(e.flags|=2);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let a=!e.changes.empty||e.flags&2||l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,this.updateForViewport(),a&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),n=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Gi.RTL:Gi.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),l=o||this.mustMeasureContent||this.contentDOMHeight!=t.clientHeight;this.contentDOMHeight=t.clientHeight,this.mustMeasureContent=!1;let a=0,h=0,u=parseInt(i.paddingTop)||0,f=parseInt(i.paddingBottom)||0;(this.paddingTop!=u||this.paddingBottom!=f)&&(this.paddingTop=u,this.paddingBottom=f,a|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(n.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,a|=8);let c=(this.printing?KL:YL)(t,this.paddingTop),d=c.top-this.pixelViewport.top,g=c.bottom-this.pixelViewport.bottom;this.pixelViewport=c;let w=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(w!=this.inView&&(this.inView=w,w&&(l=!0)),!this.inView)return 0;let S=t.clientWidth;if((this.contentDOMWidth!=S||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=S,this.editorHeight=e.scrollDOM.clientHeight,a|=8),l){let Q=e.docView.measureVisibleLineHeights(this.viewport);if(n.mustRefreshForHeights(Q)&&(o=!0),o||n.lineWrapping&&Math.abs(S-this.contentDOMWidth)>n.charWidth){let{lineHeight:M,charWidth:p}=e.docView.measureTextSize();o=n.refresh(s,M,p,S/p,Q),o&&(e.docView.minWidth=0,a|=8)}d>0&&g>0?h=Math.max(d,g):d<0&&g<0&&(h=Math.min(d,g)),n.heightChanged=!1;for(let M of this.viewports){let p=M.from==this.viewport.from?Q:e.docView.measureVisibleLineHeights(M);this.heightMap=this.heightMap.updateHeight(n,0,o,new qL(M.from,p))}n.heightChanged&&(a|=2)}let x=!this.viewportIsAppropriate(this.viewport,h)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return x&&(this.viewport=this.getViewport(h,this.scrollTarget)),this.updateForViewport(),(a&2||x)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps)),a|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),a}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),n=this.heightMap,s=this.state.doc,{visibleTop:o,visibleBottom:l}=this,a=new Fp(n.lineAt(o-i*1e3,ei.ByHeight,s,0,0).from,n.lineAt(l+(1-i)*1e3,ei.ByHeight,s,0,0).to);if(t){let{head:h}=t.range;if(h<a.from||h>a.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=n.lineAt(h,ei.ByPos,s,0,0),c;t.y=="center"?c=(f.top+f.bottom)/2-u/2:t.y=="start"||t.y=="nearest"&&h<a.from?c=f.top:c=f.bottom-u,a=new Fp(n.lineAt(c-1e3/2,ei.ByHeight,s,0,0).from,n.lineAt(c+u+1e3/2,ei.ByHeight,s,0,0).to)}}return a}mapViewport(e,t){let i=t.mapPos(e.from,-1),n=t.mapPos(e.to,1);return new Fp(this.heightMap.lineAt(i,ei.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(n,ei.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:n}=this.heightMap.lineAt(e,ei.ByPos,this.state.doc,0,0),{bottom:s}=this.heightMap.lineAt(t,ei.ByPos,this.state.doc,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||n<=o-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||s>=l+Math.max(10,Math.min(i,250)))&&n>o-2*1e3&&s<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let n of e)t.touchesRange(n.from,n.to)||i.push(new yO(t.mapPos(n.from),t.mapPos(n.to),n.size));return i}ensureLineGaps(e){let t=[];if(this.defaultTextDirection!=Gi.LTR)return t;for(let i of this.viewportLines){if(i.length<4e3)continue;let n=e6(i.from,i.to,this.stateDeco);if(n.total<4e3)continue;let s,o;if(this.heightOracle.lineWrapping){let h=2e3/this.heightOracle.lineLength*this.heightOracle.lineHeight;s=Hp(n,(this.visibleTop-i.top-h)/i.height),o=Hp(n,(this.visibleBottom-i.top+h)/i.height)}else{let h=n.total*this.heightOracle.charWidth,u=2e3*this.heightOracle.charWidth;s=Hp(n,(this.pixelViewport.left-u)/h),o=Hp(n,(this.pixelViewport.right+u)/h)}let l=[];s>i.from&&l.push({from:i.from,to:s}),o<i.to&&l.push({from:o,to:i.to});let a=this.state.selection.main;a.from>=i.from&&a.from<=i.to&&DC(l,a.from-10,a.from+10),!a.empty&&a.to>=i.from&&a.to<=i.to&&DC(l,a.to-10,a.to+10);for(let{from:h,to:u}of l)u-h>1e3&&t.push(t6(e,f=>f.from>=i.from&&f.to<=i.to&&Math.abs(f.from-h)<1e3&&Math.abs(f.to-u)<1e3)||new yO(h,u,this.gapSize(i,h,u,n)))}return t}gapSize(e,t,i,n){let s=QC(n,i)-QC(n,t);return this.heightOracle.lineWrapping?e.height*s:n.total*this.heightOracle.charWidth*s}updateLineGaps(e){yO.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=ot.set(e.map(t=>t.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];ai.spans(e,this.viewport.from,this.viewport.to,{span(n,s){t.push({from:n,to:s})},point(){}},20);let i=t.length!=this.visibleRanges.length||this.visibleRanges.some((n,s)=>n.from!=t[s].from||n.to!=t[s].to);return this.visibleRanges=t,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||$c(this.heightMap.lineAt(e,ei.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(e){return $c(this.heightMap.lineAt(this.scaler.fromDOM(e),ei.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(e){return $c(this.heightMap.blockAt(this.scaler.fromDOM(e),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Fp{constructor(e,t){this.from=e,this.to=t}}function e6(r,e,t){let i=[],n=r,s=0;return ai.spans(t,r,e,{span(){},point(o,l){o>n&&(i.push({from:n,to:o}),s+=o-n),n=l}},20),n<e&&(i.push({from:n,to:e}),s+=e-n),{total:s,ranges:i}}function Hp({total:r,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(r*t);for(let n=0;;n++){let{from:s,to:o}=e[n],l=o-s;if(i<=l)return s+i;i-=l}}function QC(r,e){let t=0;for(let{from:i,to:n}of r.ranges){if(e<=n){t+=e-i;break}t+=n-i}return t/r.total}function DC(r,e,t){for(let i=0;i<r.length;i++){let n=r[i];if(n.from<t&&n.to>e){let s=[];n.from<e&&s.push({from:n.from,to:e}),n.to>t&&s.push({from:t,to:n.to}),r.splice(i,1,...s),i+=s.length-1}}}function t6(r,e){for(let t of r)if(e(t))return t}const EC={toDOM(r){return r},fromDOM(r){return r},scale:1};class i6{constructor(e,t,i){let n=0,s=0,o=0;this.viewports=i.map(({from:l,to:a})=>{let h=t.lineAt(l,ei.ByPos,e,0,0).top,u=t.lineAt(a,ei.ByPos,e,0,0).bottom;return n+=u-h,{from:l,to:a,top:h,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-n)/(t.height-n);for(let l of this.viewports)l.domTop=o+(l.top-s)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),s=l.bottom}toDOM(e){for(let t=0,i=0,n=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return n+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,n=s.domBottom}}fromDOM(e){for(let t=0,i=0,n=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return i+(e-n)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,n=s.domBottom}}}function $c(r,e){if(e.scale==1)return r;let t=e.toDOM(r.top),i=e.toDOM(r.bottom);return new la(r.from,r.length,t,i-t,Array.isArray(r.type)?r.type.map(n=>$c(n,e)):r.type)}const qp=Ie.define({combine:r=>r.join(" ")}),Gw=Ie.define({combine:r=>r.indexOf(!0)>-1}),Uw=Ct.newName(),MM=Ct.newName(),RM=Ct.newName(),QM={"&light":"."+MM,"&dark":"."+RM};function Yw(r,e,t){return new Ct(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,n=>{if(n=="&")return r;if(!t||!t[n])throw new RangeError(`Unsupported selector: ${n}`);return t[n]}):r+" "+i}})}const n6=Yw("."+Uw,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#f3f9ff"},"&dark .cm-activeLine":{backgroundColor:"#223039"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},QM),r6={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},vO=Be.ie&&Be.ie_version<=11;class s6{constructor(e,t,i){this.view=e,this.onChange=t,this.onScrollChanged=i,this.active=!1,this.selectionRange=new sL,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let s of n)this.queue.push(s);(Be.ie&&Be.ie_version<=11||Be.ios&&e.composing)&&n.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),vO&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),window.addEventListener("resize",this.onResize=this.onResize.bind(this)),typeof ResizeObserver=="function"&&(this.resize=new ResizeObserver(()=>{this.view.docView.lastUpdate<Date.now()-75&&this.onResize()}),this.resize.observe(e.scrollDOM)),window.addEventListener("beforeprint",this.onPrint=this.onPrint.bind(this)),this.start(),window.addEventListener("scroll",this.onScroll=this.onScroll.bind(this)),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange(),this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:t}=this,i=this.selectionRange;if(t.state.facet(Ab)?t.root.activeElement!=this.dom:!Dw(t.dom,i))return;let n=i.anchorNode&&t.docView.nearest(i.anchorNode);n&&n.ignoreEvent(e)||((Be.ie&&Be.ie_version<=11||Be.android&&Be.chrome)&&!t.state.selection.main.empty&&i.focusNode&&s0(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1))}readSelectionRange(){let{root:e}=this.view,t=Be.safari&&e.nodeType==11&&iL()==this.view.contentDOM&&o6(this.view)||r0(e);return!t||this.selectionRange.eq(t)?!1:(this.selectionRange.setRange(t),this.selectionChanged=!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,r6),vO&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){!this.active||(this.active=!1,this.observer.disconnect(),vO&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){this.delayedAndroidKey||requestAnimationFrame(()=>{let i=this.delayedAndroidKey;this.delayedAndroidKey=null,this.delayedFlush=-1,this.flush()||Zc(this.view.contentDOM,i.key,i.keyCode)}),(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t})}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=window.setTimeout(()=>{this.delayedFlush=-1,this.flush()},20))}forceFlush(){this.delayedFlush>=0&&(window.clearTimeout(this.delayedFlush),this.delayedFlush=-1,this.flush())}processRecords(){let e=this.queue;for(let s of this.observer.takeRecords())e.push(s);e.length&&(this.queue=[]);let t=-1,i=-1,n=!1;for(let s of e){let o=this.readMutation(s);!o||(o.typeOver&&(n=!0),t==-1?{from:t,to:i}=o:(t=Math.min(o.from,t),i=Math.max(o.to,i)))}return{from:t,to:i,typeOver:n}}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return;e&&this.readSelectionRange();let{from:t,to:i,typeOver:n}=this.processRecords(),s=this.selectionChanged&&Dw(this.dom,this.selectionRange);if(t<0&&!s)return;this.selectionChanged=!1;let o=this.view.state,l=this.onChange(t,i,n);return this.view.state==o&&this.view.update([]),l}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.dirty|=4),e.type=="childList"){let i=BC(t,e.previousSibling||e.target.previousSibling,-1),n=BC(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:n?t.posBefore(n):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resize)===null||i===void 0||i.disconnect();for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResize),window.removeEventListener("beforeprint",this.onPrint),this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout)}}function BC(r,e,t){for(;e;){let i=Oi.get(e);if(i&&i.parent==r)return i;let n=e.parentNode;e=n!=r.dom?n:t>0?e.nextSibling:e.previousSibling}return null}function o6(r){let e=null;function t(a){a.preventDefault(),a.stopImmediatePropagation(),e=a.getTargetRanges()[0]}if(r.contentDOM.addEventListener("beforeinput",t,!0),document.execCommand("indent"),r.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let i=e.startContainer,n=e.startOffset,s=e.endContainer,o=e.endOffset,l=r.docView.domAtPos(r.state.selection.main.anchor);return s0(l.node,l.offset,s,o)&&([i,n,s,o]=[s,o,i,n]),{anchorNode:i,anchorOffset:n,focusNode:s,focusOffset:o}}function l6(r,e,t,i){let n,s,o=r.state.selection.main;if(e>-1){let l=r.docView.domBoundsAround(e,t,0);if(!l||r.state.readOnly)return!1;let{from:a,to:h}=l,u=r.docView.impreciseHead||r.docView.impreciseAnchor?[]:h6(r),f=new OM(u,r.state);f.readRange(l.startDOM,l.endDOM);let c=o.from,d=null;(r.inputState.lastKeyCode===8&&r.inputState.lastKeyTime>Date.now()-100||Be.android&&f.text.length<h-a)&&(c=o.to,d="end");let g=a6(r.state.doc.sliceString(a,h,oa),f.text,c-a,d);g&&(Be.chrome&&r.inputState.lastKeyCode==13&&g.toB==g.from+2&&f.text.slice(g.from,g.toB)==oa+oa&&g.toB--,n={from:a+g.from,to:a+g.toA,insert:_t.of(f.text.slice(g.from,g.toB).split(oa))}),s=u6(u,a)}else if(r.hasFocus||!r.state.facet(Ab)){let l=r.observer.selectionRange,{impreciseHead:a,impreciseAnchor:h}=r.docView,u=a&&a.node==l.focusNode&&a.offset==l.focusOffset||!Ku(r.contentDOM,l.focusNode)?r.state.selection.main.head:r.docView.posFromDOM(l.focusNode,l.focusOffset),f=h&&h.node==l.anchorNode&&h.offset==l.anchorOffset||!Ku(r.contentDOM,l.anchorNode)?r.state.selection.main.anchor:r.docView.posFromDOM(l.anchorNode,l.anchorOffset);(u!=o.head||f!=o.anchor)&&(s=se.single(f,u))}if(!n&&!s)return!1;if(!n&&i&&!o.empty&&s&&s.main.empty?n={from:o.from,to:o.to,insert:r.state.doc.slice(o.from,o.to)}:n&&n.from>=o.from&&n.to<=o.to&&(n.from!=o.from||n.to!=o.to)&&o.to-o.from-(n.to-n.from)<=4?n={from:o.from,to:o.to,insert:r.state.doc.slice(o.from,n.from).append(n.insert).append(r.state.doc.slice(n.to,o.to))}:(Be.mac||Be.android)&&n&&n.from==n.to&&n.from==o.head-1&&n.insert.toString()=="."&&(n={from:o.from,to:o.to,insert:_t.of([" "])}),n){let l=r.state;if(Be.ios&&r.inputState.flushIOSKey(r)||Be.android&&(n.from==o.from&&n.to==o.to&&n.insert.length==1&&n.insert.lines==2&&Zc(r.contentDOM,"Enter",13)||n.from==o.from-1&&n.to==o.to&&n.insert.length==0&&Zc(r.contentDOM,"Backspace",8)||n.from==o.from&&n.to==o.to+1&&n.insert.length==0&&Zc(r.contentDOM,"Delete",46)))return!0;let a=n.insert.toString();if(r.state.facet(hM).some(f=>f(r,n.from,n.to,a)))return!0;r.inputState.composing>=0&&r.inputState.composing++;let h;if(n.from>=o.from&&n.to<=o.to&&n.to-n.from>=(o.to-o.from)/3&&(!s||s.main.empty&&s.main.from==n.from+n.insert.length)&&r.inputState.composing<0){let f=o.from<n.from?l.sliceDoc(o.from,n.from):"",c=o.to>n.to?l.sliceDoc(n.to,o.to):"";h=l.replaceSelection(r.state.toText(f+n.insert.sliceString(0,void 0,r.state.lineBreak)+c))}else{let f=l.changes(n),c=s&&!l.selection.main.eq(s.main)&&s.main.to<=f.newLength?s.main:void 0;if(l.selection.ranges.length>1&&r.inputState.composing>=0&&n.to<=o.to&&n.to>=o.to-10){let d=r.state.sliceDoc(n.from,n.to),g=kM(r)||r.state.doc.lineAt(o.head),w=o.to-n.to,S=o.to-o.from;h=l.changeByRange(x=>{if(x.from==o.from&&x.to==o.to)return{changes:f,range:c||x.map(f)};let Q=x.to-w,M=Q-d.length;if(x.to-x.from!=S||r.state.sliceDoc(M,Q)!=d||g&&x.to>=g.from&&x.from<=g.to)return{range:x};let p=l.changes({from:M,to:Q,insert:n.insert}),b=x.to-o.to;return{changes:p,range:c?se.range(Math.max(0,c.anchor+b),Math.max(0,c.head+b)):x.map(p)}})}else h={changes:f,selection:c&&l.selection.replaceRange(c)}}let u="input.type";return r.composing&&(u+=".compose",r.inputState.compositionFirstChange&&(u+=".start",r.inputState.compositionFirstChange=!1)),r.dispatch(h,{scrollIntoView:!0,userEvent:u}),!0}else if(s&&!s.main.eq(o)){let l=!1,a="select";return r.inputState.lastSelectionTime>Date.now()-50&&(r.inputState.lastSelectionOrigin=="select"&&(l=!0),a=r.inputState.lastSelectionOrigin),r.dispatch({selection:s,scrollIntoView:l,userEvent:a}),!0}else return!1}function a6(r,e,t,i){let n=Math.min(r.length,e.length),s=0;for(;s<n&&r.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==n&&r.length==e.length)return null;let o=r.length,l=e.length;for(;o>0&&l>0&&r.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(i=="end"){let a=Math.max(0,s-Math.min(o,l));t-=o+a-s}return o<s&&r.length<e.length?(s-=t<=s&&t>=o?s-t:0,l=s+(l-o),o=s):l<s&&(s-=t<=s&&t>=l?s-t:0,o=s+(o-l),l=s),{from:s,toA:o,toB:l}}function h6(r){let e=[];if(r.root.activeElement!=r.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:n,focusOffset:s}=r.observer.selectionRange;return t&&(e.push(new pC(t,i)),(n!=t||s!=i)&&e.push(new pC(n,s))),e}function u6(r,e){if(r.length==0)return null;let t=r[0].pos,i=r.length==2?r[1].pos:t;return t>-1&&i>-1?se.single(t+e,i+e):null}class nt{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(t=>this.update([t])),this.dispatch=this.dispatch.bind(this),this.root=e.root||oL(e.parent)||document,this.viewState=new RC(e.state||it.create(e)),this.plugins=this.state.facet(Pc).map(t=>new OO(t));for(let t of this.plugins)t.update(this);this.observer=new s6(this,(t,i,n)=>l6(this,t,i,n),t=>{this.inputState.runScrollHandlers(this,t),this.observer.intersecting&&this.measure()}),this.inputState=new QL(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new gC(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}dispatch(...e){this._dispatch(e.length==1&&e[0]instanceof Ji?e[0]:this.state.update(...e))}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,n,s=this.state;for(let l of e){if(l.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=l.state}if(this.destroyed){this.viewState.state=s;return}if(this.observer.clear(),s.facet(it.phrases)!=this.state.facet(it.phrases))return this.setState(s);n=a0.create(this,s,e);let o=this.viewState.scrollTarget;try{this.updateState=2;for(let l of e){if(o&&(o=o.map(l.changes)),l.scrollIntoView){let{main:a}=l.state.selection;o=new l0(a.empty?a:se.cursor(a.head,a.head>a.anchor?-1:1))}for(let a of l.effects)a.is(cC)&&(o=a.value)}this.viewState.update(n,o),this.bidiCache=h0.update(this.bidiCache,n.changes),n.empty||(this.updatePlugins(n),this.inputState.update(n)),t=this.docView.update(n),this.state.facet(_c)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(l=>l.isUserEvent("select.pointer")))}finally{this.updateState=0}if(n.startState.facet(qp)!=n.state.facet(qp)&&(this.viewState.mustMeasureContent=!0),(t||i||o||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!n.empty)for(let l of this.state.facet(Fw))l(n)}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new RC(e),this.plugins=e.facet(Pc).map(i=>new OO(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView=new gC(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Pc),i=e.state.facet(Pc);if(t!=i){let n=[];for(let s of i){let o=t.indexOf(s);if(o<0)n.push(new OO(s));else{let l=this.plugins[o];l.mustUpdate=e,n.push(l)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=n,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let n of this.plugins)n.mustUpdate=e;for(let n=0;n<this.plugins.length;n++)this.plugins[n].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.flush();let t=null;try{for(let i=0;;i++){this.updateState=1;let n=this.viewport,s=this.viewState.measure(this);if(!s&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(i>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let o=[];s&4||([this.measureRequests,o]=[o,this.measureRequests]);let l=o.map(f=>{try{return f.read(this)}catch(c){return hs(this.state,c),NC}}),a=a0.create(this,this.state,[]),h=!1,u=!1;a.flags|=s,t?t.flags|=s:t=a,this.updateState=2,a.empty||(this.updatePlugins(a),this.inputState.update(a),this.updateAttrs(),h=this.docView.update(a));for(let f=0;f<o.length;f++)if(l[f]!=NC)try{let c=o[f];c.write&&c.write(l[f],this)}catch(c){hs(this.state,c)}if(this.viewState.scrollTarget&&(this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,u=!0),h&&this.docView.updateSelection(!0),this.viewport.from==n.from&&this.viewport.to==n.to&&!u&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let i of this.state.facet(Fw))i(t)}get themeClasses(){return Uw+" "+(this.state.facet(Gw)?RM:MM)+" "+this.state.facet(qp)}updateAttrs(){let e=IC(this,fM,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Ab)?"true":"false",class:"cm-content",style:`${Be.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),IC(this,cM,t);let i=this.observer.ignore(()=>{let n=Vw(this.contentDOM,this.contentAttrs,t),s=Vw(this.dom,this.editorAttrs,e);return n||s});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let n of i.effects)if(n.is(nt.announce)){t&&(this.announceDOM.textContent=""),t=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=n.value}}mountStyles(){this.styleModules=this.state.facet(_c),Ct.mount(this.root,this.styleModules.concat(n6).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=requestAnimationFrame(()=>this.measure())),e){if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return wO(this,e,yC(this,e,t,i))}moveByGroup(e,t){return wO(this,e,yC(this,e,t,i=>ML(this,e.head,i)))}moveToLineBoundary(e,t,i=!0){return $L(this,e,t,i)}moveVertically(e,t,i){return wO(this,e,RL(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),yM(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let n=this.state.doc.lineAt(e),s=this.bidiSpans(n),o=s[Du.find(s,e-n.from,-1,t)];return Sb(i,o.dir==Gi.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(uM)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>f6)return mM(e.length);let t=this.textDirectionAt(e.from);for(let n of this.bidiCache)if(n.from==e.from&&n.dir==t)return n.order;let i=mL(e.text,t);return this.bidiCache.push(new h0(e.from,e.to,t,i)),i}get hasFocus(){var e;return(document.hasFocus()||Be.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{q4(this.contentDOM),this.docView.updateSelection()})}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return cC.of(new l0(typeof e=="number"?se.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return fn.define(()=>({}),{eventHandlers:e})}static theme(e,t){let i=Ct.newName(),n=[qp.of(i),_c.of(Yw(`.${i}`,e))];return t&&t.dark&&n.push(Gw.of(!0)),n}static baseTheme(e){return Ff.lowest(_c.of(Yw("."+Uw,e,QM)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),n=i&&Oi.get(i)||Oi.get(e);return((t=n==null?void 0:n.rootView)===null||t===void 0?void 0:t.view)||null}}nt.styleModule=_c;nt.inputHandler=hM;nt.perLineTextDirection=uM;nt.exceptionSink=aM;nt.updateListener=Fw;nt.editable=Ab;nt.mouseSelectionStyle=lM;nt.dragMovesSelection=oM;nt.clickAddsSelectionRange=sM;nt.decorations=md;nt.atomicRanges=dM;nt.scrollMargins=pM;nt.darkTheme=Gw;nt.contentAttributes=cM;nt.editorAttributes=fM;nt.lineWrapping=nt.contentAttributes.of({class:"cm-lineWrapping"});nt.announce=xt.define();const f6=4096,NC={};class h0{constructor(e,t,i,n){this.from=e,this.to=t,this.dir=i,this.order=n}static update(e,t){if(t.empty)return e;let i=[],n=e.length?e[e.length-1].dir:Gi.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==n&&!t.touchesRange(o.from,o.to)&&i.push(new h0(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.order))}return i}}function IC(r,e,t){for(let i=r.state.facet(e),n=i.length-1;n>=0;n--){let s=i[n],o=typeof s=="function"?s(r):s;o&&Ww(o,t)}return t}const c6=Be.mac?"mac":Be.windows?"win":Be.linux?"linux":"key";function d6(r,e){const t=r.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let n,s,o,l;for(let a=0;a<t.length-1;++a){const h=t[a];if(/^(cmd|meta|m)$/i.test(h))l=!0;else if(/^a(lt)?$/i.test(h))n=!0;else if(/^(c|ctrl|control)$/i.test(h))s=!0;else if(/^s(hift)?$/i.test(h))o=!0;else if(/^mod$/i.test(h))e=="mac"?l=!0:s=!0;else throw new Error("Unrecognized modifier name: "+h)}return n&&(i="Alt-"+i),s&&(i="Ctrl-"+i),l&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function Xp(r,e,t){return e.altKey&&(r="Alt-"+r),e.ctrlKey&&(r="Ctrl-"+r),e.metaKey&&(r="Meta-"+r),t!==!1&&e.shiftKey&&(r="Shift-"+r),r}const p6=Ff.default(nt.domEventHandlers({keydown(r,e){return EM(DM(e.state),r,e,"editor")}})),Tb=Ie.define({enables:p6}),LC=new WeakMap;function DM(r){let e=r.facet(Tb),t=LC.get(e);return t||LC.set(e,t=b6(e.reduce((i,n)=>i.concat(n),[]))),t}function g6(r,e,t){return EM(DM(r.state),e,r,t)}let ia=null;const m6=4e3;function b6(r,e=c6){let t=Object.create(null),i=Object.create(null),n=(o,l)=>{let a=i[o];if(a==null)i[o]=l;else if(a!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,l,a,h)=>{let u=t[o]||(t[o]=Object.create(null)),f=l.split(/ (?!$)/).map(g=>d6(g,e));for(let g=1;g<f.length;g++){let w=f.slice(0,g).join(" ");n(w,!0),u[w]||(u[w]={preventDefault:!0,commands:[S=>{let x=ia={view:S,prefix:w,scope:o};return setTimeout(()=>{ia==x&&(ia=null)},m6),!0}]})}let c=f.join(" ");n(c,!1);let d=u[c]||(u[c]={preventDefault:!1,commands:[]});d.commands.push(a),h&&(d.preventDefault=!0)};for(let o of r){let l=o[e]||o.key;if(!!l)for(let a of o.scope?o.scope.split(" "):["editor"])s(a,l,o.run,o.preventDefault),o.shift&&s(a,"Shift-"+l,o.shift,o.preventDefault)}return t}function EM(r,e,t,i){let n=F4(e),s=Ru(n,0),o=t0(s)==n.length&&n!=" ",l="",a=!1;ia&&ia.view==t&&ia.scope==i&&(l=ia.prefix+" ",(a=SM.indexOf(e.keyCode)<0)&&(ia=null));let h=c=>{if(c){for(let d of c.commands)if(d(t))return!0;c.preventDefault&&(a=!0)}return!1},u=r[i],f;if(u){if(h(u[l+Xp(n,e,!o)]))return!0;if(o&&(e.shiftKey||e.altKey||e.metaKey||s>127)&&(f=Pl[e.keyCode])&&f!=n){if(h(u[l+Xp(f,e,!0)]))return!0;if(e.shiftKey&&Yu[e.keyCode]!=f&&h(u[l+Xp(Yu[e.keyCode],e,!1)]))return!0}else if(o&&e.shiftKey&&h(u[l+Xp(n,e,!0)]))return!0}return a}const BM=!Be.ios,Mc=Ie.define({combine(r){return np(r,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function O6(r={}){return[Mc.of(r),k6,w6]}class NM{constructor(e,t,i,n,s){this.left=e,this.top=t,this.width=i,this.height=n,this.className=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width>=0&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}}const k6=fn.fromClass(class{constructor(r){this.view=r,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.selectionLayer=r.scrollDOM.appendChild(document.createElement("div")),this.selectionLayer.className="cm-selectionLayer",this.selectionLayer.setAttribute("aria-hidden","true"),this.cursorLayer=r.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),r.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration=this.view.state.facet(Mc).cursorBlinkRate+"ms"}update(r){let e=r.startState.facet(Mc)!=r.state.facet(Mc);(e||r.selectionSet||r.geometryChanged||r.viewportChanged)&&this.view.requestMeasure(this.measureReq),r.transactions.some(t=>t.scrollIntoView)&&(this.cursorLayer.style.animationName=this.cursorLayer.style.animationName=="cm-blink"?"cm-blink2":"cm-blink"),e&&this.setBlinkRate()}readPos(){let{state:r}=this.view,e=r.facet(Mc),t=r.selection.ranges.map(n=>n.empty?[]:y6(this.view,n)).reduce((n,s)=>n.concat(s)),i=[];for(let n of r.selection.ranges){let s=n==r.selection.main;if(n.empty?!s||BM:e.drawRangeCursor){let o=v6(this.view,n,s);o&&i.push(o)}}return{rangePieces:t,cursors:i}}drawSel({rangePieces:r,cursors:e}){if(r.length!=this.rangePieces.length||r.some((t,i)=>!t.eq(this.rangePieces[i]))){this.selectionLayer.textContent="";for(let t of r)this.selectionLayer.appendChild(t.draw());this.rangePieces=r}if(e.length!=this.cursors.length||e.some((t,i)=>!t.eq(this.cursors[i]))){let t=this.cursorLayer.children;if(t.length!==e.length){this.cursorLayer.textContent="";for(const i of e)this.cursorLayer.appendChild(i.draw())}else e.forEach((i,n)=>i.adjust(t[n]));this.cursors=e}}destroy(){this.selectionLayer.remove(),this.cursorLayer.remove()}}),IM={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};BM&&(IM[".cm-line"].caretColor="transparent !important");const w6=Ff.highest(nt.theme(IM));function LM(r){let e=r.scrollDOM.getBoundingClientRect();return{left:(r.textDirection==Gi.LTR?e.left:e.right-r.scrollDOM.clientWidth)-r.scrollDOM.scrollLeft,top:e.top-r.scrollDOM.scrollTop}}function zC(r,e,t){let i=se.cursor(e);return{from:Math.max(t.from,r.moveToLineBoundary(i,!1,!0).from),to:Math.min(t.to,r.moveToLineBoundary(i,!0,!0).from),type:Xt.Text}}function WC(r,e){let t=r.lineBlockAt(e);if(Array.isArray(t.type)){for(let i of t.type)if(i.to>e||i.to==e&&(i.to==t.to||i.type==Xt.Text))return i}return t}function y6(r,e){if(e.to<=r.viewport.from||e.from>=r.viewport.to)return[];let t=Math.max(e.from,r.viewport.from),i=Math.min(e.to,r.viewport.to),n=r.textDirection==Gi.LTR,s=r.contentDOM,o=s.getBoundingClientRect(),l=LM(r),a=window.getComputedStyle(s.firstChild),h=o.left+parseInt(a.paddingLeft)+Math.min(0,parseInt(a.textIndent)),u=o.right-parseInt(a.paddingRight),f=WC(r,t),c=WC(r,i),d=f.type==Xt.Text?f:null,g=c.type==Xt.Text?c:null;if(r.lineWrapping&&(d&&(d=zC(r,t,d)),g&&(g=zC(r,i,g))),d&&g&&d.from==g.from)return S(x(e.from,e.to,d));{let M=d?x(e.from,null,d):Q(f,!1),p=g?x(null,e.to,g):Q(c,!0),b=[];return(d||f).to<(g||c).from-1?b.push(w(h,M.bottom,u,p.top)):M.bottom<p.top&&r.elementAtHeight((M.bottom+p.top)/2).type==Xt.Text&&(M.bottom=p.top=(M.bottom+p.top)/2),S(M).concat(b).concat(S(p))}function w(M,p,b,m){return new NM(M-l.left,p-l.top-.01,b-M,m-p+.01,"cm-selectionBackground")}function S({top:M,bottom:p,horizontal:b}){let m=[];for(let k=0;k<b.length;k+=2)m.push(w(b[k],M,b[k+1],p));return m}function x(M,p,b){let m=1e9,k=-1e9,C=[];function v(E,$,R,N,_){let W=r.coordsAtPos(E,E==b.to?-2:2),L=r.coordsAtPos(R,R==b.from?2:-2);m=Math.min(W.top,L.top,m),k=Math.max(W.bottom,L.bottom,k),_==Gi.LTR?C.push(n&&$?h:W.left,n&&N?u:L.right):C.push(!n&&N?h:L.left,!n&&$?u:W.right)}let y=M!=null?M:b.from,T=p!=null?p:b.to;for(let E of r.visibleRanges)if(E.to>y&&E.from<T)for(let $=Math.max(E.from,y),R=Math.min(E.to,T);;){let N=r.state.doc.lineAt($);for(let _ of r.bidiSpans(N)){let W=_.from+N.from,L=_.to+N.from;if(W>=R)break;L>$&&v(Math.max(W,$),M==null&&W<=y,Math.min(L,R),p==null&&L>=T,_.dir)}if($=N.to+1,$>=R)break}return C.length==0&&v(y,M==null,T,p==null,r.textDirection),{top:m,bottom:k,horizontal:C}}function Q(M,p){let b=o.top+(p?M.top:M.bottom);return{top:b,bottom:b,horizontal:[]}}}function v6(r,e,t){let i=r.coordsAtPos(e.head,e.assoc||1);if(!i)return null;let n=LM(r);return new NM(i.left-n.left,i.top-n.top,-1,i.bottom-i.top,t?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary")}const zM=xt.define({map(r,e){return r==null?null:e.mapPos(r)}}),Rc=or.define({create(){return null},update(r,e){return r!=null&&(r=e.changes.mapPos(r)),e.effects.reduce((t,i)=>i.is(zM)?i.value:t,r)}}),S6=fn.fromClass(class{constructor(r){this.view=r,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(r){var e;let t=r.state.field(Rc);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(r.startState.field(Rc)!=t||r.docChanged||r.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let r=this.view.state.field(Rc),e=r!=null&&this.view.coordsAtPos(r);if(!e)return null;let t=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-t.left+this.view.scrollDOM.scrollLeft,top:e.top-t.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(r){this.cursor&&(r?(this.cursor.style.left=r.left+"px",this.cursor.style.top=r.top+"px",this.cursor.style.height=r.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(r){this.view.state.field(Rc)!=r&&this.view.dispatch({effects:zM.of(r)})}},{eventHandlers:{dragover(r){this.setDropPos(this.view.posAtCoords({x:r.clientX,y:r.clientY}))},dragleave(r){(r.target==this.view.contentDOM||!this.view.contentDOM.contains(r.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function x6(){return[Rc,S6]}function VC(r,e,t,i,n){e.lastIndex=0;for(let s=r.iterRange(t,i),o=t,l;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;l=e.exec(s.value);)n(o+l.index,o+l.index+l[0].length,l)}function C6(r,e){let t=r.visibleRanges;if(t.length==1&&t[0].from==r.viewport.from&&t[0].to==r.viewport.to)return t;let i=[];for(let{from:n,to:s}of t)n=Math.max(r.state.doc.lineAt(n).from,n-e),s=Math.min(r.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=n?i[i.length-1].to=s:i.push({from:n,to:s});return i}class A6{constructor(e){let{regexp:t,decoration:i,boundary:n,maxLength:s=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");this.regexp=t,this.getDeco=typeof i=="function"?i:()=>i,this.boundary=n,this.maxLength=s}createDeco(e){let t=new Uu;for(let{from:i,to:n}of C6(e,this.maxLength))VC(e.state.doc,this.regexp,i,n,(s,o,l)=>t.add(s,o,this.getDeco(l,e,s)));return t.finish()}updateDeco(e,t){let i=1e9,n=-1;return e.docChanged&&e.changes.iterChanges((s,o,l,a)=>{a>e.view.viewport.from&&l<e.view.viewport.to&&(i=Math.min(l,i),n=Math.max(a,n))}),e.viewportChanged||n-i>1e3?this.createDeco(e.view):n>-1?this.updateRange(e.view,t.map(e.changes),i,n):t}updateRange(e,t,i,n){for(let s of e.visibleRanges){let o=Math.max(s.from,i),l=Math.min(s.to,n);if(l>o){let a=e.state.doc.lineAt(o),h=a.to<l?e.state.doc.lineAt(l):a,u=Math.max(s.from,a.from),f=Math.min(s.to,h.to);if(this.boundary){for(;o>a.from;o--)if(this.boundary.test(a.text[o-1-a.from])){u=o;break}for(;l<h.to;l++)if(this.boundary.test(h.text[l-h.from])){f=l;break}}let c=[],d;if(a==h)for(this.regexp.lastIndex=u-a.from;(d=this.regexp.exec(a.text))&&d.index<f-a.from;){let g=d.index+a.from;c.push(this.getDeco(d,e,g).range(g,g+d[0].length))}else VC(e.state.doc,this.regexp,u,f,(g,w,S)=>c.push(this.getDeco(S,e,g).range(g,w)));t=t.update({filterFrom:u,filterTo:f,filter:(g,w)=>g<u||w>f,add:c})}}return t}}const Kw=/x/.unicode!=null?"gu":"g",T6=new RegExp(`[\0-\b
-\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\uFEFF\uFFF9-\uFFFC]`,Kw),P6={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let SO=null;function _6(){var r;if(SO==null&&typeof document!="undefined"&&document.body){let e=document.body.style;SO=((r=e.tabSize)!==null&&r!==void 0?r:e.MozTabSize)!=null}return SO||!1}const vm=Ie.define({combine(r){let e=np(r,{render:null,specialChars:T6,addSpecialChars:null});return(e.replaceTabs=!_6())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Kw)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Kw)),e}});function $6(r={}){return[vm.of(r),M6()]}let jC=null;function M6(){return jC||(jC=fn.fromClass(class{constructor(r){this.view=r,this.decorations=ot.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(r.state.facet(vm)),this.decorations=this.decorator.createDeco(r)}makeDecorator(r){return new A6({regexp:r.specialChars,decoration:(e,t,i)=>{let{doc:n}=t.state,s=Ru(e[0],0);if(s==9){let o=n.lineAt(i),l=t.state.tabSize,a=rp(o.text,l,i-o.from);return ot.replace({widget:new E6((l-a%l)*this.view.defaultCharacterWidth)})}return this.decorationCache[s]||(this.decorationCache[s]=ot.replace({widget:new D6(r,s)}))},boundary:r.replaceTabs?void 0:/[^]/})}update(r){let e=r.state.facet(vm);r.startState.facet(vm)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(r.view)):this.decorations=this.decorator.updateDeco(r,this.decorations)}},{decorations:r=>r.decorations}))}const R6="\u2022";function Q6(r){return r>=32?R6:r==10?"\u2424":String.fromCharCode(9216+r)}class D6 extends Hh{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=Q6(this.code),i=e.state.phrase("Control character")+" "+(P6[this.code]||"0x"+this.code.toString(16)),n=this.options.render&&this.options.render(this.code,i,t);if(n)return n;let s=document.createElement("span");return s.textContent=t,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class E6 extends Hh{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function FC(){return N6}const B6=ot.line({class:"cm-activeLine"}),N6=fn.fromClass(class{constructor(r){this.decorations=this.getDeco(r)}update(r){(r.docChanged||r.selectionSet)&&(this.decorations=this.getDeco(r.view))}getDeco(r){let e=-1,t=[];for(let i of r.state.selection.ranges){if(!i.empty)return ot.none;let n=r.lineBlockAt(i.head);n.from>e&&(t.push(B6.range(n.from)),e=n.from)}return ot.set(t)}},{decorations:r=>r.decorations}),Jw=2e3;function I6(r,e,t){let i=Math.min(e.line,t.line),n=Math.max(e.line,t.line),s=[];if(e.off>Jw||t.off>Jw||e.col<0||t.col<0){let o=Math.min(e.off,t.off),l=Math.max(e.off,t.off);for(let a=i;a<=n;a++){let h=r.doc.line(a);h.length<=l&&s.push(se.range(h.from+o,h.to+l))}}else{let o=Math.min(e.col,t.col),l=Math.max(e.col,t.col);for(let a=i;a<=n;a++){let h=r.doc.line(a),u=Mw(h.text,o,r.tabSize,!0);if(u>-1){let f=Mw(h.text,l,r.tabSize);s.push(se.range(h.from+u,h.from+f))}}}return s}function L6(r,e){let t=r.coordsAtPos(r.viewport.from);return t?Math.round(Math.abs((t.left-e)/r.defaultCharacterWidth)):-1}function HC(r,e){let t=r.posAtCoords({x:e.clientX,y:e.clientY},!1),i=r.state.doc.lineAt(t),n=t-i.from,s=n>Jw?-1:n==i.length?L6(r,e.clientX):rp(i.text,r.state.tabSize,t-i.from);return{line:i.number,col:s,off:n}}function z6(r,e){let t=HC(r,e),i=r.state.selection;return t?{update(n){if(n.docChanged){let s=n.changes.mapPos(n.startState.doc.line(t.line).from),o=n.state.doc.lineAt(s);t={line:o.number,col:t.col,off:Math.min(t.off,o.length)},i=i.map(n.changes)}},get(n,s,o){let l=HC(r,n);if(!l)return i;let a=I6(r.state,t,l);return a.length?o?se.create(a.concat(i.ranges)):se.create(a):i}}:null}function W6(r){let e=(r==null?void 0:r.eventFilter)||(t=>t.altKey&&t.button==0);return nt.mouseSelectionStyle.of((t,i)=>e(i)?z6(t,i):null)}const V6={Alt:[18,r=>r.altKey],Control:[17,r=>r.ctrlKey],Shift:[16,r=>r.shiftKey],Meta:[91,r=>r.metaKey]},j6={style:"cursor: crosshair"};function F6(r={}){let[e,t]=V6[r.key||"Alt"],i=fn.fromClass(class{constructor(n){this.view=n,this.isDown=!1}set(n){this.isDown!=n&&(this.isDown=n,this.view.update([]))}},{eventHandlers:{keydown(n){this.set(n.keyCode==e||t(n))},keyup(n){(n.keyCode==e||!t(n))&&this.set(!1)}}});return[i,nt.contentAttributes.of(n=>{var s;return!((s=n.plugin(i))===null||s===void 0)&&s.isDown?j6:null})]}const qC=Ie.define({combine(r){let e,t;for(let i of r)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function u0(r,e){let t=r.plugin(WM),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}const WM=fn.fromClass(class{constructor(r){this.input=r.state.facet(f0),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(r));let e=r.state.facet(qC);this.top=new Zp(r,!0,e.topContainer),this.bottom=new Zp(r,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(r){let e=r.state.facet(qC);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Zp(r.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Zp(r.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=r.state.facet(f0);if(t!=this.input){let i=t.filter(a=>a),n=[],s=[],o=[],l=[];for(let a of i){let h=this.specs.indexOf(a),u;h<0?(u=a(r.view),l.push(u)):(u=this.panels[h],u.update&&u.update(r)),n.push(u),(u.top?s:o).push(u)}this.specs=i,this.panels=n,this.top.sync(s),this.bottom.sync(o);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let i of this.panels)i.update&&i.update(r)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:r=>nt.scrollMargins.of(e=>{let t=e.plugin(r);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Zp{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=XC(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=XC(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function XC(r){let e=r.nextSibling;return r.remove(),e}const f0=Ie.define({enables:WM});class Na extends Dh{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Na.prototype.elementClass="";Na.prototype.toDOM=void 0;Na.prototype.mapMode=gr.TrackBefore;Na.prototype.startSide=Na.prototype.endSide=-1;Na.prototype.point=!0;const Sm=Ie.define(),xm=Ie.define(),ey=Ie.define({combine:r=>r.some(e=>e)});function H6(r){let e=[q6];return r&&r.fixed===!1&&e.push(ey.of(!0)),e}const q6=fn.fromClass(class{constructor(r){this.view=r,this.prevViewport=r.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=r.state.facet(xm).map(e=>new GC(r,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!r.state.facet(ey),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),r.scrollDOM.insertBefore(this.dom,r.contentDOM)}update(r){if(this.updateGutters(r)){let e=this.prevViewport,t=r.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}r.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(ey)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=r.view.viewport}syncGutters(r){let e=this.dom.nextSibling;r&&this.dom.remove();let t=ai.iter(this.view.state.facet(Sm),this.view.viewport.from),i=[],n=this.gutters.map(s=>new X6(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks){let o;if(Array.isArray(s.type)){for(let l of s.type)if(l.type==Xt.Text){o=l;break}}else o=s.type==Xt.Text?s:void 0;if(!!o){i.length&&(i=[]),VM(t,i,s.from);for(let l of n)l.line(this.view,o,i)}}for(let s of n)s.finish();r&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(r){let e=r.startState.facet(xm),t=r.state.facet(xm),i=r.docChanged||r.heightChanged||r.viewportChanged||!ai.eq(r.startState.facet(Sm),r.state.facet(Sm),r.view.viewport.from,r.view.viewport.to);if(e==t)for(let n of this.gutters)n.update(r)&&(i=!0);else{i=!0;let n=[];for(let s of t){let o=e.indexOf(s);o<0?n.push(new GC(this.view,s)):(this.gutters[o].update(r),n.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),n.indexOf(s)<0&&s.destroy();for(let s of n)this.dom.appendChild(s.dom);this.gutters=n}return i}destroy(){for(let r of this.gutters)r.destroy();this.dom.remove()}},{provide:r=>nt.scrollMargins.of(e=>{let t=e.plugin(r);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==Gi.LTR?{left:t.dom.offsetWidth}:{right:t.dom.offsetWidth}})});function ZC(r){return Array.isArray(r)?r:[r]}function VM(r,e,t){for(;r.value&&r.from<=t;)r.from==t&&e.push(r.value),r.next()}class X6{constructor(e,t,i){this.gutter=e,this.height=i,this.localMarkers=[],this.i=0,this.cursor=ai.iter(e.markers,t.from)}line(e,t,i){this.localMarkers.length&&(this.localMarkers=[]),VM(this.cursor,this.localMarkers,t.from);let n=i.length?this.localMarkers.concat(i):this.localMarkers,s=this.gutter.config.lineMarker(e,t,n);s&&n.unshift(s);let o=this.gutter;if(n.length==0&&!o.config.renderEmptyElements)return;let l=t.top-this.height;if(this.i==o.elements.length){let a=new jM(e,t.height,l,n);o.elements.push(a),o.dom.appendChild(a.dom)}else o.elements[this.i].update(e,t.height,l,n);this.height=t.bottom,this.i++}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class GC{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,n=>{let s=e.lineBlockAtHeight(n.clientY-e.documentTop);t.domEventHandlers[i](e,s,n)&&n.preventDefault()});this.markers=ZC(t.markers(e)),t.initialSpacer&&(this.spacer=new jM(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=ZC(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let n=this.config.updateSpacer(this.spacer.markers[0],e);n!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[n])}let i=e.view.viewport;return!ai.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class jM{constructor(e,t,i,n){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,n)}update(e,t,i,n){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),Z6(this.markers,n)||this.setMarkers(e,n)}setMarkers(e,t){let i="cm-gutterElement",n=this.dom.firstChild;for(let s=0,o=0;;){let l=o,a=s<t.length?t[s++]:null,h=!1;if(a){let u=a.elementClass;u&&(i+=" "+u);for(let f=o;f<this.markers.length;f++)if(this.markers[f].compare(a)){l=f,h=!0;break}}else l=this.markers.length;for(;o<l;){let u=this.markers[o++];if(u.toDOM){u.destroy(n);let f=n.nextSibling;n.remove(),n=f}}if(!a)break;a.toDOM&&(h?n=n.nextSibling:this.dom.insertBefore(a.toDOM(e),n)),h&&o++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function Z6(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(!r[t].compare(e[t]))return!1;return!0}const G6=Ie.define(),Pu=Ie.define({combine(r){return np(r,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let n in t){let s=i[n],o=t[n];i[n]=s?(l,a,h)=>s(l,a,h)||o(l,a,h):o}return i}})}});class xO extends Na{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function CO(r,e){return r.state.facet(Pu).formatNumber(e,r.state)}const U6=xm.compute([Pu],r=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(G6)},lineMarker(e,t,i){return i.some(n=>n.toDOM)?null:new xO(CO(e,e.state.doc.lineAt(t.from).number))},lineMarkerChange:e=>e.startState.facet(Pu)!=e.state.facet(Pu),initialSpacer(e){return new xO(CO(e,UC(e.state.doc.lines)))},updateSpacer(e,t){let i=CO(t.view,UC(t.view.state.doc.lines));return i==e.number?e:new xO(i)},domEventHandlers:r.facet(Pu).domEventHandlers}));function Y6(r={}){return[Pu.of(r),H6(),U6]}function UC(r){let e=9;for(;e<r;)e=e*10+9;return e}const K6=new class extends Na{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},J6=Sm.compute(["selection"],r=>{let e=[],t=-1;for(let i of r.selection.ranges)if(i.empty){let n=r.doc.lineAt(i.head).from;n>t&&(t=n,e.push(K6.range(n)))}return ai.of(e)});function ez(){return J6}class Nt{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){let n=[];return this.decompose(0,e,n,2),i.length&&i.decompose(0,i.length,n,3),this.decompose(t,this.length,n,1),Ro.from(n,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let i=[];return this.decompose(e,t,i,0),Ro.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),n=new Gc(this),s=new Gc(e);for(let o=t,l=t;;){if(n.next(o),s.next(o),o=0,n.lineBreak!=s.lineBreak||n.done!=s.done||n.value!=s.value)return!1;if(l+=n.value.length,n.done||l>=i)return!0}}iter(e=1){return new Gc(this,e)}iterRange(e,t=this.length){return new FM(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let n=this.line(e).from;i=this.iterRange(n,Math.max(n,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new HM(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Nt.empty:e.length<=32?new Ni(e):Ro.from(Ni.split(e,[]))}}class Ni extends Nt{constructor(e,t=tz(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,n){for(let s=0;;s++){let o=this.text[s],l=n+o.length;if((t?i:l)>=e)return new iz(n,l,i,o);n=l+1,i++}}decompose(e,t,i,n){let s=e<=0&&t>=this.length?this:new Ni(YC(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(n&1){let o=i.pop(),l=Cm(s.text,o.text.slice(),0,s.length);if(l.length<=32)i.push(new Ni(l,o.length+s.length));else{let a=l.length>>1;i.push(new Ni(l.slice(0,a)),new Ni(l.slice(a)))}}else i.push(s)}replace(e,t,i){if(!(i instanceof Ni))return super.replace(e,t,i);let n=Cm(this.text,Cm(i.text,YC(this.text,0,e)),t),s=this.length+i.length-(t-e);return n.length<=32?new Ni(n,s):Ro.from(Ni.split(n,[]),s)}sliceString(e,t=this.length,i=`
`){let n="";for(let s=0,o=0;s<=t&&o<this.text.length;o++){let l=this.text[o],a=s+l.length;s>e&&o&&(n+=i),e<a&&t>s&&(n+=l.slice(Math.max(0,e-s),t-s)),s=a+1}return n}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],n=-1;for(let s of e)i.push(s),n+=s.length+1,i.length==32&&(t.push(new Ni(i,n)),i=[],n=-1);return n>-1&&t.push(new Ni(i,n)),t}}class Ro extends Nt{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,n){for(let s=0;;s++){let o=this.children[s],l=n+o.length,a=i+o.lines-1;if((t?a:l)>=e)return o.lineInner(e,t,i,n);n=l+1,i=a+1}}decompose(e,t,i,n){for(let s=0,o=0;o<=t&&s<this.children.length;s++){let l=this.children[s],a=o+l.length;if(e<=a&&t>=o){let h=n&((o<=e?1:0)|(a>=t?2:0));o>=e&&a<=t&&!h?i.push(l):l.decompose(e-o,t-o,i,h)}o=a+1}}replace(e,t,i){if(i.lines<this.lines)for(let n=0,s=0;n<this.children.length;n++){let o=this.children[n],l=s+o.length;if(e>=s&&t<=l){let a=o.replace(e-s,t-s,i),h=this.lines-o.lines+a.lines;if(a.lines<h>>5-1&&a.lines>h>>5+1){let u=this.children.slice();return u[n]=a,new Ro(u,this.length-(t-e)+i.length)}return super.replace(s,l,a)}s=l+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){let n="";for(let s=0,o=0;s<this.children.length&&o<=t;s++){let l=this.children[s],a=o+l.length;o>e&&s&&(n+=i),e<a&&t>o&&(n+=l.sliceString(e-o,t-o,i)),o=a+1}return n}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Ro))return 0;let i=0,[n,s,o,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;n+=t,s+=t){if(n==o||s==l)return i;let a=this.children[n],h=e.children[s];if(a!=h)return i+a.scanIdentical(h,t);i+=a.length+1}}static from(e,t=e.reduce((i,n)=>i+n.length+1,-1)){let i=0;for(let d of e)i+=d.lines;if(i<32){let d=[];for(let g of e)g.flatten(d);return new Ni(d,t)}let n=Math.max(32,i>>5),s=n<<1,o=n>>1,l=[],a=0,h=-1,u=[];function f(d){let g;if(d.lines>s&&d instanceof Ro)for(let w of d.children)f(w);else d.lines>o&&(a>o||!a)?(c(),l.push(d)):d instanceof Ni&&a&&(g=u[u.length-1])instanceof Ni&&d.lines+g.lines<=32?(a+=d.lines,h+=d.length+1,u[u.length-1]=new Ni(g.text.concat(d.text),g.length+1+d.length)):(a+d.lines>n&&c(),a+=d.lines,h+=d.length+1,u.push(d))}function c(){a!=0&&(l.push(u.length==1?u[0]:Ro.from(u,h)),h=-1,a=u.length=0)}for(let d of e)f(d);return c(),l.length==1?l[0]:new Ro(l,t)}}Nt.empty=new Ni([""],0);function tz(r){let e=-1;for(let t of r)e+=t.length+1;return e}function Cm(r,e,t=0,i=1e9){for(let n=0,s=0,o=!0;s<r.length&&n<=i;s++){let l=r[s],a=n+l.length;a>=t&&(a>i&&(l=l.slice(0,i-n)),n<t&&(l=l.slice(t-n)),o?(e[e.length-1]+=l,o=!1):e.push(l)),n=a+1}return e}function YC(r,e,t){return Cm(r,[""],e,t)}class Gc{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Ni?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,n=this.nodes[i],s=this.offsets[i],o=s>>1,l=n instanceof Ni?n.text.length:n.children.length;if(o==(t>0?l:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(n instanceof Ni){let a=n.text[o+(t<0?-1:0)];if(this.offsets[i]+=t,a.length>Math.max(0,e))return this.value=e==0?a:t>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=n.children[o+(t<0?-1:0)];e>a.length?(e-=a.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(a),this.offsets.push(t>0?1:(a instanceof Ni?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class FM{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new Gc(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:n}=this.cursor.next(e);return this.pos+=(n.length+e)*t,this.value=n.length<=i?n:t<0?n.slice(n.length-i):n.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class HM{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:n}=this.inner.next(e);return t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=n,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol!="undefined"&&(Nt.prototype[Symbol.iterator]=function(){return this.iter()},Gc.prototype[Symbol.iterator]=FM.prototype[Symbol.iterator]=HM.prototype[Symbol.iterator]=function(){return this});class iz{constructor(e,t,i,n){this.from=e,this.to=t,this.number=i,this.text=n}get length(){return this.to-this.from}}let Eu="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(r=>r?parseInt(r,36):1);for(let r=1;r<Eu.length;r++)Eu[r]+=Eu[r-1];function nz(r){for(let e=1;e<Eu.length;e+=2)if(Eu[e]>r)return Eu[e-1]<=r;return!1}function KC(r){return r>=127462&&r<=127487}const JC=8205;function aa(r,e,t=!0,i=!0){return(t?qM:rz)(r,e,i)}function qM(r,e,t){if(e==r.length)return e;e&&XM(r.charCodeAt(e))&&ZM(r.charCodeAt(e-1))&&e--;let i=AO(r,e);for(e+=eA(i);e<r.length;){let n=AO(r,e);if(i==JC||n==JC||t&&nz(n))e+=eA(n),i=n;else if(KC(n)){let s=0,o=e-2;for(;o>=0&&KC(AO(r,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function rz(r,e,t){for(;e>0;){let i=qM(r,e-2,t);if(i<e)return i;e--}return 0}function XM(r){return r>=56320&&r<57344}function ZM(r){return r>=55296&&r<56320}function AO(r,e){let t=r.charCodeAt(e);if(!ZM(t)||e+1==r.length)return t;let i=r.charCodeAt(e+1);return XM(i)?(t-55296<<10)+(i-56320)+65536:t}function eA(r){return r<65536?1:2}const ty=/\r\n?|\n/;var qr=function(r){return r[r.Simple=0]="Simple",r[r.TrackDel=1]="TrackDel",r[r.TrackBefore=2]="TrackBefore",r[r.TrackAfter=3]="TrackAfter",r}(qr||(qr={}));class cl{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,n=0;t<this.sections.length;){let s=this.sections[t++],o=this.sections[t++];o<0?(e(i,n,s),n+=s):n+=o,i+=s}}iterChangedRanges(e,t=!1){iy(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];n<0?e.push(i,n):e.push(n,i)}return new cl(e)}composeDesc(e){return this.empty?e:e.empty?this:GM(this,e)}mapDesc(e,t=!1){return e.empty?this:ny(this,e,t)}mapPos(e,t=-1,i=qr.Simple){let n=0,s=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],h=n+l;if(a<0){if(h>e)return s+(e-n);s+=l}else{if(i!=qr.Simple&&h>=e&&(i==qr.TrackDel&&n<e&&h>e||i==qr.TrackBefore&&n<e||i==qr.TrackAfter&&h>e))return null;if(h>e||h==e&&t<0&&!l)return e==n||t<0?s:s+a;s+=a}n=h}if(e>n)throw new RangeError(`Position ${e} is out of range for changeset of length ${n}`);return s}touchesRange(e,t=e){for(let i=0,n=0;i<this.sections.length&&n<=t;){let s=this.sections[i++],o=this.sections[i++],l=n+s;if(o>=0&&n<=t&&l>=e)return n<e&&l>t?"cover":!0;n=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];e+=(e?" ":"")+i+(n>=0?":"+n:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new cl(e)}static create(e){return new cl(e)}}class ln extends cl{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return iy(this,(t,i,n,s,o)=>e=e.replace(n,n+(i-t),o),!1),e}mapDesc(e,t=!1){return ny(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let n=0,s=0;n<t.length;n+=2){let o=t[n],l=t[n+1];if(l>=0){t[n]=l,t[n+1]=o;let a=n>>1;for(;i.length<a;)i.push(Nt.empty);i.push(o?e.slice(s,s+o):Nt.empty)}s+=o}return new ln(t,i)}compose(e){return this.empty?e:e.empty?this:GM(this,e,!0)}map(e,t=!1){return e.empty?this:ny(this,e,t,!0)}iterChanges(e,t=!1){iy(this,e,t)}get desc(){return cl.create(this.sections)}filter(e){let t=[],i=[],n=[],s=new bd(this);e:for(let o=0,l=0;;){let a=o==e.length?1e9:e[o++];for(;l<a||l==a&&s.len==0;){if(s.done)break e;let u=Math.min(s.len,a-l);fr(n,u,-1);let f=s.ins==-1?-1:s.off==0?s.ins:0;fr(t,u,f),f>0&&dh(i,t,s.text),s.forward(u),l+=u}let h=e[o++];for(;l<h;){if(s.done)break e;let u=Math.min(s.len,h-l);fr(t,u,-1),fr(n,u,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(u),l+=u}}return{changes:new ln(t,i),filtered:cl.create(n)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],n=this.sections[t+1];n<0?e.push(i):n==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let n=[],s=[],o=0,l=null;function a(u=!1){if(!u&&!n.length)return;o<t&&fr(n,t-o,-1);let f=new ln(n,s);l=l?l.compose(f.map(l)):f,n=[],s=[],o=0}function h(u){if(Array.isArray(u))for(let f of u)h(f);else if(u instanceof ln){if(u.length!=t)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${t})`);a(),l=l?l.compose(u.map(l)):u}else{let{from:f,to:c=f,insert:d}=u;if(f>c||f<0||c>t)throw new RangeError(`Invalid change range ${f} to ${c} (in doc of length ${t})`);let g=d?typeof d=="string"?Nt.of(d.split(i||ty)):d:Nt.empty,w=g.length;if(f==c&&w==0)return;f<o&&a(),f>o&&fr(n,f-o,-1),fr(n,c-f,w),dh(s,n,g),o=c}}return h(e),a(!l),l}static empty(e){return new ln(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let n=0;n<e.length;n++){let s=e[n];if(typeof s=="number")t.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)t.push(s[0],0);else{for(;i.length<n;)i.push(Nt.empty);i[n]=Nt.of(s.slice(1)),t.push(s[0],i[n].length)}}}return new ln(t,i)}static createSet(e,t){return new ln(e,t)}}function fr(r,e,t,i=!1){if(e==0&&t<=0)return;let n=r.length-2;n>=0&&t<=0&&t==r[n+1]?r[n]+=e:e==0&&r[n]==0?r[n+1]+=t:i?(r[n]+=e,r[n+1]+=t):r.push(e,t)}function dh(r,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<r.length)r[r.length-1]=r[r.length-1].append(t);else{for(;r.length<i;)r.push(Nt.empty);r.push(t)}}function iy(r,e,t){let i=r.inserted;for(let n=0,s=0,o=0;o<r.sections.length;){let l=r.sections[o++],a=r.sections[o++];if(a<0)n+=l,s+=l;else{let h=n,u=s,f=Nt.empty;for(;h+=l,u+=a,a&&i&&(f=f.append(i[o-2>>1])),!(t||o==r.sections.length||r.sections[o+1]<0);)l=r.sections[o++],a=r.sections[o++];e(n,h,s,u,f),n=h,s=u}}}function ny(r,e,t,i=!1){let n=[],s=i?[]:null,o=new bd(r),l=new bd(e);for(let a=0,h=0;;)if(o.ins==-1)a+=o.len,o.next();else if(l.ins==-1&&h<a){let u=Math.min(l.len,a-h);l.forward(u),fr(n,u,-1),h+=u}else if(l.ins>=0&&(o.done||h<a||h==a&&(l.len<o.len||l.len==o.len&&!t))){for(fr(n,l.ins,-1);a>h&&!o.done&&a+o.len<h+l.len;)a+=o.len,o.next();h+=l.len,l.next()}else if(o.ins>=0){let u=0,f=a+o.len;for(;;)if(l.ins>=0&&h>a&&h+l.len<f)u+=l.ins,h+=l.len,l.next();else if(l.ins==-1&&h<f){let c=Math.min(l.len,f-h);u+=c,l.forward(c),h+=c}else break;fr(n,u,o.ins),s&&dh(s,n,o.text),a=f,o.next()}else{if(o.done&&l.done)return s?ln.createSet(n,s):cl.create(n);throw new Error("Mismatched change set lengths")}}function GM(r,e,t=!1){let i=[],n=t?[]:null,s=new bd(r),o=new bd(e);for(let l=!1;;){if(s.done&&o.done)return n?ln.createSet(i,n):cl.create(i);if(s.ins==0)fr(i,s.len,0,l),s.next();else if(o.len==0&&!o.done)fr(i,0,o.ins,l),n&&dh(n,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(s.len2,o.len),h=i.length;if(s.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;fr(i,a,u,l),n&&u&&dh(n,i,o.text)}else o.ins==-1?(fr(i,s.off?0:s.len,a,l),n&&dh(n,i,s.textBit(a))):(fr(i,s.off?0:s.len,o.off?0:o.ins,l),n&&!o.off&&dh(n,i,o.text));l=(s.ins>a||o.ins>=0&&o.len>a)&&(l||i.length>h),s.forward2(a),o.forward(a)}}}}class bd{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Nt.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?Nt.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class ph{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,t=-1){let i,n;return this.empty?i=n=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),n=e.mapPos(this.to,-1)),i==this.from&&n==this.to?this:new ph(i,n,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return Ge.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return Ge.range(this.anchor,i)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Ge.range(e.anchor,e.head)}static create(e,t,i){return new ph(e,t,i)}}class Ge{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:Ge.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new Ge([this.main],0)}addRange(e,t=!0){return Ge.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,Ge.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Ge(e.ranges.map(t=>ph.fromJSON(t)),e.main)}static single(e,t=e){return new Ge([Ge.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,n=0;n<e.length;n++){let s=e[n];if(s.empty?s.from<=i:s.from<i)return Ge.normalized(e.slice(),t);i=s.to}return new Ge(e,t)}static cursor(e,t=0,i,n){return ph.create(e,e,(t==0?0:t<0?4:8)|(i==null?3:Math.min(2,i))|(n!=null?n:33554431)<<5)}static range(e,t,i){let n=(i!=null?i:33554431)<<5;return t<e?ph.create(t,e,16|n|8):ph.create(e,t,n|(t>e?4:0))}static normalized(e,t=0){let i=e[t];e.sort((n,s)=>n.from-s.from),t=e.indexOf(i);for(let n=1;n<e.length;n++){let s=e[n],o=e[n-1];if(s.empty?s.from<=o.to:s.from<o.to){let l=o.from,a=Math.max(s.to,o.to);n<=t&&t--,e.splice(--n,2,s.anchor>s.head?Ge.range(a,l):Ge.range(l,a))}}return new Ge(e,t)}}function UM(r,e){for(let t of r.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let X2=0;class Mt{constructor(e,t,i,n,s){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=n,this.extensions=s,this.id=X2++,this.default=e([])}static define(e={}){return new Mt(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:Z2),!!e.static,e.enables)}of(e){return new Am([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Am(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Am(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function Z2(r,e){return r==e||r.length==e.length&&r.every((t,i)=>t===e[i])}class Am{constructor(e,t,i,n){this.dependencies=e,this.facet=t,this.type=i,this.value=n,this.id=X2++}dynamicSlot(e){var t;let i=this.value,n=this.facet.compareInput,s=this.id,o=e[s]>>1,l=this.type==2,a=!1,h=!1,u=[];for(let f of this.dependencies)f=="doc"?a=!0:f=="selection"?h=!0:(((t=e[f.id])!==null&&t!==void 0?t:1)&1)==0&&u.push(e[f.id]);return{create(f){return f.values[o]=i(f),1},update(f,c){if(a&&c.docChanged||h&&(c.docChanged||c.selection)||ry(f,u)){let d=i(f);if(l?!tA(d,f.values[o],n):!n(d,f.values[o]))return f.values[o]=d,1}return 0},reconfigure:(f,c)=>{let d=i(f),g=c.config.address[s];if(g!=null){let w=d0(c,g);if(this.dependencies.every(S=>S instanceof Mt?c.facet(S)===f.facet(S):S instanceof Hf?c.field(S,!1)==f.field(S,!1):!0)||(l?tA(d,w,n):n(d,w)))return f.values[o]=w,0}return f.values[o]=d,1}}}}function tA(r,e,t){if(r.length!=e.length)return!1;for(let i=0;i<r.length;i++)if(!t(r[i],e[i]))return!1;return!0}function ry(r,e){let t=!1;for(let i of e)Uc(r,i)&1&&(t=!0);return t}function sz(r,e,t){let i=t.map(a=>r[a.id]),n=t.map(a=>a.type),s=i.filter(a=>!(a&1)),o=r[e.id]>>1;function l(a){let h=[];for(let u=0;u<i.length;u++){let f=d0(a,i[u]);if(n[u]==2)for(let c of f)h.push(c);else h.push(f)}return e.combine(h)}return{create(a){for(let h of i)Uc(a,h);return a.values[o]=l(a),1},update(a,h){if(!ry(a,s))return 0;let u=l(a);return e.compare(u,a.values[o])?0:(a.values[o]=u,1)},reconfigure(a,h){let u=ry(a,i),f=h.config.facets[e.id],c=h.facet(e);if(f&&!u&&Z2(t,f))return a.values[o]=c,0;let d=l(a);return e.compare(d,c)?(a.values[o]=c,0):(a.values[o]=d,1)}}}const iA=Mt.define({static:!0});class Hf{constructor(e,t,i,n,s){this.id=e,this.createF=t,this.updateF=i,this.compareF=n,this.spec=s,this.provides=void 0}static define(e){let t=new Hf(X2++,e.create,e.update,e.compare||((i,n)=>i===n),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(iA).find(i=>i.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,n)=>{let s=i.values[t],o=this.updateF(s,n);return this.compareF(s,o)?0:(i.values[t]=o,1)},reconfigure:(i,n)=>n.config.address[this.id]!=null?(i.values[t]=n.field(this),0):(i.values[t]=this.create(i),1)}}init(e){return[this,iA.of({field:this,create:e})]}get extension(){return this}}const yu={lowest:4,low:3,default:2,high:1,highest:0};function Kf(r){return e=>new YM(e,r)}const oz={highest:Kf(yu.highest),high:Kf(yu.high),default:Kf(yu.default),low:Kf(yu.low),lowest:Kf(yu.lowest)};class YM{constructor(e,t){this.inner=e,this.prec=t}}class Pb{of(e){return new sy(this,e)}reconfigure(e){return Pb.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class sy{constructor(e,t){this.compartment=e,this.inner=t}}class c0{constructor(e,t,i,n,s,o){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=n,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let n=[],s=Object.create(null),o=new Map;for(let c of lz(e,t,o))c instanceof Hf?n.push(c):(s[c.facet.id]||(s[c.facet.id]=[])).push(c);let l=Object.create(null),a=[],h=[];for(let c of n)l[c.id]=h.length<<1,h.push(d=>c.slot(d));let u=i==null?void 0:i.config.facets;for(let c in s){let d=s[c],g=d[0].facet,w=u&&u[c]||[];if(d.every(S=>S.type==0))if(l[g.id]=a.length<<1|1,Z2(w,d))a.push(i.facet(g));else{let S=g.combine(d.map(x=>x.value));a.push(i&&g.compare(S,i.facet(g))?i.facet(g):S)}else{for(let S of d)S.type==0?(l[S.id]=a.length<<1|1,a.push(S.value)):(l[S.id]=h.length<<1,h.push(x=>S.dynamicSlot(x)));l[g.id]=h.length<<1,h.push(S=>sz(S,g,d))}}let f=h.map(c=>c(l));return new c0(e,o,f,l,a,s)}}function lz(r,e,t){let i=[[],[],[],[],[]],n=new Map;function s(o,l){let a=n.get(o);if(a!=null){if(a<=l)return;let h=i[a].indexOf(o);h>-1&&i[a].splice(h,1),o instanceof sy&&t.delete(o.compartment)}if(n.set(o,l),Array.isArray(o))for(let h of o)s(h,l);else if(o instanceof sy){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let h=e.get(o.compartment)||o.inner;t.set(o.compartment,h),s(h,l)}else if(o instanceof YM)s(o.inner,o.prec);else if(o instanceof Hf)i[l].push(o),o.provides&&s(o.provides,l);else if(o instanceof Am)i[l].push(o),o.facet.extensions&&s(o.facet.extensions,l);else{let h=o.extension;if(!h)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(h,l)}}return s(r,yu.default),i.reduce((o,l)=>o.concat(l))}function Uc(r,e){if(e&1)return 2;let t=e>>1,i=r.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;r.status[t]=4;let n=r.computeSlot(r,r.config.dynamicSlots[t]);return r.status[t]=2|n}function d0(r,e){return e&1?r.config.staticValues[e>>1]:r.values[e>>1]}const KM=Mt.define(),JM=Mt.define({combine:r=>r.some(e=>e),static:!0}),eR=Mt.define({combine:r=>r.length?r[0]:void 0,static:!0}),tR=Mt.define(),iR=Mt.define(),nR=Mt.define(),rR=Mt.define({combine:r=>r.length?r[0]:!1});class op{constructor(e,t){this.type=e,this.value=t}static define(){return new az}}class az{of(e){return new op(this,e)}}class hz{constructor(e){this.map=e}of(e){return new Pn(this,e)}}class Pn{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new Pn(this.type,t)}is(e){return this.type==e}static define(e={}){return new hz(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let n of e){let s=n.map(t);s&&i.push(s)}return i}}Pn.reconfigure=Pn.define();Pn.appendConfig=Pn.define();class Zn{constructor(e,t,i,n,s,o){this.startState=e,this.changes=t,this.selection=i,this.effects=n,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&UM(i,t.newLength),s.some(l=>l.type==Zn.time)||(this.annotations=s.concat(Zn.time.of(Date.now())))}static create(e,t,i,n,s,o){return new Zn(e,t,i,n,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Zn.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Zn.time=op.define();Zn.userEvent=op.define();Zn.addToHistory=op.define();Zn.remote=op.define();function uz(r,e){let t=[];for(let i=0,n=0;;){let s,o;if(i<r.length&&(n==e.length||e[n]>=r[i]))s=r[i++],o=r[i++];else if(n<e.length)s=e[n++],o=e[n++];else return t;!t.length||t[t.length-1]<s?t.push(s,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function sR(r,e,t){var i;let n,s,o;return t?(n=e.changes,s=ln.empty(e.changes.length),o=r.changes.compose(e.changes)):(n=e.changes.map(r.changes),s=r.changes.mapDesc(e.changes,!0),o=r.changes.compose(n)),{changes:o,selection:e.selection?e.selection.map(s):(i=r.selection)===null||i===void 0?void 0:i.map(n),effects:Pn.mapEffects(r.effects,n).concat(Pn.mapEffects(e.effects,s)),annotations:r.annotations.length?r.annotations.concat(e.annotations):e.annotations,scrollIntoView:r.scrollIntoView||e.scrollIntoView}}function oy(r,e,t){let i=e.selection,n=Bu(e.annotations);return e.userEvent&&(n=n.concat(Zn.userEvent.of(e.userEvent))),{changes:e.changes instanceof ln?e.changes:ln.of(e.changes||[],t,r.facet(eR)),selection:i&&(i instanceof Ge?i:Ge.single(i.anchor,i.head)),effects:Bu(e.effects),annotations:n,scrollIntoView:!!e.scrollIntoView}}function oR(r,e,t){let i=oy(r,e.length?e[0]:{},r.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(t=!1);let o=!!e[s].sequential;i=sR(i,oy(r,e[s],o?i.changes.newLength:r.doc.length),o)}let n=Zn.create(r,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return cz(t?fz(n):n)}function fz(r){let e=r.startState,t=!0;for(let n of e.facet(tR)){let s=n(r);if(s===!1){t=!1;break}Array.isArray(s)&&(t=t===!0?s:uz(t,s))}if(t!==!0){let n,s;if(t===!1)s=r.changes.invertedDesc,n=ln.empty(e.doc.length);else{let o=r.changes.filter(t);n=o.changes,s=o.filtered.invertedDesc}r=Zn.create(e,n,r.selection&&r.selection.map(s),Pn.mapEffects(r.effects,s),r.annotations,r.scrollIntoView)}let i=e.facet(iR);for(let n=i.length-1;n>=0;n--){let s=i[n](r);s instanceof Zn?r=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Zn?r=s[0]:r=oR(e,Bu(s),!1)}return r}function cz(r){let e=r.startState,t=e.facet(nR),i=r;for(let n=t.length-1;n>=0;n--){let s=t[n](r);s&&Object.keys(s).length&&(i=sR(r,oy(e,s,r.changes.newLength),!0))}return i==r?r:Zn.create(e,r.changes,r.selection,i.effects,i.annotations,i.scrollIntoView)}const dz=[];function Bu(r){return r==null?dz:Array.isArray(r)?r:[r]}var ol=function(r){return r[r.Word=0]="Word",r[r.Space=1]="Space",r[r.Other=2]="Other",r}(ol||(ol={}));const pz=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let ly;try{ly=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function gz(r){if(ly)return ly.test(r);for(let e=0;e<r.length;e++){let t=r[e];if(/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||pz.test(t)))return!0}return!1}function mz(r){return e=>{if(!/\S/.test(e))return ol.Space;if(gz(e))return ol.Word;for(let t=0;t<r.length;t++)if(e.indexOf(r[t])>-1)return ol.Word;return ol.Other}}class si{constructor(e,t,i,n,s,o){this.config=e,this.doc=t,this.selection=i,this.values=n,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)Uc(this,l<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return Uc(this,i),d0(this,i)}update(...e){return oR(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:n}=t;for(let o of e.effects)o.is(Pb.reconfigure)?(t&&(n=new Map,t.compartments.forEach((l,a)=>n.set(a,l)),t=null),n.set(o.value.compartment,o.value.extension)):o.is(Pn.reconfigure)?(t=null,i=o.value):o.is(Pn.appendConfig)&&(t=null,i=Bu(i).concat(o.value));let s;t?s=e.startState.values.slice():(t=c0.resolve(i,n,this),s=new si(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(l,a)=>a.reconfigure(l,this),null).values),new si(t,e.newDoc,e.newSelection,s,(o,l)=>l.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:Ge.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),n=this.changes(i.changes),s=[i.range],o=Bu(i.effects);for(let l=1;l<t.ranges.length;l++){let a=e(t.ranges[l]),h=this.changes(a.changes),u=h.map(n);for(let c=0;c<l;c++)s[c]=s[c].map(u);let f=n.mapDesc(h,!0);s.push(a.range.map(f)),n=n.compose(u),o=Pn.mapEffects(o,u).concat(Pn.mapEffects(Bu(a.effects),f))}return{changes:n,selection:Ge.create(s,t.mainIndex),effects:o}}changes(e=[]){return e instanceof ln?e:ln.of(e,this.doc.length,this.facet(si.lineSeparator))}toText(e){return Nt.of(e.split(this.facet(si.lineSeparator)||ty))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Uc(this,t),d0(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let n=e[i];n instanceof Hf&&(t[i]=n.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let n=[];if(i)for(let s in i){let o=i[s],l=e[s];n.push(o.init(a=>o.spec.fromJSON(l,a)))}return si.create({doc:e.doc,selection:Ge.fromJSON(e.selection),extensions:t.extensions?n.concat([t.extensions]):n})}static create(e={}){let t=c0.resolve(e.extensions||[],new Map),i=e.doc instanceof Nt?e.doc:Nt.of((e.doc||"").split(t.staticFacet(si.lineSeparator)||ty)),n=e.selection?e.selection instanceof Ge?e.selection:Ge.single(e.selection.anchor,e.selection.head):Ge.single(0);return UM(n,i.length),t.staticFacet(JM)||(n=n.asSingle()),new si(t,i,n,t.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(si.tabSize)}get lineBreak(){return this.facet(si.lineSeparator)||`
`}get readOnly(){return this.facet(rR)}phrase(e,...t){for(let i of this.facet(si.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,n)=>{if(n=="$")return"$";let s=+(n||1);return s>t.length?i:t[s-1]})),e}languageDataAt(e,t,i=-1){let n=[];for(let s of this.facet(KM))for(let o of s(this,t,i))Object.prototype.hasOwnProperty.call(o,e)&&n.push(o[e]);return n}charCategorizer(e){return mz(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:n}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,l=e-i;for(;o>0;){let a=aa(t,o,!1);if(s(t.slice(a,o))!=ol.Word)break;o=a}for(;l<n;){let a=aa(t,l);if(s(t.slice(l,a))!=ol.Word)break;l=a}return o==l?null:Ge.range(o+i,l+i)}}si.allowMultipleSelections=JM;si.tabSize=Mt.define({combine:r=>r.length?r[0]:4});si.lineSeparator=eR;si.readOnly=rR;si.phrases=Mt.define({compare(r,e){let t=Object.keys(r),i=Object.keys(e);return t.length==i.length&&t.every(n=>r[n]==e[n])}});si.languageData=KM;si.changeFilter=tR;si.transactionFilter=iR;si.transactionExtender=nR;Pb.reconfigure=Pn.define();class tf{eq(e){return this==e}range(e,t=e){return Od.create(e,t,this)}}tf.prototype.startSide=tf.prototype.endSide=0;tf.prototype.point=!1;tf.prototype.mapMode=qr.TrackDel;class Od{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new Od(e,t,i)}}function ay(r,e){return r.from-e.from||r.value.startSide-e.value.startSide}class G2{constructor(e,t,i,n){this.from=e,this.to=t,this.value=i,this.maxPoint=n}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,n=0){let s=i?this.to:this.from;for(let o=n,l=s.length;;){if(o==l)return o;let a=o+l>>1,h=s[a]-e||(i?this.value[a].endSide:this.value[a].startSide)-t;if(a==o)return h>=0?o:l;h>=0?l=a:o=a+1}}between(e,t,i,n){for(let s=this.findIndex(t,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(n(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,t){let i=[],n=[],s=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let h=this.value[a],u=this.from[a]+e,f=this.to[a]+e,c,d;if(u==f){let g=t.mapPos(u,h.startSide,h.mapMode);if(g==null||(c=d=g,h.startSide!=h.endSide&&(d=t.mapPos(u,h.endSide),d<c)))continue}else if(c=t.mapPos(u,h.startSide),d=t.mapPos(f,h.endSide),c>d||c==d&&h.startSide>0&&h.endSide<=0)continue;(d-c||h.endSide-h.startSide)<0||(o<0&&(o=c),h.point&&(l=Math.max(l,d-c)),i.push(h),n.push(c-o),s.push(d-o))}return{mapped:i.length?new G2(n,s,i,l):null,pos:o}}}class Xi{constructor(e,t,i,n){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=n}static create(e,t,i,n){return new Xi(e,t,i,n)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:n=0,filterTo:s=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(i&&(t=t.slice().sort(ay)),this.isEmpty)return t.length?Xi.of(t):this;let l=new lR(this,null,-1).goto(0),a=0,h=[],u=new p0;for(;l.value||a<t.length;)if(a<t.length&&(l.from-t[a].from||l.startSide-t[a].value.startSide)>=0){let f=t[a++];u.addInner(f.from,f.to,f.value)||h.push(f)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(l.chunkIndex)<t[a].from)&&(!o||n>this.chunkEnd(l.chunkIndex)||s<this.chunkPos[l.chunkIndex])&&u.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||n>l.to||s<l.from||o(l.from,l.to,l.value))&&(u.addInner(l.from,l.to,l.value)||h.push(Od.create(l.from,l.to,l.value))),l.next());return u.finishInner(this.nextLayer.isEmpty&&!h.length?Xi.empty:this.nextLayer.update({add:h,filter:o,filterFrom:n,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],n=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],h=e.touchesRange(l,l+a.length);if(h===!1)n=Math.max(n,a.maxPoint),t.push(a),i.push(e.mapPos(l));else if(h===!0){let{mapped:u,pos:f}=a.map(l,e);u&&(n=Math.max(n,u.maxPoint),t.push(u),i.push(f))}}let s=this.nextLayer.map(e);return t.length==0?s:new Xi(i,t,s||Xi.empty,n)}between(e,t,i){if(!this.isEmpty){for(let n=0;n<this.chunk.length;n++){let s=this.chunkPos[n],o=this.chunk[n];if(t>=s&&e<=s+o.length&&o.between(s,e-s,t-s,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return kd.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return kd.from(e).goto(t)}static compare(e,t,i,n,s=-1){let o=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=s),l=t.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=s),a=nA(o,l,i),h=new Jf(o,a,s),u=new Jf(l,a,s);i.iterGaps((f,c,d)=>rA(h,f,u,c,d,n)),i.empty&&i.length==0&&rA(h,0,u,0,0,n)}static eq(e,t,i=0,n){n==null&&(n=1e9);let s=e.filter(u=>!u.isEmpty&&t.indexOf(u)<0),o=t.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let l=nA(s,o),a=new Jf(s,l,0).goto(i),h=new Jf(o,l,0).goto(i);for(;;){if(a.to!=h.to||!hy(a.active,h.active)||a.point&&(!h.point||!a.point.eq(h.point)))return!1;if(a.to>n)return!0;a.next(),h.next()}}static spans(e,t,i,n,s=-1){let o=new Jf(e,null,s).goto(t),l=t,a=o.openStart;for(;;){let h=Math.min(o.to,i);if(o.point?(n.point(l,h,o.point,o.activeForPoint(o.to),a,o.pointRank),a=o.openEnd(h)+(o.to>h?1:0)):h>l&&(n.span(l,h,o.active,a),a=o.openEnd(h)),o.to>i)break;l=o.to,o.next()}return a}static of(e,t=!1){let i=new p0;for(let n of e instanceof Od?[e]:t?bz(e):e)i.add(n.from,n.to,n.value);return i.finish()}}Xi.empty=new Xi([],[],null,-1);function bz(r){if(r.length>1)for(let e=r[0],t=1;t<r.length;t++){let i=r[t];if(ay(e,i)>0)return r.slice().sort(ay);e=i}return r}Xi.empty.nextLayer=Xi.empty;class p0{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new G2(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new p0)).add(e,t,i)}addInner(e,t,i){let n=e-this.lastTo||i.startSide-this.last.endSide;if(n<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return n<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(Xi.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Xi.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function nA(r,e,t){let i=new Map;for(let s of r)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let n=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let l=i.get(s.chunk[o]);l!=null&&(t?t.mapPos(l):l)==s.chunkPos[o]&&!(t!=null&&t.touchesRange(l,l+s.chunk[o].length))&&n.add(s.chunk[o])}return n}class lR{constructor(e,t,i,n=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=n}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let n=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(n)||this.layer.chunkEnd(this.chunkIndex)<e||n.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let n=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<n)&&this.setRangeIndex(n)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class kd{constructor(e){this.heap=e}static from(e,t=null,i=-1){let n=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&n.push(new lR(o,t,i,s));return n.length==1?n[0]:new kd(n)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)TO(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)TO(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),TO(this.heap,0)}}}function TO(r,e){for(let t=r[e];;){let i=(e<<1)+1;if(i>=r.length)break;let n=r[i];if(i+1<r.length&&n.compare(r[i+1])>=0&&(n=r[i+1],i++),t.compare(n)<0)break;r[i]=t,r[e]=n,e=i}}class Jf{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=kd.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Gp(this.active,e),Gp(this.activeTo,e),Gp(this.activeRank,e),this.minActive=sA(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:n,rank:s}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=s;)t++;Up(this.active,t,i),Up(this.activeTo,t,n),Up(this.activeRank,t,s),e&&Up(e,t,this.cursor.from),this.minActive=sA(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null,n=0;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),i&&Gp(i,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.from<e&&(n=1),this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){let s=0;for(;s<i.length&&i[s]<e;)s++;this.openStart=s+n}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function rA(r,e,t,i,n,s){r.goto(e),t.goto(i);let o=i+n,l=i,a=i-e;for(;;){let h=r.to+a-t.to||r.endSide-t.endSide,u=h<0?r.to+a:t.to,f=Math.min(u,o);if(r.point||t.point?r.point&&t.point&&(r.point==t.point||r.point.eq(t.point))&&hy(r.activeForPoint(r.to+a),t.activeForPoint(t.to))||s.comparePoint(l,f,r.point,t.point):f>l&&!hy(r.active,t.active)&&s.compareRange(l,f,r.active,t.active),u>o)break;l=u,h<=0&&r.next(),h>=0&&t.next()}}function hy(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!=e[t]&&!r[t].eq(e[t]))return!1;return!0}function Gp(r,e){for(let t=e,i=r.length-1;t<i;t++)r[t]=r[t+1];r.pop()}function Up(r,e,t){for(let i=r.length-1;i>=e;i--)r[i+1]=r[i];r[e]=t}function sA(r,e){let t=-1,i=1e9;for(let n=0;n<e.length;n++)(e[n]-i||r[n].endSide-r[t].endSide)<0&&(t=n,i=e[n]);return t}function Oz(r,e,t,i){for(let n=0,s=0;;){if(s>=e)return n;if(n==r.length)break;s+=r.charCodeAt(n)==9?t-s%t:1,n=aa(r,n)}return i===!0?-1:r.length}function g0(r){let e;return r.nodeType==11?e=r.getSelection?r:r.ownerDocument:e=r,e.getSelection()}function nf(r,e){return e?r==e||r.contains(e.nodeType!=1?e.parentNode:e):!1}function kz(){let r=document.activeElement;for(;r&&r.shadowRoot;)r=r.shadowRoot.activeElement;return r}function uy(r,e){if(!e.anchorNode)return!1;try{return nf(r,e.anchorNode)}catch{return!1}}function wd(r){return r.nodeType==3?yd(r,0,r.nodeValue.length).getClientRects():r.nodeType==1?r.getClientRects():[]}function m0(r,e,t,i){return t?oA(r,e,t,i,-1)||oA(r,e,t,i,1):!1}function fy(r){for(var e=0;;e++)if(r=r.previousSibling,!r)return e}function oA(r,e,t,i,n){for(;;){if(r==t&&e==i)return!0;if(e==(n<0?0:b0(r))){if(r.nodeName=="DIV")return!1;let s=r.parentNode;if(!s||s.nodeType!=1)return!1;e=fy(r)+(n<0?0:1),r=s}else if(r.nodeType==1){if(r=r.childNodes[e+(n<0?-1:0)],r.nodeType==1&&r.contentEditable=="false")return!1;e=n<0?b0(r):0}else return!1}}function b0(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}const aR={left:0,right:0,top:0,bottom:0};function _b(r,e){let t=e?r.left:r.right;return{left:t,right:t,top:r.top,bottom:r.bottom}}function wz(r){return{left:0,right:r.innerWidth,top:0,bottom:r.innerHeight}}function yz(r,e,t,i,n,s,o,l){let a=r.ownerDocument,h=a.defaultView;for(let u=r;u;)if(u.nodeType==1){let f,c=u==a.body;if(c)f=wz(h);else{if(u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.parentNode;continue}let w=u.getBoundingClientRect();f={left:w.left,right:w.left+u.clientWidth,top:w.top,bottom:w.top+u.clientHeight}}let d=0,g=0;if(n=="nearest")e.top<f.top?(g=-(f.top-e.top+o),t>0&&e.bottom>f.bottom+g&&(g=e.bottom-f.bottom+g+o)):e.bottom>f.bottom&&(g=e.bottom-f.bottom+o,t<0&&e.top-g<f.top&&(g=-(f.top+g-e.top+o)));else{let w=e.bottom-e.top,S=f.bottom-f.top;g=(n=="center"&&w<=S?e.top+w/2-S/2:n=="start"||n=="center"&&t<0?e.top-o:e.bottom-S+o)-f.top}if(i=="nearest"?e.left<f.left?(d=-(f.left-e.left+s),t>0&&e.right>f.right+d&&(d=e.right-f.right+d+s)):e.right>f.right&&(d=e.right-f.right+s,t<0&&e.left<f.left+d&&(d=-(f.left+d-e.left+s))):d=(i=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:i=="start"==l?e.left-s:e.right-(f.right-f.left)+s)-f.left,d||g)if(c)h.scrollBy(d,g);else{if(g){let w=u.scrollTop;u.scrollTop+=g,g=u.scrollTop-w}if(d){let w=u.scrollLeft;u.scrollLeft+=d,d=u.scrollLeft-w}e={left:e.left-d,top:e.top-g,right:e.right-d,bottom:e.bottom-g}}if(c)break;u=u.assignedSlot||u.parentNode,i=n="nearest"}else if(u.nodeType==11)u=u.host;else break}class vz{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,t,i,n){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=n}}let gu=null;function hR(r){if(r.setActive)return r.setActive();if(gu)return r.focus(gu);let e=[];for(let t=r;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(r.focus(gu==null?{get preventScroll(){return gu={preventScroll:!0},!0}}:void 0),!gu){gu=!1;for(let t=0;t<e.length;){let i=e[t++],n=e[t++],s=e[t++];i.scrollTop!=n&&(i.scrollTop=n),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let lA;function yd(r,e,t=e){let i=lA||(lA=document.createRange());return i.setEnd(r,t),i.setStart(r,e),i}function Yc(r,e,t){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0},n=new KeyboardEvent("keydown",i);n.synthetic=!0,r.dispatchEvent(n);let s=new KeyboardEvent("keyup",i);return s.synthetic=!0,r.dispatchEvent(s),n.defaultPrevented||s.defaultPrevented}function Sz(r){for(;r;){if(r&&(r.nodeType==9||r.nodeType==11&&r.host))return r;r=r.assignedSlot||r.parentNode}return null}function uR(r){for(;r.attributes.length;)r.removeAttributeNode(r.attributes[0])}class _n{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new _n(e.parentNode,fy(e),t)}static after(e,t){return new _n(e.parentNode,fy(e)+1,t)}}const U2=[];class Ri{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e){if(this.dirty&2){let t=this.dom,i=null,n;for(let s of this.children){if(s.dirty){if(!s.dom&&(n=i?i.nextSibling:t.firstChild)){let o=Ri.get(n);(!o||!o.parent&&o.constructor==s.constructor)&&s.reuseDOM(n)}s.sync(e),s.dirty=0}if(n=i?i.nextSibling:t.firstChild,e&&!e.written&&e.node==t&&n!=s.dom&&(e.written=!0),s.dom.parentNode==t)for(;n&&n!=s.dom;)n=aA(n);else t.insertBefore(s.dom,n);i=s.dom}for(n=i?i.nextSibling:t.firstChild,n&&e&&e.node==t&&(e.written=!0);n;)n=aA(n)}else if(this.dirty&1)for(let t of this.children)t.dirty&&(t.sync(e),t.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let n=b0(e)==0?0:t==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;n==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?n=-1:n=1),e=s}n<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Ri.get(i);)i=i.nextSibling;if(!i)return this.length;for(let n=0,s=0;;n++){let o=this.children[n];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,t,i=0){let n=-1,s=-1,o=-1,l=-1;for(let a=0,h=i,u=i;a<this.children.length;a++){let f=this.children[a],c=h+f.length;if(h<e&&c>t)return f.domBoundsAround(e,t,h);if(c>=e&&n==-1&&(n=a,s=h),h>t&&f.dom.parentNode==this.dom){o=a,l=u;break}u=c,h=c+f.breakAfter}return{from:s,to:l<0?i+this.length:l,startDOM:(n?this.children[n-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),t.dirty&1)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=U2){this.markDirty();for(let n=e;n<t;n++){let s=this.children[n];s.parent==this&&s.destroy()}this.children.splice(e,t-e,...i);for(let n=0;n<i.length;n++)i[n].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new fR(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}merge(e,t,i,n,s,o){return!1}become(e){return!1}getSide(){return 0}destroy(){this.parent=null}}Ri.prototype.breakAfter=0;function aA(r){let e=r.nextSibling;return r.parentNode.removeChild(r),e}class fR{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function cR(r,e,t,i,n,s,o,l,a){let{children:h}=r,u=h.length?h[e]:null,f=s.length?s[s.length-1]:null,c=f?f.breakAfter:o;if(!(e==i&&u&&!o&&!c&&s.length<2&&u.merge(t,n,s.length?f:null,t==0,l,a))){if(i<h.length){let d=h[i];d&&n<d.length?(e==i&&(d=d.split(n),n=0),!c&&f&&d.merge(0,n,f,!0,0,a)?s[s.length-1]=d:(n&&d.merge(0,n,null,!1,0,a),s.push(d))):d!=null&&d.breakAfter&&(f?f.breakAfter=1:o=1),i++}for(u&&(u.breakAfter=o,t>0&&(!o&&s.length&&u.merge(t,u.length,s[0],!1,l,0)?u.breakAfter=s.shift().breakAfter:(t<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(t,u.length,null,!1,l,0),e++));e<i&&s.length;)if(h[i-1].become(s[s.length-1]))i--,s.pop(),a=s.length?0:l;else if(h[e].become(s[0]))e++,s.shift(),l=s.length?0:a;else break;!s.length&&e&&i<h.length&&!h[e-1].breakAfter&&h[i].merge(0,0,h[e-1],!1,l,a)&&e--,(e<i||s.length)&&r.replaceChildren(e,i,s)}}function dR(r,e,t,i,n,s){let o=r.childCursor(),{i:l,off:a}=o.findPos(t,1),{i:h,off:u}=o.findPos(e,-1),f=e-t;for(let c of i)f+=c.length;r.length+=f,cR(r,h,u,l,a,i,0,n,s)}let Xr=typeof navigator!="undefined"?navigator:{userAgent:"",vendor:"",platform:""},cy=typeof document!="undefined"?document:{documentElement:{style:{}}};const dy=/Edge\/(\d+)/.exec(Xr.userAgent),pR=/MSIE \d/.test(Xr.userAgent),py=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Xr.userAgent),$b=!!(pR||py||dy),hA=!$b&&/gecko\/(\d+)/i.test(Xr.userAgent),PO=!$b&&/Chrome\/(\d+)/.exec(Xr.userAgent),uA="webkitFontSmoothing"in cy.documentElement.style,gR=!$b&&/Apple Computer/.test(Xr.vendor),fA=gR&&(/Mobile\/\w+/.test(Xr.userAgent)||Xr.maxTouchPoints>2);var Fe={mac:fA||/Mac/.test(Xr.platform),windows:/Win/.test(Xr.platform),linux:/Linux|X11/.test(Xr.platform),ie:$b,ie_version:pR?cy.documentMode||6:py?+py[1]:dy?+dy[1]:0,gecko:hA,gecko_version:hA?+(/Firefox\/(\d+)/.exec(Xr.userAgent)||[0,0])[1]:0,chrome:!!PO,chrome_version:PO?+PO[1]:0,ios:fA,android:/Android\b/.test(Xr.userAgent),webkit:uA,safari:gR,webkit_version:uA?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:cy.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const xz=256;class Ia extends Ri{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return i&&(!(i instanceof Ia)||this.length-(t-e)+i.length>xz)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Ia(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new _n(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return gy(this.dom,e,t)}}class Zo extends Ri{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let n of t)n.setParent(this)}setAttrs(e){if(uR(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e)}merge(e,t,i,n,s,o){return i&&(!(i instanceof Zo&&i.mark.eq(this.mark))||e&&s<=0||t<this.length&&o<=0)?!1:(dR(this,e,t,i?i.children:[],s-1,o-1),this.markDirty(),!0)}split(e){let t=[],i=0,n=-1,s=0;for(let l of this.children){let a=i+l.length;a>e&&t.push(i<e?l.split(e-i):l),n<0&&i>=e&&(n=s),i=a,s++}let o=this.length-e;return this.length=e,n>-1&&(this.children.length=n,this.markDirty()),new Zo(this.mark,t,o)}domAtPos(e){return OR(this.dom,this.children,e)}coordsAt(e,t){return wR(this,e,t)}}function gy(r,e,t){let i=r.nodeValue.length;e>i&&(e=i);let n=e,s=e,o=0;e==0&&t<0||e==i&&t>=0?Fe.chrome||Fe.gecko||(e?(n--,o=1):s<i&&(s++,o=-1)):t<0?n--:s<i&&s++;let l=yd(r,n,s).getClientRects();if(!l.length)return aR;let a=l[(o?o<0:t>=0)?0:l.length-1];return Fe.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,h=>h.width)||a),o?_b(a,o<0):a||null}class ha extends Ri{constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}static create(e,t,i){return new(e.customView||ha)(e,t,i)}split(e){let t=ha.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,i,n,s,o){return i&&(!(i instanceof ha)||!this.widget.compare(i.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e.length==this.length&&e instanceof ha&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Nt.empty;let e=this;for(;e.parent;)e=e.parent;let t=e.editorView,i=t&&t.state.doc,n=this.posAtStart;return i?i.slice(n,n+this.length):Nt.empty}domAtPos(e){return e==0?_n.before(this.dom):_n.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.dom.getClientRects(),n=null;if(!i.length)return aR;for(let s=e>0?i.length-1:0;n=i[s],!(e>0?s==0:s==i.length-1||n.top<n.bottom);s+=e>0?-1:1);return e==0&&t>0||e==this.length&&t<=0?n:_b(n,e==0)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class mR extends ha{domAtPos(e){let{topView:t,text:i}=this.widget;return t?my(e,0,t,i,(n,s)=>n.domAtPos(s),n=>new _n(i,Math.min(n,i.nodeValue.length))):new _n(i,Math.min(e,i.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:i,text:n}=this.widget;return i?bR(e,t,i,n):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:i,text:n}=this.widget;return i?my(e,t,i,n,(s,o,l)=>s.coordsAt(o,l),(s,o)=>gy(n,s,o)):gy(n,e,t)}destroy(){var e;super.destroy(),(e=this.widget.topView)===null||e===void 0||e.destroy()}get isEditable(){return!0}}function my(r,e,t,i,n,s){if(t instanceof Zo){for(let o of t.children){let l=nf(o.dom,i),a=l?i.nodeValue.length:o.length;if(r<a||r==a&&o.getSide()<=0)return l?my(r,e,o,i,n,s):n(o,r,e);r-=a}return n(t,t.length,-1)}else return t.dom==i?s(r,e):n(t,r,e)}function bR(r,e,t,i){if(t instanceof Zo)for(let n of t.children){let s=0,o=nf(n.dom,i);if(nf(n.dom,r))return s+(o?bR(r,e,n,i):n.localPosFromDOM(r,e));s+=o?i.nodeValue.length:n.length}else if(t.dom==i)return Math.min(e,i.nodeValue.length);return t.localPosFromDOM(r,e)}class rf extends Ri{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof rf&&e.side==this.side}split(){return new rf(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return _n.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let t=this.dom.getBoundingClientRect(),i=Cz(this,this.side>0?-1:1);return i&&i.top<t.bottom&&i.bottom>t.top?{left:t.left,right:t.right,top:i.top,bottom:i.bottom}:t}get overrideDOMText(){return Nt.empty}}Ia.prototype.children=ha.prototype.children=rf.prototype.children=U2;function Cz(r,e){let t=r.parent,i=t?t.children.indexOf(r):-1;for(;t&&i>=0;)if(e<0?i>0:i<t.children.length){let n=t.children[i+e];if(n instanceof Ia){let s=n.coordsAt(e<0?n.length:0,e);if(s)return s}i+=e}else if(t instanceof Zo&&t.parent)i=t.parent.children.indexOf(t)+(e<0?0:1),t=t.parent;else{let n=t.dom.lastChild;if(n&&n.nodeName=="BR")return n.getClientRects()[0];break}}function OR(r,e,t){let i=0;for(let n=0;i<e.length;i++){let s=e[i],o=n+s.length;if(!(o==n&&s.getSide()<=0)){if(t>n&&t<o&&s.dom.parentNode==r)return s.domAtPos(t-n);if(t<=n)break;n=o}}for(;i>0;i--){let n=e[i-1].dom;if(n.parentNode==r)return _n.after(n)}return new _n(r,0)}function kR(r,e,t){let i,{children:n}=r;t>0&&e instanceof Zo&&n.length&&(i=n[n.length-1])instanceof Zo&&i.mark.eq(e.mark)?kR(i,e.children[0],t-1):(n.push(e),e.setParent(r)),r.length+=e.length}function wR(r,e,t){for(let s=0,o=0;o<r.children.length;o++){let l=r.children[o],a=s+l.length,h;if((t<=0||a==r.length||l.getSide()>0?a>=e:a>e)&&(e<a||o+1==r.children.length||(h=r.children[o+1]).length||h.getSide()>0)){let u=0;if(a==s){if(l.getSide()<=0)continue;u=t=-l.getSide()}let f=l.coordsAt(Math.max(0,e-s),t);return u&&f?_b(f,t<0):f}s=a}let i=r.dom.lastChild;if(!i)return r.dom.getBoundingClientRect();let n=wd(i);return n[n.length-1]||null}function by(r,e){for(let t in r)t=="class"&&e.class?e.class+=" "+r.class:t=="style"&&e.style?e.style+=";"+r.style:e[t]=r[t];return e}function Y2(r,e){if(r==e)return!0;if(!r||!e)return!1;let t=Object.keys(r),i=Object.keys(e);if(t.length!=i.length)return!1;for(let n of t)if(i.indexOf(n)==-1||r[n]!==e[n])return!1;return!0}function Oy(r,e,t){let i=null;if(e)for(let n in e)t&&n in t||r.removeAttribute(i=n);if(t)for(let n in t)e&&e[n]==t[n]||r.setAttribute(i=n,t[n]);return!!i}class Mb{eq(e){return!1}updateDOM(e){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}destroy(e){}}var en=function(r){return r[r.Text=0]="Text",r[r.WidgetBefore=1]="WidgetBefore",r[r.WidgetAfter=2]="WidgetAfter",r[r.WidgetRange=3]="WidgetRange",r}(en||(en={}));class Cn extends tf{constructor(e,t,i,n){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=n}get heightRelevant(){return!1}static mark(e){return new Rb(e)}static widget(e){let t=e.side||0,i=!!e.block;return t+=i?t>0?3e8:-4e8:t>0?1e8:-1e8,new Bh(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,n;if(e.isBlockGap)i=-5e8,n=4e8;else{let{start:s,end:o}=yR(e,t);i=(s?t?-3e8:-1:5e8)-1,n=(o?t?2e8:1:-6e8)+1}return new Bh(e,i,n,t,e.widget||null,!0)}static line(e){return new lp(e)}static set(e,t=!1){return Xi.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Cn.none=Xi.empty;class Rb extends Cn{constructor(e){let{start:t,end:i}=yR(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof Rb&&this.tagName==e.tagName&&this.class==e.class&&Y2(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Rb.prototype.point=!1;class lp extends Cn{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof lp&&Y2(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}lp.prototype.mapMode=qr.TrackBefore;lp.prototype.point=!0;class Bh extends Cn{constructor(e,t,i,n,s,o){super(t,i,s,e),this.block=n,this.isReplace=o,this.mapMode=n?t<=0?qr.TrackBefore:qr.TrackAfter:qr.TrackDel}get type(){return this.startSide<this.endSide?en.WidgetRange:this.startSide<=0?en.WidgetBefore:en.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof Bh&&Az(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Bh.prototype.point=!0;function yR(r,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=r;return t==null&&(t=r.inclusive),i==null&&(i=r.inclusive),{start:t!=null?t:e,end:i!=null?i:e}}function Az(r,e){return r==e||!!(r&&e&&r.compare(e))}function ky(r,e,t,i=0){let n=t.length-1;n>=0&&t[n]+i>=r?t[n]=Math.max(t[n],e):t.push(r,e)}class br extends Ri{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,n,s,o){if(i){if(!(i instanceof br))return!1;this.dom||i.transferDOM(this)}return n&&this.setDeco(i?i.attrs:null),dR(this,e,t,i?i.children:[],s,o),!0}split(e){let t=new br;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:n}=this.childPos(e);n&&(t.append(this.children[i].split(n),0),this.children[i].merge(n,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)t.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){!this.dom||(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Y2(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){kR(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=by(t,this.attrs||{})),i&&(this.attrs=by({class:i},this.attrs||{}))}domAtPos(e){return OR(this.dom,this.children,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.dirty|=6)}sync(e){var t;this.dom?this.dirty&4&&(uR(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Oy(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e);let i=this.dom.lastChild;for(;i&&Ri.get(i)instanceof Zo;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((t=Ri.get(i))===null||t===void 0?void 0:t.isEditable)==!1&&(!Fe.ios||!this.children.some(n=>n instanceof Ia))){let n=document.createElement("BR");n.cmIgnore=!0,this.dom.appendChild(n)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0;for(let t of this.children){if(!(t instanceof Ia))return null;let i=wd(t.dom);if(i.length!=1)return null;e+=i[0].width}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}}coordsAt(e,t){return wR(this,e,t)}become(e){return!1}get type(){return en.Text}static find(e,t){for(let i=0,n=0;i<e.children.length;i++){let s=e.children[i],o=n+s.length;if(o>=t){if(s instanceof br)return s;if(o>t)break}n=o+s.breakAfter}return null}}class Sh extends Ri{constructor(e,t,i){super(),this.widget=e,this.length=t,this.type=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,n,s,o){return i&&(!(i instanceof Sh)||!this.widget.compare(i.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?_n.before(this.dom):_n.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new Sh(this.widget,t,this.type);return i.breakAfter=this.breakAfter,i}get children(){return U2}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Nt.empty}domBoundsAround(){return null}become(e){return e instanceof Sh&&e.type==this.type&&e.widget.constructor==this.widget.constructor?(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class K2{constructor(e,t,i,n){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=n,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof Sh&&e.type==en.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new br),this.atCursorPos=!0),this.curLine}flushBuffer(e){this.pendingBuffer&&(this.curLine.append(Yp(new rf(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer([]),this.curLine=null,this.content.push(e)}finish(e){e?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,e--;continue}else this.text=s,this.textOff=0}let n=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(0,i)),this.getLine().append(Yp(new Ia(this.text.slice(this.textOff,this.textOff+n)),t),i),this.atCursorPos=!0,this.textOff+=n,e-=n,i=0}}span(e,t,i,n){this.buildText(t-e,i,n),this.pos=t,this.openStart<0&&(this.openStart=n)}point(e,t,i,n,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof Bh){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=t-e;if(i instanceof Bh)if(i.block){let{type:a}=i;a==en.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Sh(i.widget||new cA("div"),l,a))}else{let a=ha.create(i.widget||new cA("span"),l,i.startSide),h=this.atCursorPos&&!a.isEditable&&s<=n.length&&(e<t||i.startSide>0),u=!a.isEditable&&(e<t||i.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!h&&(this.pendingBuffer=0),this.flushBuffer(n),h&&(f.append(Yp(new rf(1),n),s),s=n.length+Math.max(0,s-n.length)),f.append(Yp(a,n),s),this.atCursorPos=u,this.pendingBuffer=u?e<t?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=s)}static build(e,t,i,n,s){let o=new K2(e,t,i,s);return o.openEnd=Xi.spans(n,t,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Yp(r,e){for(let t of e)r=new Zo(t,[r],r.length);return r}class cA extends Mb{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}}const vR=Mt.define(),SR=Mt.define(),xR=Mt.define(),CR=Mt.define(),wy=Mt.define(),AR=Mt.define(),TR=Mt.define({combine:r=>r.some(e=>e)});class O0{constructor(e,t="nearest",i="nearest",n=5,s=5){this.range=e,this.y=t,this.x=i,this.yMargin=n,this.xMargin=s}map(e){return e.empty?this:new O0(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const dA=Pn.define({map:(r,e)=>r.map(e)});function xh(r,e,t){let i=r.facet(CR);i.length?i[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const ap=Mt.define({combine:r=>r.length?r[0]:!0});let Tz=0;const Qc=Mt.define();class k0{constructor(e,t,i,n){this.id=e,this.create=t,this.domEventHandlers=i,this.extension=n(this)}static define(e,t){const{eventHandlers:i,provide:n,decorations:s}=t||{};return new k0(Tz++,e,i,o=>{let l=[Qc.of(o)];return s&&l.push(vd.of(a=>{let h=a.plugin(o);return h?s(h):Cn.none})),n&&l.push(n(o)),l})}static fromClass(e,t){return k0.define(i=>new e(i),t)}}class _O{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(xh(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){xh(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){xh(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const PR=Mt.define(),_R=Mt.define(),vd=Mt.define(),$R=Mt.define(),MR=Mt.define(),Dc=Mt.define();class dl{constructor(e,t,i,n){this.fromA=e,this.toA=t,this.fromB=i,this.toB=n}join(e){return new dl(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let n=e[t-1];if(!(n.fromA>i.toA)){if(n.toA<i.fromA)break;i=i.join(n),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let n=0,s=0,o=0,l=0;;n++){let a=n==e.length?null:e[n],h=o-l,u=a?a.fromB:1e9;for(;s<t.length&&t[s]<u;){let f=t[s],c=t[s+1],d=Math.max(l,f),g=Math.min(u,c);if(d<=g&&new dl(d+h,g+h,d,g).addToSet(i),c>u)break;s+=2}if(!a)return i;new dl(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),o=a.toA,l=a.toB}}}class w0{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=ln.empty(this.startState.doc.length);for(let o of i)this.changes=this.changes.compose(o.changes);let n=[];this.changes.iterChangedRanges((o,l,a,h)=>n.push(new dl(o,l,a,h))),this.changedRanges=n;let s=e.hasFocus;s!=e.inputState.notifiedFocused&&(e.inputState.notifiedFocused=s,this.flags|=1)}static create(e,t,i){return new w0(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var Or=function(r){return r[r.LTR=0]="LTR",r[r.RTL=1]="RTL",r}(Or||(Or={}));const yy=Or.LTR,Pz=Or.RTL;function RR(r){let e=[];for(let t=0;t<r.length;t++)e.push(1<<+r[t]);return e}const _z=RR("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),$z=RR("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),vy=Object.create(null),zs=[];for(let r of["()","[]","{}"]){let e=r.charCodeAt(0),t=r.charCodeAt(1);vy[e]=t,vy[t]=-e}function Mz(r){return r<=247?_z[r]:1424<=r&&r<=1524?2:1536<=r&&r<=1785?$z[r-1536]:1774<=r&&r<=2220?4:8192<=r&&r<=8203||r==8204?256:1}const Rz=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;class Nu{constructor(e,t,i){this.from=e,this.to=t,this.level=i}get dir(){return this.level%2?Pz:yy}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,i,n){let s=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=t&&l.to>=t){if(l.level==i)return o;(s<0||(n!=0?n<0?l.from<t:l.to>t:e[s].level>l.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}const yi=[];function Qz(r,e){let t=r.length,i=e==yy?1:2,n=e==yy?2:1;if(!r||i==1&&!Rz.test(r))return QR(t);for(let o=0,l=i,a=i;o<t;o++){let h=Mz(r.charCodeAt(o));h==512?h=l:h==8&&a==4&&(h=16),yi[o]=h==4?2:h,h&7&&(a=h),l=h}for(let o=0,l=i,a=i;o<t;o++){let h=yi[o];if(h==128)o<t-1&&l==yi[o+1]&&l&24?h=yi[o]=l:yi[o]=256;else if(h==64){let u=o+1;for(;u<t&&yi[u]==64;)u++;let f=o&&l==8||u<t&&yi[u]==8?a==1?1:8:256;for(let c=o;c<u;c++)yi[c]=f;o=u-1}else h==8&&a==1&&(yi[o]=1);l=h,h&7&&(a=h)}for(let o=0,l=0,a=0,h,u,f;o<t;o++)if(u=vy[h=r.charCodeAt(o)])if(u<0){for(let c=l-3;c>=0;c-=3)if(zs[c+1]==-u){let d=zs[c+2],g=d&2?i:d&4?d&1?n:i:0;g&&(yi[o]=yi[zs[c]]=g),l=c;break}}else{if(zs.length==189)break;zs[l++]=o,zs[l++]=h,zs[l++]=a}else if((f=yi[o])==2||f==1){let c=f==i;a=c?0:1;for(let d=l-3;d>=0;d-=3){let g=zs[d+2];if(g&2)break;if(c)zs[d+2]|=2;else{if(g&4)break;zs[d+2]|=4}}}for(let o=0;o<t;o++)if(yi[o]==256){let l=o+1;for(;l<t&&yi[l]==256;)l++;let a=(o?yi[o-1]:i)==1,h=(l<t?yi[l]:i)==1,u=a==h?a?1:2:i;for(let f=o;f<l;f++)yi[f]=u;o=l-1}let s=[];if(i==1)for(let o=0;o<t;){let l=o,a=yi[o++]!=1;for(;o<t&&a==(yi[o]!=1);)o++;if(a)for(let h=o;h>l;){let u=h,f=yi[--h]!=2;for(;h>l&&f==(yi[h-1]!=2);)h--;s.push(new Nu(h,u,f?2:1))}else s.push(new Nu(l,o,0))}else for(let o=0;o<t;){let l=o,a=yi[o++]==2;for(;o<t&&a==(yi[o]==2);)o++;s.push(new Nu(l,o,a?1:2))}return s}function QR(r){return[new Nu(0,r,0)]}let DR="";function Dz(r,e,t,i,n){var s;let o=i.head-r.from,l=-1;if(o==0){if(!n||!r.length)return null;e[0].level!=t&&(o=e[0].side(!1,t),l=0)}else if(o==r.length){if(n)return null;let c=e[e.length-1];c.level!=t&&(o=c.side(!0,t),l=e.length-1)}l<0&&(l=Nu.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc));let a=e[l];o==a.side(n,t)&&(a=e[l+=n?1:-1],o=a.side(!n,t));let h=n==(a.dir==t),u=aa(r.text,o,h);if(DR=r.text.slice(Math.min(o,u),Math.max(o,u)),u!=a.side(n,t))return Ge.cursor(u+r.from,h?-1:1,a.level);let f=l==(n?e.length-1:0)?null:e[l+(n?1:-1)];return!f&&a.level!=t?Ge.cursor(n?r.to:r.from,n?-1:1,t):f&&f.level<a.level?Ge.cursor(f.side(!n,t)+r.from,n?1:-1,f.level):Ge.cursor(u+r.from,n?-1:1,a.level)}const ua="\uFFFF";class ER{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(si.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=ua}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let n=e;;){this.findPointBefore(i,n),this.readNode(n);let s=n.nextSibling;if(s==t)break;let o=Ri.get(n),l=Ri.get(s);(o&&l?o.breakAfter:(o?o.breakAfter:pA(n))||pA(s)&&(n.nodeName!="BR"||n.cmIgnore))&&this.lineBreak(),n=s}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,n=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,l;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(l=n.exec(t))&&(s=l.index,o=l[0].length),this.append(t.slice(i,s<0?t.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let t=Ri.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let n=i.iter();!n.next().done;)n.lineBreak?this.lineBreak():this.append(n.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+Math.min(t,i.offset))}}function pA(r){return r.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(r.nodeName)}class gA{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class mA extends Ri{constructor(e){super(),this.view=e,this.compositionDeco=Cn.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new br],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new dl(0,0,0,e.state.doc.length)],0)}get root(){return this.view.root}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every(({fromA:o,toA:l})=>l<this.minWidthFrom||o>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=Cn.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=Bz(this.view,e.changes)),(Fe.ie||Fe.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let i=this.decorations,n=this.updateDeco(),s=zz(i,n,e.changes);return t=dl.extendWithRanges(t,s),this.dirty==0&&t.length==0?!1:(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=Fe.chrome||Fe.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(s),this.dirty=0,s&&(s.written||i.selectionRange.focusNode!=s.node)&&(this.forceSelection=!0),this.dom.style.height=""});let n=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.children)s instanceof Sh&&s.widget instanceof bA&&n.push(s.dom);i.updateGaps(n)}updateChildren(e,t){let i=this.childCursor(t);for(let n=e.length-1;;n--){let s=n>=0?e[n]:null;if(!s)break;let{fromA:o,toA:l,fromB:a,toB:h}=s,{content:u,breakAtStart:f,openStart:c,openEnd:d}=K2.build(this.view.state.doc,a,h,this.decorations,this.dynamicDecorationMap),{i:g,off:w}=i.findPos(l,1),{i:S,off:x}=i.findPos(o,-1);cR(this,S,x,g,w,u,f,c,d)}}updateSelection(e=!1,t=!1){if(e&&this.view.observer.readSelectionRange(),!(t||this.mayControlSelection())||Fe.ios&&this.view.inputState.rapidCompositionStart)return;let i=this.forceSelection;this.forceSelection=!1;let n=this.view.state.selection.main,s=this.domAtPos(n.anchor),o=n.empty?s:this.domAtPos(n.head);if(Fe.gecko&&n.empty&&Ez(s)){let a=document.createTextNode("");this.view.observer.ignore(()=>s.node.insertBefore(a,s.node.childNodes[s.offset]||null)),s=o=new _n(a,0),i=!0}let l=this.view.observer.selectionRange;(i||!l.focusNode||!m0(s.node,s.offset,l.anchorNode,l.anchorOffset)||!m0(o.node,o.offset,l.focusNode,l.focusOffset))&&(this.view.observer.ignore(()=>{Fe.android&&Fe.chrome&&this.dom.contains(l.focusNode)&&Wz(l.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let a=g0(this.root);if(n.empty){if(Fe.gecko){let h=Iz(s.node,s.offset);if(h&&h!=3){let u=NR(s.node,s.offset,h==1?1:-1);u&&(s=new _n(u,h==1?0:u.nodeValue.length))}}a.collapse(s.node,s.offset),n.bidiLevel!=null&&l.cursorBidiLevel!=null&&(l.cursorBidiLevel=n.bidiLevel)}else if(a.extend)a.collapse(s.node,s.offset),a.extend(o.node,o.offset);else{let h=document.createRange();n.anchor>n.head&&([s,o]=[o,s]),h.setEnd(o.node,o.offset),h.setStart(s.node,s.offset),a.removeAllRanges(),a.addRange(h)}}),this.view.observer.setSelectionRange(s,o)),this.impreciseAnchor=s.precise?null:new _n(l.anchorNode,l.anchorOffset),this.impreciseHead=o.precise?null:new _n(l.focusNode,l.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let e=this.view.state.selection.main,t=g0(this.root);if(!e.empty||!e.assoc||!t.modify)return;let i=br.find(this,e.head);if(!i)return;let n=i.posAtStart;if(e.head==n||e.head==n+i.length)return;let s=this.coordsAt(e.head,-1),o=this.coordsAt(e.head,1);if(!s||!o||s.bottom>o.top)return;let l=this.domAtPos(e.head+e.assoc);t.collapse(l.node,l.offset),t.modify("move",e.assoc<0?"forward":"backward","lineboundary")}mayControlSelection(){return this.view.state.facet(ap)?this.root.activeElement==this.dom:uy(this.dom,this.view.observer.selectionRange)}nearest(e){for(let t=e;t;){let i=Ri.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let n=this.children[t];if(i<n.length||n instanceof br)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){for(let i=this.length,n=this.children.length-1;;n--){let s=this.children[n],o=i-s.breakAfter-s.length;if(e>o||e==o&&s.type!=en.WidgetBefore&&s.type!=en.WidgetAfter&&(!n||t==2||this.children[n-1].breakAfter||this.children[n-1].type==en.WidgetBefore&&t>-2))return s.coordsAt(e-o,t);i=o}}measureVisibleLineHeights(e){let t=[],{from:i,to:n}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==Or.LTR;for(let h=0,u=0;u<this.children.length;u++){let f=this.children[u],c=h+f.length;if(c>n)break;if(h>=i){let d=f.dom.getBoundingClientRect();if(t.push(d.height),o){let g=f.dom.lastChild,w=g?wd(g):[];if(w.length){let S=w[w.length-1],x=a?S.right-d.left:d.right-S.left;x>l&&(l=x,this.minWidth=s,this.minWidthFrom=h,this.minWidthTo=c)}}}h=c+f.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?Or.RTL:Or.LTR}measureTextSize(){for(let n of this.children)if(n instanceof br){let s=n.measureTextSize();if(s)return s}let e=document.createElement("div"),t,i;return e.className="cm-line",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let n=wd(e.firstChild)[0];t=e.getBoundingClientRect().height,i=n?n.width/27:7,e.remove()}),{lineHeight:t,charWidth:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new fR(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,n=0;;n++){let s=n==t.viewports.length?null:t.viewports[n],o=s?s.from-1:this.length;if(o>i){let l=t.lineBlockAt(o).bottom-t.lineBlockAt(i).top;e.push(Cn.replace({widget:new bA(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return Cn.set(e)}updateDeco(){let e=this.view.state.facet(vd).map((t,i)=>(this.dynamicDecorationMap[i]=typeof t=="function")?t(this.view):t);for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),n;if(!i)return;!t.empty&&(n=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,n.left),top:Math.min(i.top,n.top),right:Math.max(i.right,n.right),bottom:Math.max(i.bottom,n.bottom)});let s=0,o=0,l=0,a=0;for(let u of this.view.state.facet(MR).map(f=>f(this.view)))if(u){let{left:f,right:c,top:d,bottom:g}=u;f!=null&&(s=Math.max(s,f)),c!=null&&(o=Math.max(o,c)),d!=null&&(l=Math.max(l,d)),g!=null&&(a=Math.max(a,g))}let h={left:i.left-s,top:i.top-l,right:i.right+o,bottom:i.bottom+a};yz(this.view.scrollDOM,h,t.head<t.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==Or.LTR)}}function Ez(r){return r.node.nodeType==1&&r.node.firstChild&&(r.offset==0||r.node.childNodes[r.offset-1].contentEditable=="false")&&(r.offset==r.node.childNodes.length||r.node.childNodes[r.offset].contentEditable=="false")}class bA extends Mb{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function BR(r){let e=r.observer.selectionRange,t=e.focusNode&&NR(e.focusNode,e.focusOffset,0);if(!t)return null;let i=r.docView.nearest(t);if(!i)return null;if(i instanceof br){let n=t;for(;n.parentNode!=i.dom;)n=n.parentNode;let s=n.previousSibling;for(;s&&!Ri.get(s);)s=s.previousSibling;let o=s?Ri.get(s).posAtEnd:i.posAtStart;return{from:o,to:o,node:n,text:t}}else{for(;;){let{parent:s}=i;if(!s)return null;if(s instanceof br)break;i=s}let n=i.posAtStart;return{from:n,to:n+i.length,node:i.dom,text:t}}}function Bz(r,e){let t=BR(r);if(!t)return Cn.none;let{from:i,to:n,node:s,text:o}=t,l=e.mapPos(i,1),a=Math.max(l,e.mapPos(n,-1)),{state:h}=r,u=s.nodeType==3?s.nodeValue:new ER([],h).readRange(s.firstChild,null).text;if(a-l<u.length)if(h.doc.sliceString(l,Math.min(h.doc.length,l+u.length),ua)==u)a=l+u.length;else if(h.doc.sliceString(Math.max(0,a-u.length),a,ua)==u)l=a-u.length;else return Cn.none;else if(h.doc.sliceString(l,a,ua)!=u)return Cn.none;let f=Ri.get(s);return f instanceof mR?f=f.widget.topView:f&&(f.parent=null),Cn.set(Cn.replace({widget:new Nz(s,o,f),inclusive:!0}).range(l,a))}class Nz extends Mb{constructor(e,t,i){super(),this.top=e,this.text=t,this.topView=i}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return mR}}function NR(r,e,t){for(;;){if(r.nodeType==3)return r;if(r.nodeType==1&&e>0&&t<=0)r=r.childNodes[e-1],e=b0(r);else if(r.nodeType==1&&e<r.childNodes.length&&t>=0)r=r.childNodes[e],e=0;else return null}}function Iz(r,e){return r.nodeType!=1?0:(e&&r.childNodes[e-1].contentEditable=="false"?1:0)|(e<r.childNodes.length&&r.childNodes[e].contentEditable=="false"?2:0)}class Lz{constructor(){this.changes=[]}compareRange(e,t){ky(e,t,this.changes)}comparePoint(e,t){ky(e,t,this.changes)}}function zz(r,e,t){let i=new Lz;return Xi.compare(r,e,t,i),i.changes}function Wz(r,e){for(let t=r;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function Vz(r,e,t=1){let i=r.charCategorizer(e),n=r.doc.lineAt(e),s=e-n.from;if(n.length==0)return Ge.cursor(e);s==0?t=1:s==n.length&&(t=-1);let o=s,l=s;t<0?o=aa(n.text,s,!1):l=aa(n.text,s);let a=i(n.text.slice(o,l));for(;o>0;){let h=aa(n.text,o,!1);if(i(n.text.slice(h,o))!=a)break;o=h}for(;l<n.length;){let h=aa(n.text,l);if(i(n.text.slice(l,h))!=a)break;l=h}return Ge.range(o+n.from,l+n.from)}function jz(r,e){return e.left>r?e.left-r:Math.max(0,r-e.right)}function Fz(r,e){return e.top>r?e.top-r:Math.max(0,r-e.bottom)}function $O(r,e){return r.top<e.bottom-1&&r.bottom>e.top+1}function OA(r,e){return e<r.top?{top:e,left:r.left,right:r.right,bottom:r.bottom}:r}function kA(r,e){return e>r.bottom?{top:r.top,left:r.left,right:r.right,bottom:e}:r}function Sy(r,e,t){let i,n,s,o,l,a,h,u;for(let d=r.firstChild;d;d=d.nextSibling){let g=wd(d);for(let w=0;w<g.length;w++){let S=g[w];n&&$O(n,S)&&(S=OA(kA(S,n.bottom),n.top));let x=jz(e,S),Q=Fz(t,S);if(x==0&&Q==0)return d.nodeType==3?wA(d,e,t):Sy(d,e,t);(!i||o>Q||o==Q&&s>x)&&(i=d,n=S,s=x,o=Q),x==0?t>S.bottom&&(!h||h.bottom<S.bottom)?(l=d,h=S):t<S.top&&(!u||u.top>S.top)&&(a=d,u=S):h&&$O(h,S)?h=kA(h,S.bottom):u&&$O(u,S)&&(u=OA(u,S.top))}}if(h&&h.bottom>=t?(i=l,n=h):u&&u.top<=t&&(i=a,n=u),!i)return{node:r,offset:0};let f=Math.max(n.left,Math.min(n.right,e));if(i.nodeType==3)return wA(i,f,t);if(!s&&i.contentEditable=="true")return Sy(i,f,t);let c=Array.prototype.indexOf.call(r.childNodes,i)+(e>=(n.left+n.right)/2?1:0);return{node:r,offset:c}}function wA(r,e,t){let i=r.nodeValue.length,n=-1,s=1e9,o=0;for(let l=0;l<i;l++){let a=yd(r,l,l+1).getClientRects();for(let h=0;h<a.length;h++){let u=a[h];if(u.top==u.bottom)continue;o||(o=e-u.left);let f=(u.top>t?u.top-t:t-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&f<s){let c=e>=(u.left+u.right)/2,d=c;if((Fe.chrome||Fe.gecko)&&yd(r,l).getBoundingClientRect().left==u.right&&(d=!c),f<=0)return{node:r,offset:l+(d?1:0)};n=l+(d?1:0),s=f}}}return{node:r,offset:n>-1?n:o>0?r.nodeValue.length:0}}function IR(r,{x:e,y:t},i,n=-1){var s;let o=r.contentDOM.getBoundingClientRect(),l=o.top+r.viewState.paddingTop,a,{docHeight:h}=r.viewState,u=t-l;if(u<0)return 0;if(u>h)return r.state.doc.length;for(let x=r.defaultLineHeight/2,Q=!1;a=r.elementAtHeight(u),a.type!=en.Text;)for(;u=n>0?a.bottom+x:a.top-x,!(u>=0&&u<=h);){if(Q)return i?null:0;Q=!0,n=-n}t=l+u;let f=a.from;if(f<r.viewport.from)return r.viewport.from==0?0:i?null:yA(r,o,a,e,t);if(f>r.viewport.to)return r.viewport.to==r.state.doc.length?r.state.doc.length:i?null:yA(r,o,a,e,t);let c=r.dom.ownerDocument,d=r.root.elementFromPoint?r.root:c,g=d.elementFromPoint(e,t);g&&!r.contentDOM.contains(g)&&(g=null),g||(e=Math.max(o.left+1,Math.min(o.right-1,e)),g=d.elementFromPoint(e,t),g&&!r.contentDOM.contains(g)&&(g=null));let w,S=-1;if(g&&((s=r.docView.nearest(g))===null||s===void 0?void 0:s.isEditable)!=!1){if(c.caretPositionFromPoint){let x=c.caretPositionFromPoint(e,t);x&&({offsetNode:w,offset:S}=x)}else if(c.caretRangeFromPoint){let x=c.caretRangeFromPoint(e,t);x&&({startContainer:w,startOffset:S}=x,Fe.safari&&Hz(w,S,e)&&(w=void 0))}}if(!w||!r.docView.dom.contains(w)){let x=br.find(r.docView,f);if(!x)return u>a.top+a.height/2?a.to:a.from;({node:w,offset:S}=Sy(x.dom,e,t))}return r.docView.posFromDOM(w,S)}function yA(r,e,t,i,n){let s=Math.round((i-e.left)*r.defaultCharacterWidth);r.lineWrapping&&t.height>r.defaultLineHeight*1.5&&(s+=Math.floor((n-t.top)/r.defaultLineHeight)*r.viewState.heightOracle.lineLength);let o=r.state.sliceDoc(t.from,t.to);return t.from+Oz(o,s,r.state.tabSize)}function Hz(r,e,t){let i;if(r.nodeType!=3||e!=(i=r.nodeValue.length))return!1;for(let n=r.nextSibling;n;n=n.nextSibling)if(n.nodeType!=1||n.nodeName!="BR")return!1;return yd(r,i-1,i).getBoundingClientRect().left>t}function qz(r,e,t,i){let n=r.state.doc.lineAt(e.head),s=!i||!r.lineWrapping?null:r.coordsAtPos(e.assoc<0&&e.head>n.from?e.head-1:e.head);if(s){let a=r.dom.getBoundingClientRect(),h=r.textDirectionAt(n.from),u=r.posAtCoords({x:t==(h==Or.LTR)?a.right-1:a.left+1,y:(s.top+s.bottom)/2});if(u!=null)return Ge.cursor(u,t?-1:1)}let o=br.find(r.docView,e.head),l=o?t?o.posAtEnd:o.posAtStart:t?n.to:n.from;return Ge.cursor(l,t?-1:1)}function vA(r,e,t,i){let n=r.state.doc.lineAt(e.head),s=r.bidiSpans(n),o=r.textDirectionAt(n.from);for(let l=e,a=null;;){let h=Dz(n,s,o,l,t),u=DR;if(!h){if(n.number==(t?r.state.doc.lines:1))return l;u=`
`,n=r.state.doc.line(n.number+(t?1:-1)),s=r.bidiSpans(n),h=Ge.cursor(t?n.from:n.to)}if(a){if(!a(u))return l}else{if(!i)return h;a=i(u)}l=h}}function Xz(r,e,t){let i=r.state.charCategorizer(e),n=i(t);return s=>{let o=i(s);return n==ol.Space&&(n=o),n==o}}function Zz(r,e,t,i){let n=e.head,s=t?1:-1;if(n==(t?r.state.doc.length:0))return Ge.cursor(n,e.assoc);let o=e.goalColumn,l,a=r.contentDOM.getBoundingClientRect(),h=r.coordsAtPos(n),u=r.documentTop;if(h)o==null&&(o=h.left-a.left),l=s<0?h.top:h.bottom;else{let d=r.viewState.lineBlockAt(n);o==null&&(o=Math.min(a.right-a.left,r.defaultCharacterWidth*(n-d.from))),l=(s<0?d.top:d.bottom)+u}let f=a.left+o,c=i!=null?i:r.defaultLineHeight>>1;for(let d=0;;d+=10){let g=l+(c+d)*s,w=IR(r,{x:f,y:g},!1,s);if(g<a.top||g>a.bottom||(s<0?w<n:w>n))return Ge.cursor(w,e.assoc,void 0,o)}}function MO(r,e,t){let i=r.state.facet($R).map(n=>n(r));for(;;){let n=!1;for(let s of i)s.between(t.from-1,t.from+1,(o,l,a)=>{t.from>o&&t.from<l&&(t=e.from>t.from?Ge.cursor(o,1):Ge.cursor(l,-1),n=!0)});if(!n)return t}}class Gz{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.rapidCompositionStart=!1,this.mouseSelection=null;for(let t in dn){let i=dn[t];e.contentDOM.addEventListener(t,n=>{!SA(e,n)||this.ignoreDuringComposition(n)||t=="keydown"&&this.keydown(e,n)||(this.mustFlushObserver(n)&&e.observer.forceFlush(),this.runCustomHandlers(t,e,n)?n.preventDefault():i(e,n))}),this.registeredEvents.push(t)}Fe.chrome&&Fe.chrome_version>=102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,Fe.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var i;let n;this.customHandlers=[];for(let s of t)if(n=(i=s.update(e).spec)===null||i===void 0?void 0:i.domEventHandlers){this.customHandlers.push({plugin:s.value,handlers:n});for(let o in n)this.registeredEvents.indexOf(o)<0&&o!="scroll"&&(this.registeredEvents.push(o),e.contentDOM.addEventListener(o,l=>{!SA(e,l)||this.runCustomHandlers(o,e,l)&&l.preventDefault()}))}}runCustomHandlers(e,t,i){for(let n of this.customHandlers){let s=n.handlers[e];if(s)try{if(s.call(n.plugin,i,t)||i.defaultPrevented)return!0}catch(o){xh(t.state,o)}}return!1}runScrollHandlers(e,t){for(let i of this.customHandlers){let n=i.handlers.scroll;if(n)try{n.call(i.plugin,t,e)}catch(s){xh(e.state,s)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(Fe.android&&Fe.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let i;return Fe.ios&&(i=LR.find(n=>n.keyCode==t.keyCode))&&!(t.ctrlKey||t.altKey||t.metaKey)&&!t.synthetic?(this.pendingIOSKey=i,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let t=this.pendingIOSKey;return t?(this.pendingIOSKey=void 0,Yc(e.contentDOM,t.key,t.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Fe.safari&&Date.now()-this.compositionEndedAt<100?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229||e.type=="compositionend"&&!Fe.ios}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const LR=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Uz=[16,17,18,20,91,92,224,225];class Yz{constructor(e,t,i,n){this.view=e,this.style=i,this.mustSelect=n,this.lastEvent=t;let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(si.allowMultipleSelections)&&Kz(e,t),this.dragMove=Jz(e,t),this.dragging=e9(e,t)&&J2(t)==1?null:!1,this.dragging===!1&&(t.preventDefault(),this.select(t))}move(e){if(e.buttons==0)return this.destroy();this.dragging===!1&&this.select(this.lastEvent=e)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(e){let t=this.style.get(e,this.extend,this.multiple);(this.mustSelect||!t.eq(this.view.state.selection)||t.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:t,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Kz(r,e){let t=r.state.facet(vR);return t.length?t[0](e):Fe.mac?e.metaKey:e.ctrlKey}function Jz(r,e){let t=r.state.facet(SR);return t.length?t[0](e):Fe.mac?!e.altKey:!e.ctrlKey}function e9(r,e){let{main:t}=r.state.selection;if(t.empty)return!1;let i=g0(r.root);if(i.rangeCount==0)return!0;let n=i.getRangeAt(0).getClientRects();for(let s=0;s<n.length;s++){let o=n[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function SA(r,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=r.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=Ri.get(t))&&i.ignoreEvent(e))return!1;return!0}const dn=Object.create(null),zR=Fe.ie&&Fe.ie_version<15||Fe.ios&&Fe.webkit_version<604;function t9(r){let e=r.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{r.focus(),t.remove(),WR(r,t.value)},50)}function WR(r,e){let{state:t}=r,i,n=1,s=t.toText(e),o=s.lines==t.selection.ranges.length;if(xy!=null&&t.selection.ranges.every(a=>a.empty)&&xy==s.toString()){let a=-1;i=t.changeByRange(h=>{let u=t.doc.lineAt(h.from);if(u.from==a)return{range:h};a=u.from;let f=t.toText((o?s.line(n++).text:e)+t.lineBreak);return{changes:{from:u.from,insert:f},range:Ge.cursor(h.from+f.length)}})}else o?i=t.changeByRange(a=>{let h=s.line(n++);return{changes:{from:a.from,to:a.to,insert:h.text},range:Ge.cursor(a.from+h.length)}}):i=t.replaceSelection(s);r.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}dn.keydown=(r,e)=>{r.inputState.setSelectionOrigin("select"),e.keyCode==27?r.inputState.lastEscPress=Date.now():Uz.indexOf(e.keyCode)<0&&(r.inputState.lastEscPress=0)};let VR=0;dn.touchstart=(r,e)=>{VR=Date.now(),r.inputState.setSelectionOrigin("select.pointer")};dn.touchmove=r=>{r.inputState.setSelectionOrigin("select.pointer")};dn.mousedown=(r,e)=>{if(r.observer.flush(),VR>Date.now()-2e3&&J2(e)==1)return;let t=null;for(let i of r.state.facet(xR))if(t=i(r,e),t)break;if(!t&&e.button==0&&(t=r9(r,e)),t){let i=r.root.activeElement!=r.contentDOM;i&&r.observer.ignore(()=>hR(r.contentDOM)),r.inputState.startMouseSelection(new Yz(r,e,t,i))}};function xA(r,e,t,i){if(i==1)return Ge.cursor(e,t);if(i==2)return Vz(r.state,e,t);{let n=br.find(r.docView,e),s=r.state.doc.lineAt(n?n.posAtEnd:e),o=n?n.posAtStart:s.from,l=n?n.posAtEnd:s.to;return l<r.state.doc.length&&l==s.to&&l++,Ge.range(o,l)}}let jR=(r,e)=>r>=e.top&&r<=e.bottom,CA=(r,e,t)=>jR(e,t)&&r>=t.left&&r<=t.right;function i9(r,e,t,i){let n=br.find(r.docView,e);if(!n)return 1;let s=e-n.posAtStart;if(s==0)return 1;if(s==n.length)return-1;let o=n.coordsAt(s,-1);if(o&&CA(t,i,o))return-1;let l=n.coordsAt(s,1);return l&&CA(t,i,l)?1:o&&jR(i,o)?-1:1}function AA(r,e){let t=r.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:i9(r,t,e.clientX,e.clientY)}}const n9=Fe.ie&&Fe.ie_version<=11;let TA=null,PA=0,_A=0;function J2(r){if(!n9)return r.detail;let e=TA,t=_A;return TA=r,_A=Date.now(),PA=!e||t>Date.now()-400&&Math.abs(e.clientX-r.clientX)<2&&Math.abs(e.clientY-r.clientY)<2?(PA+1)%3:1}function r9(r,e){let t=AA(r,e),i=J2(e),n=r.state.selection,s=t,o=e;return{update(l){l.docChanged&&(t&&(t.pos=l.changes.mapPos(t.pos)),n=n.map(l.changes),o=null)},get(l,a,h){let u;if(o&&l.clientX==o.clientX&&l.clientY==o.clientY?u=s:(u=s=AA(r,l),o=l),!u||!t)return n;let f=xA(r,u.pos,u.bias,i);if(t.pos!=u.pos&&!a){let c=xA(r,t.pos,t.bias,i),d=Math.min(c.from,f.from),g=Math.max(c.to,f.to);f=d<f.from?Ge.range(d,g):Ge.range(g,d)}return a?n.replaceRange(n.main.extend(f.from,f.to)):h?n.addRange(f):Ge.create([f])}}}dn.dragstart=(r,e)=>{let{selection:{main:t}}=r.state,{mouseSelection:i}=r.inputState;i&&(i.dragging=t),e.dataTransfer&&(e.dataTransfer.setData("Text",r.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove")};function $A(r,e,t,i){if(!t)return;let n=r.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:s}=r.inputState,o=i&&s&&s.dragging&&s.dragMove?{from:s.dragging.from,to:s.dragging.to}:null,l={from:n,insert:t},a=r.state.changes(o?[o,l]:l);r.focus(),r.dispatch({changes:a,selection:{anchor:a.mapPos(n,-1),head:a.mapPos(n,1)},userEvent:o?"move.drop":"input.drop"})}dn.drop=(r,e)=>{if(!e.dataTransfer)return;if(r.state.readOnly)return e.preventDefault();let t=e.dataTransfer.files;if(t&&t.length){e.preventDefault();let i=Array(t.length),n=0,s=()=>{++n==t.length&&$A(r,e,i.filter(o=>o!=null).join(r.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let l=new FileReader;l.onerror=s,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[o]=l.result),s()},l.readAsText(t[o])}}else $A(r,e,e.dataTransfer.getData("Text"),!0)};dn.paste=(r,e)=>{if(r.state.readOnly)return e.preventDefault();r.observer.flush();let t=zR?null:e.clipboardData;t?(WR(r,t.getData("text/plain")),e.preventDefault()):t9(r)};function s9(r,e){let t=r.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),r.focus()},50)}function o9(r){let e=[],t=[],i=!1;for(let n of r.selection.ranges)n.empty||(e.push(r.sliceDoc(n.from,n.to)),t.push(n));if(!e.length){let n=-1;for(let{from:s}of r.selection.ranges){let o=r.doc.lineAt(s);o.number>n&&(e.push(o.text),t.push({from:o.from,to:Math.min(r.doc.length,o.to+1)})),n=o.number}i=!0}return{text:e.join(r.lineBreak),ranges:t,linewise:i}}let xy=null;dn.copy=dn.cut=(r,e)=>{let{text:t,ranges:i,linewise:n}=o9(r.state);if(!t&&!n)return;xy=n?t:null;let s=zR?null:e.clipboardData;s?(e.preventDefault(),s.clearData(),s.setData("text/plain",t)):s9(r,t),e.type=="cut"&&!r.state.readOnly&&r.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"})};function FR(r){setTimeout(()=>{r.hasFocus!=r.inputState.notifiedFocused&&r.update([])},10)}dn.focus=FR;dn.blur=r=>{r.observer.clearSelectionRange(),FR(r)};function HR(r,e){if(r.docView.compositionDeco.size){r.inputState.rapidCompositionStart=e;try{r.update([])}finally{r.inputState.rapidCompositionStart=!1}}}dn.compositionstart=dn.compositionupdate=r=>{r.inputState.compositionFirstChange==null&&(r.inputState.compositionFirstChange=!0),r.inputState.composing<0&&(r.inputState.composing=0,r.docView.compositionDeco.size&&(r.observer.flush(),HR(r,!0)))};dn.compositionend=r=>{r.inputState.composing=-1,r.inputState.compositionEndedAt=Date.now(),r.inputState.compositionFirstChange=null,setTimeout(()=>{r.inputState.composing<0&&HR(r,!1)},50)};dn.contextmenu=r=>{r.inputState.lastContextMenu=Date.now()};dn.beforeinput=(r,e)=>{var t;let i;if(Fe.chrome&&Fe.android&&(i=LR.find(n=>n.inputType==e.inputType))&&(r.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let n=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>n+10&&r.hasFocus&&(r.contentDOM.blur(),r.focus())},100)}};const MA=["pre-wrap","normal","pre-line","break-spaces"];class l9{constructor(){this.doc=Nt.empty,this.lineWrapping=!1,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength)),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return MA.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let n=e[i];n<0?i++:this.heightSamples[Math.floor(n*10)]||(t=!0,this.heightSamples[Math.floor(n*10)]=!0)}return t}refresh(e,t,i,n,s){let o=MA.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=t,this.charWidth=i,this.lineLength=n,l){this.heightSamples={};for(let a=0;a<s.length;a++){let h=s[a];h<0?a++:this.heightSamples[Math.floor(h*10)]=!0}}return l}}class a9{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class fa{constructor(e,t,i,n,s){this.from=e,this.length=t,this.top=i,this.height=n,this.type=s}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new fa(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var ti=function(r){return r[r.ByPos=0]="ByPos",r[r.ByHeight=1]="ByHeight",r[r.ByPosNoHeight=2]="ByPosNoHeight",r}(ti||(ti={}));const Tm=.001;class Mr{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>Tm&&(e.heightChanged=!0),this.height=t)}replace(e,t,i){return Mr.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,n){let s=this;for(let o=n.length-1;o>=0;o--){let{fromA:l,toA:a,fromB:h,toB:u}=n[o],f=s.lineAt(l,ti.ByPosNoHeight,t,0,0),c=f.to>=a?f:s.lineAt(a,ti.ByPosNoHeight,t,0,0);for(u+=c.to-a,a=c.to;o>0&&f.from<=n[o-1].toA;)l=n[o-1].fromA,h=n[o-1].fromB,o--,l<f.from&&(f=s.lineAt(l,ti.ByPosNoHeight,t,0,0));h+=f.from-l,l=f.from;let d=eS.build(i,e,h,u);s=s.replace(l,a,d)}return s.updateHeight(i,0)}static empty(){return new Wr(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,n=0,s=0;for(;;)if(t==i)if(n>s*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),i+=1+l.break,n-=l.size}else if(s>n*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,s-=l.size}else break;else if(n<s){let l=e[t++];l&&(n+=l.size)}else{let l=e[--i];l&&(s+=l.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,i++),new h9(Mr.of(e.slice(0,t)),o,Mr.of(e.slice(i)))}}Mr.prototype.size=1;class qR extends Mr{constructor(e,t,i){super(e,t),this.type=i}blockAt(e,t,i,n){return new fa(n,this.length,i,this.height,this.type)}lineAt(e,t,i,n,s){return this.blockAt(0,i,n,s)}forEachLine(e,t,i,n,s,o){e<=s+this.length&&t>=s&&o(this.blockAt(0,i,n,s))}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more&&this.setHeight(e,n.heights[n.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Wr extends qR{constructor(e,t){super(e,t,en.Text),this.collapsed=0,this.widgetHeight=0}replace(e,t,i){let n=i[0];return i.length==1&&(n instanceof Wr||n instanceof kn&&n.flags&4)&&Math.abs(this.length-n.length)<10?(n instanceof kn?n=new Wr(n.length,this.height):n.height=this.height,this.outdated||(n.outdated=!1),n):Mr.of(i)}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more?this.setHeight(e,n.heights[n.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class kn extends Mr{constructor(e){super(e,0)}lines(e,t){let i=e.lineAt(t).number,n=e.lineAt(t+this.length).number;return{firstLine:i,lastLine:n,lineHeight:this.height/(n-i+1)}}blockAt(e,t,i,n){let{firstLine:s,lastLine:o,lineHeight:l}=this.lines(t,n),a=Math.max(0,Math.min(o-s,Math.floor((e-i)/l))),{from:h,length:u}=t.line(s+a);return new fa(h,u,i+l*a,l,en.Text)}lineAt(e,t,i,n,s){if(t==ti.ByHeight)return this.blockAt(e,i,n,s);if(t==ti.ByPosNoHeight){let{from:f,to:c}=i.lineAt(e);return new fa(f,c-f,0,0,en.Text)}let{firstLine:o,lineHeight:l}=this.lines(i,s),{from:a,length:h,number:u}=i.lineAt(e);return new fa(a,h,n+l*(u-o),l,en.Text)}forEachLine(e,t,i,n,s,o){let{firstLine:l,lineHeight:a}=this.lines(i,s);for(let h=Math.max(e,s),u=Math.min(s+this.length,t);h<=u;){let f=i.lineAt(h);h==e&&(n+=a*(f.number-l)),o(new fa(f.from,f.length,n,a,en.Text)),n+=a,h=f.to+1}}replace(e,t,i){let n=this.length-t;if(n>0){let s=i[i.length-1];s instanceof kn?i[i.length-1]=new kn(s.length+n):i.push(null,new kn(n-1))}if(e>0){let s=i[0];s instanceof kn?i[0]=new kn(e+s.length):i.unshift(new kn(e-1),null)}return Mr.of(i)}decomposeLeft(e,t){t.push(new kn(e-1),null)}decomposeRight(e,t){t.push(null,new kn(this.length-e-1))}updateHeight(e,t=0,i=!1,n){let s=t+this.length;if(n&&n.from<=t+this.length&&n.more){let o=[],l=Math.max(t,n.from),a=-1,h=e.heightChanged;for(n.from>t&&o.push(new kn(n.from-t-1).updateHeight(e,t));l<=s&&n.more;){let f=e.doc.lineAt(l).length;o.length&&o.push(null);let c=n.heights[n.index++];a==-1?a=c:Math.abs(c-a)>=Tm&&(a=-2);let d=new Wr(f,c);d.outdated=!1,o.push(d),l+=f+1}l<=s&&o.push(null,new kn(s-l).updateHeight(e,l));let u=Mr.of(o);return e.heightChanged=h||a<0||Math.abs(u.height-this.height)>=Tm||Math.abs(a-this.lines(e.doc,t).lineHeight)>=Tm,u}else(i||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class h9 extends Mr{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,n){let s=i+this.left.height;return e<s?this.left.blockAt(e,t,i,n):this.right.blockAt(e,t,s,n+this.left.length+this.break)}lineAt(e,t,i,n,s){let o=n+this.left.height,l=s+this.left.length+this.break,a=t==ti.ByHeight?e<o:e<l,h=a?this.left.lineAt(e,t,i,n,s):this.right.lineAt(e,t,i,o,l);if(this.break||(a?h.to<l:h.from>l))return h;let u=t==ti.ByPosNoHeight?ti.ByPosNoHeight:ti.ByPos;return a?h.join(this.right.lineAt(l,u,i,o,l)):this.left.lineAt(l,u,i,n,s).join(h)}forEachLine(e,t,i,n,s,o){let l=n+this.left.height,a=s+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,i,n,s,o),t>=a&&this.right.forEachLine(e,t,i,l,a,o);else{let h=this.lineAt(a,ti.ByPos,i,n,s);e<h.from&&this.left.forEachLine(e,h.from-1,i,n,s,o),h.to>=e&&h.from<=t&&o(h),t>h.to&&this.right.forEachLine(h.to+1,t,i,l,a,o)}}replace(e,t,i){let n=this.left.length+this.break;if(t<n)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-n,t-n,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let l of i)s.push(l);if(e>0&&RA(s,o-1),t<this.length){let l=s.length;this.decomposeRight(t,s),RA(s,l)}return Mr.of(s)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,n=i+this.break;if(e>=n)return this.right.decomposeRight(e-n,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<n&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Mr.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,n){let{left:s,right:o}=this,l=t+s.length+this.break,a=null;return n&&n.from<=t+s.length&&n.more?a=s=s.updateHeight(e,t,i,n):s.updateHeight(e,t,i),n&&n.from<=l+o.length&&n.more?a=o=o.updateHeight(e,l,i,n):o.updateHeight(e,l,i),a?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function RA(r,e){let t,i;r[e]==null&&(t=r[e-1])instanceof kn&&(i=r[e+1])instanceof kn&&r.splice(e-1,3,new kn(t.length+1+i.length))}const u9=5;class eS{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof Wr?n.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Wr(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let n=i.widget?i.widget.estimatedHeight:0;n<0&&(n=this.oracle.lineHeight);let s=t-e;i.block?this.addBlock(new qR(s,n,i.type)):(s||n>=u9)&&this.addLineDeco(n,s)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Wr(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new kn(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Wr)return e;let t=new Wr(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type==en.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=en.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let i=this.ensureLine();i.length+=t,i.collapsed+=t,i.widgetHeight=Math.max(i.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Wr)&&!this.isCovered?this.nodes.push(new Wr(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let n of this.nodes)n instanceof Wr&&n.updateHeight(this.oracle,i),i+=n?n.length:1;return this.nodes}static build(e,t,i,n){let s=new eS(i,e);return Xi.spans(t,i,n,s,0),s.finish(i)}}function f9(r,e,t){let i=new c9;return Xi.compare(r,e,t,i,0),i.changes}class c9{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,n){(e<t||i&&i.heightRelevant||n&&n.heightRelevant)&&ky(e,t,this.changes,5)}}function d9(r,e){let t=r.getBoundingClientRect(),i=Math.max(0,t.left),n=Math.min(innerWidth,t.right),s=Math.max(0,t.top),o=Math.min(innerHeight,t.bottom),l=r.ownerDocument.body;for(let a=r.parentNode;a&&a!=l;)if(a.nodeType==1){let h=a,u=window.getComputedStyle(h);if((h.scrollHeight>h.clientHeight||h.scrollWidth>h.clientWidth)&&u.overflow!="visible"){let f=h.getBoundingClientRect();i=Math.max(i,f.left),n=Math.min(n,f.right),s=Math.max(s,f.top),o=Math.min(o,f.bottom)}a=u.position=="absolute"||u.position=="fixed"?h.offsetParent:h.parentNode}else if(a.nodeType==11)a=a.host;else break;return{left:i-t.left,right:Math.max(i,n)-t.left,top:s-(t.top+e),bottom:Math.max(s,o)-(t.top+e)}}function p9(r,e){let t=r.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class RO{constructor(e,t,i){this.from=e,this.to=t,this.size=i}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let n=e[i],s=t[i];if(n.from!=s.from||n.to!=s.to||n.size!=s.size)return!1}return!0}draw(e){return Cn.replace({widget:new g9(this.size,e)}).range(this.from,this.to)}}class g9 extends Mb{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class QA{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.heightOracle=new l9,this.scaler=BA,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Or.RTL,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.stateDeco=e.facet(vd).filter(t=>typeof t!="function"),this.heightMap=Mr.empty().applyChanges(this.stateDeco,Nt.empty,this.heightOracle.setDoc(e.doc),[new dl(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Cn.set(this.lineGaps.map(t=>t.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let n=i?t.head:t.anchor;if(!e.some(({from:s,to:o})=>n>=s&&n<=o)){let{from:s,to:o}=this.lineBlockAt(n);e.push(new Kp(s,o))}}this.viewports=e.sort((i,n)=>i.from-n.from),this.scaler=this.heightMap.height<=7e6?BA:new O9(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:Ec(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(vd).filter(h=>typeof h!="function");let n=e.changedRanges,s=dl.extendWithRanges(n,f9(i,this.stateDeco,e?e.changes:ln.empty(this.state.doc.length))),o=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=o&&(e.flags|=2);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let a=!e.changes.empty||e.flags&2||l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,this.updateForViewport(),a&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),n=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Or.RTL:Or.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),l=o||this.mustMeasureContent||this.contentDOMHeight!=t.clientHeight;this.contentDOMHeight=t.clientHeight,this.mustMeasureContent=!1;let a=0,h=0,u=parseInt(i.paddingTop)||0,f=parseInt(i.paddingBottom)||0;(this.paddingTop!=u||this.paddingBottom!=f)&&(this.paddingTop=u,this.paddingBottom=f,a|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(n.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,a|=8);let c=(this.printing?p9:d9)(t,this.paddingTop),d=c.top-this.pixelViewport.top,g=c.bottom-this.pixelViewport.bottom;this.pixelViewport=c;let w=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(w!=this.inView&&(this.inView=w,w&&(l=!0)),!this.inView)return 0;let S=t.clientWidth;if((this.contentDOMWidth!=S||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=S,this.editorHeight=e.scrollDOM.clientHeight,a|=8),l){let Q=e.docView.measureVisibleLineHeights(this.viewport);if(n.mustRefreshForHeights(Q)&&(o=!0),o||n.lineWrapping&&Math.abs(S-this.contentDOMWidth)>n.charWidth){let{lineHeight:M,charWidth:p}=e.docView.measureTextSize();o=n.refresh(s,M,p,S/p,Q),o&&(e.docView.minWidth=0,a|=8)}d>0&&g>0?h=Math.max(d,g):d<0&&g<0&&(h=Math.min(d,g)),n.heightChanged=!1;for(let M of this.viewports){let p=M.from==this.viewport.from?Q:e.docView.measureVisibleLineHeights(M);this.heightMap=this.heightMap.updateHeight(n,0,o,new a9(M.from,p))}n.heightChanged&&(a|=2)}let x=!this.viewportIsAppropriate(this.viewport,h)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return x&&(this.viewport=this.getViewport(h,this.scrollTarget)),this.updateForViewport(),(a&2||x)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps)),a|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),a}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),n=this.heightMap,s=this.state.doc,{visibleTop:o,visibleBottom:l}=this,a=new Kp(n.lineAt(o-i*1e3,ti.ByHeight,s,0,0).from,n.lineAt(l+(1-i)*1e3,ti.ByHeight,s,0,0).to);if(t){let{head:h}=t.range;if(h<a.from||h>a.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=n.lineAt(h,ti.ByPos,s,0,0),c;t.y=="center"?c=(f.top+f.bottom)/2-u/2:t.y=="start"||t.y=="nearest"&&h<a.from?c=f.top:c=f.bottom-u,a=new Kp(n.lineAt(c-1e3/2,ti.ByHeight,s,0,0).from,n.lineAt(c+u+1e3/2,ti.ByHeight,s,0,0).to)}}return a}mapViewport(e,t){let i=t.mapPos(e.from,-1),n=t.mapPos(e.to,1);return new Kp(this.heightMap.lineAt(i,ti.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(n,ti.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:n}=this.heightMap.lineAt(e,ti.ByPos,this.state.doc,0,0),{bottom:s}=this.heightMap.lineAt(t,ti.ByPos,this.state.doc,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||n<=o-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||s>=l+Math.max(10,Math.min(i,250)))&&n>o-2*1e3&&s<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let n of e)t.touchesRange(n.from,n.to)||i.push(new RO(t.mapPos(n.from),t.mapPos(n.to),n.size));return i}ensureLineGaps(e){let t=[];if(this.defaultTextDirection!=Or.LTR)return t;for(let i of this.viewportLines){if(i.length<4e3)continue;let n=m9(i.from,i.to,this.stateDeco);if(n.total<4e3)continue;let s,o;if(this.heightOracle.lineWrapping){let h=2e3/this.heightOracle.lineLength*this.heightOracle.lineHeight;s=Jp(n,(this.visibleTop-i.top-h)/i.height),o=Jp(n,(this.visibleBottom-i.top+h)/i.height)}else{let h=n.total*this.heightOracle.charWidth,u=2e3*this.heightOracle.charWidth;s=Jp(n,(this.pixelViewport.left-u)/h),o=Jp(n,(this.pixelViewport.right+u)/h)}let l=[];s>i.from&&l.push({from:i.from,to:s}),o<i.to&&l.push({from:o,to:i.to});let a=this.state.selection.main;a.from>=i.from&&a.from<=i.to&&EA(l,a.from-10,a.from+10),!a.empty&&a.to>=i.from&&a.to<=i.to&&EA(l,a.to-10,a.to+10);for(let{from:h,to:u}of l)u-h>1e3&&t.push(b9(e,f=>f.from>=i.from&&f.to<=i.to&&Math.abs(f.from-h)<1e3&&Math.abs(f.to-u)<1e3)||new RO(h,u,this.gapSize(i,h,u,n)))}return t}gapSize(e,t,i,n){let s=DA(n,i)-DA(n,t);return this.heightOracle.lineWrapping?e.height*s:n.total*this.heightOracle.charWidth*s}updateLineGaps(e){RO.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Cn.set(e.map(t=>t.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];Xi.spans(e,this.viewport.from,this.viewport.to,{span(n,s){t.push({from:n,to:s})},point(){}},20);let i=t.length!=this.visibleRanges.length||this.visibleRanges.some((n,s)=>n.from!=t[s].from||n.to!=t[s].to);return this.visibleRanges=t,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Ec(this.heightMap.lineAt(e,ti.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(e){return Ec(this.heightMap.lineAt(this.scaler.fromDOM(e),ti.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(e){return Ec(this.heightMap.blockAt(this.scaler.fromDOM(e),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Kp{constructor(e,t){this.from=e,this.to=t}}function m9(r,e,t){let i=[],n=r,s=0;return Xi.spans(t,r,e,{span(){},point(o,l){o>n&&(i.push({from:n,to:o}),s+=o-n),n=l}},20),n<e&&(i.push({from:n,to:e}),s+=e-n),{total:s,ranges:i}}function Jp({total:r,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(r*t);for(let n=0;;n++){let{from:s,to:o}=e[n],l=o-s;if(i<=l)return s+i;i-=l}}function DA(r,e){let t=0;for(let{from:i,to:n}of r.ranges){if(e<=n){t+=e-i;break}t+=n-i}return t/r.total}function EA(r,e,t){for(let i=0;i<r.length;i++){let n=r[i];if(n.from<t&&n.to>e){let s=[];n.from<e&&s.push({from:n.from,to:e}),n.to>t&&s.push({from:t,to:n.to}),r.splice(i,1,...s),i+=s.length-1}}}function b9(r,e){for(let t of r)if(e(t))return t}const BA={toDOM(r){return r},fromDOM(r){return r},scale:1};class O9{constructor(e,t,i){let n=0,s=0,o=0;this.viewports=i.map(({from:l,to:a})=>{let h=t.lineAt(l,ti.ByPos,e,0,0).top,u=t.lineAt(a,ti.ByPos,e,0,0).bottom;return n+=u-h,{from:l,to:a,top:h,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-n)/(t.height-n);for(let l of this.viewports)l.domTop=o+(l.top-s)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),s=l.bottom}toDOM(e){for(let t=0,i=0,n=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return n+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,n=s.domBottom}}fromDOM(e){for(let t=0,i=0,n=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return i+(e-n)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,n=s.domBottom}}}function Ec(r,e){if(e.scale==1)return r;let t=e.toDOM(r.top),i=e.toDOM(r.bottom);return new fa(r.from,r.length,t,i-t,Array.isArray(r.type)?r.type.map(n=>Ec(n,e)):r.type)}const eg=Mt.define({combine:r=>r.join(" ")}),Cy=Mt.define({combine:r=>r.indexOf(!0)>-1}),Ay=Ct.newName(),XR=Ct.newName(),ZR=Ct.newName(),GR={"&light":"."+XR,"&dark":"."+ZR};function Ty(r,e,t){return new Ct(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,n=>{if(n=="&")return r;if(!t||!t[n])throw new RangeError(`Unsupported selector: ${n}`);return t[n]}):r+" "+i}})}const k9=Ty("."+Ay,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere"},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#f3f9ff"},"&dark .cm-activeLine":{backgroundColor:"#223039"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},GR),w9={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},QO=Fe.ie&&Fe.ie_version<=11;class y9{constructor(e,t,i){this.view=e,this.onChange=t,this.onScrollChanged=i,this.active=!1,this.selectionRange=new vz,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let s of n)this.queue.push(s);(Fe.ie&&Fe.ie_version<=11||Fe.ios&&e.composing)&&n.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),QO&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),window.addEventListener("resize",this.onResize=this.onResize.bind(this)),typeof ResizeObserver=="function"&&(this.resize=new ResizeObserver(()=>{this.view.docView.lastUpdate<Date.now()-75&&this.onResize()}),this.resize.observe(e.scrollDOM)),window.addEventListener("beforeprint",this.onPrint=this.onPrint.bind(this)),this.start(),window.addEventListener("scroll",this.onScroll=this.onScroll.bind(this)),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange(),this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:t}=this,i=this.selectionRange;if(t.state.facet(ap)?t.root.activeElement!=this.dom:!uy(t.dom,i))return;let n=i.anchorNode&&t.docView.nearest(i.anchorNode);n&&n.ignoreEvent(e)||((Fe.ie&&Fe.ie_version<=11||Fe.android&&Fe.chrome)&&!t.state.selection.main.empty&&i.focusNode&&m0(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1))}readSelectionRange(){let{root:e}=this.view,t=g0(e),i=Fe.safari&&e.nodeType==11&&kz()==this.view.contentDOM&&v9(this.view)||t;return this.selectionRange.eq(i)?!1:(this.selectionRange.setRange(i),this.selectionChanged=!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,w9),QO&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){!this.active||(this.active=!1,this.observer.disconnect(),QO&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){this.delayedAndroidKey||requestAnimationFrame(()=>{let i=this.delayedAndroidKey;this.delayedAndroidKey=null,this.delayedFlush=-1,this.flush()||Yc(this.view.contentDOM,i.key,i.keyCode)}),(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t})}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=window.setTimeout(()=>{this.delayedFlush=-1,this.flush()},20))}forceFlush(){this.delayedFlush>=0&&(window.clearTimeout(this.delayedFlush),this.delayedFlush=-1,this.flush())}processRecords(){let e=this.queue;for(let s of this.observer.takeRecords())e.push(s);e.length&&(this.queue=[]);let t=-1,i=-1,n=!1;for(let s of e){let o=this.readMutation(s);!o||(o.typeOver&&(n=!0),t==-1?{from:t,to:i}=o:(t=Math.min(o.from,t),i=Math.max(o.to,i)))}return{from:t,to:i,typeOver:n}}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return;e&&this.readSelectionRange();let{from:t,to:i,typeOver:n}=this.processRecords(),s=this.selectionChanged&&uy(this.dom,this.selectionRange);if(t<0&&!s)return;this.selectionChanged=!1;let o=this.view.state,l=this.onChange(t,i,n);return this.view.state==o&&this.view.update([]),l}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.dirty|=4),e.type=="childList"){let i=NA(t,e.previousSibling||e.target.previousSibling,-1),n=NA(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:n?t.posBefore(n):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resize)===null||i===void 0||i.disconnect();for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResize),window.removeEventListener("beforeprint",this.onPrint),this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout)}}function NA(r,e,t){for(;e;){let i=Ri.get(e);if(i&&i.parent==r)return i;let n=e.parentNode;e=n!=r.dom?n:t>0?e.nextSibling:e.previousSibling}return null}function v9(r){let e=null;function t(a){a.preventDefault(),a.stopImmediatePropagation(),e=a.getTargetRanges()[0]}if(r.contentDOM.addEventListener("beforeinput",t,!0),document.execCommand("indent"),r.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let i=e.startContainer,n=e.startOffset,s=e.endContainer,o=e.endOffset,l=r.docView.domAtPos(r.state.selection.main.anchor);return m0(l.node,l.offset,s,o)&&([i,n,s,o]=[s,o,i,n]),{anchorNode:i,anchorOffset:n,focusNode:s,focusOffset:o}}function S9(r,e,t,i){let n,s,o=r.state.selection.main;if(e>-1){let l=r.docView.domBoundsAround(e,t,0);if(!l||r.state.readOnly)return!1;let{from:a,to:h}=l,u=r.docView.impreciseHead||r.docView.impreciseAnchor?[]:C9(r),f=new ER(u,r.state);f.readRange(l.startDOM,l.endDOM);let c=o.from,d=null;(r.inputState.lastKeyCode===8&&r.inputState.lastKeyTime>Date.now()-100||Fe.android&&f.text.length<h-a)&&(c=o.to,d="end");let g=x9(r.state.doc.sliceString(a,h,ua),f.text,c-a,d);g&&(Fe.chrome&&r.inputState.lastKeyCode==13&&g.toB==g.from+2&&f.text.slice(g.from,g.toB)==ua+ua&&g.toB--,n={from:a+g.from,to:a+g.toA,insert:Nt.of(f.text.slice(g.from,g.toB).split(ua))}),s=A9(u,a)}else if(r.hasFocus||!r.state.facet(ap)){let l=r.observer.selectionRange,{impreciseHead:a,impreciseAnchor:h}=r.docView,u=a&&a.node==l.focusNode&&a.offset==l.focusOffset||!nf(r.contentDOM,l.focusNode)?r.state.selection.main.head:r.docView.posFromDOM(l.focusNode,l.focusOffset),f=h&&h.node==l.anchorNode&&h.offset==l.anchorOffset||!nf(r.contentDOM,l.anchorNode)?r.state.selection.main.anchor:r.docView.posFromDOM(l.anchorNode,l.anchorOffset);(u!=o.head||f!=o.anchor)&&(s=Ge.single(f,u))}if(!n&&!s)return!1;if(!n&&i&&!o.empty&&s&&s.main.empty?n={from:o.from,to:o.to,insert:r.state.doc.slice(o.from,o.to)}:n&&n.from>=o.from&&n.to<=o.to&&(n.from!=o.from||n.to!=o.to)&&o.to-o.from-(n.to-n.from)<=4?n={from:o.from,to:o.to,insert:r.state.doc.slice(o.from,n.from).append(n.insert).append(r.state.doc.slice(n.to,o.to))}:(Fe.mac||Fe.android)&&n&&n.from==n.to&&n.from==o.head-1&&n.insert.toString()=="."&&(n={from:o.from,to:o.to,insert:Nt.of([" "])}),n){let l=r.state;if(Fe.ios&&r.inputState.flushIOSKey(r)||Fe.android&&(n.from==o.from&&n.to==o.to&&n.insert.length==1&&n.insert.lines==2&&Yc(r.contentDOM,"Enter",13)||n.from==o.from-1&&n.to==o.to&&n.insert.length==0&&Yc(r.contentDOM,"Backspace",8)||n.from==o.from&&n.to==o.to+1&&n.insert.length==0&&Yc(r.contentDOM,"Delete",46)))return!0;let a=n.insert.toString();if(r.state.facet(AR).some(f=>f(r,n.from,n.to,a)))return!0;r.inputState.composing>=0&&r.inputState.composing++;let h;if(n.from>=o.from&&n.to<=o.to&&n.to-n.from>=(o.to-o.from)/3&&(!s||s.main.empty&&s.main.from==n.from+n.insert.length)&&r.inputState.composing<0){let f=o.from<n.from?l.sliceDoc(o.from,n.from):"",c=o.to>n.to?l.sliceDoc(n.to,o.to):"";h=l.replaceSelection(r.state.toText(f+n.insert.sliceString(0,void 0,r.state.lineBreak)+c))}else{let f=l.changes(n),c=s&&!l.selection.main.eq(s.main)&&s.main.to<=f.newLength?s.main:void 0;if(l.selection.ranges.length>1&&r.inputState.composing>=0&&n.to<=o.to&&n.to>=o.to-10){let d=r.state.sliceDoc(n.from,n.to),g=BR(r)||r.state.doc.lineAt(o.head),w=o.to-n.to,S=o.to-o.from;h=l.changeByRange(x=>{if(x.from==o.from&&x.to==o.to)return{changes:f,range:c||x.map(f)};let Q=x.to-w,M=Q-d.length;if(x.to-x.from!=S||r.state.sliceDoc(M,Q)!=d||g&&x.to>=g.from&&x.from<=g.to)return{range:x};let p=l.changes({from:M,to:Q,insert:n.insert}),b=x.to-o.to;return{changes:p,range:c?Ge.range(Math.max(0,c.anchor+b),Math.max(0,c.head+b)):x.map(p)}})}else h={changes:f,selection:c&&l.selection.replaceRange(c)}}let u="input.type";return r.composing&&(u+=".compose",r.inputState.compositionFirstChange&&(u+=".start",r.inputState.compositionFirstChange=!1)),r.dispatch(h,{scrollIntoView:!0,userEvent:u}),!0}else if(s&&!s.main.eq(o)){let l=!1,a="select";return r.inputState.lastSelectionTime>Date.now()-50&&(r.inputState.lastSelectionOrigin=="select"&&(l=!0),a=r.inputState.lastSelectionOrigin),r.dispatch({selection:s,scrollIntoView:l,userEvent:a}),!0}else return!1}function x9(r,e,t,i){let n=Math.min(r.length,e.length),s=0;for(;s<n&&r.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==n&&r.length==e.length)return null;let o=r.length,l=e.length;for(;o>0&&l>0&&r.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(i=="end"){let a=Math.max(0,s-Math.min(o,l));t-=o+a-s}return o<s&&r.length<e.length?(s-=t<=s&&t>=o?s-t:0,l=s+(l-o),o=s):l<s&&(s-=t<=s&&t>=l?s-t:0,o=s+(o-l),l=s),{from:s,toA:o,toB:l}}function C9(r){let e=[];if(r.root.activeElement!=r.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:n,focusOffset:s}=r.observer.selectionRange;return t&&(e.push(new gA(t,i)),(n!=t||s!=i)&&e.push(new gA(n,s))),e}function A9(r,e){if(r.length==0)return null;let t=r[0].pos,i=r.length==2?r[1].pos:t;return t>-1&&i>-1?Ge.single(t+e,i+e):null}class bi{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(t=>this.update([t])),this.dispatch=this.dispatch.bind(this),this.root=e.root||Sz(e.parent)||document,this.viewState=new QA(e.state||si.create()),this.plugins=this.state.facet(Qc).map(t=>new _O(t));for(let t of this.plugins)t.update(this);this.observer=new y9(this,(t,i,n)=>S9(this,t,i,n),t=>{this.inputState.runScrollHandlers(this,t),this.observer.intersecting&&this.measure()}),this.inputState=new Gz(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new mA(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}dispatch(...e){this._dispatch(e.length==1&&e[0]instanceof Zn?e[0]:this.state.update(...e))}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,n,s=this.state;for(let l of e){if(l.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=l.state}if(this.destroyed){this.viewState.state=s;return}if(this.observer.clear(),s.facet(si.phrases)!=this.state.facet(si.phrases))return this.setState(s);n=w0.create(this,s,e);let o=this.viewState.scrollTarget;try{this.updateState=2;for(let l of e){if(o&&(o=o.map(l.changes)),l.scrollIntoView){let{main:a}=l.state.selection;o=new O0(a.empty?a:Ge.cursor(a.head,a.head>a.anchor?-1:1))}for(let a of l.effects)a.is(dA)&&(o=a.value)}this.viewState.update(n,o),this.bidiCache=y0.update(this.bidiCache,n.changes),n.empty||(this.updatePlugins(n),this.inputState.update(n)),t=this.docView.update(n),this.state.facet(Dc)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(l=>l.isUserEvent("select.pointer")))}finally{this.updateState=0}if(n.startState.facet(eg)!=n.state.facet(eg)&&(this.viewState.mustMeasureContent=!0),(t||i||o||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!n.empty)for(let l of this.state.facet(wy))l(n)}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new QA(e),this.plugins=e.facet(Qc).map(i=>new _O(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView=new mA(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Qc),i=e.state.facet(Qc);if(t!=i){let n=[];for(let s of i){let o=t.indexOf(s);if(o<0)n.push(new _O(s));else{let l=this.plugins[o];l.mustUpdate=e,n.push(l)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=n,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let n of this.plugins)n.mustUpdate=e;for(let n=0;n<this.plugins.length;n++)this.plugins[n].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.flush();let t=null;try{for(let i=0;;i++){this.updateState=1;let n=this.viewport,s=this.viewState.measure(this);if(!s&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(i>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let o=[];s&4||([this.measureRequests,o]=[o,this.measureRequests]);let l=o.map(f=>{try{return f.read(this)}catch(c){return xh(this.state,c),IA}}),a=w0.create(this,this.state,[]),h=!1,u=!1;a.flags|=s,t?t.flags|=s:t=a,this.updateState=2,a.empty||(this.updatePlugins(a),this.inputState.update(a),this.updateAttrs(),h=this.docView.update(a));for(let f=0;f<o.length;f++)if(l[f]!=IA)try{let c=o[f];c.write&&c.write(l[f],this)}catch(c){xh(this.state,c)}if(this.viewState.scrollTarget&&(this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,u=!0),h&&this.docView.updateSelection(!0),this.viewport.from==n.from&&this.viewport.to==n.to&&!u&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let i of this.state.facet(wy))i(t)}get themeClasses(){return Ay+" "+(this.state.facet(Cy)?ZR:XR)+" "+this.state.facet(eg)}updateAttrs(){let e=LA(this,PR,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(ap)?"true":"false",class:"cm-content",style:`${Fe.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),LA(this,_R,t);let i=this.observer.ignore(()=>{let n=Oy(this.contentDOM,this.contentAttrs,t),s=Oy(this.dom,this.editorAttrs,e);return n||s});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let n of i.effects)if(n.is(bi.announce)){t&&(this.announceDOM.textContent=""),t=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=n.value}}mountStyles(){this.styleModules=this.state.facet(Dc),Ct.mount(this.root,this.styleModules.concat(k9).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=requestAnimationFrame(()=>this.measure())),e){if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return MO(this,e,vA(this,e,t,i))}moveByGroup(e,t){return MO(this,e,vA(this,e,t,i=>Xz(this,e.head,i)))}moveToLineBoundary(e,t,i=!0){return qz(this,e,t,i)}moveVertically(e,t,i){return MO(this,e,Zz(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),IR(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let n=this.state.doc.lineAt(e),s=this.bidiSpans(n),o=s[Nu.find(s,e-n.from,-1,t)];return _b(i,o.dir==Or.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(TR)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>T9)return QR(e.length);let t=this.textDirectionAt(e.from);for(let n of this.bidiCache)if(n.from==e.from&&n.dir==t)return n.order;let i=Qz(e.text,t);return this.bidiCache.push(new y0(e.from,e.to,t,i)),i}get hasFocus(){var e;return(document.hasFocus()||Fe.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{hR(this.contentDOM),this.docView.updateSelection()})}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return dA.of(new O0(typeof e=="number"?Ge.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return k0.define(()=>({}),{eventHandlers:e})}static theme(e,t){let i=Ct.newName(),n=[eg.of(i),Dc.of(Ty(`.${i}`,e))];return t&&t.dark&&n.push(Cy.of(!0)),n}static baseTheme(e){return oz.lowest(Dc.of(Ty("."+Ay,e,GR)))}}bi.styleModule=Dc;bi.inputHandler=AR;bi.perLineTextDirection=TR;bi.exceptionSink=CR;bi.updateListener=wy;bi.editable=ap;bi.mouseSelectionStyle=xR;bi.dragMovesSelection=SR;bi.clickAddsSelectionRange=vR;bi.decorations=vd;bi.atomicRanges=$R;bi.scrollMargins=MR;bi.darkTheme=Cy;bi.contentAttributes=_R;bi.editorAttributes=PR;bi.lineWrapping=bi.contentAttributes.of({class:"cm-lineWrapping"});bi.announce=Pn.define();const T9=4096,IA={};class y0{constructor(e,t,i,n){this.from=e,this.to=t,this.dir=i,this.order=n}static update(e,t){if(t.empty)return e;let i=[],n=e.length?e[e.length-1].dir:Or.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==n&&!t.touchesRange(o.from,o.to)&&i.push(new y0(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.order))}return i}}function LA(r,e,t){for(let i=r.state.facet(e),n=i.length-1;n>=0;n--){let s=i[n],o=typeof s=="function"?s(r):s;o&&by(o,t)}return t}const P9=!Fe.ios,_9={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};P9&&(_9[".cm-line"].caretColor="transparent !important");class sf extends tf{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}sf.prototype.elementClass="";sf.prototype.toDOM=void 0;sf.prototype.mapMode=qr.TrackBefore;sf.prototype.startSide=sf.prototype.endSide=-1;sf.prototype.point=!0;const $9=1024;let M9=0;class DO{constructor(e,t){this.from=e,this.to=t}}class $t{constructor(e={}){this.id=M9++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=us.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}$t.closedBy=new $t({deserialize:r=>r.split(" ")});$t.openedBy=new $t({deserialize:r=>r.split(" ")});$t.group=new $t({deserialize:r=>r.split(" ")});$t.contextHash=new $t({perNode:!0});$t.lookAhead=new $t({perNode:!0});$t.mounted=new $t({perNode:!0});const R9=Object.create(null);class us{constructor(e,t,i,n=0){this.name=e,this.props=t,this.id=i,this.flags=n}static define(e){let t=e.props&&e.props.length?Object.create(null):R9,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),n=new us(e.name||"",t,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(n)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return n}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop($t.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let n of i.split(" "))t[n]=e[i];return i=>{for(let n=i.prop($t.group),s=-1;s<(n?n.length:0);s++){let o=t[s<0?i.name:n[s]];if(o)return o}}}}us.none=new us("",Object.create(null),0,8);const tg=new WeakMap,zA=new WeakMap;var Wn;(function(r){r[r.ExcludeBuffers=1]="ExcludeBuffers",r[r.IncludeAnonymous=2]="IncludeAnonymous",r[r.IgnoreMounts=4]="IgnoreMounts",r[r.IgnoreOverlays=8]="IgnoreOverlays"})(Wn||(Wn={}));class Gn{constructor(e,t,i,n,s){if(this.type=e,this.children=t,this.positions=i,this.length=n,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,l]of s)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=this.prop($t.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let n=i.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new x0(this.topNode,e)}cursorAt(e,t=0,i=0){let n=tg.get(this)||this.topNode,s=new x0(n);return s.moveTo(e,t),tg.set(this,s._tree),s}get topNode(){return new pl(this,0,0,null)}resolve(e,t=0){let i=of(tg.get(this)||this.topNode,e,t,!1);return tg.set(this,i),i}resolveInner(e,t=0){let i=of(zA.get(this)||this.topNode,e,t,!0);return zA.set(this,i),i}iterate(e){let{enter:t,leave:i,from:n=0,to:s=this.length}=e;for(let o=this.cursor((e.mode||0)|Wn.IncludeAnonymous);;){let l=!1;if(o.from<=s&&o.to>=n&&(o.type.isAnonymous||t(o)!==!1)){if(o.firstChild())continue;l=!0}for(;l&&i&&!o.type.isAnonymous&&i(o),!o.nextSibling();){if(!o.parent())return;l=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:nS(us.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,n)=>new Gn(this.type,t,i,n,this.propValues),e.makeTree||((t,i,n)=>new Gn(us.none,t,i,n)))}static build(e){return D9(e)}}Gn.empty=new Gn(us.none,[],[],0);class tS{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new tS(this.buffer,this.index)}}class qh{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return us.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],n=this.set.types[t],s=n.name;if(/\W/.test(s)&&!n.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,t,i,n,s){let{buffer:o}=this,l=-1;for(let a=e;a!=t&&!(UR(s,n,o[a+1],o[a+2])&&(l=a,i>0));a=o[a+3]);return l}slice(e,t,i,n){let s=this.buffer,o=new Uint16Array(t-e);for(let l=e,a=0;l<t;)o[a++]=s[l++],o[a++]=s[l++]-i,o[a++]=s[l++]-i,o[a++]=s[l++]-e;return new qh(o,n-i,this.set)}}function UR(r,e,t,i){switch(r){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function YR(r,e){let t=r.childBefore(e);for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(r=t,t=i.prevSibling):t=i}return r}function of(r,e,t,i){for(var n;r.from==r.to||(t<1?r.from>=e:r.from>e)||(t>-1?r.to<=e:r.to<e);){let o=!i&&r instanceof pl&&r.index<0?null:r.parent;if(!o)return r;r=o}let s=i?0:Wn.IgnoreOverlays;if(i)for(let o=r,l=o.parent;l;o=l,l=o.parent)o instanceof pl&&o.index<0&&((n=l.enter(e,t,s))===null||n===void 0?void 0:n.from)!=o.from&&(r=l);for(;;){let o=r.enter(e,t,s);if(!o)return r;r=o}}class pl{constructor(e,t,i,n){this._tree=e,this.from=t,this.index=i,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,n,s=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,h=t>0?l.length:-1;e!=h;e+=t){let u=l[e],f=a[e]+o.from;if(!!UR(n,i,f,f+u.length)){if(u instanceof qh){if(s&Wn.ExcludeBuffers)continue;let c=u.findChild(0,u.buffer.length,t,i-f,n);if(c>-1)return new ca(new Q9(o,u,e,f),null,c)}else if(s&Wn.IncludeAnonymous||!u.type.isAnonymous||iS(u)){let c;if(!(s&Wn.IgnoreMounts)&&u.props&&(c=u.prop($t.mounted))&&!c.overlay)return new pl(c.tree,f,e,o);let d=new pl(u,f,e,o);return s&Wn.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(t<0?u.children.length-1:0,t,i,n)}}}if(s&Wn.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let n;if(!(i&Wn.IgnoreOverlays)&&(n=this._tree.prop($t.mounted))&&n.overlay){let s=e-this.from;for(let{from:o,to:l}of n.overlay)if((t>0?o<=s:o<s)&&(t<0?l>=s:l>s))return new pl(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new x0(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return of(this,e,t,!1)}resolveInner(e,t=0){return of(this,e,t,!0)}enterUnfinishedNodesBefore(e){return YR(this,e)}getChild(e,t=null,i=null){let n=v0(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return v0(this,e,t,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return S0(this,e)}}function v0(r,e,t,i){let n=r.cursor(),s=[];if(!n.firstChild())return s;if(t!=null){for(;!n.type.is(t);)if(!n.nextSibling())return s}for(;;){if(i!=null&&n.type.is(i))return s;if(n.type.is(e)&&s.push(n.node),!n.nextSibling())return i==null?s:[]}}function S0(r,e,t=e.length-1){for(let i=r.parent;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class Q9{constructor(e,t,i,n){this.parent=e,this.buffer=t,this.index=i,this.start=n}}class ca{constructor(e,t,i){this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,i){let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.context.start,i);return s<0?null:new ca(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&Wn.ExcludeBuffers)return null;let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new ca(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new ca(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new ca(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new x0(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,n=this.index+4,s=i.buffer[this.index+3];if(s>n){let o=i.buffer[this.index+1],l=i.buffer[this.index+2];e.push(i.slice(n,s,o,l)),t.push(0)}return new Gn(this.type,e,t,this.to-this.from)}resolve(e,t=0){return of(this,e,t,!1)}resolveInner(e,t=0){return of(this,e,t,!0)}enterUnfinishedNodesBefore(e){return YR(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,i=null){let n=v0(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return v0(this,e,t,i)}get node(){return this}matchContext(e){return S0(this,e)}}class x0{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof pl)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=i+n.buffer[e+1],this.to=i+n.buffer[e+2],!0}yield(e){return e?e instanceof pl?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:n}=this.buffer,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&Wn.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Wn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Wn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let n=i<0?0:this.stack[i]+4;if(this.index!=n)return this.yieldBuf(t.findChild(n,this.index,-1,0,4))}else{let n=t.buffer[this.index+3];if(n<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(n)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(n.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:i}=n)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let s=t+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let l=i._tree.children[s];if(this.mode&Wn.IncludeAnonymous||l instanceof qh||!l.type.isAnonymous||iS(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer){e:for(let n=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==n){if(n==this.index)return o;t=o,i=s+1;break e}n=this.stack[--s]}}for(let n=i;n<this.stack.length;n++)t=new ca(this.buffer,t,this.stack[n]);return this.bufferNode=new ca(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let n=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(n=!0)}for(;n&&t&&t(this),n=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,n=!0}}}matchContext(e){if(!this.buffer)return S0(this.node,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let n=e.length-1,s=this.stack.length-1;n>=0;s--){if(s<0)return S0(this.node,e,n);let o=i[t.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[n]&&e[n]!=o.name)return!1;n--}}return!0}}function iS(r){return r.children.some(e=>e instanceof qh||!e.type.isAnonymous||iS(e))}function D9(r){var e;let{buffer:t,nodeSet:i,maxBufferLength:n=$9,reused:s=[],minRepeatType:o=i.types.length}=r,l=Array.isArray(t)?new tS(t,t.length):t,a=i.types,h=0,u=0;function f(p,b,m,k,C){let{id:v,start:y,end:T,size:E}=l,$=u;for(;E<0;)if(l.next(),E==-1){let L=s[v];m.push(L),k.push(y-p);return}else if(E==-3){h=v;return}else if(E==-4){u=v;return}else throw new RangeError(`Unrecognized record size: ${E}`);let R=a[v],N,_,W=y-p;if(T-y<=n&&(_=w(l.pos-b,C))){let L=new Uint16Array(_.size-_.skip),I=l.pos-_.size,j=L.length;for(;l.pos>I;)j=S(_.start,L,j);N=new qh(L,T-_.start,i),W=_.start-p}else{let L=l.pos-E;l.next();let I=[],j=[],X=v>=o?v:-1,Z=0,ie=T;for(;l.pos>L;)X>=0&&l.id==X&&l.size>=0?(l.end<=ie-n&&(d(I,j,y,Z,l.end,ie,X,$),Z=I.length,ie=l.end),l.next()):f(y,L,I,j,X);if(X>=0&&Z>0&&Z<I.length&&d(I,j,y,Z,y,ie,X,$),I.reverse(),j.reverse(),X>-1&&Z>0){let G=c(R);N=nS(R,I,j,0,I.length,0,T-y,G,G)}else N=g(R,I,j,T-y,$-T)}m.push(N),k.push(W)}function c(p){return(b,m,k)=>{let C=0,v=b.length-1,y,T;if(v>=0&&(y=b[v])instanceof Gn){if(!v&&y.type==p&&y.length==k)return y;(T=y.prop($t.lookAhead))&&(C=m[v]+y.length+T)}return g(p,b,m,k,C)}}function d(p,b,m,k,C,v,y,T){let E=[],$=[];for(;p.length>k;)E.push(p.pop()),$.push(b.pop()+m-C);p.push(g(i.types[y],E,$,v-C,T-v)),b.push(C-m)}function g(p,b,m,k,C=0,v){if(h){let y=[$t.contextHash,h];v=v?[y].concat(v):[y]}if(C>25){let y=[$t.lookAhead,C];v=v?[y].concat(v):[y]}return new Gn(p,b,m,k,v)}function w(p,b){let m=l.fork(),k=0,C=0,v=0,y=m.end-n,T={size:0,start:0,skip:0};e:for(let E=m.pos-p;m.pos>E;){let $=m.size;if(m.id==b&&$>=0){T.size=k,T.start=C,T.skip=v,v+=4,k+=4,m.next();continue}let R=m.pos-$;if($<0||R<E||m.start<y)break;let N=m.id>=o?4:0,_=m.start;for(m.next();m.pos>R;){if(m.size<0)if(m.size==-3)N+=4;else break e;else m.id>=o&&(N+=4);m.next()}C=_,k+=$,v+=N}return(b<0||k==p)&&(T.size=k,T.start=C,T.skip=v),T.size>4?T:void 0}function S(p,b,m){let{id:k,start:C,end:v,size:y}=l;if(l.next(),y>=0&&k<o){let T=m;if(y>4){let E=l.pos-(y-4);for(;l.pos>E;)m=S(p,b,m)}b[--m]=T,b[--m]=v-p,b[--m]=C-p,b[--m]=k}else y==-3?h=k:y==-4&&(u=k);return m}let x=[],Q=[];for(;l.pos>0;)f(r.start||0,r.bufferStart||0,x,Q,-1);let M=(e=r.length)!==null&&e!==void 0?e:x.length?Q[0]+x[0].length:0;return new Gn(a[r.topID],x.reverse(),Q.reverse(),M)}const WA=new WeakMap;function Pm(r,e){if(!r.isAnonymous||e instanceof qh||e.type!=r)return 1;let t=WA.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=r||!(i instanceof Gn)){t=1;break}t+=Pm(r,i)}WA.set(e,t)}return t}function nS(r,e,t,i,n,s,o,l,a){let h=0;for(let g=i;g<n;g++)h+=Pm(r,e[g]);let u=Math.ceil(h*1.5/8),f=[],c=[];function d(g,w,S,x,Q){for(let M=S;M<x;){let p=M,b=w[M],m=Pm(r,g[M]);for(M++;M<x;M++){let k=Pm(r,g[M]);if(m+k>=u)break;m+=k}if(M==p+1){if(m>u){let k=g[p];d(k.children,k.positions,0,k.children.length,w[p]+Q);continue}f.push(g[p])}else{let k=w[M-1]+g[M-1].length-b;f.push(nS(r,g,w,p,M,b,k,null,a))}c.push(b+Q-s)}}return d(e,t,i,n,0),(l||a)(f,c,o)}class Ch{constructor(e,t,i,n,s=!1,o=!1){this.from=e,this.to=t,this.tree=i,this.offset=n,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let n=[new Ch(0,e.length,e,0,!1,i)];for(let s of t)s.to>e.length&&n.push(s);return n}static applyChanges(e,t,i=128){if(!t.length)return e;let n=[],s=1,o=e.length?e[0]:null;for(let l=0,a=0,h=0;;l++){let u=l<t.length?t[l]:null,f=u?u.fromA:1e9;if(f-a>=i)for(;o&&o.from<f;){let c=o;if(a>=c.from||f<=c.to||h){let d=Math.max(c.from,a)-h,g=Math.min(c.to,f)-h;c=d>=g?null:new Ch(d,g,c.tree,c.offset+h,l>0,!!u)}if(c&&n.push(c),o.to>f)break;o=s<e.length?e[s++]:null}if(!u)break;a=u.toA,h=u.toA-u.toB}return n}}class E9{startParse(e,t,i){return typeof e=="string"&&(e=new B9(e)),i=i?i.length?i.map(n=>new DO(n.from,n.to)):[new DO(0,0)]:[new DO(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let n=this.startParse(e,t,i);for(;;){let s=n.advance();if(s)return s}}}class B9{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new $t({perNode:!0});class It{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){let n=[];return this.decompose(0,e,n,2),i.length&&i.decompose(0,i.length,n,3),this.decompose(t,this.length,n,1),Qo.from(n,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let i=[];return this.decompose(e,t,i,0),Qo.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),n=new Kc(this),s=new Kc(e);for(let o=t,l=t;;){if(n.next(o),s.next(o),o=0,n.lineBreak!=s.lineBreak||n.done!=s.done||n.value!=s.value)return!1;if(l+=n.value.length,n.done||l>=i)return!0}}iter(e=1){return new Kc(this,e)}iterRange(e,t=this.length){return new KR(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let n=this.line(e).from;i=this.iterRange(n,Math.max(n,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new JR(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?It.empty:e.length<=32?new Ii(e):Qo.from(Ii.split(e,[]))}}class Ii extends It{constructor(e,t=N9(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,n){for(let s=0;;s++){let o=this.text[s],l=n+o.length;if((t?i:l)>=e)return new I9(n,l,i,o);n=l+1,i++}}decompose(e,t,i,n){let s=e<=0&&t>=this.length?this:new Ii(VA(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(n&1){let o=i.pop(),l=_m(s.text,o.text.slice(),0,s.length);if(l.length<=32)i.push(new Ii(l,o.length+s.length));else{let a=l.length>>1;i.push(new Ii(l.slice(0,a)),new Ii(l.slice(a)))}}else i.push(s)}replace(e,t,i){if(!(i instanceof Ii))return super.replace(e,t,i);let n=_m(this.text,_m(i.text,VA(this.text,0,e)),t),s=this.length+i.length-(t-e);return n.length<=32?new Ii(n,s):Qo.from(Ii.split(n,[]),s)}sliceString(e,t=this.length,i=`
`){let n="";for(let s=0,o=0;s<=t&&o<this.text.length;o++){let l=this.text[o],a=s+l.length;s>e&&o&&(n+=i),e<a&&t>s&&(n+=l.slice(Math.max(0,e-s),t-s)),s=a+1}return n}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],n=-1;for(let s of e)i.push(s),n+=s.length+1,i.length==32&&(t.push(new Ii(i,n)),i=[],n=-1);return n>-1&&t.push(new Ii(i,n)),t}}class Qo extends It{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,n){for(let s=0;;s++){let o=this.children[s],l=n+o.length,a=i+o.lines-1;if((t?a:l)>=e)return o.lineInner(e,t,i,n);n=l+1,i=a+1}}decompose(e,t,i,n){for(let s=0,o=0;o<=t&&s<this.children.length;s++){let l=this.children[s],a=o+l.length;if(e<=a&&t>=o){let h=n&((o<=e?1:0)|(a>=t?2:0));o>=e&&a<=t&&!h?i.push(l):l.decompose(e-o,t-o,i,h)}o=a+1}}replace(e,t,i){if(i.lines<this.lines)for(let n=0,s=0;n<this.children.length;n++){let o=this.children[n],l=s+o.length;if(e>=s&&t<=l){let a=o.replace(e-s,t-s,i),h=this.lines-o.lines+a.lines;if(a.lines<h>>5-1&&a.lines>h>>5+1){let u=this.children.slice();return u[n]=a,new Qo(u,this.length-(t-e)+i.length)}return super.replace(s,l,a)}s=l+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){let n="";for(let s=0,o=0;s<this.children.length&&o<=t;s++){let l=this.children[s],a=o+l.length;o>e&&s&&(n+=i),e<a&&t>o&&(n+=l.sliceString(e-o,t-o,i)),o=a+1}return n}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Qo))return 0;let i=0,[n,s,o,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;n+=t,s+=t){if(n==o||s==l)return i;let a=this.children[n],h=e.children[s];if(a!=h)return i+a.scanIdentical(h,t);i+=a.length+1}}static from(e,t=e.reduce((i,n)=>i+n.length+1,-1)){let i=0;for(let d of e)i+=d.lines;if(i<32){let d=[];for(let g of e)g.flatten(d);return new Ii(d,t)}let n=Math.max(32,i>>5),s=n<<1,o=n>>1,l=[],a=0,h=-1,u=[];function f(d){let g;if(d.lines>s&&d instanceof Qo)for(let w of d.children)f(w);else d.lines>o&&(a>o||!a)?(c(),l.push(d)):d instanceof Ii&&a&&(g=u[u.length-1])instanceof Ii&&d.lines+g.lines<=32?(a+=d.lines,h+=d.length+1,u[u.length-1]=new Ii(g.text.concat(d.text),g.length+1+d.length)):(a+d.lines>n&&c(),a+=d.lines,h+=d.length+1,u.push(d))}function c(){a!=0&&(l.push(u.length==1?u[0]:Qo.from(u,h)),h=-1,a=u.length=0)}for(let d of e)f(d);return c(),l.length==1?l[0]:new Qo(l,t)}}It.empty=new Ii([""],0);function N9(r){let e=-1;for(let t of r)e+=t.length+1;return e}function _m(r,e,t=0,i=1e9){for(let n=0,s=0,o=!0;s<r.length&&n<=i;s++){let l=r[s],a=n+l.length;a>=t&&(a>i&&(l=l.slice(0,i-n)),n<t&&(l=l.slice(t-n)),o?(e[e.length-1]+=l,o=!1):e.push(l)),n=a+1}return e}function VA(r,e,t){return _m(r,[""],e,t)}class Kc{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Ii?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,n=this.nodes[i],s=this.offsets[i],o=s>>1,l=n instanceof Ii?n.text.length:n.children.length;if(o==(t>0?l:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(n instanceof Ii){let a=n.text[o+(t<0?-1:0)];if(this.offsets[i]+=t,a.length>Math.max(0,e))return this.value=e==0?a:t>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=n.children[o+(t<0?-1:0)];e>a.length?(e-=a.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(a),this.offsets.push(t>0?1:(a instanceof Ii?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class KR{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new Kc(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:n}=this.cursor.next(e);return this.pos+=(n.length+e)*t,this.value=n.length<=i?n:t<0?n.slice(n.length-i):n.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class JR{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:n}=this.inner.next(e);return t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=n,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol!="undefined"&&(It.prototype[Symbol.iterator]=function(){return this.iter()},Kc.prototype[Symbol.iterator]=KR.prototype[Symbol.iterator]=JR.prototype[Symbol.iterator]=function(){return this});class I9{constructor(e,t,i,n){this.from=e,this.to=t,this.number=i,this.text=n}get length(){return this.to-this.from}}let Iu="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(r=>r?parseInt(r,36):1);for(let r=1;r<Iu.length;r++)Iu[r]+=Iu[r-1];function L9(r){for(let e=1;e<Iu.length;e+=2)if(Iu[e]>r)return Iu[e-1]<=r;return!1}function jA(r){return r>=127462&&r<=127487}const FA=8205;function ll(r,e,t=!0,i=!0){return(t?eQ:z9)(r,e,i)}function eQ(r,e,t){if(e==r.length)return e;e&&tQ(r.charCodeAt(e))&&iQ(r.charCodeAt(e-1))&&e--;let i=EO(r,e);for(e+=HA(i);e<r.length;){let n=EO(r,e);if(i==FA||n==FA||t&&L9(n))e+=HA(n),i=n;else if(jA(n)){let s=0,o=e-2;for(;o>=0&&jA(EO(r,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function z9(r,e,t){for(;e>0;){let i=eQ(r,e-2,t);if(i<e)return i;e--}return 0}function tQ(r){return r>=56320&&r<57344}function iQ(r){return r>=55296&&r<56320}function EO(r,e){let t=r.charCodeAt(e);if(!iQ(t)||e+1==r.length)return t;let i=r.charCodeAt(e+1);return tQ(i)?(t-55296<<10)+(i-56320)+65536:t}function HA(r){return r<65536?1:2}const Py=/\r\n?|\n/;var Zr=function(r){return r[r.Simple=0]="Simple",r[r.TrackDel=1]="TrackDel",r[r.TrackBefore=2]="TrackBefore",r[r.TrackAfter=3]="TrackAfter",r}(Zr||(Zr={}));class gl{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,n=0;t<this.sections.length;){let s=this.sections[t++],o=this.sections[t++];o<0?(e(i,n,s),n+=s):n+=o,i+=s}}iterChangedRanges(e,t=!1){_y(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];n<0?e.push(i,n):e.push(n,i)}return new gl(e)}composeDesc(e){return this.empty?e:e.empty?this:nQ(this,e)}mapDesc(e,t=!1){return e.empty?this:$y(this,e,t)}mapPos(e,t=-1,i=Zr.Simple){let n=0,s=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],h=n+l;if(a<0){if(h>e)return s+(e-n);s+=l}else{if(i!=Zr.Simple&&h>=e&&(i==Zr.TrackDel&&n<e&&h>e||i==Zr.TrackBefore&&n<e||i==Zr.TrackAfter&&h>e))return null;if(h>e||h==e&&t<0&&!l)return e==n||t<0?s:s+a;s+=a}n=h}if(e>n)throw new RangeError(`Position ${e} is out of range for changeset of length ${n}`);return s}touchesRange(e,t=e){for(let i=0,n=0;i<this.sections.length&&n<=t;){let s=this.sections[i++],o=this.sections[i++],l=n+s;if(o>=0&&n<=t&&l>=e)return n<e&&l>t?"cover":!0;n=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];e+=(e?" ":"")+i+(n>=0?":"+n:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new gl(e)}static create(e){return new gl(e)}}class an extends gl{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return _y(this,(t,i,n,s,o)=>e=e.replace(n,n+(i-t),o),!1),e}mapDesc(e,t=!1){return $y(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let n=0,s=0;n<t.length;n+=2){let o=t[n],l=t[n+1];if(l>=0){t[n]=l,t[n+1]=o;let a=n>>1;for(;i.length<a;)i.push(It.empty);i.push(o?e.slice(s,s+o):It.empty)}s+=o}return new an(t,i)}compose(e){return this.empty?e:e.empty?this:nQ(this,e,!0)}map(e,t=!1){return e.empty?this:$y(this,e,t,!0)}iterChanges(e,t=!1){_y(this,e,t)}get desc(){return gl.create(this.sections)}filter(e){let t=[],i=[],n=[],s=new Sd(this);e:for(let o=0,l=0;;){let a=o==e.length?1e9:e[o++];for(;l<a||l==a&&s.len==0;){if(s.done)break e;let u=Math.min(s.len,a-l);cr(n,u,-1);let f=s.ins==-1?-1:s.off==0?s.ins:0;cr(t,u,f),f>0&&gh(i,t,s.text),s.forward(u),l+=u}let h=e[o++];for(;l<h;){if(s.done)break e;let u=Math.min(s.len,h-l);cr(t,u,-1),cr(n,u,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(u),l+=u}}return{changes:new an(t,i),filtered:gl.create(n)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],n=this.sections[t+1];n<0?e.push(i):n==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let n=[],s=[],o=0,l=null;function a(u=!1){if(!u&&!n.length)return;o<t&&cr(n,t-o,-1);let f=new an(n,s);l=l?l.compose(f.map(l)):f,n=[],s=[],o=0}function h(u){if(Array.isArray(u))for(let f of u)h(f);else if(u instanceof an){if(u.length!=t)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${t})`);a(),l=l?l.compose(u.map(l)):u}else{let{from:f,to:c=f,insert:d}=u;if(f>c||f<0||c>t)throw new RangeError(`Invalid change range ${f} to ${c} (in doc of length ${t})`);let g=d?typeof d=="string"?It.of(d.split(i||Py)):d:It.empty,w=g.length;if(f==c&&w==0)return;f<o&&a(),f>o&&cr(n,f-o,-1),cr(n,c-f,w),gh(s,n,g),o=c}}return h(e),a(!l),l}static empty(e){return new an(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let n=0;n<e.length;n++){let s=e[n];if(typeof s=="number")t.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)t.push(s[0],0);else{for(;i.length<n;)i.push(It.empty);i[n]=It.of(s.slice(1)),t.push(s[0],i[n].length)}}}return new an(t,i)}static createSet(e,t){return new an(e,t)}}function cr(r,e,t,i=!1){if(e==0&&t<=0)return;let n=r.length-2;n>=0&&t<=0&&t==r[n+1]?r[n]+=e:e==0&&r[n]==0?r[n+1]+=t:i?(r[n]+=e,r[n+1]+=t):r.push(e,t)}function gh(r,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<r.length)r[r.length-1]=r[r.length-1].append(t);else{for(;r.length<i;)r.push(It.empty);r.push(t)}}function _y(r,e,t){let i=r.inserted;for(let n=0,s=0,o=0;o<r.sections.length;){let l=r.sections[o++],a=r.sections[o++];if(a<0)n+=l,s+=l;else{let h=n,u=s,f=It.empty;for(;h+=l,u+=a,a&&i&&(f=f.append(i[o-2>>1])),!(t||o==r.sections.length||r.sections[o+1]<0);)l=r.sections[o++],a=r.sections[o++];e(n,h,s,u,f),n=h,s=u}}}function $y(r,e,t,i=!1){let n=[],s=i?[]:null,o=new Sd(r),l=new Sd(e);for(let a=0,h=0;;)if(o.ins==-1)a+=o.len,o.next();else if(l.ins==-1&&h<a){let u=Math.min(l.len,a-h);l.forward(u),cr(n,u,-1),h+=u}else if(l.ins>=0&&(o.done||h<a||h==a&&(l.len<o.len||l.len==o.len&&!t))){for(cr(n,l.ins,-1);a>h&&!o.done&&a+o.len<h+l.len;)a+=o.len,o.next();h+=l.len,l.next()}else if(o.ins>=0){let u=0,f=a+o.len;for(;;)if(l.ins>=0&&h>a&&h+l.len<f)u+=l.ins,h+=l.len,l.next();else if(l.ins==-1&&h<f){let c=Math.min(l.len,f-h);u+=c,l.forward(c),h+=c}else break;cr(n,u,o.ins),s&&gh(s,n,o.text),a=f,o.next()}else{if(o.done&&l.done)return s?an.createSet(n,s):gl.create(n);throw new Error("Mismatched change set lengths")}}function nQ(r,e,t=!1){let i=[],n=t?[]:null,s=new Sd(r),o=new Sd(e);for(let l=!1;;){if(s.done&&o.done)return n?an.createSet(i,n):gl.create(i);if(s.ins==0)cr(i,s.len,0,l),s.next();else if(o.len==0&&!o.done)cr(i,0,o.ins,l),n&&gh(n,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(s.len2,o.len),h=i.length;if(s.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;cr(i,a,u,l),n&&u&&gh(n,i,o.text)}else o.ins==-1?(cr(i,s.off?0:s.len,a,l),n&&gh(n,i,s.textBit(a))):(cr(i,s.off?0:s.len,o.off?0:o.ins,l),n&&!o.off&&gh(n,i,o.text));l=(s.ins>a||o.ins>=0&&o.len>a)&&(l||i.length>h),s.forward2(a),o.forward(a)}}}}class Sd{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?It.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?It.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class mh{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,t=-1){let i,n;return this.empty?i=n=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),n=e.mapPos(this.to,-1)),i==this.from&&n==this.to?this:new mh(i,n,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return Ue.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return Ue.range(this.anchor,i)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Ue.range(e.anchor,e.head)}static create(e,t,i){return new mh(e,t,i)}}class Ue{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:Ue.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new Ue([this.main],0)}addRange(e,t=!0){return Ue.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,Ue.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Ue(e.ranges.map(t=>mh.fromJSON(t)),e.main)}static single(e,t=e){return new Ue([Ue.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,n=0;n<e.length;n++){let s=e[n];if(s.empty?s.from<=i:s.from<i)return Ue.normalized(e.slice(),t);i=s.to}return new Ue(e,t)}static cursor(e,t=0,i,n){return mh.create(e,e,(t==0?0:t<0?4:8)|(i==null?3:Math.min(2,i))|(n!=null?n:33554431)<<5)}static range(e,t,i){let n=(i!=null?i:33554431)<<5;return t<e?mh.create(t,e,16|n|8):mh.create(e,t,n|(t>e?4:0))}static normalized(e,t=0){let i=e[t];e.sort((n,s)=>n.from-s.from),t=e.indexOf(i);for(let n=1;n<e.length;n++){let s=e[n],o=e[n-1];if(s.empty?s.from<=o.to:s.from<o.to){let l=o.from,a=Math.max(s.to,o.to);n<=t&&t--,e.splice(--n,2,s.anchor>s.head?Ue.range(a,l):Ue.range(l,a))}}return new Ue(e,t)}}function rQ(r,e){for(let t of r.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let rS=0;class st{constructor(e,t,i,n,s){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=n,this.extensions=s,this.id=rS++,this.default=e([])}static define(e={}){return new st(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:sS),!!e.static,e.enables)}of(e){return new $m([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new $m(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new $m(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function sS(r,e){return r==e||r.length==e.length&&r.every((t,i)=>t===e[i])}class $m{constructor(e,t,i,n){this.dependencies=e,this.facet=t,this.type=i,this.value=n,this.id=rS++}dynamicSlot(e){var t;let i=this.value,n=this.facet.compareInput,s=this.id,o=e[s]>>1,l=this.type==2,a=!1,h=!1,u=[];for(let f of this.dependencies)f=="doc"?a=!0:f=="selection"?h=!0:(((t=e[f.id])!==null&&t!==void 0?t:1)&1)==0&&u.push(e[f.id]);return{create(f){return f.values[o]=i(f),1},update(f,c){if(a&&c.docChanged||h&&(c.docChanged||c.selection)||My(f,u)){let d=i(f);if(l?!qA(d,f.values[o],n):!n(d,f.values[o]))return f.values[o]=d,1}return 0},reconfigure:(f,c)=>{let d=i(f),g=c.config.address[s];if(g!=null){let w=A0(c,g);if(this.dependencies.every(S=>S instanceof st?c.facet(S)===f.facet(S):S instanceof _l?c.field(S,!1)==f.field(S,!1):!0)||(l?qA(d,w,n):n(d,w)))return f.values[o]=w,0}return f.values[o]=d,1}}}}function qA(r,e,t){if(r.length!=e.length)return!1;for(let i=0;i<r.length;i++)if(!t(r[i],e[i]))return!1;return!0}function My(r,e){let t=!1;for(let i of e)Jc(r,i)&1&&(t=!0);return t}function W9(r,e,t){let i=t.map(a=>r[a.id]),n=t.map(a=>a.type),s=i.filter(a=>!(a&1)),o=r[e.id]>>1;function l(a){let h=[];for(let u=0;u<i.length;u++){let f=A0(a,i[u]);if(n[u]==2)for(let c of f)h.push(c);else h.push(f)}return e.combine(h)}return{create(a){for(let h of i)Jc(a,h);return a.values[o]=l(a),1},update(a,h){if(!My(a,s))return 0;let u=l(a);return e.compare(u,a.values[o])?0:(a.values[o]=u,1)},reconfigure(a,h){let u=My(a,i),f=h.config.facets[e.id],c=h.facet(e);if(f&&!u&&sS(t,f))return a.values[o]=c,0;let d=l(a);return e.compare(d,c)?(a.values[o]=c,0):(a.values[o]=d,1)}}}const XA=st.define({static:!0});class _l{constructor(e,t,i,n,s){this.id=e,this.createF=t,this.updateF=i,this.compareF=n,this.spec=s,this.provides=void 0}static define(e){let t=new _l(rS++,e.create,e.update,e.compare||((i,n)=>i===n),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(XA).find(i=>i.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,n)=>{let s=i.values[t],o=this.updateF(s,n);return this.compareF(s,o)?0:(i.values[t]=o,1)},reconfigure:(i,n)=>n.config.address[this.id]!=null?(i.values[t]=n.field(this),0):(i.values[t]=this.create(i),1)}}init(e){return[this,XA.of({field:this,create:e})]}get extension(){return this}}const vu={lowest:4,low:3,default:2,high:1,highest:0};function ec(r){return e=>new oQ(e,r)}const sQ={highest:ec(vu.highest),high:ec(vu.high),default:ec(vu.default),low:ec(vu.low),lowest:ec(vu.lowest)};class oQ{constructor(e,t){this.inner=e,this.prec=t}}class Qb{of(e){return new Ry(this,e)}reconfigure(e){return Qb.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Ry{constructor(e,t){this.compartment=e,this.inner=t}}class C0{constructor(e,t,i,n,s,o){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=n,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let n=[],s=Object.create(null),o=new Map;for(let c of V9(e,t,o))c instanceof _l?n.push(c):(s[c.facet.id]||(s[c.facet.id]=[])).push(c);let l=Object.create(null),a=[],h=[];for(let c of n)l[c.id]=h.length<<1,h.push(d=>c.slot(d));let u=i==null?void 0:i.config.facets;for(let c in s){let d=s[c],g=d[0].facet,w=u&&u[c]||[];if(d.every(S=>S.type==0))if(l[g.id]=a.length<<1|1,sS(w,d))a.push(i.facet(g));else{let S=g.combine(d.map(x=>x.value));a.push(i&&g.compare(S,i.facet(g))?i.facet(g):S)}else{for(let S of d)S.type==0?(l[S.id]=a.length<<1|1,a.push(S.value)):(l[S.id]=h.length<<1,h.push(x=>S.dynamicSlot(x)));l[g.id]=h.length<<1,h.push(S=>W9(S,g,d))}}let f=h.map(c=>c(l));return new C0(e,o,f,l,a,s)}}function V9(r,e,t){let i=[[],[],[],[],[]],n=new Map;function s(o,l){let a=n.get(o);if(a!=null){if(a<=l)return;let h=i[a].indexOf(o);h>-1&&i[a].splice(h,1),o instanceof Ry&&t.delete(o.compartment)}if(n.set(o,l),Array.isArray(o))for(let h of o)s(h,l);else if(o instanceof Ry){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let h=e.get(o.compartment)||o.inner;t.set(o.compartment,h),s(h,l)}else if(o instanceof oQ)s(o.inner,o.prec);else if(o instanceof _l)i[l].push(o),o.provides&&s(o.provides,l);else if(o instanceof $m)i[l].push(o),o.facet.extensions&&s(o.facet.extensions,l);else{let h=o.extension;if(!h)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(h,l)}}return s(r,vu.default),i.reduce((o,l)=>o.concat(l))}function Jc(r,e){if(e&1)return 2;let t=e>>1,i=r.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;r.status[t]=4;let n=r.computeSlot(r,r.config.dynamicSlots[t]);return r.status[t]=2|n}function A0(r,e){return e&1?r.config.staticValues[e>>1]:r.values[e>>1]}const lQ=st.define(),aQ=st.define({combine:r=>r.some(e=>e),static:!0}),hQ=st.define({combine:r=>r.length?r[0]:void 0,static:!0}),uQ=st.define(),fQ=st.define(),cQ=st.define(),dQ=st.define({combine:r=>r.length?r[0]:!1});class hp{constructor(e,t){this.type=e,this.value=t}static define(){return new j9}}class j9{of(e){return new hp(this,e)}}class F9{constructor(e){this.map=e}of(e){return new Vi(this,e)}}class Vi{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new Vi(this.type,t)}is(e){return this.type==e}static define(e={}){return new F9(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let n of e){let s=n.map(t);s&&i.push(s)}return i}}Vi.reconfigure=Vi.define();Vi.appendConfig=Vi.define();class Un{constructor(e,t,i,n,s,o){this.startState=e,this.changes=t,this.selection=i,this.effects=n,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&rQ(i,t.newLength),s.some(l=>l.type==Un.time)||(this.annotations=s.concat(Un.time.of(Date.now())))}static create(e,t,i,n,s,o){return new Un(e,t,i,n,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Un.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Un.time=hp.define();Un.userEvent=hp.define();Un.addToHistory=hp.define();Un.remote=hp.define();function H9(r,e){let t=[];for(let i=0,n=0;;){let s,o;if(i<r.length&&(n==e.length||e[n]>=r[i]))s=r[i++],o=r[i++];else if(n<e.length)s=e[n++],o=e[n++];else return t;!t.length||t[t.length-1]<s?t.push(s,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function pQ(r,e,t){var i;let n,s,o;return t?(n=e.changes,s=an.empty(e.changes.length),o=r.changes.compose(e.changes)):(n=e.changes.map(r.changes),s=r.changes.mapDesc(e.changes,!0),o=r.changes.compose(n)),{changes:o,selection:e.selection?e.selection.map(s):(i=r.selection)===null||i===void 0?void 0:i.map(n),effects:Vi.mapEffects(r.effects,n).concat(Vi.mapEffects(e.effects,s)),annotations:r.annotations.length?r.annotations.concat(e.annotations):e.annotations,scrollIntoView:r.scrollIntoView||e.scrollIntoView}}function Qy(r,e,t){let i=e.selection,n=Lu(e.annotations);return e.userEvent&&(n=n.concat(Un.userEvent.of(e.userEvent))),{changes:e.changes instanceof an?e.changes:an.of(e.changes||[],t,r.facet(hQ)),selection:i&&(i instanceof Ue?i:Ue.single(i.anchor,i.head)),effects:Lu(e.effects),annotations:n,scrollIntoView:!!e.scrollIntoView}}function gQ(r,e,t){let i=Qy(r,e.length?e[0]:{},r.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(t=!1);let o=!!e[s].sequential;i=pQ(i,Qy(r,e[s],o?i.changes.newLength:r.doc.length),o)}let n=Un.create(r,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return X9(t?q9(n):n)}function q9(r){let e=r.startState,t=!0;for(let n of e.facet(uQ)){let s=n(r);if(s===!1){t=!1;break}Array.isArray(s)&&(t=t===!0?s:H9(t,s))}if(t!==!0){let n,s;if(t===!1)s=r.changes.invertedDesc,n=an.empty(e.doc.length);else{let o=r.changes.filter(t);n=o.changes,s=o.filtered.invertedDesc}r=Un.create(e,n,r.selection&&r.selection.map(s),Vi.mapEffects(r.effects,s),r.annotations,r.scrollIntoView)}let i=e.facet(fQ);for(let n=i.length-1;n>=0;n--){let s=i[n](r);s instanceof Un?r=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Un?r=s[0]:r=gQ(e,Lu(s),!1)}return r}function X9(r){let e=r.startState,t=e.facet(cQ),i=r;for(let n=t.length-1;n>=0;n--){let s=t[n](r);s&&Object.keys(s).length&&(i=pQ(r,Qy(e,s,r.changes.newLength),!0))}return i==r?r:Un.create(e,r.changes,r.selection,i.effects,i.annotations,i.scrollIntoView)}const Z9=[];function Lu(r){return r==null?Z9:Array.isArray(r)?r:[r]}var al=function(r){return r[r.Word=0]="Word",r[r.Space=1]="Space",r[r.Other=2]="Other",r}(al||(al={}));const G9=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Dy;try{Dy=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function U9(r){if(Dy)return Dy.test(r);for(let e=0;e<r.length;e++){let t=r[e];if(/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||G9.test(t)))return!0}return!1}function Y9(r){return e=>{if(!/\S/.test(e))return al.Space;if(U9(e))return al.Word;for(let t=0;t<r.length;t++)if(e.indexOf(r[t])>-1)return al.Word;return al.Other}}class Pt{constructor(e,t,i,n,s,o){this.config=e,this.doc=t,this.selection=i,this.values=n,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)Jc(this,l<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return Jc(this,i),A0(this,i)}update(...e){return gQ(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:n}=t;for(let o of e.effects)o.is(Qb.reconfigure)?(t&&(n=new Map,t.compartments.forEach((l,a)=>n.set(a,l)),t=null),n.set(o.value.compartment,o.value.extension)):o.is(Vi.reconfigure)?(t=null,i=o.value):o.is(Vi.appendConfig)&&(t=null,i=Lu(i).concat(o.value));let s;t?s=e.startState.values.slice():(t=C0.resolve(i,n,this),s=new Pt(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(l,a)=>a.reconfigure(l,this),null).values),new Pt(t,e.newDoc,e.newSelection,s,(o,l)=>l.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:Ue.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),n=this.changes(i.changes),s=[i.range],o=Lu(i.effects);for(let l=1;l<t.ranges.length;l++){let a=e(t.ranges[l]),h=this.changes(a.changes),u=h.map(n);for(let c=0;c<l;c++)s[c]=s[c].map(u);let f=n.mapDesc(h,!0);s.push(a.range.map(f)),n=n.compose(u),o=Vi.mapEffects(o,u).concat(Vi.mapEffects(Lu(a.effects),f))}return{changes:n,selection:Ue.create(s,t.mainIndex),effects:o}}changes(e=[]){return e instanceof an?e:an.of(e,this.doc.length,this.facet(Pt.lineSeparator))}toText(e){return It.of(e.split(this.facet(Pt.lineSeparator)||Py))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Jc(this,t),A0(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let n=e[i];n instanceof _l&&(t[i]=n.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let n=[];if(i)for(let s in i){let o=i[s],l=e[s];n.push(o.init(a=>o.spec.fromJSON(l,a)))}return Pt.create({doc:e.doc,selection:Ue.fromJSON(e.selection),extensions:t.extensions?n.concat([t.extensions]):n})}static create(e={}){let t=C0.resolve(e.extensions||[],new Map),i=e.doc instanceof It?e.doc:It.of((e.doc||"").split(t.staticFacet(Pt.lineSeparator)||Py)),n=e.selection?e.selection instanceof Ue?e.selection:Ue.single(e.selection.anchor,e.selection.head):Ue.single(0);return rQ(n,i.length),t.staticFacet(aQ)||(n=n.asSingle()),new Pt(t,i,n,t.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(Pt.tabSize)}get lineBreak(){return this.facet(Pt.lineSeparator)||`
`}get readOnly(){return this.facet(dQ)}phrase(e,...t){for(let i of this.facet(Pt.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,n)=>{if(n=="$")return"$";let s=+(n||1);return s>t.length?i:t[s-1]})),e}languageDataAt(e,t,i=-1){let n=[];for(let s of this.facet(lQ))for(let o of s(this,t,i))Object.prototype.hasOwnProperty.call(o,e)&&n.push(o[e]);return n}charCategorizer(e){return Y9(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:n}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,l=e-i;for(;o>0;){let a=ll(t,o,!1);if(s(t.slice(a,o))!=al.Word)break;o=a}for(;l<n;){let a=ll(t,l);if(s(t.slice(l,a))!=al.Word)break;l=a}return o==l?null:Ue.range(o+i,l+i)}}Pt.allowMultipleSelections=aQ;Pt.tabSize=st.define({combine:r=>r.length?r[0]:4});Pt.lineSeparator=hQ;Pt.readOnly=dQ;Pt.phrases=st.define({compare(r,e){let t=Object.keys(r),i=Object.keys(e);return t.length==i.length&&t.every(n=>r[n]==e[n])}});Pt.languageData=lQ;Pt.changeFilter=uQ;Pt.transactionFilter=fQ;Pt.transactionExtender=cQ;Qb.reconfigure=Vi.define();function mQ(r,e,t={}){let i={};for(let n of r)for(let s of Object.keys(n)){let o=n[s],l=i[s];if(l===void 0)i[s]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(t,s))i[s]=t[s](l,o);else throw new Error("Config merge conflict for field "+s)}for(let n in e)i[n]===void 0&&(i[n]=e[n]);return i}class lf{eq(e){return this==e}range(e,t=e){return xd.create(e,t,this)}}lf.prototype.startSide=lf.prototype.endSide=0;lf.prototype.point=!1;lf.prototype.mapMode=Zr.TrackDel;class xd{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new xd(e,t,i)}}function Ey(r,e){return r.from-e.from||r.value.startSide-e.value.startSide}class oS{constructor(e,t,i,n){this.from=e,this.to=t,this.value=i,this.maxPoint=n}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,n=0){let s=i?this.to:this.from;for(let o=n,l=s.length;;){if(o==l)return o;let a=o+l>>1,h=s[a]-e||(i?this.value[a].endSide:this.value[a].startSide)-t;if(a==o)return h>=0?o:l;h>=0?l=a:o=a+1}}between(e,t,i,n){for(let s=this.findIndex(t,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(n(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,t){let i=[],n=[],s=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let h=this.value[a],u=this.from[a]+e,f=this.to[a]+e,c,d;if(u==f){let g=t.mapPos(u,h.startSide,h.mapMode);if(g==null||(c=d=g,h.startSide!=h.endSide&&(d=t.mapPos(u,h.endSide),d<c)))continue}else if(c=t.mapPos(u,h.startSide),d=t.mapPos(f,h.endSide),c>d||c==d&&h.startSide>0&&h.endSide<=0)continue;(d-c||h.endSide-h.startSide)<0||(o<0&&(o=c),h.point&&(l=Math.max(l,d-c)),i.push(h),n.push(c-o),s.push(d-o))}return{mapped:i.length?new oS(n,s,i,l):null,pos:o}}}class qt{constructor(e,t,i,n){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=n}static create(e,t,i,n){return new qt(e,t,i,n)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:n=0,filterTo:s=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(i&&(t=t.slice().sort(Ey)),this.isEmpty)return t.length?qt.of(t):this;let l=new bQ(this,null,-1).goto(0),a=0,h=[],u=new af;for(;l.value||a<t.length;)if(a<t.length&&(l.from-t[a].from||l.startSide-t[a].value.startSide)>=0){let f=t[a++];u.addInner(f.from,f.to,f.value)||h.push(f)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(l.chunkIndex)<t[a].from)&&(!o||n>this.chunkEnd(l.chunkIndex)||s<this.chunkPos[l.chunkIndex])&&u.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||n>l.to||s<l.from||o(l.from,l.to,l.value))&&(u.addInner(l.from,l.to,l.value)||h.push(xd.create(l.from,l.to,l.value))),l.next());return u.finishInner(this.nextLayer.isEmpty&&!h.length?qt.empty:this.nextLayer.update({add:h,filter:o,filterFrom:n,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],n=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],h=e.touchesRange(l,l+a.length);if(h===!1)n=Math.max(n,a.maxPoint),t.push(a),i.push(e.mapPos(l));else if(h===!0){let{mapped:u,pos:f}=a.map(l,e);u&&(n=Math.max(n,u.maxPoint),t.push(u),i.push(f))}}let s=this.nextLayer.map(e);return t.length==0?s:new qt(i,t,s||qt.empty,n)}between(e,t,i){if(!this.isEmpty){for(let n=0;n<this.chunk.length;n++){let s=this.chunkPos[n],o=this.chunk[n];if(t>=s&&e<=s+o.length&&o.between(s,e-s,t-s,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return Cd.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Cd.from(e).goto(t)}static compare(e,t,i,n,s=-1){let o=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=s),l=t.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=s),a=ZA(o,l,i),h=new tc(o,a,s),u=new tc(l,a,s);i.iterGaps((f,c,d)=>GA(h,f,u,c,d,n)),i.empty&&i.length==0&&GA(h,0,u,0,0,n)}static eq(e,t,i=0,n){n==null&&(n=1e9);let s=e.filter(u=>!u.isEmpty&&t.indexOf(u)<0),o=t.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let l=ZA(s,o),a=new tc(s,l,0).goto(i),h=new tc(o,l,0).goto(i);for(;;){if(a.to!=h.to||!By(a.active,h.active)||a.point&&(!h.point||!a.point.eq(h.point)))return!1;if(a.to>n)return!0;a.next(),h.next()}}static spans(e,t,i,n,s=-1){let o=new tc(e,null,s).goto(t),l=t,a=o.openStart;for(;;){let h=Math.min(o.to,i);if(o.point?(n.point(l,h,o.point,o.activeForPoint(o.to),a,o.pointRank),a=o.openEnd(h)+(o.to>h?1:0)):h>l&&(n.span(l,h,o.active,a),a=o.openEnd(h)),o.to>i)break;l=o.to,o.next()}return a}static of(e,t=!1){let i=new af;for(let n of e instanceof xd?[e]:t?K9(e):e)i.add(n.from,n.to,n.value);return i.finish()}}qt.empty=new qt([],[],null,-1);function K9(r){if(r.length>1)for(let e=r[0],t=1;t<r.length;t++){let i=r[t];if(Ey(e,i)>0)return r.slice().sort(Ey);e=i}return r}qt.empty.nextLayer=qt.empty;class af{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new oS(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new af)).add(e,t,i)}addInner(e,t,i){let n=e-this.lastTo||i.startSide-this.last.endSide;if(n<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return n<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(qt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=qt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function ZA(r,e,t){let i=new Map;for(let s of r)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let n=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let l=i.get(s.chunk[o]);l!=null&&(t?t.mapPos(l):l)==s.chunkPos[o]&&!(t!=null&&t.touchesRange(l,l+s.chunk[o].length))&&n.add(s.chunk[o])}return n}class bQ{constructor(e,t,i,n=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=n}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let n=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(n)||this.layer.chunkEnd(this.chunkIndex)<e||n.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let n=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<n)&&this.setRangeIndex(n)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Cd{constructor(e){this.heap=e}static from(e,t=null,i=-1){let n=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&n.push(new bQ(o,t,i,s));return n.length==1?n[0]:new Cd(n)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)BO(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)BO(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),BO(this.heap,0)}}}function BO(r,e){for(let t=r[e];;){let i=(e<<1)+1;if(i>=r.length)break;let n=r[i];if(i+1<r.length&&n.compare(r[i+1])>=0&&(n=r[i+1],i++),t.compare(n)<0)break;r[i]=t,r[e]=n,e=i}}class tc{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Cd.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){ig(this.active,e),ig(this.activeTo,e),ig(this.activeRank,e),this.minActive=UA(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:n,rank:s}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=s;)t++;ng(this.active,t,i),ng(this.activeTo,t,n),ng(this.activeRank,t,s),e&&ng(e,t,this.cursor.from),this.minActive=UA(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null,n=0;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),i&&ig(i,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.from<e&&(n=1),this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){let s=0;for(;s<i.length&&i[s]<e;)s++;this.openStart=s+n}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function GA(r,e,t,i,n,s){r.goto(e),t.goto(i);let o=i+n,l=i,a=i-e;for(;;){let h=r.to+a-t.to||r.endSide-t.endSide,u=h<0?r.to+a:t.to,f=Math.min(u,o);if(r.point||t.point?r.point&&t.point&&(r.point==t.point||r.point.eq(t.point))&&By(r.activeForPoint(r.to+a),t.activeForPoint(t.to))||s.comparePoint(l,f,r.point,t.point):f>l&&!By(r.active,t.active)&&s.compareRange(l,f,r.active,t.active),u>o)break;l=u,h<=0&&r.next(),h>=0&&t.next()}}function By(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!=e[t]&&!r[t].eq(e[t]))return!1;return!0}function ig(r,e){for(let t=e,i=r.length-1;t<i;t++)r[t]=r[t+1];r.pop()}function ng(r,e,t){for(let i=r.length-1;i>=e;i--)r[i+1]=r[i];r[e]=t}function UA(r,e){let t=-1,i=1e9;for(let n=0;n<e.length;n++)(e[n]-i||r[n].endSide-r[t].endSide)<0&&(t=n,i=e[n]);return t}function J9(r,e,t=r.length){let i=0;for(let n=0;n<t;)r.charCodeAt(n)==9?(i+=e-i%e,n++):(i++,n=ll(r,n));return i}function eW(r,e,t,i){for(let n=0,s=0;;){if(s>=e)return n;if(n==r.length)break;s+=r.charCodeAt(n)==9?t-s%t:1,n=ll(r,n)}return i===!0?-1:r.length}function T0(r){let e;return r.nodeType==11?e=r.getSelection?r:r.ownerDocument:e=r,e.getSelection()}function hf(r,e){return e?r==e||r.contains(e.nodeType!=1?e.parentNode:e):!1}function tW(){let r=document.activeElement;for(;r&&r.shadowRoot;)r=r.shadowRoot.activeElement;return r}function Ny(r,e){if(!e.anchorNode)return!1;try{return hf(r,e.anchorNode)}catch{return!1}}function Ad(r){return r.nodeType==3?Td(r,0,r.nodeValue.length).getClientRects():r.nodeType==1?r.getClientRects():[]}function P0(r,e,t,i){return t?YA(r,e,t,i,-1)||YA(r,e,t,i,1):!1}function Iy(r){for(var e=0;;e++)if(r=r.previousSibling,!r)return e}function YA(r,e,t,i,n){for(;;){if(r==t&&e==i)return!0;if(e==(n<0?0:_0(r))){if(r.nodeName=="DIV")return!1;let s=r.parentNode;if(!s||s.nodeType!=1)return!1;e=Iy(r)+(n<0?0:1),r=s}else if(r.nodeType==1){if(r=r.childNodes[e+(n<0?-1:0)],r.nodeType==1&&r.contentEditable=="false")return!1;e=n<0?_0(r):0}else return!1}}function _0(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}const OQ={left:0,right:0,top:0,bottom:0};function Db(r,e){let t=e?r.left:r.right;return{left:t,right:t,top:r.top,bottom:r.bottom}}function iW(r){return{left:0,right:r.innerWidth,top:0,bottom:r.innerHeight}}function nW(r,e,t,i,n,s,o,l){let a=r.ownerDocument,h=a.defaultView;for(let u=r;u;)if(u.nodeType==1){let f,c=u==a.body;if(c)f=iW(h);else{if(u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.parentNode;continue}let w=u.getBoundingClientRect();f={left:w.left,right:w.left+u.clientWidth,top:w.top,bottom:w.top+u.clientHeight}}let d=0,g=0;if(n=="nearest")e.top<f.top?(g=-(f.top-e.top+o),t>0&&e.bottom>f.bottom+g&&(g=e.bottom-f.bottom+g+o)):e.bottom>f.bottom&&(g=e.bottom-f.bottom+o,t<0&&e.top-g<f.top&&(g=-(f.top+g-e.top+o)));else{let w=e.bottom-e.top,S=f.bottom-f.top;g=(n=="center"&&w<=S?e.top+w/2-S/2:n=="start"||n=="center"&&t<0?e.top-o:e.bottom-S+o)-f.top}if(i=="nearest"?e.left<f.left?(d=-(f.left-e.left+s),t>0&&e.right>f.right+d&&(d=e.right-f.right+d+s)):e.right>f.right&&(d=e.right-f.right+s,t<0&&e.left<f.left+d&&(d=-(f.left+d-e.left+s))):d=(i=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:i=="start"==l?e.left-s:e.right-(f.right-f.left)+s)-f.left,d||g)if(c)h.scrollBy(d,g);else{if(g){let w=u.scrollTop;u.scrollTop+=g,g=u.scrollTop-w}if(d){let w=u.scrollLeft;u.scrollLeft+=d,d=u.scrollLeft-w}e={left:e.left-d,top:e.top-g,right:e.right-d,bottom:e.bottom-g}}if(c)break;u=u.assignedSlot||u.parentNode,i=n="nearest"}else if(u.nodeType==11)u=u.host;else break}class rW{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,t,i,n){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=n}}let mu=null;function kQ(r){if(r.setActive)return r.setActive();if(mu)return r.focus(mu);let e=[];for(let t=r;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(r.focus(mu==null?{get preventScroll(){return mu={preventScroll:!0},!0}}:void 0),!mu){mu=!1;for(let t=0;t<e.length;){let i=e[t++],n=e[t++],s=e[t++];i.scrollTop!=n&&(i.scrollTop=n),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let KA;function Td(r,e,t=e){let i=KA||(KA=document.createRange());return i.setEnd(r,t),i.setStart(r,e),i}function ed(r,e,t){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0},n=new KeyboardEvent("keydown",i);n.synthetic=!0,r.dispatchEvent(n);let s=new KeyboardEvent("keyup",i);return s.synthetic=!0,r.dispatchEvent(s),n.defaultPrevented||s.defaultPrevented}function sW(r){for(;r;){if(r&&(r.nodeType==9||r.nodeType==11&&r.host))return r;r=r.assignedSlot||r.parentNode}return null}function wQ(r){for(;r.attributes.length;)r.removeAttributeNode(r.attributes[0])}class $n{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new $n(e.parentNode,Iy(e),t)}static after(e,t){return new $n(e.parentNode,Iy(e)+1,t)}}const lS=[];class Qi{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e){if(this.dirty&2){let t=this.dom,i=null,n;for(let s of this.children){if(s.dirty){if(!s.dom&&(n=i?i.nextSibling:t.firstChild)){let o=Qi.get(n);(!o||!o.parent&&o.constructor==s.constructor)&&s.reuseDOM(n)}s.sync(e),s.dirty=0}if(n=i?i.nextSibling:t.firstChild,e&&!e.written&&e.node==t&&n!=s.dom&&(e.written=!0),s.dom.parentNode==t)for(;n&&n!=s.dom;)n=JA(n);else t.insertBefore(s.dom,n);i=s.dom}for(n=i?i.nextSibling:t.firstChild,n&&e&&e.node==t&&(e.written=!0);n;)n=JA(n)}else if(this.dirty&1)for(let t of this.children)t.dirty&&(t.sync(e),t.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let n=_0(e)==0?0:t==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;n==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?n=-1:n=1),e=s}n<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Qi.get(i);)i=i.nextSibling;if(!i)return this.length;for(let n=0,s=0;;n++){let o=this.children[n];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,t,i=0){let n=-1,s=-1,o=-1,l=-1;for(let a=0,h=i,u=i;a<this.children.length;a++){let f=this.children[a],c=h+f.length;if(h<e&&c>t)return f.domBoundsAround(e,t,h);if(c>=e&&n==-1&&(n=a,s=h),h>t&&f.dom.parentNode==this.dom){o=a,l=u;break}u=c,h=c+f.breakAfter}return{from:s,to:l<0?i+this.length:l,startDOM:(n?this.children[n-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),t.dirty&1)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=lS){this.markDirty();for(let n=e;n<t;n++){let s=this.children[n];s.parent==this&&s.destroy()}this.children.splice(e,t-e,...i);for(let n=0;n<i.length;n++)i[n].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new yQ(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}merge(e,t,i,n,s,o){return!1}become(e){return!1}getSide(){return 0}destroy(){this.parent=null}}Qi.prototype.breakAfter=0;function JA(r){let e=r.nextSibling;return r.parentNode.removeChild(r),e}class yQ{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function vQ(r,e,t,i,n,s,o,l,a){let{children:h}=r,u=h.length?h[e]:null,f=s.length?s[s.length-1]:null,c=f?f.breakAfter:o;if(!(e==i&&u&&!o&&!c&&s.length<2&&u.merge(t,n,s.length?f:null,t==0,l,a))){if(i<h.length){let d=h[i];d&&n<d.length?(e==i&&(d=d.split(n),n=0),!c&&f&&d.merge(0,n,f,!0,0,a)?s[s.length-1]=d:(n&&d.merge(0,n,null,!1,0,a),s.push(d))):d!=null&&d.breakAfter&&(f?f.breakAfter=1:o=1),i++}for(u&&(u.breakAfter=o,t>0&&(!o&&s.length&&u.merge(t,u.length,s[0],!1,l,0)?u.breakAfter=s.shift().breakAfter:(t<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(t,u.length,null,!1,l,0),e++));e<i&&s.length;)if(h[i-1].become(s[s.length-1]))i--,s.pop(),a=s.length?0:l;else if(h[e].become(s[0]))e++,s.shift(),l=s.length?0:a;else break;!s.length&&e&&i<h.length&&!h[e-1].breakAfter&&h[i].merge(0,0,h[e-1],!1,l,a)&&e--,(e<i||s.length)&&r.replaceChildren(e,i,s)}}function SQ(r,e,t,i,n,s){let o=r.childCursor(),{i:l,off:a}=o.findPos(t,1),{i:h,off:u}=o.findPos(e,-1),f=e-t;for(let c of i)f+=c.length;r.length+=f,vQ(r,h,u,l,a,i,0,n,s)}let Gr=typeof navigator!="undefined"?navigator:{userAgent:"",vendor:"",platform:""},Ly=typeof document!="undefined"?document:{documentElement:{style:{}}};const zy=/Edge\/(\d+)/.exec(Gr.userAgent),xQ=/MSIE \d/.test(Gr.userAgent),Wy=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Gr.userAgent),Eb=!!(xQ||Wy||zy),e3=!Eb&&/gecko\/(\d+)/i.test(Gr.userAgent),NO=!Eb&&/Chrome\/(\d+)/.exec(Gr.userAgent),t3="webkitFontSmoothing"in Ly.documentElement.style,CQ=!Eb&&/Apple Computer/.test(Gr.vendor),i3=CQ&&(/Mobile\/\w+/.test(Gr.userAgent)||Gr.maxTouchPoints>2);var He={mac:i3||/Mac/.test(Gr.platform),windows:/Win/.test(Gr.platform),linux:/Linux|X11/.test(Gr.platform),ie:Eb,ie_version:xQ?Ly.documentMode||6:Wy?+Wy[1]:zy?+zy[1]:0,gecko:e3,gecko_version:e3?+(/Firefox\/(\d+)/.exec(Gr.userAgent)||[0,0])[1]:0,chrome:!!NO,chrome_version:NO?+NO[1]:0,ios:i3,android:/Android\b/.test(Gr.userAgent),webkit:t3,safari:CQ,webkit_version:t3?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:Ly.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const oW=256;class La extends Qi{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return i&&(!(i instanceof La)||this.length-(t-e)+i.length>oW)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new La(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new $n(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return Vy(this.dom,e,t)}}class Go extends Qi{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let n of t)n.setParent(this)}setAttrs(e){if(wQ(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e)}merge(e,t,i,n,s,o){return i&&(!(i instanceof Go&&i.mark.eq(this.mark))||e&&s<=0||t<this.length&&o<=0)?!1:(SQ(this,e,t,i?i.children:[],s-1,o-1),this.markDirty(),!0)}split(e){let t=[],i=0,n=-1,s=0;for(let l of this.children){let a=i+l.length;a>e&&t.push(i<e?l.split(e-i):l),n<0&&i>=e&&(n=s),i=a,s++}let o=this.length-e;return this.length=e,n>-1&&(this.children.length=n,this.markDirty()),new Go(this.mark,t,o)}domAtPos(e){return PQ(this.dom,this.children,e)}coordsAt(e,t){return $Q(this,e,t)}}function Vy(r,e,t){let i=r.nodeValue.length;e>i&&(e=i);let n=e,s=e,o=0;e==0&&t<0||e==i&&t>=0?He.chrome||He.gecko||(e?(n--,o=1):s<i&&(s++,o=-1)):t<0?n--:s<i&&s++;let l=Td(r,n,s).getClientRects();if(!l.length)return OQ;let a=l[(o?o<0:t>=0)?0:l.length-1];return He.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,h=>h.width)||a),o?Db(a,o<0):a||null}class da extends Qi{constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}static create(e,t,i){return new(e.customView||da)(e,t,i)}split(e){let t=da.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,i,n,s,o){return i&&(!(i instanceof da)||!this.widget.compare(i.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e.length==this.length&&e instanceof da&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return It.empty;let e=this;for(;e.parent;)e=e.parent;let t=e.editorView,i=t&&t.state.doc,n=this.posAtStart;return i?i.slice(n,n+this.length):It.empty}domAtPos(e){return e==0?$n.before(this.dom):$n.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.dom.getClientRects(),n=null;if(!i.length)return OQ;for(let s=e>0?i.length-1:0;n=i[s],!(e>0?s==0:s==i.length-1||n.top<n.bottom);s+=e>0?-1:1);return e==0&&t>0||e==this.length&&t<=0?n:Db(n,e==0)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class AQ extends da{domAtPos(e){let{topView:t,text:i}=this.widget;return t?jy(e,0,t,i,(n,s)=>n.domAtPos(s),n=>new $n(i,Math.min(n,i.nodeValue.length))):new $n(i,Math.min(e,i.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:i,text:n}=this.widget;return i?TQ(e,t,i,n):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:i,text:n}=this.widget;return i?jy(e,t,i,n,(s,o,l)=>s.coordsAt(o,l),(s,o)=>Vy(n,s,o)):Vy(n,e,t)}destroy(){var e;super.destroy(),(e=this.widget.topView)===null||e===void 0||e.destroy()}get isEditable(){return!0}}function jy(r,e,t,i,n,s){if(t instanceof Go){for(let o of t.children){let l=hf(o.dom,i),a=l?i.nodeValue.length:o.length;if(r<a||r==a&&o.getSide()<=0)return l?jy(r,e,o,i,n,s):n(o,r,e);r-=a}return n(t,t.length,-1)}else return t.dom==i?s(r,e):n(t,r,e)}function TQ(r,e,t,i){if(t instanceof Go)for(let n of t.children){let s=0,o=hf(n.dom,i);if(hf(n.dom,r))return s+(o?TQ(r,e,n,i):n.localPosFromDOM(r,e));s+=o?i.nodeValue.length:n.length}else if(t.dom==i)return Math.min(e,i.nodeValue.length);return t.localPosFromDOM(r,e)}class uf extends Qi{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof uf&&e.side==this.side}split(){return new uf(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return $n.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let t=this.dom.getBoundingClientRect(),i=lW(this,this.side>0?-1:1);return i&&i.top<t.bottom&&i.bottom>t.top?{left:t.left,right:t.right,top:i.top,bottom:i.bottom}:t}get overrideDOMText(){return It.empty}}La.prototype.children=da.prototype.children=uf.prototype.children=lS;function lW(r,e){let t=r.parent,i=t?t.children.indexOf(r):-1;for(;t&&i>=0;)if(e<0?i>0:i<t.children.length){let n=t.children[i+e];if(n instanceof La){let s=n.coordsAt(e<0?n.length:0,e);if(s)return s}i+=e}else if(t instanceof Go&&t.parent)i=t.parent.children.indexOf(t)+(e<0?0:1),t=t.parent;else{let n=t.dom.lastChild;if(n&&n.nodeName=="BR")return n.getClientRects()[0];break}}function PQ(r,e,t){let i=0;for(let n=0;i<e.length;i++){let s=e[i],o=n+s.length;if(!(o==n&&s.getSide()<=0)){if(t>n&&t<o&&s.dom.parentNode==r)return s.domAtPos(t-n);if(t<=n)break;n=o}}for(;i>0;i--){let n=e[i-1].dom;if(n.parentNode==r)return $n.after(n)}return new $n(r,0)}function _Q(r,e,t){let i,{children:n}=r;t>0&&e instanceof Go&&n.length&&(i=n[n.length-1])instanceof Go&&i.mark.eq(e.mark)?_Q(i,e.children[0],t-1):(n.push(e),e.setParent(r)),r.length+=e.length}function $Q(r,e,t){for(let s=0,o=0;o<r.children.length;o++){let l=r.children[o],a=s+l.length,h;if((t<=0||a==r.length||l.getSide()>0?a>=e:a>e)&&(e<a||o+1==r.children.length||(h=r.children[o+1]).length||h.getSide()>0)){let u=0;if(a==s){if(l.getSide()<=0)continue;u=t=-l.getSide()}let f=l.coordsAt(Math.max(0,e-s),t);return u&&f?Db(f,t<0):f}s=a}let i=r.dom.lastChild;if(!i)return r.dom.getBoundingClientRect();let n=Ad(i);return n[n.length-1]||null}function Fy(r,e){for(let t in r)t=="class"&&e.class?e.class+=" "+r.class:t=="style"&&e.style?e.style+=";"+r.style:e[t]=r[t];return e}function aS(r,e){if(r==e)return!0;if(!r||!e)return!1;let t=Object.keys(r),i=Object.keys(e);if(t.length!=i.length)return!1;for(let n of t)if(i.indexOf(n)==-1||r[n]!==e[n])return!1;return!0}function Hy(r,e,t){let i=null;if(e)for(let n in e)t&&n in t||r.removeAttribute(i=n);if(t)for(let n in t)e&&e[n]==t[n]||r.setAttribute(i=n,t[n]);return!!i}class up{eq(e){return!1}updateDOM(e){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}destroy(e){}}var ji=function(r){return r[r.Text=0]="Text",r[r.WidgetBefore=1]="WidgetBefore",r[r.WidgetAfter=2]="WidgetAfter",r[r.WidgetRange=3]="WidgetRange",r}(ji||(ji={}));class hi extends lf{constructor(e,t,i,n){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=n}get heightRelevant(){return!1}static mark(e){return new Bb(e)}static widget(e){let t=e.side||0,i=!!e.block;return t+=i?t>0?3e8:-4e8:t>0?1e8:-1e8,new Nh(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,n;if(e.isBlockGap)i=-5e8,n=4e8;else{let{start:s,end:o}=MQ(e,t);i=(s?t?-3e8:-1:5e8)-1,n=(o?t?2e8:1:-6e8)+1}return new Nh(e,i,n,t,e.widget||null,!0)}static line(e){return new fp(e)}static set(e,t=!1){return qt.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}hi.none=qt.empty;class Bb extends hi{constructor(e){let{start:t,end:i}=MQ(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof Bb&&this.tagName==e.tagName&&this.class==e.class&&aS(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Bb.prototype.point=!1;class fp extends hi{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof fp&&aS(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}fp.prototype.mapMode=Zr.TrackBefore;fp.prototype.point=!0;class Nh extends hi{constructor(e,t,i,n,s,o){super(t,i,s,e),this.block=n,this.isReplace=o,this.mapMode=n?t<=0?Zr.TrackBefore:Zr.TrackAfter:Zr.TrackDel}get type(){return this.startSide<this.endSide?ji.WidgetRange:this.startSide<=0?ji.WidgetBefore:ji.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof Nh&&aW(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Nh.prototype.point=!0;function MQ(r,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=r;return t==null&&(t=r.inclusive),i==null&&(i=r.inclusive),{start:t!=null?t:e,end:i!=null?i:e}}function aW(r,e){return r==e||!!(r&&e&&r.compare(e))}function qy(r,e,t,i=0){let n=t.length-1;n>=0&&t[n]+i>=r?t[n]=Math.max(t[n],e):t.push(r,e)}class kr extends Qi{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,n,s,o){if(i){if(!(i instanceof kr))return!1;this.dom||i.transferDOM(this)}return n&&this.setDeco(i?i.attrs:null),SQ(this,e,t,i?i.children:[],s,o),!0}split(e){let t=new kr;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:n}=this.childPos(e);n&&(t.append(this.children[i].split(n),0),this.children[i].merge(n,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)t.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){!this.dom||(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){aS(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){_Q(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=Fy(t,this.attrs||{})),i&&(this.attrs=Fy({class:i},this.attrs||{}))}domAtPos(e){return PQ(this.dom,this.children,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.dirty|=6)}sync(e){var t;this.dom?this.dirty&4&&(wQ(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Hy(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e);let i=this.dom.lastChild;for(;i&&Qi.get(i)instanceof Go;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((t=Qi.get(i))===null||t===void 0?void 0:t.isEditable)==!1&&(!He.ios||!this.children.some(n=>n instanceof La))){let n=document.createElement("BR");n.cmIgnore=!0,this.dom.appendChild(n)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0;for(let t of this.children){if(!(t instanceof La))return null;let i=Ad(t.dom);if(i.length!=1)return null;e+=i[0].width}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}}coordsAt(e,t){return $Q(this,e,t)}become(e){return!1}get type(){return ji.Text}static find(e,t){for(let i=0,n=0;i<e.children.length;i++){let s=e.children[i],o=n+s.length;if(o>=t){if(s instanceof kr)return s;if(o>t)break}n=o+s.breakAfter}return null}}class Ah extends Qi{constructor(e,t,i){super(),this.widget=e,this.length=t,this.type=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,n,s,o){return i&&(!(i instanceof Ah)||!this.widget.compare(i.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?$n.before(this.dom):$n.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new Ah(this.widget,t,this.type);return i.breakAfter=this.breakAfter,i}get children(){return lS}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):It.empty}domBoundsAround(){return null}become(e){return e instanceof Ah&&e.type==this.type&&e.widget.constructor==this.widget.constructor?(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class hS{constructor(e,t,i,n){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=n,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof Ah&&e.type==ji.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new kr),this.atCursorPos=!0),this.curLine}flushBuffer(e){this.pendingBuffer&&(this.curLine.append(rg(new uf(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer([]),this.curLine=null,this.content.push(e)}finish(e){e?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,e--;continue}else this.text=s,this.textOff=0}let n=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(0,i)),this.getLine().append(rg(new La(this.text.slice(this.textOff,this.textOff+n)),t),i),this.atCursorPos=!0,this.textOff+=n,e-=n,i=0}}span(e,t,i,n){this.buildText(t-e,i,n),this.pos=t,this.openStart<0&&(this.openStart=n)}point(e,t,i,n,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof Nh){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=t-e;if(i instanceof Nh)if(i.block){let{type:a}=i;a==ji.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Ah(i.widget||new n3("div"),l,a))}else{let a=da.create(i.widget||new n3("span"),l,i.startSide),h=this.atCursorPos&&!a.isEditable&&s<=n.length&&(e<t||i.startSide>0),u=!a.isEditable&&(e<t||i.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!h&&(this.pendingBuffer=0),this.flushBuffer(n),h&&(f.append(rg(new uf(1),n),s),s=n.length+Math.max(0,s-n.length)),f.append(rg(a,n),s),this.atCursorPos=u,this.pendingBuffer=u?e<t?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=s)}static build(e,t,i,n,s){let o=new hS(e,t,i,s);return o.openEnd=qt.spans(n,t,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function rg(r,e){for(let t of e)r=new Go(t,[r],r.length);return r}class n3 extends up{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}}const RQ=st.define(),QQ=st.define(),DQ=st.define(),EQ=st.define(),Xy=st.define(),BQ=st.define(),NQ=st.define({combine:r=>r.some(e=>e)});class $0{constructor(e,t="nearest",i="nearest",n=5,s=5){this.range=e,this.y=t,this.x=i,this.yMargin=n,this.xMargin=s}map(e){return e.empty?this:new $0(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const r3=Vi.define({map:(r,e)=>r.map(e)});function Ra(r,e,t){let i=r.facet(EQ);i.length?i[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const cp=st.define({combine:r=>r.length?r[0]:!0});let hW=0;const Bc=st.define();class za{constructor(e,t,i,n){this.id=e,this.create=t,this.domEventHandlers=i,this.extension=n(this)}static define(e,t){const{eventHandlers:i,provide:n,decorations:s}=t||{};return new za(hW++,e,i,o=>{let l=[Bc.of(o)];return s&&l.push(Pd.of(a=>{let h=a.plugin(o);return h?s(h):hi.none})),n&&l.push(n(o)),l})}static fromClass(e,t){return za.define(i=>new e(i),t)}}class IO{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(Ra(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Ra(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){Ra(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const IQ=st.define(),LQ=st.define(),Pd=st.define(),zQ=st.define(),WQ=st.define(),Nc=st.define();class ml{constructor(e,t,i,n){this.fromA=e,this.toA=t,this.fromB=i,this.toB=n}join(e){return new ml(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let n=e[t-1];if(!(n.fromA>i.toA)){if(n.toA<i.fromA)break;i=i.join(n),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let n=0,s=0,o=0,l=0;;n++){let a=n==e.length?null:e[n],h=o-l,u=a?a.fromB:1e9;for(;s<t.length&&t[s]<u;){let f=t[s],c=t[s+1],d=Math.max(l,f),g=Math.min(u,c);if(d<=g&&new ml(d+h,g+h,d,g).addToSet(i),c>u)break;s+=2}if(!a)return i;new ml(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),o=a.toA,l=a.toB}}}class M0{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=an.empty(this.startState.doc.length);for(let o of i)this.changes=this.changes.compose(o.changes);let n=[];this.changes.iterChangedRanges((o,l,a,h)=>n.push(new ml(o,l,a,h))),this.changedRanges=n;let s=e.hasFocus;s!=e.inputState.notifiedFocused&&(e.inputState.notifiedFocused=s,this.flags|=1)}static create(e,t,i){return new M0(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var Yn=function(r){return r[r.LTR=0]="LTR",r[r.RTL=1]="RTL",r}(Yn||(Yn={}));const Zy=Yn.LTR,uW=Yn.RTL;function VQ(r){let e=[];for(let t=0;t<r.length;t++)e.push(1<<+r[t]);return e}const fW=VQ("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),cW=VQ("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Gy=Object.create(null),Ws=[];for(let r of["()","[]","{}"]){let e=r.charCodeAt(0),t=r.charCodeAt(1);Gy[e]=t,Gy[t]=-e}function dW(r){return r<=247?fW[r]:1424<=r&&r<=1524?2:1536<=r&&r<=1785?cW[r-1536]:1774<=r&&r<=2220?4:8192<=r&&r<=8203||r==8204?256:1}const pW=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;class zu{constructor(e,t,i){this.from=e,this.to=t,this.level=i}get dir(){return this.level%2?uW:Zy}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,i,n){let s=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=t&&l.to>=t){if(l.level==i)return o;(s<0||(n!=0?n<0?l.from<t:l.to>t:e[s].level>l.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}const vi=[];function gW(r,e){let t=r.length,i=e==Zy?1:2,n=e==Zy?2:1;if(!r||i==1&&!pW.test(r))return jQ(t);for(let o=0,l=i,a=i;o<t;o++){let h=dW(r.charCodeAt(o));h==512?h=l:h==8&&a==4&&(h=16),vi[o]=h==4?2:h,h&7&&(a=h),l=h}for(let o=0,l=i,a=i;o<t;o++){let h=vi[o];if(h==128)o<t-1&&l==vi[o+1]&&l&24?h=vi[o]=l:vi[o]=256;else if(h==64){let u=o+1;for(;u<t&&vi[u]==64;)u++;let f=o&&l==8||u<t&&vi[u]==8?a==1?1:8:256;for(let c=o;c<u;c++)vi[c]=f;o=u-1}else h==8&&a==1&&(vi[o]=1);l=h,h&7&&(a=h)}for(let o=0,l=0,a=0,h,u,f;o<t;o++)if(u=Gy[h=r.charCodeAt(o)])if(u<0){for(let c=l-3;c>=0;c-=3)if(Ws[c+1]==-u){let d=Ws[c+2],g=d&2?i:d&4?d&1?n:i:0;g&&(vi[o]=vi[Ws[c]]=g),l=c;break}}else{if(Ws.length==189)break;Ws[l++]=o,Ws[l++]=h,Ws[l++]=a}else if((f=vi[o])==2||f==1){let c=f==i;a=c?0:1;for(let d=l-3;d>=0;d-=3){let g=Ws[d+2];if(g&2)break;if(c)Ws[d+2]|=2;else{if(g&4)break;Ws[d+2]|=4}}}for(let o=0;o<t;o++)if(vi[o]==256){let l=o+1;for(;l<t&&vi[l]==256;)l++;let a=(o?vi[o-1]:i)==1,h=(l<t?vi[l]:i)==1,u=a==h?a?1:2:i;for(let f=o;f<l;f++)vi[f]=u;o=l-1}let s=[];if(i==1)for(let o=0;o<t;){let l=o,a=vi[o++]!=1;for(;o<t&&a==(vi[o]!=1);)o++;if(a)for(let h=o;h>l;){let u=h,f=vi[--h]!=2;for(;h>l&&f==(vi[h-1]!=2);)h--;s.push(new zu(h,u,f?2:1))}else s.push(new zu(l,o,0))}else for(let o=0;o<t;){let l=o,a=vi[o++]==2;for(;o<t&&a==(vi[o]==2);)o++;s.push(new zu(l,o,a?1:2))}return s}function jQ(r){return[new zu(0,r,0)]}let FQ="";function mW(r,e,t,i,n){var s;let o=i.head-r.from,l=-1;if(o==0){if(!n||!r.length)return null;e[0].level!=t&&(o=e[0].side(!1,t),l=0)}else if(o==r.length){if(n)return null;let c=e[e.length-1];c.level!=t&&(o=c.side(!0,t),l=e.length-1)}l<0&&(l=zu.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc));let a=e[l];o==a.side(n,t)&&(a=e[l+=n?1:-1],o=a.side(!n,t));let h=n==(a.dir==t),u=ll(r.text,o,h);if(FQ=r.text.slice(Math.min(o,u),Math.max(o,u)),u!=a.side(n,t))return Ue.cursor(u+r.from,h?-1:1,a.level);let f=l==(n?e.length-1:0)?null:e[l+(n?1:-1)];return!f&&a.level!=t?Ue.cursor(n?r.to:r.from,n?-1:1,t):f&&f.level<a.level?Ue.cursor(f.side(!n,t)+r.from,n?1:-1,f.level):Ue.cursor(u+r.from,n?-1:1,a.level)}const pa="\uFFFF";class HQ{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Pt.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=pa}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let n=e;;){this.findPointBefore(i,n),this.readNode(n);let s=n.nextSibling;if(s==t)break;let o=Qi.get(n),l=Qi.get(s);(o&&l?o.breakAfter:(o?o.breakAfter:s3(n))||s3(s)&&(n.nodeName!="BR"||n.cmIgnore))&&this.lineBreak(),n=s}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,n=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,l;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(l=n.exec(t))&&(s=l.index,o=l[0].length),this.append(t.slice(i,s<0?t.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let t=Qi.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let n=i.iter();!n.next().done;)n.lineBreak?this.lineBreak():this.append(n.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+Math.min(t,i.offset))}}function s3(r){return r.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(r.nodeName)}class o3{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class l3 extends Qi{constructor(e){super(),this.view=e,this.compositionDeco=hi.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new kr],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ml(0,0,0,e.state.doc.length)],0)}get root(){return this.view.root}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every(({fromA:o,toA:l})=>l<this.minWidthFrom||o>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=hi.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=OW(this.view,e.changes)),(He.ie||He.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let i=this.decorations,n=this.updateDeco(),s=vW(i,n,e.changes);return t=ml.extendWithRanges(t,s),this.dirty==0&&t.length==0?!1:(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=He.chrome||He.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(s),this.dirty=0,s&&(s.written||i.selectionRange.focusNode!=s.node)&&(this.forceSelection=!0),this.dom.style.height=""});let n=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.children)s instanceof Ah&&s.widget instanceof a3&&n.push(s.dom);i.updateGaps(n)}updateChildren(e,t){let i=this.childCursor(t);for(let n=e.length-1;;n--){let s=n>=0?e[n]:null;if(!s)break;let{fromA:o,toA:l,fromB:a,toB:h}=s,{content:u,breakAtStart:f,openStart:c,openEnd:d}=hS.build(this.view.state.doc,a,h,this.decorations,this.dynamicDecorationMap),{i:g,off:w}=i.findPos(l,1),{i:S,off:x}=i.findPos(o,-1);vQ(this,S,x,g,w,u,f,c,d)}}updateSelection(e=!1,t=!1){if(e&&this.view.observer.readSelectionRange(),!(t||this.mayControlSelection())||He.ios&&this.view.inputState.rapidCompositionStart)return;let i=this.forceSelection;this.forceSelection=!1;let n=this.view.state.selection.main,s=this.domAtPos(n.anchor),o=n.empty?s:this.domAtPos(n.head);if(He.gecko&&n.empty&&bW(s)){let a=document.createTextNode("");this.view.observer.ignore(()=>s.node.insertBefore(a,s.node.childNodes[s.offset]||null)),s=o=new $n(a,0),i=!0}let l=this.view.observer.selectionRange;(i||!l.focusNode||!P0(s.node,s.offset,l.anchorNode,l.anchorOffset)||!P0(o.node,o.offset,l.focusNode,l.focusOffset))&&(this.view.observer.ignore(()=>{He.android&&He.chrome&&this.dom.contains(l.focusNode)&&SW(l.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let a=T0(this.root);if(n.empty){if(He.gecko){let h=wW(s.node,s.offset);if(h&&h!=3){let u=XQ(s.node,s.offset,h==1?1:-1);u&&(s=new $n(u,h==1?0:u.nodeValue.length))}}a.collapse(s.node,s.offset),n.bidiLevel!=null&&l.cursorBidiLevel!=null&&(l.cursorBidiLevel=n.bidiLevel)}else if(a.extend)a.collapse(s.node,s.offset),a.extend(o.node,o.offset);else{let h=document.createRange();n.anchor>n.head&&([s,o]=[o,s]),h.setEnd(o.node,o.offset),h.setStart(s.node,s.offset),a.removeAllRanges(),a.addRange(h)}}),this.view.observer.setSelectionRange(s,o)),this.impreciseAnchor=s.precise?null:new $n(l.anchorNode,l.anchorOffset),this.impreciseHead=o.precise?null:new $n(l.focusNode,l.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let e=this.view.state.selection.main,t=T0(this.root);if(!e.empty||!e.assoc||!t.modify)return;let i=kr.find(this,e.head);if(!i)return;let n=i.posAtStart;if(e.head==n||e.head==n+i.length)return;let s=this.coordsAt(e.head,-1),o=this.coordsAt(e.head,1);if(!s||!o||s.bottom>o.top)return;let l=this.domAtPos(e.head+e.assoc);t.collapse(l.node,l.offset),t.modify("move",e.assoc<0?"forward":"backward","lineboundary")}mayControlSelection(){return this.view.state.facet(cp)?this.root.activeElement==this.dom:Ny(this.dom,this.view.observer.selectionRange)}nearest(e){for(let t=e;t;){let i=Qi.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let n=this.children[t];if(i<n.length||n instanceof kr)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){for(let i=this.length,n=this.children.length-1;;n--){let s=this.children[n],o=i-s.breakAfter-s.length;if(e>o||e==o&&s.type!=ji.WidgetBefore&&s.type!=ji.WidgetAfter&&(!n||t==2||this.children[n-1].breakAfter||this.children[n-1].type==ji.WidgetBefore&&t>-2))return s.coordsAt(e-o,t);i=o}}measureVisibleLineHeights(e){let t=[],{from:i,to:n}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==Yn.LTR;for(let h=0,u=0;u<this.children.length;u++){let f=this.children[u],c=h+f.length;if(c>n)break;if(h>=i){let d=f.dom.getBoundingClientRect();if(t.push(d.height),o){let g=f.dom.lastChild,w=g?Ad(g):[];if(w.length){let S=w[w.length-1],x=a?S.right-d.left:d.right-S.left;x>l&&(l=x,this.minWidth=s,this.minWidthFrom=h,this.minWidthTo=c)}}}h=c+f.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?Yn.RTL:Yn.LTR}measureTextSize(){for(let n of this.children)if(n instanceof kr){let s=n.measureTextSize();if(s)return s}let e=document.createElement("div"),t,i;return e.className="cm-line",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let n=Ad(e.firstChild)[0];t=e.getBoundingClientRect().height,i=n?n.width/27:7,e.remove()}),{lineHeight:t,charWidth:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new yQ(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,n=0;;n++){let s=n==t.viewports.length?null:t.viewports[n],o=s?s.from-1:this.length;if(o>i){let l=t.lineBlockAt(o).bottom-t.lineBlockAt(i).top;e.push(hi.replace({widget:new a3(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return hi.set(e)}updateDeco(){let e=this.view.state.facet(Pd).map((t,i)=>(this.dynamicDecorationMap[i]=typeof t=="function")?t(this.view):t);for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),n;if(!i)return;!t.empty&&(n=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,n.left),top:Math.min(i.top,n.top),right:Math.max(i.right,n.right),bottom:Math.max(i.bottom,n.bottom)});let s=0,o=0,l=0,a=0;for(let u of this.view.state.facet(WQ).map(f=>f(this.view)))if(u){let{left:f,right:c,top:d,bottom:g}=u;f!=null&&(s=Math.max(s,f)),c!=null&&(o=Math.max(o,c)),d!=null&&(l=Math.max(l,d)),g!=null&&(a=Math.max(a,g))}let h={left:i.left-s,top:i.top-l,right:i.right+o,bottom:i.bottom+a};nW(this.view.scrollDOM,h,t.head<t.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==Yn.LTR)}}function bW(r){return r.node.nodeType==1&&r.node.firstChild&&(r.offset==0||r.node.childNodes[r.offset-1].contentEditable=="false")&&(r.offset==r.node.childNodes.length||r.node.childNodes[r.offset].contentEditable=="false")}class a3 extends up{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function qQ(r){let e=r.observer.selectionRange,t=e.focusNode&&XQ(e.focusNode,e.focusOffset,0);if(!t)return null;let i=r.docView.nearest(t);if(!i)return null;if(i instanceof kr){let n=t;for(;n.parentNode!=i.dom;)n=n.parentNode;let s=n.previousSibling;for(;s&&!Qi.get(s);)s=s.previousSibling;let o=s?Qi.get(s).posAtEnd:i.posAtStart;return{from:o,to:o,node:n,text:t}}else{for(;;){let{parent:s}=i;if(!s)return null;if(s instanceof kr)break;i=s}let n=i.posAtStart;return{from:n,to:n+i.length,node:i.dom,text:t}}}function OW(r,e){let t=qQ(r);if(!t)return hi.none;let{from:i,to:n,node:s,text:o}=t,l=e.mapPos(i,1),a=Math.max(l,e.mapPos(n,-1)),{state:h}=r,u=s.nodeType==3?s.nodeValue:new HQ([],h).readRange(s.firstChild,null).text;if(a-l<u.length)if(h.doc.sliceString(l,Math.min(h.doc.length,l+u.length),pa)==u)a=l+u.length;else if(h.doc.sliceString(Math.max(0,a-u.length),a,pa)==u)l=a-u.length;else return hi.none;else if(h.doc.sliceString(l,a,pa)!=u)return hi.none;let f=Qi.get(s);return f instanceof AQ?f=f.widget.topView:f&&(f.parent=null),hi.set(hi.replace({widget:new kW(s,o,f),inclusive:!0}).range(l,a))}class kW extends up{constructor(e,t,i){super(),this.top=e,this.text=t,this.topView=i}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return AQ}}function XQ(r,e,t){for(;;){if(r.nodeType==3)return r;if(r.nodeType==1&&e>0&&t<=0)r=r.childNodes[e-1],e=_0(r);else if(r.nodeType==1&&e<r.childNodes.length&&t>=0)r=r.childNodes[e],e=0;else return null}}function wW(r,e){return r.nodeType!=1?0:(e&&r.childNodes[e-1].contentEditable=="false"?1:0)|(e<r.childNodes.length&&r.childNodes[e].contentEditable=="false"?2:0)}class yW{constructor(){this.changes=[]}compareRange(e,t){qy(e,t,this.changes)}comparePoint(e,t){qy(e,t,this.changes)}}function vW(r,e,t){let i=new yW;return qt.compare(r,e,t,i),i.changes}function SW(r,e){for(let t=r;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function xW(r,e,t=1){let i=r.charCategorizer(e),n=r.doc.lineAt(e),s=e-n.from;if(n.length==0)return Ue.cursor(e);s==0?t=1:s==n.length&&(t=-1);let o=s,l=s;t<0?o=ll(n.text,s,!1):l=ll(n.text,s);let a=i(n.text.slice(o,l));for(;o>0;){let h=ll(n.text,o,!1);if(i(n.text.slice(h,o))!=a)break;o=h}for(;l<n.length;){let h=ll(n.text,l);if(i(n.text.slice(l,h))!=a)break;l=h}return Ue.range(o+n.from,l+n.from)}function CW(r,e){return e.left>r?e.left-r:Math.max(0,r-e.right)}function AW(r,e){return e.top>r?e.top-r:Math.max(0,r-e.bottom)}function LO(r,e){return r.top<e.bottom-1&&r.bottom>e.top+1}function h3(r,e){return e<r.top?{top:e,left:r.left,right:r.right,bottom:r.bottom}:r}function u3(r,e){return e>r.bottom?{top:r.top,left:r.left,right:r.right,bottom:e}:r}function Uy(r,e,t){let i,n,s,o,l,a,h,u;for(let d=r.firstChild;d;d=d.nextSibling){let g=Ad(d);for(let w=0;w<g.length;w++){let S=g[w];n&&LO(n,S)&&(S=h3(u3(S,n.bottom),n.top));let x=CW(e,S),Q=AW(t,S);if(x==0&&Q==0)return d.nodeType==3?f3(d,e,t):Uy(d,e,t);(!i||o>Q||o==Q&&s>x)&&(i=d,n=S,s=x,o=Q),x==0?t>S.bottom&&(!h||h.bottom<S.bottom)?(l=d,h=S):t<S.top&&(!u||u.top>S.top)&&(a=d,u=S):h&&LO(h,S)?h=u3(h,S.bottom):u&&LO(u,S)&&(u=h3(u,S.top))}}if(h&&h.bottom>=t?(i=l,n=h):u&&u.top<=t&&(i=a,n=u),!i)return{node:r,offset:0};let f=Math.max(n.left,Math.min(n.right,e));if(i.nodeType==3)return f3(i,f,t);if(!s&&i.contentEditable=="true")return Uy(i,f,t);let c=Array.prototype.indexOf.call(r.childNodes,i)+(e>=(n.left+n.right)/2?1:0);return{node:r,offset:c}}function f3(r,e,t){let i=r.nodeValue.length,n=-1,s=1e9,o=0;for(let l=0;l<i;l++){let a=Td(r,l,l+1).getClientRects();for(let h=0;h<a.length;h++){let u=a[h];if(u.top==u.bottom)continue;o||(o=e-u.left);let f=(u.top>t?u.top-t:t-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&f<s){let c=e>=(u.left+u.right)/2,d=c;if((He.chrome||He.gecko)&&Td(r,l).getBoundingClientRect().left==u.right&&(d=!c),f<=0)return{node:r,offset:l+(d?1:0)};n=l+(d?1:0),s=f}}}return{node:r,offset:n>-1?n:o>0?r.nodeValue.length:0}}function ZQ(r,{x:e,y:t},i,n=-1){var s;let o=r.contentDOM.getBoundingClientRect(),l=o.top+r.viewState.paddingTop,a,{docHeight:h}=r.viewState,u=t-l;if(u<0)return 0;if(u>h)return r.state.doc.length;for(let x=r.defaultLineHeight/2,Q=!1;a=r.elementAtHeight(u),a.type!=ji.Text;)for(;u=n>0?a.bottom+x:a.top-x,!(u>=0&&u<=h);){if(Q)return i?null:0;Q=!0,n=-n}t=l+u;let f=a.from;if(f<r.viewport.from)return r.viewport.from==0?0:i?null:c3(r,o,a,e,t);if(f>r.viewport.to)return r.viewport.to==r.state.doc.length?r.state.doc.length:i?null:c3(r,o,a,e,t);let c=r.dom.ownerDocument,d=r.root.elementFromPoint?r.root:c,g=d.elementFromPoint(e,t);g&&!r.contentDOM.contains(g)&&(g=null),g||(e=Math.max(o.left+1,Math.min(o.right-1,e)),g=d.elementFromPoint(e,t),g&&!r.contentDOM.contains(g)&&(g=null));let w,S=-1;if(g&&((s=r.docView.nearest(g))===null||s===void 0?void 0:s.isEditable)!=!1){if(c.caretPositionFromPoint){let x=c.caretPositionFromPoint(e,t);x&&({offsetNode:w,offset:S}=x)}else if(c.caretRangeFromPoint){let x=c.caretRangeFromPoint(e,t);x&&({startContainer:w,startOffset:S}=x,He.safari&&TW(w,S,e)&&(w=void 0))}}if(!w||!r.docView.dom.contains(w)){let x=kr.find(r.docView,f);if(!x)return u>a.top+a.height/2?a.to:a.from;({node:w,offset:S}=Uy(x.dom,e,t))}return r.docView.posFromDOM(w,S)}function c3(r,e,t,i,n){let s=Math.round((i-e.left)*r.defaultCharacterWidth);r.lineWrapping&&t.height>r.defaultLineHeight*1.5&&(s+=Math.floor((n-t.top)/r.defaultLineHeight)*r.viewState.heightOracle.lineLength);let o=r.state.sliceDoc(t.from,t.to);return t.from+eW(o,s,r.state.tabSize)}function TW(r,e,t){let i;if(r.nodeType!=3||e!=(i=r.nodeValue.length))return!1;for(let n=r.nextSibling;n;n=n.nextSibling)if(n.nodeType!=1||n.nodeName!="BR")return!1;return Td(r,i-1,i).getBoundingClientRect().left>t}function PW(r,e,t,i){let n=r.state.doc.lineAt(e.head),s=!i||!r.lineWrapping?null:r.coordsAtPos(e.assoc<0&&e.head>n.from?e.head-1:e.head);if(s){let a=r.dom.getBoundingClientRect(),h=r.textDirectionAt(n.from),u=r.posAtCoords({x:t==(h==Yn.LTR)?a.right-1:a.left+1,y:(s.top+s.bottom)/2});if(u!=null)return Ue.cursor(u,t?-1:1)}let o=kr.find(r.docView,e.head),l=o?t?o.posAtEnd:o.posAtStart:t?n.to:n.from;return Ue.cursor(l,t?-1:1)}function d3(r,e,t,i){let n=r.state.doc.lineAt(e.head),s=r.bidiSpans(n),o=r.textDirectionAt(n.from);for(let l=e,a=null;;){let h=mW(n,s,o,l,t),u=FQ;if(!h){if(n.number==(t?r.state.doc.lines:1))return l;u=`
`,n=r.state.doc.line(n.number+(t?1:-1)),s=r.bidiSpans(n),h=Ue.cursor(t?n.from:n.to)}if(a){if(!a(u))return l}else{if(!i)return h;a=i(u)}l=h}}function _W(r,e,t){let i=r.state.charCategorizer(e),n=i(t);return s=>{let o=i(s);return n==al.Space&&(n=o),n==o}}function $W(r,e,t,i){let n=e.head,s=t?1:-1;if(n==(t?r.state.doc.length:0))return Ue.cursor(n,e.assoc);let o=e.goalColumn,l,a=r.contentDOM.getBoundingClientRect(),h=r.coordsAtPos(n),u=r.documentTop;if(h)o==null&&(o=h.left-a.left),l=s<0?h.top:h.bottom;else{let d=r.viewState.lineBlockAt(n);o==null&&(o=Math.min(a.right-a.left,r.defaultCharacterWidth*(n-d.from))),l=(s<0?d.top:d.bottom)+u}let f=a.left+o,c=i!=null?i:r.defaultLineHeight>>1;for(let d=0;;d+=10){let g=l+(c+d)*s,w=ZQ(r,{x:f,y:g},!1,s);if(g<a.top||g>a.bottom||(s<0?w<n:w>n))return Ue.cursor(w,e.assoc,void 0,o)}}function zO(r,e,t){let i=r.state.facet(zQ).map(n=>n(r));for(;;){let n=!1;for(let s of i)s.between(t.from-1,t.from+1,(o,l,a)=>{t.from>o&&t.from<l&&(t=e.from>t.from?Ue.cursor(o,1):Ue.cursor(l,-1),n=!0)});if(!n)return t}}class MW{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.rapidCompositionStart=!1,this.mouseSelection=null;for(let t in pn){let i=pn[t];e.contentDOM.addEventListener(t,n=>{!p3(e,n)||this.ignoreDuringComposition(n)||t=="keydown"&&this.keydown(e,n)||(this.mustFlushObserver(n)&&e.observer.forceFlush(),this.runCustomHandlers(t,e,n)?n.preventDefault():i(e,n))}),this.registeredEvents.push(t)}He.chrome&&He.chrome_version>=102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,He.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var i;let n;this.customHandlers=[];for(let s of t)if(n=(i=s.update(e).spec)===null||i===void 0?void 0:i.domEventHandlers){this.customHandlers.push({plugin:s.value,handlers:n});for(let o in n)this.registeredEvents.indexOf(o)<0&&o!="scroll"&&(this.registeredEvents.push(o),e.contentDOM.addEventListener(o,l=>{!p3(e,l)||this.runCustomHandlers(o,e,l)&&l.preventDefault()}))}}runCustomHandlers(e,t,i){for(let n of this.customHandlers){let s=n.handlers[e];if(s)try{if(s.call(n.plugin,i,t)||i.defaultPrevented)return!0}catch(o){Ra(t.state,o)}}return!1}runScrollHandlers(e,t){for(let i of this.customHandlers){let n=i.handlers.scroll;if(n)try{n.call(i.plugin,t,e)}catch(s){Ra(e.state,s)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(He.android&&He.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let i;return He.ios&&(i=GQ.find(n=>n.keyCode==t.keyCode))&&!(t.ctrlKey||t.altKey||t.metaKey)&&!t.synthetic?(this.pendingIOSKey=i,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let t=this.pendingIOSKey;return t?(this.pendingIOSKey=void 0,ed(e.contentDOM,t.key,t.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:He.safari&&Date.now()-this.compositionEndedAt<100?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229||e.type=="compositionend"&&!He.ios}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const GQ=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],RW=[16,17,18,20,91,92,224,225];class QW{constructor(e,t,i,n){this.view=e,this.style=i,this.mustSelect=n,this.lastEvent=t;let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Pt.allowMultipleSelections)&&DW(e,t),this.dragMove=EW(e,t),this.dragging=BW(e,t)&&uS(t)==1?null:!1,this.dragging===!1&&(t.preventDefault(),this.select(t))}move(e){if(e.buttons==0)return this.destroy();this.dragging===!1&&this.select(this.lastEvent=e)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(e){let t=this.style.get(e,this.extend,this.multiple);(this.mustSelect||!t.eq(this.view.state.selection)||t.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:t,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function DW(r,e){let t=r.state.facet(RQ);return t.length?t[0](e):He.mac?e.metaKey:e.ctrlKey}function EW(r,e){let t=r.state.facet(QQ);return t.length?t[0](e):He.mac?!e.altKey:!e.ctrlKey}function BW(r,e){let{main:t}=r.state.selection;if(t.empty)return!1;let i=T0(r.root);if(i.rangeCount==0)return!0;let n=i.getRangeAt(0).getClientRects();for(let s=0;s<n.length;s++){let o=n[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function p3(r,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=r.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=Qi.get(t))&&i.ignoreEvent(e))return!1;return!0}const pn=Object.create(null),UQ=He.ie&&He.ie_version<15||He.ios&&He.webkit_version<604;function NW(r){let e=r.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{r.focus(),t.remove(),YQ(r,t.value)},50)}function YQ(r,e){let{state:t}=r,i,n=1,s=t.toText(e),o=s.lines==t.selection.ranges.length;if(Yy!=null&&t.selection.ranges.every(a=>a.empty)&&Yy==s.toString()){let a=-1;i=t.changeByRange(h=>{let u=t.doc.lineAt(h.from);if(u.from==a)return{range:h};a=u.from;let f=t.toText((o?s.line(n++).text:e)+t.lineBreak);return{changes:{from:u.from,insert:f},range:Ue.cursor(h.from+f.length)}})}else o?i=t.changeByRange(a=>{let h=s.line(n++);return{changes:{from:a.from,to:a.to,insert:h.text},range:Ue.cursor(a.from+h.length)}}):i=t.replaceSelection(s);r.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}pn.keydown=(r,e)=>{r.inputState.setSelectionOrigin("select"),e.keyCode==27?r.inputState.lastEscPress=Date.now():RW.indexOf(e.keyCode)<0&&(r.inputState.lastEscPress=0)};let KQ=0;pn.touchstart=(r,e)=>{KQ=Date.now(),r.inputState.setSelectionOrigin("select.pointer")};pn.touchmove=r=>{r.inputState.setSelectionOrigin("select.pointer")};pn.mousedown=(r,e)=>{if(r.observer.flush(),KQ>Date.now()-2e3&&uS(e)==1)return;let t=null;for(let i of r.state.facet(DQ))if(t=i(r,e),t)break;if(!t&&e.button==0&&(t=zW(r,e)),t){let i=r.root.activeElement!=r.contentDOM;i&&r.observer.ignore(()=>kQ(r.contentDOM)),r.inputState.startMouseSelection(new QW(r,e,t,i))}};function g3(r,e,t,i){if(i==1)return Ue.cursor(e,t);if(i==2)return xW(r.state,e,t);{let n=kr.find(r.docView,e),s=r.state.doc.lineAt(n?n.posAtEnd:e),o=n?n.posAtStart:s.from,l=n?n.posAtEnd:s.to;return l<r.state.doc.length&&l==s.to&&l++,Ue.range(o,l)}}let JQ=(r,e)=>r>=e.top&&r<=e.bottom,m3=(r,e,t)=>JQ(e,t)&&r>=t.left&&r<=t.right;function IW(r,e,t,i){let n=kr.find(r.docView,e);if(!n)return 1;let s=e-n.posAtStart;if(s==0)return 1;if(s==n.length)return-1;let o=n.coordsAt(s,-1);if(o&&m3(t,i,o))return-1;let l=n.coordsAt(s,1);return l&&m3(t,i,l)?1:o&&JQ(i,o)?-1:1}function b3(r,e){let t=r.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:IW(r,t,e.clientX,e.clientY)}}const LW=He.ie&&He.ie_version<=11;let O3=null,k3=0,w3=0;function uS(r){if(!LW)return r.detail;let e=O3,t=w3;return O3=r,w3=Date.now(),k3=!e||t>Date.now()-400&&Math.abs(e.clientX-r.clientX)<2&&Math.abs(e.clientY-r.clientY)<2?(k3+1)%3:1}function zW(r,e){let t=b3(r,e),i=uS(e),n=r.state.selection,s=t,o=e;return{update(l){l.docChanged&&(t&&(t.pos=l.changes.mapPos(t.pos)),n=n.map(l.changes),o=null)},get(l,a,h){let u;if(o&&l.clientX==o.clientX&&l.clientY==o.clientY?u=s:(u=s=b3(r,l),o=l),!u||!t)return n;let f=g3(r,u.pos,u.bias,i);if(t.pos!=u.pos&&!a){let c=g3(r,t.pos,t.bias,i),d=Math.min(c.from,f.from),g=Math.max(c.to,f.to);f=d<f.from?Ue.range(d,g):Ue.range(g,d)}return a?n.replaceRange(n.main.extend(f.from,f.to)):h?n.addRange(f):Ue.create([f])}}}pn.dragstart=(r,e)=>{let{selection:{main:t}}=r.state,{mouseSelection:i}=r.inputState;i&&(i.dragging=t),e.dataTransfer&&(e.dataTransfer.setData("Text",r.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove")};function y3(r,e,t,i){if(!t)return;let n=r.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:s}=r.inputState,o=i&&s&&s.dragging&&s.dragMove?{from:s.dragging.from,to:s.dragging.to}:null,l={from:n,insert:t},a=r.state.changes(o?[o,l]:l);r.focus(),r.dispatch({changes:a,selection:{anchor:a.mapPos(n,-1),head:a.mapPos(n,1)},userEvent:o?"move.drop":"input.drop"})}pn.drop=(r,e)=>{if(!e.dataTransfer)return;if(r.state.readOnly)return e.preventDefault();let t=e.dataTransfer.files;if(t&&t.length){e.preventDefault();let i=Array(t.length),n=0,s=()=>{++n==t.length&&y3(r,e,i.filter(o=>o!=null).join(r.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let l=new FileReader;l.onerror=s,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[o]=l.result),s()},l.readAsText(t[o])}}else y3(r,e,e.dataTransfer.getData("Text"),!0)};pn.paste=(r,e)=>{if(r.state.readOnly)return e.preventDefault();r.observer.flush();let t=UQ?null:e.clipboardData;t?(YQ(r,t.getData("text/plain")),e.preventDefault()):NW(r)};function WW(r,e){let t=r.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),r.focus()},50)}function VW(r){let e=[],t=[],i=!1;for(let n of r.selection.ranges)n.empty||(e.push(r.sliceDoc(n.from,n.to)),t.push(n));if(!e.length){let n=-1;for(let{from:s}of r.selection.ranges){let o=r.doc.lineAt(s);o.number>n&&(e.push(o.text),t.push({from:o.from,to:Math.min(r.doc.length,o.to+1)})),n=o.number}i=!0}return{text:e.join(r.lineBreak),ranges:t,linewise:i}}let Yy=null;pn.copy=pn.cut=(r,e)=>{let{text:t,ranges:i,linewise:n}=VW(r.state);if(!t&&!n)return;Yy=n?t:null;let s=UQ?null:e.clipboardData;s?(e.preventDefault(),s.clearData(),s.setData("text/plain",t)):WW(r,t),e.type=="cut"&&!r.state.readOnly&&r.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"})};function e5(r){setTimeout(()=>{r.hasFocus!=r.inputState.notifiedFocused&&r.update([])},10)}pn.focus=e5;pn.blur=r=>{r.observer.clearSelectionRange(),e5(r)};function t5(r,e){if(r.docView.compositionDeco.size){r.inputState.rapidCompositionStart=e;try{r.update([])}finally{r.inputState.rapidCompositionStart=!1}}}pn.compositionstart=pn.compositionupdate=r=>{r.inputState.compositionFirstChange==null&&(r.inputState.compositionFirstChange=!0),r.inputState.composing<0&&(r.inputState.composing=0,r.docView.compositionDeco.size&&(r.observer.flush(),t5(r,!0)))};pn.compositionend=r=>{r.inputState.composing=-1,r.inputState.compositionEndedAt=Date.now(),r.inputState.compositionFirstChange=null,setTimeout(()=>{r.inputState.composing<0&&t5(r,!1)},50)};pn.contextmenu=r=>{r.inputState.lastContextMenu=Date.now()};pn.beforeinput=(r,e)=>{var t;let i;if(He.chrome&&He.android&&(i=GQ.find(n=>n.inputType==e.inputType))&&(r.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let n=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>n+10&&r.hasFocus&&(r.contentDOM.blur(),r.focus())},100)}};const v3=["pre-wrap","normal","pre-line","break-spaces"];class jW{constructor(){this.doc=It.empty,this.lineWrapping=!1,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength)),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return v3.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let n=e[i];n<0?i++:this.heightSamples[Math.floor(n*10)]||(t=!0,this.heightSamples[Math.floor(n*10)]=!0)}return t}refresh(e,t,i,n,s){let o=v3.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=t,this.charWidth=i,this.lineLength=n,l){this.heightSamples={};for(let a=0;a<s.length;a++){let h=s[a];h<0?a++:this.heightSamples[Math.floor(h*10)]=!0}}return l}}class FW{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class ga{constructor(e,t,i,n,s){this.from=e,this.length=t,this.top=i,this.height=n,this.type=s}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new ga(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var ii=function(r){return r[r.ByPos=0]="ByPos",r[r.ByHeight=1]="ByHeight",r[r.ByPosNoHeight=2]="ByPosNoHeight",r}(ii||(ii={}));const Mm=.001;class Rr{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>Mm&&(e.heightChanged=!0),this.height=t)}replace(e,t,i){return Rr.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,n){let s=this;for(let o=n.length-1;o>=0;o--){let{fromA:l,toA:a,fromB:h,toB:u}=n[o],f=s.lineAt(l,ii.ByPosNoHeight,t,0,0),c=f.to>=a?f:s.lineAt(a,ii.ByPosNoHeight,t,0,0);for(u+=c.to-a,a=c.to;o>0&&f.from<=n[o-1].toA;)l=n[o-1].fromA,h=n[o-1].fromB,o--,l<f.from&&(f=s.lineAt(l,ii.ByPosNoHeight,t,0,0));h+=f.from-l,l=f.from;let d=fS.build(i,e,h,u);s=s.replace(l,a,d)}return s.updateHeight(i,0)}static empty(){return new Vr(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,n=0,s=0;for(;;)if(t==i)if(n>s*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),i+=1+l.break,n-=l.size}else if(s>n*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,s-=l.size}else break;else if(n<s){let l=e[t++];l&&(n+=l.size)}else{let l=e[--i];l&&(s+=l.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,i++),new HW(Rr.of(e.slice(0,t)),o,Rr.of(e.slice(i)))}}Rr.prototype.size=1;class i5 extends Rr{constructor(e,t,i){super(e,t),this.type=i}blockAt(e,t,i,n){return new ga(n,this.length,i,this.height,this.type)}lineAt(e,t,i,n,s){return this.blockAt(0,i,n,s)}forEachLine(e,t,i,n,s,o){e<=s+this.length&&t>=s&&o(this.blockAt(0,i,n,s))}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more&&this.setHeight(e,n.heights[n.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Vr extends i5{constructor(e,t){super(e,t,ji.Text),this.collapsed=0,this.widgetHeight=0}replace(e,t,i){let n=i[0];return i.length==1&&(n instanceof Vr||n instanceof wn&&n.flags&4)&&Math.abs(this.length-n.length)<10?(n instanceof wn?n=new Vr(n.length,this.height):n.height=this.height,this.outdated||(n.outdated=!1),n):Rr.of(i)}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more?this.setHeight(e,n.heights[n.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class wn extends Rr{constructor(e){super(e,0)}lines(e,t){let i=e.lineAt(t).number,n=e.lineAt(t+this.length).number;return{firstLine:i,lastLine:n,lineHeight:this.height/(n-i+1)}}blockAt(e,t,i,n){let{firstLine:s,lastLine:o,lineHeight:l}=this.lines(t,n),a=Math.max(0,Math.min(o-s,Math.floor((e-i)/l))),{from:h,length:u}=t.line(s+a);return new ga(h,u,i+l*a,l,ji.Text)}lineAt(e,t,i,n,s){if(t==ii.ByHeight)return this.blockAt(e,i,n,s);if(t==ii.ByPosNoHeight){let{from:f,to:c}=i.lineAt(e);return new ga(f,c-f,0,0,ji.Text)}let{firstLine:o,lineHeight:l}=this.lines(i,s),{from:a,length:h,number:u}=i.lineAt(e);return new ga(a,h,n+l*(u-o),l,ji.Text)}forEachLine(e,t,i,n,s,o){let{firstLine:l,lineHeight:a}=this.lines(i,s);for(let h=Math.max(e,s),u=Math.min(s+this.length,t);h<=u;){let f=i.lineAt(h);h==e&&(n+=a*(f.number-l)),o(new ga(f.from,f.length,n,a,ji.Text)),n+=a,h=f.to+1}}replace(e,t,i){let n=this.length-t;if(n>0){let s=i[i.length-1];s instanceof wn?i[i.length-1]=new wn(s.length+n):i.push(null,new wn(n-1))}if(e>0){let s=i[0];s instanceof wn?i[0]=new wn(e+s.length):i.unshift(new wn(e-1),null)}return Rr.of(i)}decomposeLeft(e,t){t.push(new wn(e-1),null)}decomposeRight(e,t){t.push(null,new wn(this.length-e-1))}updateHeight(e,t=0,i=!1,n){let s=t+this.length;if(n&&n.from<=t+this.length&&n.more){let o=[],l=Math.max(t,n.from),a=-1,h=e.heightChanged;for(n.from>t&&o.push(new wn(n.from-t-1).updateHeight(e,t));l<=s&&n.more;){let f=e.doc.lineAt(l).length;o.length&&o.push(null);let c=n.heights[n.index++];a==-1?a=c:Math.abs(c-a)>=Mm&&(a=-2);let d=new Vr(f,c);d.outdated=!1,o.push(d),l+=f+1}l<=s&&o.push(null,new wn(s-l).updateHeight(e,l));let u=Rr.of(o);return e.heightChanged=h||a<0||Math.abs(u.height-this.height)>=Mm||Math.abs(a-this.lines(e.doc,t).lineHeight)>=Mm,u}else(i||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class HW extends Rr{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,n){let s=i+this.left.height;return e<s?this.left.blockAt(e,t,i,n):this.right.blockAt(e,t,s,n+this.left.length+this.break)}lineAt(e,t,i,n,s){let o=n+this.left.height,l=s+this.left.length+this.break,a=t==ii.ByHeight?e<o:e<l,h=a?this.left.lineAt(e,t,i,n,s):this.right.lineAt(e,t,i,o,l);if(this.break||(a?h.to<l:h.from>l))return h;let u=t==ii.ByPosNoHeight?ii.ByPosNoHeight:ii.ByPos;return a?h.join(this.right.lineAt(l,u,i,o,l)):this.left.lineAt(l,u,i,n,s).join(h)}forEachLine(e,t,i,n,s,o){let l=n+this.left.height,a=s+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,i,n,s,o),t>=a&&this.right.forEachLine(e,t,i,l,a,o);else{let h=this.lineAt(a,ii.ByPos,i,n,s);e<h.from&&this.left.forEachLine(e,h.from-1,i,n,s,o),h.to>=e&&h.from<=t&&o(h),t>h.to&&this.right.forEachLine(h.to+1,t,i,l,a,o)}}replace(e,t,i){let n=this.left.length+this.break;if(t<n)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-n,t-n,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let l of i)s.push(l);if(e>0&&S3(s,o-1),t<this.length){let l=s.length;this.decomposeRight(t,s),S3(s,l)}return Rr.of(s)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,n=i+this.break;if(e>=n)return this.right.decomposeRight(e-n,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<n&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Rr.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,n){let{left:s,right:o}=this,l=t+s.length+this.break,a=null;return n&&n.from<=t+s.length&&n.more?a=s=s.updateHeight(e,t,i,n):s.updateHeight(e,t,i),n&&n.from<=l+o.length&&n.more?a=o=o.updateHeight(e,l,i,n):o.updateHeight(e,l,i),a?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function S3(r,e){let t,i;r[e]==null&&(t=r[e-1])instanceof wn&&(i=r[e+1])instanceof wn&&r.splice(e-1,3,new wn(t.length+1+i.length))}const qW=5;class fS{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof Vr?n.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Vr(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let n=i.widget?i.widget.estimatedHeight:0;n<0&&(n=this.oracle.lineHeight);let s=t-e;i.block?this.addBlock(new i5(s,n,i.type)):(s||n>=qW)&&this.addLineDeco(n,s)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Vr(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new wn(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Vr)return e;let t=new Vr(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type==ji.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=ji.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let i=this.ensureLine();i.length+=t,i.collapsed+=t,i.widgetHeight=Math.max(i.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Vr)&&!this.isCovered?this.nodes.push(new Vr(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let n of this.nodes)n instanceof Vr&&n.updateHeight(this.oracle,i),i+=n?n.length:1;return this.nodes}static build(e,t,i,n){let s=new fS(i,e);return qt.spans(t,i,n,s,0),s.finish(i)}}function XW(r,e,t){let i=new ZW;return qt.compare(r,e,t,i,0),i.changes}class ZW{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,n){(e<t||i&&i.heightRelevant||n&&n.heightRelevant)&&qy(e,t,this.changes,5)}}function GW(r,e){let t=r.getBoundingClientRect(),i=Math.max(0,t.left),n=Math.min(innerWidth,t.right),s=Math.max(0,t.top),o=Math.min(innerHeight,t.bottom),l=r.ownerDocument.body;for(let a=r.parentNode;a&&a!=l;)if(a.nodeType==1){let h=a,u=window.getComputedStyle(h);if((h.scrollHeight>h.clientHeight||h.scrollWidth>h.clientWidth)&&u.overflow!="visible"){let f=h.getBoundingClientRect();i=Math.max(i,f.left),n=Math.min(n,f.right),s=Math.max(s,f.top),o=Math.min(o,f.bottom)}a=u.position=="absolute"||u.position=="fixed"?h.offsetParent:h.parentNode}else if(a.nodeType==11)a=a.host;else break;return{left:i-t.left,right:Math.max(i,n)-t.left,top:s-(t.top+e),bottom:Math.max(s,o)-(t.top+e)}}function UW(r,e){let t=r.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class WO{constructor(e,t,i){this.from=e,this.to=t,this.size=i}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let n=e[i],s=t[i];if(n.from!=s.from||n.to!=s.to||n.size!=s.size)return!1}return!0}draw(e){return hi.replace({widget:new YW(this.size,e)}).range(this.from,this.to)}}class YW extends up{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class x3{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.heightOracle=new jW,this.scaler=T3,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Yn.RTL,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.stateDeco=e.facet(Pd).filter(t=>typeof t!="function"),this.heightMap=Rr.empty().applyChanges(this.stateDeco,It.empty,this.heightOracle.setDoc(e.doc),[new ml(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=hi.set(this.lineGaps.map(t=>t.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let n=i?t.head:t.anchor;if(!e.some(({from:s,to:o})=>n>=s&&n<=o)){let{from:s,to:o}=this.lineBlockAt(n);e.push(new sg(s,o))}}this.viewports=e.sort((i,n)=>i.from-n.from),this.scaler=this.heightMap.height<=7e6?T3:new e7(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:Ic(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Pd).filter(h=>typeof h!="function");let n=e.changedRanges,s=ml.extendWithRanges(n,XW(i,this.stateDeco,e?e.changes:an.empty(this.state.doc.length))),o=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=o&&(e.flags|=2);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let a=!e.changes.empty||e.flags&2||l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,this.updateForViewport(),a&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),n=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Yn.RTL:Yn.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),l=o||this.mustMeasureContent||this.contentDOMHeight!=t.clientHeight;this.contentDOMHeight=t.clientHeight,this.mustMeasureContent=!1;let a=0,h=0,u=parseInt(i.paddingTop)||0,f=parseInt(i.paddingBottom)||0;(this.paddingTop!=u||this.paddingBottom!=f)&&(this.paddingTop=u,this.paddingBottom=f,a|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(n.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,a|=8);let c=(this.printing?UW:GW)(t,this.paddingTop),d=c.top-this.pixelViewport.top,g=c.bottom-this.pixelViewport.bottom;this.pixelViewport=c;let w=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(w!=this.inView&&(this.inView=w,w&&(l=!0)),!this.inView)return 0;let S=t.clientWidth;if((this.contentDOMWidth!=S||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=S,this.editorHeight=e.scrollDOM.clientHeight,a|=8),l){let Q=e.docView.measureVisibleLineHeights(this.viewport);if(n.mustRefreshForHeights(Q)&&(o=!0),o||n.lineWrapping&&Math.abs(S-this.contentDOMWidth)>n.charWidth){let{lineHeight:M,charWidth:p}=e.docView.measureTextSize();o=n.refresh(s,M,p,S/p,Q),o&&(e.docView.minWidth=0,a|=8)}d>0&&g>0?h=Math.max(d,g):d<0&&g<0&&(h=Math.min(d,g)),n.heightChanged=!1;for(let M of this.viewports){let p=M.from==this.viewport.from?Q:e.docView.measureVisibleLineHeights(M);this.heightMap=this.heightMap.updateHeight(n,0,o,new FW(M.from,p))}n.heightChanged&&(a|=2)}let x=!this.viewportIsAppropriate(this.viewport,h)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return x&&(this.viewport=this.getViewport(h,this.scrollTarget)),this.updateForViewport(),(a&2||x)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps)),a|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),a}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),n=this.heightMap,s=this.state.doc,{visibleTop:o,visibleBottom:l}=this,a=new sg(n.lineAt(o-i*1e3,ii.ByHeight,s,0,0).from,n.lineAt(l+(1-i)*1e3,ii.ByHeight,s,0,0).to);if(t){let{head:h}=t.range;if(h<a.from||h>a.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=n.lineAt(h,ii.ByPos,s,0,0),c;t.y=="center"?c=(f.top+f.bottom)/2-u/2:t.y=="start"||t.y=="nearest"&&h<a.from?c=f.top:c=f.bottom-u,a=new sg(n.lineAt(c-1e3/2,ii.ByHeight,s,0,0).from,n.lineAt(c+u+1e3/2,ii.ByHeight,s,0,0).to)}}return a}mapViewport(e,t){let i=t.mapPos(e.from,-1),n=t.mapPos(e.to,1);return new sg(this.heightMap.lineAt(i,ii.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(n,ii.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:n}=this.heightMap.lineAt(e,ii.ByPos,this.state.doc,0,0),{bottom:s}=this.heightMap.lineAt(t,ii.ByPos,this.state.doc,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||n<=o-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||s>=l+Math.max(10,Math.min(i,250)))&&n>o-2*1e3&&s<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let n of e)t.touchesRange(n.from,n.to)||i.push(new WO(t.mapPos(n.from),t.mapPos(n.to),n.size));return i}ensureLineGaps(e){let t=[];if(this.defaultTextDirection!=Yn.LTR)return t;for(let i of this.viewportLines){if(i.length<4e3)continue;let n=KW(i.from,i.to,this.stateDeco);if(n.total<4e3)continue;let s,o;if(this.heightOracle.lineWrapping){let h=2e3/this.heightOracle.lineLength*this.heightOracle.lineHeight;s=og(n,(this.visibleTop-i.top-h)/i.height),o=og(n,(this.visibleBottom-i.top+h)/i.height)}else{let h=n.total*this.heightOracle.charWidth,u=2e3*this.heightOracle.charWidth;s=og(n,(this.pixelViewport.left-u)/h),o=og(n,(this.pixelViewport.right+u)/h)}let l=[];s>i.from&&l.push({from:i.from,to:s}),o<i.to&&l.push({from:o,to:i.to});let a=this.state.selection.main;a.from>=i.from&&a.from<=i.to&&A3(l,a.from-10,a.from+10),!a.empty&&a.to>=i.from&&a.to<=i.to&&A3(l,a.to-10,a.to+10);for(let{from:h,to:u}of l)u-h>1e3&&t.push(JW(e,f=>f.from>=i.from&&f.to<=i.to&&Math.abs(f.from-h)<1e3&&Math.abs(f.to-u)<1e3)||new WO(h,u,this.gapSize(i,h,u,n)))}return t}gapSize(e,t,i,n){let s=C3(n,i)-C3(n,t);return this.heightOracle.lineWrapping?e.height*s:n.total*this.heightOracle.charWidth*s}updateLineGaps(e){WO.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=hi.set(e.map(t=>t.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];qt.spans(e,this.viewport.from,this.viewport.to,{span(n,s){t.push({from:n,to:s})},point(){}},20);let i=t.length!=this.visibleRanges.length||this.visibleRanges.some((n,s)=>n.from!=t[s].from||n.to!=t[s].to);return this.visibleRanges=t,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Ic(this.heightMap.lineAt(e,ii.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(e){return Ic(this.heightMap.lineAt(this.scaler.fromDOM(e),ii.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(e){return Ic(this.heightMap.blockAt(this.scaler.fromDOM(e),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class sg{constructor(e,t){this.from=e,this.to=t}}function KW(r,e,t){let i=[],n=r,s=0;return qt.spans(t,r,e,{span(){},point(o,l){o>n&&(i.push({from:n,to:o}),s+=o-n),n=l}},20),n<e&&(i.push({from:n,to:e}),s+=e-n),{total:s,ranges:i}}function og({total:r,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(r*t);for(let n=0;;n++){let{from:s,to:o}=e[n],l=o-s;if(i<=l)return s+i;i-=l}}function C3(r,e){let t=0;for(let{from:i,to:n}of r.ranges){if(e<=n){t+=e-i;break}t+=n-i}return t/r.total}function A3(r,e,t){for(let i=0;i<r.length;i++){let n=r[i];if(n.from<t&&n.to>e){let s=[];n.from<e&&s.push({from:n.from,to:e}),n.to>t&&s.push({from:t,to:n.to}),r.splice(i,1,...s),i+=s.length-1}}}function JW(r,e){for(let t of r)if(e(t))return t}const T3={toDOM(r){return r},fromDOM(r){return r},scale:1};class e7{constructor(e,t,i){let n=0,s=0,o=0;this.viewports=i.map(({from:l,to:a})=>{let h=t.lineAt(l,ii.ByPos,e,0,0).top,u=t.lineAt(a,ii.ByPos,e,0,0).bottom;return n+=u-h,{from:l,to:a,top:h,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-n)/(t.height-n);for(let l of this.viewports)l.domTop=o+(l.top-s)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),s=l.bottom}toDOM(e){for(let t=0,i=0,n=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return n+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,n=s.domBottom}}fromDOM(e){for(let t=0,i=0,n=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return i+(e-n)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,n=s.domBottom}}}function Ic(r,e){if(e.scale==1)return r;let t=e.toDOM(r.top),i=e.toDOM(r.bottom);return new ga(r.from,r.length,t,i-t,Array.isArray(r.type)?r.type.map(n=>Ic(n,e)):r.type)}const lg=st.define({combine:r=>r.join(" ")}),Ky=st.define({combine:r=>r.indexOf(!0)>-1}),Jy=Ct.newName(),n5=Ct.newName(),r5=Ct.newName(),s5={"&light":"."+n5,"&dark":"."+r5};function ev(r,e,t){return new Ct(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,n=>{if(n=="&")return r;if(!t||!t[n])throw new RangeError(`Unsupported selector: ${n}`);return t[n]}):r+" "+i}})}const t7=ev("."+Jy,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere"},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#f3f9ff"},"&dark .cm-activeLine":{backgroundColor:"#223039"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},s5),i7={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},VO=He.ie&&He.ie_version<=11;class n7{constructor(e,t,i){this.view=e,this.onChange=t,this.onScrollChanged=i,this.active=!1,this.selectionRange=new rW,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let s of n)this.queue.push(s);(He.ie&&He.ie_version<=11||He.ios&&e.composing)&&n.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),VO&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),window.addEventListener("resize",this.onResize=this.onResize.bind(this)),typeof ResizeObserver=="function"&&(this.resize=new ResizeObserver(()=>{this.view.docView.lastUpdate<Date.now()-75&&this.onResize()}),this.resize.observe(e.scrollDOM)),window.addEventListener("beforeprint",this.onPrint=this.onPrint.bind(this)),this.start(),window.addEventListener("scroll",this.onScroll=this.onScroll.bind(this)),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange(),this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:t}=this,i=this.selectionRange;if(t.state.facet(cp)?t.root.activeElement!=this.dom:!Ny(t.dom,i))return;let n=i.anchorNode&&t.docView.nearest(i.anchorNode);n&&n.ignoreEvent(e)||((He.ie&&He.ie_version<=11||He.android&&He.chrome)&&!t.state.selection.main.empty&&i.focusNode&&P0(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1))}readSelectionRange(){let{root:e}=this.view,t=T0(e),i=He.safari&&e.nodeType==11&&tW()==this.view.contentDOM&&r7(this.view)||t;return this.selectionRange.eq(i)?!1:(this.selectionRange.setRange(i),this.selectionChanged=!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,i7),VO&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){!this.active||(this.active=!1,this.observer.disconnect(),VO&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){this.delayedAndroidKey||requestAnimationFrame(()=>{let i=this.delayedAndroidKey;this.delayedAndroidKey=null,this.delayedFlush=-1,this.flush()||ed(this.view.contentDOM,i.key,i.keyCode)}),(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t})}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=window.setTimeout(()=>{this.delayedFlush=-1,this.flush()},20))}forceFlush(){this.delayedFlush>=0&&(window.clearTimeout(this.delayedFlush),this.delayedFlush=-1,this.flush())}processRecords(){let e=this.queue;for(let s of this.observer.takeRecords())e.push(s);e.length&&(this.queue=[]);let t=-1,i=-1,n=!1;for(let s of e){let o=this.readMutation(s);!o||(o.typeOver&&(n=!0),t==-1?{from:t,to:i}=o:(t=Math.min(o.from,t),i=Math.max(o.to,i)))}return{from:t,to:i,typeOver:n}}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return;e&&this.readSelectionRange();let{from:t,to:i,typeOver:n}=this.processRecords(),s=this.selectionChanged&&Ny(this.dom,this.selectionRange);if(t<0&&!s)return;this.selectionChanged=!1;let o=this.view.state,l=this.onChange(t,i,n);return this.view.state==o&&this.view.update([]),l}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.dirty|=4),e.type=="childList"){let i=P3(t,e.previousSibling||e.target.previousSibling,-1),n=P3(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:n?t.posBefore(n):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resize)===null||i===void 0||i.disconnect();for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResize),window.removeEventListener("beforeprint",this.onPrint),this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout)}}function P3(r,e,t){for(;e;){let i=Qi.get(e);if(i&&i.parent==r)return i;let n=e.parentNode;e=n!=r.dom?n:t>0?e.nextSibling:e.previousSibling}return null}function r7(r){let e=null;function t(a){a.preventDefault(),a.stopImmediatePropagation(),e=a.getTargetRanges()[0]}if(r.contentDOM.addEventListener("beforeinput",t,!0),document.execCommand("indent"),r.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let i=e.startContainer,n=e.startOffset,s=e.endContainer,o=e.endOffset,l=r.docView.domAtPos(r.state.selection.main.anchor);return P0(l.node,l.offset,s,o)&&([i,n,s,o]=[s,o,i,n]),{anchorNode:i,anchorOffset:n,focusNode:s,focusOffset:o}}function s7(r,e,t,i){let n,s,o=r.state.selection.main;if(e>-1){let l=r.docView.domBoundsAround(e,t,0);if(!l||r.state.readOnly)return!1;let{from:a,to:h}=l,u=r.docView.impreciseHead||r.docView.impreciseAnchor?[]:l7(r),f=new HQ(u,r.state);f.readRange(l.startDOM,l.endDOM);let c=o.from,d=null;(r.inputState.lastKeyCode===8&&r.inputState.lastKeyTime>Date.now()-100||He.android&&f.text.length<h-a)&&(c=o.to,d="end");let g=o7(r.state.doc.sliceString(a,h,pa),f.text,c-a,d);g&&(He.chrome&&r.inputState.lastKeyCode==13&&g.toB==g.from+2&&f.text.slice(g.from,g.toB)==pa+pa&&g.toB--,n={from:a+g.from,to:a+g.toA,insert:It.of(f.text.slice(g.from,g.toB).split(pa))}),s=a7(u,a)}else if(r.hasFocus||!r.state.facet(cp)){let l=r.observer.selectionRange,{impreciseHead:a,impreciseAnchor:h}=r.docView,u=a&&a.node==l.focusNode&&a.offset==l.focusOffset||!hf(r.contentDOM,l.focusNode)?r.state.selection.main.head:r.docView.posFromDOM(l.focusNode,l.focusOffset),f=h&&h.node==l.anchorNode&&h.offset==l.anchorOffset||!hf(r.contentDOM,l.anchorNode)?r.state.selection.main.anchor:r.docView.posFromDOM(l.anchorNode,l.anchorOffset);(u!=o.head||f!=o.anchor)&&(s=Ue.single(f,u))}if(!n&&!s)return!1;if(!n&&i&&!o.empty&&s&&s.main.empty?n={from:o.from,to:o.to,insert:r.state.doc.slice(o.from,o.to)}:n&&n.from>=o.from&&n.to<=o.to&&(n.from!=o.from||n.to!=o.to)&&o.to-o.from-(n.to-n.from)<=4?n={from:o.from,to:o.to,insert:r.state.doc.slice(o.from,n.from).append(n.insert).append(r.state.doc.slice(n.to,o.to))}:(He.mac||He.android)&&n&&n.from==n.to&&n.from==o.head-1&&n.insert.toString()=="."&&(n={from:o.from,to:o.to,insert:It.of([" "])}),n){let l=r.state;if(He.ios&&r.inputState.flushIOSKey(r)||He.android&&(n.from==o.from&&n.to==o.to&&n.insert.length==1&&n.insert.lines==2&&ed(r.contentDOM,"Enter",13)||n.from==o.from-1&&n.to==o.to&&n.insert.length==0&&ed(r.contentDOM,"Backspace",8)||n.from==o.from&&n.to==o.to+1&&n.insert.length==0&&ed(r.contentDOM,"Delete",46)))return!0;let a=n.insert.toString();if(r.state.facet(BQ).some(f=>f(r,n.from,n.to,a)))return!0;r.inputState.composing>=0&&r.inputState.composing++;let h;if(n.from>=o.from&&n.to<=o.to&&n.to-n.from>=(o.to-o.from)/3&&(!s||s.main.empty&&s.main.from==n.from+n.insert.length)&&r.inputState.composing<0){let f=o.from<n.from?l.sliceDoc(o.from,n.from):"",c=o.to>n.to?l.sliceDoc(n.to,o.to):"";h=l.replaceSelection(r.state.toText(f+n.insert.sliceString(0,void 0,r.state.lineBreak)+c))}else{let f=l.changes(n),c=s&&!l.selection.main.eq(s.main)&&s.main.to<=f.newLength?s.main:void 0;if(l.selection.ranges.length>1&&r.inputState.composing>=0&&n.to<=o.to&&n.to>=o.to-10){let d=r.state.sliceDoc(n.from,n.to),g=qQ(r)||r.state.doc.lineAt(o.head),w=o.to-n.to,S=o.to-o.from;h=l.changeByRange(x=>{if(x.from==o.from&&x.to==o.to)return{changes:f,range:c||x.map(f)};let Q=x.to-w,M=Q-d.length;if(x.to-x.from!=S||r.state.sliceDoc(M,Q)!=d||g&&x.to>=g.from&&x.from<=g.to)return{range:x};let p=l.changes({from:M,to:Q,insert:n.insert}),b=x.to-o.to;return{changes:p,range:c?Ue.range(Math.max(0,c.anchor+b),Math.max(0,c.head+b)):x.map(p)}})}else h={changes:f,selection:c&&l.selection.replaceRange(c)}}let u="input.type";return r.composing&&(u+=".compose",r.inputState.compositionFirstChange&&(u+=".start",r.inputState.compositionFirstChange=!1)),r.dispatch(h,{scrollIntoView:!0,userEvent:u}),!0}else if(s&&!s.main.eq(o)){let l=!1,a="select";return r.inputState.lastSelectionTime>Date.now()-50&&(r.inputState.lastSelectionOrigin=="select"&&(l=!0),a=r.inputState.lastSelectionOrigin),r.dispatch({selection:s,scrollIntoView:l,userEvent:a}),!0}else return!1}function o7(r,e,t,i){let n=Math.min(r.length,e.length),s=0;for(;s<n&&r.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==n&&r.length==e.length)return null;let o=r.length,l=e.length;for(;o>0&&l>0&&r.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(i=="end"){let a=Math.max(0,s-Math.min(o,l));t-=o+a-s}return o<s&&r.length<e.length?(s-=t<=s&&t>=o?s-t:0,l=s+(l-o),o=s):l<s&&(s-=t<=s&&t>=l?s-t:0,o=s+(o-l),l=s),{from:s,toA:o,toB:l}}function l7(r){let e=[];if(r.root.activeElement!=r.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:n,focusOffset:s}=r.observer.selectionRange;return t&&(e.push(new o3(t,i)),(n!=t||s!=i)&&e.push(new o3(n,s))),e}function a7(r,e){if(r.length==0)return null;let t=r[0].pos,i=r.length==2?r[1].pos:t;return t>-1&&i>-1?Ue.single(t+e,i+e):null}class Rt{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(t=>this.update([t])),this.dispatch=this.dispatch.bind(this),this.root=e.root||sW(e.parent)||document,this.viewState=new x3(e.state||Pt.create()),this.plugins=this.state.facet(Bc).map(t=>new IO(t));for(let t of this.plugins)t.update(this);this.observer=new n7(this,(t,i,n)=>s7(this,t,i,n),t=>{this.inputState.runScrollHandlers(this,t),this.observer.intersecting&&this.measure()}),this.inputState=new MW(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new l3(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}dispatch(...e){this._dispatch(e.length==1&&e[0]instanceof Un?e[0]:this.state.update(...e))}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,n,s=this.state;for(let l of e){if(l.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=l.state}if(this.destroyed){this.viewState.state=s;return}if(this.observer.clear(),s.facet(Pt.phrases)!=this.state.facet(Pt.phrases))return this.setState(s);n=M0.create(this,s,e);let o=this.viewState.scrollTarget;try{this.updateState=2;for(let l of e){if(o&&(o=o.map(l.changes)),l.scrollIntoView){let{main:a}=l.state.selection;o=new $0(a.empty?a:Ue.cursor(a.head,a.head>a.anchor?-1:1))}for(let a of l.effects)a.is(r3)&&(o=a.value)}this.viewState.update(n,o),this.bidiCache=R0.update(this.bidiCache,n.changes),n.empty||(this.updatePlugins(n),this.inputState.update(n)),t=this.docView.update(n),this.state.facet(Nc)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(l=>l.isUserEvent("select.pointer")))}finally{this.updateState=0}if(n.startState.facet(lg)!=n.state.facet(lg)&&(this.viewState.mustMeasureContent=!0),(t||i||o||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!n.empty)for(let l of this.state.facet(Xy))l(n)}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new x3(e),this.plugins=e.facet(Bc).map(i=>new IO(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView=new l3(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Bc),i=e.state.facet(Bc);if(t!=i){let n=[];for(let s of i){let o=t.indexOf(s);if(o<0)n.push(new IO(s));else{let l=this.plugins[o];l.mustUpdate=e,n.push(l)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=n,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let n of this.plugins)n.mustUpdate=e;for(let n=0;n<this.plugins.length;n++)this.plugins[n].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.flush();let t=null;try{for(let i=0;;i++){this.updateState=1;let n=this.viewport,s=this.viewState.measure(this);if(!s&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(i>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let o=[];s&4||([this.measureRequests,o]=[o,this.measureRequests]);let l=o.map(f=>{try{return f.read(this)}catch(c){return Ra(this.state,c),_3}}),a=M0.create(this,this.state,[]),h=!1,u=!1;a.flags|=s,t?t.flags|=s:t=a,this.updateState=2,a.empty||(this.updatePlugins(a),this.inputState.update(a),this.updateAttrs(),h=this.docView.update(a));for(let f=0;f<o.length;f++)if(l[f]!=_3)try{let c=o[f];c.write&&c.write(l[f],this)}catch(c){Ra(this.state,c)}if(this.viewState.scrollTarget&&(this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,u=!0),h&&this.docView.updateSelection(!0),this.viewport.from==n.from&&this.viewport.to==n.to&&!u&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let i of this.state.facet(Xy))i(t)}get themeClasses(){return Jy+" "+(this.state.facet(Ky)?r5:n5)+" "+this.state.facet(lg)}updateAttrs(){let e=$3(this,IQ,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(cp)?"true":"false",class:"cm-content",style:`${He.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),$3(this,LQ,t);let i=this.observer.ignore(()=>{let n=Hy(this.contentDOM,this.contentAttrs,t),s=Hy(this.dom,this.editorAttrs,e);return n||s});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let n of i.effects)if(n.is(Rt.announce)){t&&(this.announceDOM.textContent=""),t=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=n.value}}mountStyles(){this.styleModules=this.state.facet(Nc),Ct.mount(this.root,this.styleModules.concat(t7).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=requestAnimationFrame(()=>this.measure())),e){if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return zO(this,e,d3(this,e,t,i))}moveByGroup(e,t){return zO(this,e,d3(this,e,t,i=>_W(this,e.head,i)))}moveToLineBoundary(e,t,i=!0){return PW(this,e,t,i)}moveVertically(e,t,i){return zO(this,e,$W(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),ZQ(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let n=this.state.doc.lineAt(e),s=this.bidiSpans(n),o=s[zu.find(s,e-n.from,-1,t)];return Db(i,o.dir==Yn.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(NQ)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>h7)return jQ(e.length);let t=this.textDirectionAt(e.from);for(let n of this.bidiCache)if(n.from==e.from&&n.dir==t)return n.order;let i=gW(e.text,t);return this.bidiCache.push(new R0(e.from,e.to,t,i)),i}get hasFocus(){var e;return(document.hasFocus()||He.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{kQ(this.contentDOM),this.docView.updateSelection()})}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return r3.of(new $0(typeof e=="number"?Ue.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return za.define(()=>({}),{eventHandlers:e})}static theme(e,t){let i=Ct.newName(),n=[lg.of(i),Nc.of(ev(`.${i}`,e))];return t&&t.dark&&n.push(Ky.of(!0)),n}static baseTheme(e){return sQ.lowest(Nc.of(ev("."+Jy,e,s5)))}}Rt.styleModule=Nc;Rt.inputHandler=BQ;Rt.perLineTextDirection=NQ;Rt.exceptionSink=EQ;Rt.updateListener=Xy;Rt.editable=cp;Rt.mouseSelectionStyle=DQ;Rt.dragMovesSelection=QQ;Rt.clickAddsSelectionRange=RQ;Rt.decorations=Pd;Rt.atomicRanges=zQ;Rt.scrollMargins=WQ;Rt.darkTheme=Ky;Rt.contentAttributes=LQ;Rt.editorAttributes=IQ;Rt.lineWrapping=Rt.contentAttributes.of({class:"cm-lineWrapping"});Rt.announce=Vi.define();const h7=4096,_3={};class R0{constructor(e,t,i,n){this.from=e,this.to=t,this.dir=i,this.order=n}static update(e,t){if(t.empty)return e;let i=[],n=e.length?e[e.length-1].dir:Yn.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==n&&!t.touchesRange(o.from,o.to)&&i.push(new R0(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.order))}return i}}function $3(r,e,t){for(let i=r.state.facet(e),n=i.length-1;n>=0;n--){let s=i[n],o=typeof s=="function"?s(r):s;o&&Fy(o,t)}return t}const u7=!He.ios,f7={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};u7&&(f7[".cm-line"].caretColor="transparent !important");class Ih extends lf{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Ih.prototype.elementClass="";Ih.prototype.toDOM=void 0;Ih.prototype.mapMode=Zr.TrackBefore;Ih.prototype.startSide=Ih.prototype.endSide=-1;Ih.prototype.point=!0;const jO=st.define(),c7={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>qt.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Rm=st.define();function d7(r){return[p7(),Rm.of(Object.assign(Object.assign({},c7),r))]}const tv=st.define({combine:r=>r.some(e=>e)});function p7(r){let e=[g7];return r&&r.fixed===!1&&e.push(tv.of(!0)),e}const g7=za.fromClass(class{constructor(r){this.view=r,this.prevViewport=r.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=r.state.facet(Rm).map(e=>new R3(r,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!r.state.facet(tv),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),r.scrollDOM.insertBefore(this.dom,r.contentDOM)}update(r){if(this.updateGutters(r)){let e=this.prevViewport,t=r.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}r.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(tv)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=r.view.viewport}syncGutters(r){let e=this.dom.nextSibling;r&&this.dom.remove();let t=qt.iter(this.view.state.facet(jO),this.view.viewport.from),i=[],n=this.gutters.map(s=>new m7(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks){let o;if(Array.isArray(s.type)){for(let l of s.type)if(l.type==ji.Text){o=l;break}}else o=s.type==ji.Text?s:void 0;if(!!o){i.length&&(i=[]),o5(t,i,s.from);for(let l of n)l.line(this.view,o,i)}}for(let s of n)s.finish();r&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(r){let e=r.startState.facet(Rm),t=r.state.facet(Rm),i=r.docChanged||r.heightChanged||r.viewportChanged||!qt.eq(r.startState.facet(jO),r.state.facet(jO),r.view.viewport.from,r.view.viewport.to);if(e==t)for(let n of this.gutters)n.update(r)&&(i=!0);else{i=!0;let n=[];for(let s of t){let o=e.indexOf(s);o<0?n.push(new R3(this.view,s)):(this.gutters[o].update(r),n.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),n.indexOf(s)<0&&s.destroy();for(let s of n)this.dom.appendChild(s.dom);this.gutters=n}return i}destroy(){for(let r of this.gutters)r.destroy();this.dom.remove()}},{provide:r=>Rt.scrollMargins.of(e=>{let t=e.plugin(r);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==Yn.LTR?{left:t.dom.offsetWidth}:{right:t.dom.offsetWidth}})});function M3(r){return Array.isArray(r)?r:[r]}function o5(r,e,t){for(;r.value&&r.from<=t;)r.from==t&&e.push(r.value),r.next()}class m7{constructor(e,t,i){this.gutter=e,this.height=i,this.localMarkers=[],this.i=0,this.cursor=qt.iter(e.markers,t.from)}line(e,t,i){this.localMarkers.length&&(this.localMarkers=[]),o5(this.cursor,this.localMarkers,t.from);let n=i.length?this.localMarkers.concat(i):this.localMarkers,s=this.gutter.config.lineMarker(e,t,n);s&&n.unshift(s);let o=this.gutter;if(n.length==0&&!o.config.renderEmptyElements)return;let l=t.top-this.height;if(this.i==o.elements.length){let a=new l5(e,t.height,l,n);o.elements.push(a),o.dom.appendChild(a.dom)}else o.elements[this.i].update(e,t.height,l,n);this.height=t.bottom,this.i++}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class R3{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,n=>{let s=e.lineBlockAtHeight(n.clientY-e.documentTop);t.domEventHandlers[i](e,s,n)&&n.preventDefault()});this.markers=M3(t.markers(e)),t.initialSpacer&&(this.spacer=new l5(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=M3(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let n=this.config.updateSpacer(this.spacer.markers[0],e);n!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[n])}let i=e.view.viewport;return!qt.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class l5{constructor(e,t,i,n){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,n)}update(e,t,i,n){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),b7(this.markers,n)||this.setMarkers(e,n)}setMarkers(e,t){let i="cm-gutterElement",n=this.dom.firstChild;for(let s=0,o=0;;){let l=o,a=s<t.length?t[s++]:null,h=!1;if(a){let u=a.elementClass;u&&(i+=" "+u);for(let f=o;f<this.markers.length;f++)if(this.markers[f].compare(a)){l=f,h=!0;break}}else l=this.markers.length;for(;o<l;){let u=this.markers[o++];if(u.toDOM){u.destroy(n);let f=n.nextSibling;n.remove(),n=f}}if(!a)break;a.toDOM&&(h?n=n.nextSibling:this.dom.insertBefore(a.toDOM(e),n)),h&&o++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function b7(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(!r[t].compare(e[t]))return!1;return!0}let O7=0;class vo{constructor(e,t,i){this.set=e,this.base=t,this.modified=i,this.id=O7++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let t=new vo([],null,[]);if(t.set.push(t),e)for(let i of e.set)t.set.push(i);return t}static defineModifier(){let e=new Q0;return t=>t.modified.indexOf(e)>-1?t:Q0.get(t.base||t,t.modified.concat(e).sort((i,n)=>i.id-n.id))}}let k7=0;class Q0{constructor(){this.instances=[],this.id=k7++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(l=>l.base==e&&w7(t,l.modified));if(i)return i;let n=[],s=new vo(n,e,t);for(let l of t)l.instances.push(s);let o=a5(t);for(let l of e.set)for(let a of o)n.push(Q0.get(l,a));return s}}function w7(r,e){return r.length==e.length&&r.every((t,i)=>t==e[i])}function a5(r){let e=[r];for(let t=0;t<r.length;t++)for(let i of a5(r.slice(0,t).concat(r.slice(t+1))))e.push(i);return e}function y7(r){let e=Object.create(null);for(let t in r){let i=r[t];Array.isArray(i)||(i=[i]);for(let n of t.split(" "))if(n){let s=[],o=2,l=n;for(let f=0;;){if(l=="..."&&f>0&&f+3==n.length){o=1;break}let c=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!c)throw new RangeError("Invalid path: "+n);if(s.push(c[0]=="*"?"":c[0][0]=='"'?JSON.parse(c[0]):c[0]),f+=c[0].length,f==n.length)break;let d=n[f++];if(f==n.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+n);l=n.slice(f)}let a=s.length-1,h=s[a];if(!h)throw new RangeError("Invalid path: "+n);let u=new v7(i,o,a>0?s.slice(0,a):null);e[h]=u.sort(e[h])}}return h5.add(e)}const h5=new $t;class v7{constructor(e,t,i,n){this.tags=e,this.mode=t,this.context=i,this.next=n}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function u5(r,e){let t=Object.create(null);for(let s of r)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let o of s.tag)t[o.id]=s.class;let{scope:i,all:n=null}=e||{};return{style:s=>{let o=n;for(let l of s)for(let a of l.set){let h=t[a.id];if(h){o=o?o+" "+h:h;break}}return o},scope:i}}function S7(r,e){let t=null;for(let i of r){let n=i.style(e);n&&(t=t?t+" "+n:n)}return t}function x7(r,e,t,i=0,n=r.length){let s=new C7(i,Array.isArray(e)?e:[e],t);s.highlightRange(r.cursor(),i,n,"",s.highlighters),s.flush(n)}class C7{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,n,s){let{type:o,from:l,to:a}=e;if(l>=i||a<=t)return;o.isTop&&(s=this.highlighters.filter(d=>!d.scope||d.scope(o)));let h=n,u=o.prop(h5),f=!1;for(;u;){if(!u.context||e.matchContext(u.context)){let d=S7(s,u.tags);d&&(h&&(h+=" "),h+=d,u.mode==1?n+=(n?" ":"")+d:u.mode==0&&(f=!0));break}u=u.next}if(this.startSpan(e.from,h),f)return;let c=e.tree&&e.tree.prop($t.mounted);if(c&&c.overlay){let d=e.node.enter(c.overlay[0].from+l,1),g=this.highlighters.filter(S=>!S.scope||S.scope(c.tree.type)),w=e.firstChild();for(let S=0,x=l;;S++){let Q=S<c.overlay.length?c.overlay[S]:null,M=Q?Q.from+l:a,p=Math.max(t,x),b=Math.min(i,M);if(p<b&&w)for(;e.from<b&&(this.highlightRange(e,p,b,n,s),this.startSpan(Math.min(i,e.to),h),!(e.to>=M||!e.nextSibling())););if(!Q||M>i)break;x=Q.to+l,x>t&&(this.highlightRange(d.cursor(),Math.max(t,Q.from+l),Math.min(i,x),n,g),this.startSpan(x,h))}w&&e.parent()}else if(e.firstChild()){do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,n,s),this.startSpan(Math.min(i,e.to),h)}while(e.nextSibling());e.parent()}}}const ce=vo.define,ag=ce(),Bl=ce(),Q3=ce(Bl),D3=ce(Bl),Nl=ce(),hg=ce(Nl),FO=ce(Nl),fo=ce(),Ka=ce(fo),Vs=ce(),js=ce(),iv=ce(),ic=ce(iv),ug=ce(),Te={comment:ag,lineComment:ce(ag),blockComment:ce(ag),docComment:ce(ag),name:Bl,variableName:ce(Bl),typeName:Q3,tagName:ce(Q3),propertyName:D3,attributeName:ce(D3),className:ce(Bl),labelName:ce(Bl),namespace:ce(Bl),macroName:ce(Bl),literal:Nl,string:hg,docString:ce(hg),character:ce(hg),attributeValue:ce(hg),number:FO,integer:ce(FO),float:ce(FO),bool:ce(Nl),regexp:ce(Nl),escape:ce(Nl),color:ce(Nl),url:ce(Nl),keyword:Vs,self:ce(Vs),null:ce(Vs),atom:ce(Vs),unit:ce(Vs),modifier:ce(Vs),operatorKeyword:ce(Vs),controlKeyword:ce(Vs),definitionKeyword:ce(Vs),moduleKeyword:ce(Vs),operator:js,derefOperator:ce(js),arithmeticOperator:ce(js),logicOperator:ce(js),bitwiseOperator:ce(js),compareOperator:ce(js),updateOperator:ce(js),definitionOperator:ce(js),typeOperator:ce(js),controlOperator:ce(js),punctuation:iv,separator:ce(iv),bracket:ic,angleBracket:ce(ic),squareBracket:ce(ic),paren:ce(ic),brace:ce(ic),content:fo,heading:Ka,heading1:ce(Ka),heading2:ce(Ka),heading3:ce(Ka),heading4:ce(Ka),heading5:ce(Ka),heading6:ce(Ka),contentSeparator:ce(fo),list:ce(fo),quote:ce(fo),emphasis:ce(fo),strong:ce(fo),link:ce(fo),monospace:ce(fo),strikethrough:ce(fo),inserted:ce(),deleted:ce(),changed:ce(),invalid:ce(),meta:ug,documentMeta:ce(ug),annotation:ce(ug),processingInstruction:ce(ug),definition:vo.defineModifier(),constant:vo.defineModifier(),function:vo.defineModifier(),standard:vo.defineModifier(),local:vo.defineModifier(),special:vo.defineModifier()};u5([{tag:Te.link,class:"tok-link"},{tag:Te.heading,class:"tok-heading"},{tag:Te.emphasis,class:"tok-emphasis"},{tag:Te.strong,class:"tok-strong"},{tag:Te.keyword,class:"tok-keyword"},{tag:Te.atom,class:"tok-atom"},{tag:Te.bool,class:"tok-bool"},{tag:Te.url,class:"tok-url"},{tag:Te.labelName,class:"tok-labelName"},{tag:Te.inserted,class:"tok-inserted"},{tag:Te.deleted,class:"tok-deleted"},{tag:Te.literal,class:"tok-literal"},{tag:Te.string,class:"tok-string"},{tag:Te.number,class:"tok-number"},{tag:[Te.regexp,Te.escape,Te.special(Te.string)],class:"tok-string2"},{tag:Te.variableName,class:"tok-variableName"},{tag:Te.local(Te.variableName),class:"tok-variableName tok-local"},{tag:Te.definition(Te.variableName),class:"tok-variableName tok-definition"},{tag:Te.special(Te.variableName),class:"tok-variableName2"},{tag:Te.definition(Te.propertyName),class:"tok-propertyName tok-definition"},{tag:Te.typeName,class:"tok-typeName"},{tag:Te.namespace,class:"tok-namespace"},{tag:Te.className,class:"tok-className"},{tag:Te.macroName,class:"tok-macroName"},{tag:Te.propertyName,class:"tok-propertyName"},{tag:Te.operator,class:"tok-operator"},{tag:Te.comment,class:"tok-comment"},{tag:Te.meta,class:"tok-meta"},{tag:Te.invalid,class:"tok-invalid"},{tag:Te.punctuation,class:"tok-punctuation"}]);var HO;const D0=new $t;class Bo{constructor(e,t,i=[]){this.data=e,Pt.prototype.hasOwnProperty("tree")||Object.defineProperty(Pt.prototype,"tree",{get(){return ns(this)}}),this.parser=t,this.extension=[Wa.of(this),Pt.languageData.of((n,s,o)=>n.facet(E3(n,s,o)))].concat(i)}isActiveAt(e,t,i=-1){return E3(e,t,i)==this.data}findRegions(e){let t=e.facet(Wa);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],n=(s,o)=>{if(s.prop(D0)==this.data){i.push({from:o,to:o+s.length});return}let l=s.prop($t.mounted);if(l){if(l.tree.prop(D0)==this.data){if(l.overlay)for(let a of l.overlay)i.push({from:a.from+o,to:a.to+o});else i.push({from:o,to:o+s.length});return}else if(l.overlay){let a=i.length;if(n(l.tree,l.overlay[0].from+o),i.length>a)return}}for(let a=0;a<s.children.length;a++){let h=s.children[a];h instanceof Gn&&n(h,s.positions[a]+o)}};return n(ns(e),0),i}get allowsNesting(){return!0}}Bo.setState=Vi.define();function E3(r,e,t){let i=r.facet(Wa);if(!i)return null;let n=i.data;if(i.allowsNesting)for(let s=ns(r).topNode;s;s=s.enter(e,t,Wn.ExcludeBuffers))n=s.type.prop(D0)||n;return n}function ns(r){let e=r.field(Bo.state,!1);return e?e.tree:Gn.empty}class A7{constructor(e,t=e.length){this.doc=e,this.length=t,this.cursorPos=0,this.string="",this.cursor=e.iter()}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let nc=null;class E0{constructor(e,t,i=[],n,s,o,l,a){this.parser=e,this.state=t,this.fragments=i,this.tree=n,this.treeLen=s,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new E0(e,t,[],Gn.empty,0,i,[],null)}startParse(){return this.parser.startParse(new A7(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=Gn.empty&&this.isDone(t!=null?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let n=Date.now()+e;e=()=>Date.now()>n}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let n=this.parse.advance();if(n)if(this.fragments=this.withoutTempSkipped(Ch.addTree(n,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=n,this.parse=null,this.treeLen<(t!=null?t:this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Ch.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=nc;nc=this;try{return e()}finally{nc=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=B3(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:n,treeLen:s,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((h,u,f,c)=>a.push({fromA:h,toA:u,fromB:f,toB:c})),i=Ch.applyChanges(i,a),n=Gn.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let h of this.skipped){let u=e.mapPos(h.from,1),f=e.mapPos(h.to,-1);u<f&&l.push({from:u,to:f})}}}return new E0(this.parser,t,i,n,s,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:n,to:s}=this.skipped[i];n<e.to&&s>e.from&&(this.fragments=B3(this.fragments,n,s),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends E9{createParse(t,i,n){let s=n[0].from,o=n[n.length-1].to;return{parsedPos:s,advance(){let a=nc;if(a){for(let h of n)a.tempSkipped.push(h);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new Gn(us.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return nc}}function B3(r,e,t){return Ch.applyChanges(r,[{fromA:e,toA:t,fromB:e,toB:t}])}class ff{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new ff(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=E0.create(e.facet(Wa).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new ff(i)}}Bo.state=_l.define({create:ff.init,update(r,e){for(let t of e.effects)if(t.is(Bo.setState))return t.value;return e.startState.facet(Wa)!=e.state.facet(Wa)?ff.init(e.state):r.apply(e)}});let f5=r=>{let e=setTimeout(()=>r(),500);return()=>clearTimeout(e)};typeof requestIdleCallback!="undefined"&&(f5=r=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(r,{timeout:500-100})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const qO=typeof navigator!="undefined"&&((HO=navigator.scheduling)===null||HO===void 0?void 0:HO.isInputPending)?()=>navigator.scheduling.isInputPending():null,T7=za.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Bo.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Bo.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=f5(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:n}}=this.view,s=i.field(Bo.state);if(s.tree==s.context.tree&&s.context.isDone(n+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!qO?Math.max(25,e.timeRemaining()-5):1e9),l=s.context.treeLen<n&&i.doc.length>n+1e3,a=s.context.work(()=>qO&&qO()||Date.now()>o,n+(l?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Bo.setState.of(new ff(s.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Ra(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Wa=st.define({combine(r){return r.length?r[0]:null},enables:[Bo.state,T7]}),P7=st.define(),c5=st.define({combine:r=>{if(!r.length)return"  ";if(!/^(?: +|\t+)$/.test(r[0]))throw new Error("Invalid indent unit: "+JSON.stringify(r[0]));return r[0]}});function _7(r){let e=r.facet(c5);return e.charCodeAt(0)==9?r.tabSize*e.length:e.length}function $7(r,e){let t="",i=r.tabSize;if(r.facet(c5).charCodeAt(0)==9)for(;e>=i;)t+="	",e-=i;for(let n=0;n<e;n++)t+=" ";return t}function M7(r,e){r instanceof Pt&&(r=new d5(r));for(let i of r.state.facet(P7)){let n=i(r,e);if(n!=null)return n}let t=ns(r.state);return t?Q7(r,t,e):null}class d5{constructor(e,t={}){this.state=e,this.options=t,this.unit=_7(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:n,simulateDoubleBreak:s}=this.options;return n!=null&&n>=i.from&&n<=i.to?s&&n==e?{text:"",from:e}:(t<0?n<e:n<=e)?{text:i.text.slice(n-i.from),from:n}:{text:i.text.slice(0,n-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:n}=this.lineAt(e,t);return i.slice(e-n,Math.min(i.length,e+100-n))}column(e,t=1){let{text:i,from:n}=this.lineAt(e,t),s=this.countColumn(i,e-n),o=this.options.overrideIndentation?this.options.overrideIndentation(n):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,t=e.length){return J9(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:n}=this.lineAt(e,t),s=this.options.overrideIndentation;if(s){let o=s(n);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const R7=new $t;function Q7(r,e,t){return p5(e.resolveInner(t).enterUnfinishedNodesBefore(t),t,r)}function D7(r){return r.pos==r.options.simulateBreak&&r.options.simulateDoubleBreak}function E7(r){let e=r.type.prop(R7);if(e)return e;let t=r.firstChild,i;if(t&&(i=t.type.prop($t.closedBy))){let n=r.lastChild,s=n&&i.indexOf(n.name)>-1;return o=>L7(o,!0,1,void 0,s&&!D7(o)?n.from:void 0)}return r.parent==null?B7:null}function p5(r,e,t){for(;r;r=r.parent){let i=E7(r);if(i)return i(cS.create(t,e,r))}return null}function B7(){return 0}class cS extends d5{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.node=i}static create(e,t,i){return new cS(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if(N7(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?p5(e,this.pos,this.base):0}}function N7(r,e){for(let t=e;t;t=t.parent)if(r==t)return!0;return!1}function I7(r){let e=r.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let n=r.options.simulateBreak,s=r.state.doc.lineAt(t.from),o=n==null||n<=s.from?s.to:Math.min(s.to,n);for(let l=t.to;;){let a=e.childAfter(l);if(!a||a==i)return null;if(!a.type.isSkipped)return a.from<o?t:null;l=a.to}}function L7(r,e,t,i,n){let s=r.textAfter,o=s.match(/^\s*/)[0].length,l=i&&s.slice(o,o+i.length)==i||n==r.pos+o,a=e?I7(r):null;return a?l?r.column(a.from):r.column(a.to):r.baseIndent+(l?0:r.unit*t)}const z7=200;function W7(){return Pt.transactionFilter.of(r=>{if(!r.docChanged||!r.isUserEvent("input.type")&&!r.isUserEvent("input.complete"))return r;let e=r.startState.languageDataAt("indentOnInput",r.startState.selection.main.head);if(!e.length)return r;let t=r.newDoc,{head:i}=r.newSelection.main,n=t.lineAt(i);if(i>n.from+z7)return r;let s=t.sliceString(n.from,i);if(!e.some(h=>h.test(s)))return r;let{state:o}=r,l=-1,a=[];for(let{head:h}of o.selection.ranges){let u=o.doc.lineAt(h);if(u.from==l)continue;l=u.from;let f=M7(o,u.from);if(f==null)continue;let c=/^\s*/.exec(u.text)[0],d=$7(o,f);c!=d&&a.push({from:u.from,to:u.from+c.length,insert:d})}return a.length?[r,{changes:a,sequential:!0}]:r})}const V7=st.define(),j7=new $t;function F7(r,e,t){let i=ns(r);if(i.length<t)return null;let n=i.resolveInner(t),s=null;for(let o=n;o;o=o.parent){if(o.to<=t||o.from>t)continue;if(s&&o.from<e)break;let l=o.type.prop(j7);if(l&&(o.to<i.length-50||i.length==r.doc.length||!H7(o))){let a=l(o,r);a&&a.from<=t&&a.from>=e&&a.to>t&&(s=a)}}return s}function H7(r){let e=r.lastChild;return e&&e.to==r.to&&e.type.isError}function B0(r,e,t){for(let i of r.facet(V7)){let n=i(r,e,t);if(n)return n}return F7(r,e,t)}function g5(r,e){let t=e.mapPos(r.from,1),i=e.mapPos(r.to,-1);return t>=i?void 0:{from:t,to:i}}const Nb=Vi.define({map:g5}),dp=Vi.define({map:g5});function m5(r){let e=[];for(let{head:t}of r.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(r.lineBlockAt(t));return e}const Lh=_l.define({create(){return hi.none},update(r,e){r=r.map(e.changes);for(let t of e.effects)t.is(Nb)&&!q7(r,t.value.from,t.value.to)?r=r.update({add:[J7.range(t.value.from,t.value.to)]}):t.is(dp)&&(r=r.update({filter:(i,n)=>t.value.from!=i||t.value.to!=n,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:i}=e.selection.main;r.between(i,i,(n,s)=>{n<i&&s>i&&(t=!0)}),t&&(r=r.update({filterFrom:i,filterTo:i,filter:(n,s)=>s<=i||n>=i}))}return r},provide:r=>Rt.decorations.from(r)});function N0(r,e,t){var i;let n=null;return(i=r.field(Lh,!1))===null||i===void 0||i.between(e,t,(s,o)=>{(!n||n.from>s)&&(n={from:s,to:o})}),n}function q7(r,e,t){let i=!1;return r.between(e,e,(n,s)=>{n==e&&s==t&&(i=!0)}),i}function b5(r,e){return r.field(Lh,!1)?e:e.concat(Vi.appendConfig.of(w5()))}const X7=r=>{for(let e of m5(r)){let t=B0(r.state,e.from,e.to);if(t)return r.dispatch({effects:b5(r.state,[Nb.of(t),O5(r,t)])}),!0}return!1},Z7=r=>{if(!r.state.field(Lh,!1))return!1;let e=[];for(let t of m5(r)){let i=N0(r.state,t.from,t.to);i&&e.push(dp.of(i),O5(r,i,!1))}return e.length&&r.dispatch({effects:e}),e.length>0};function O5(r,e,t=!0){let i=r.state.doc.lineAt(e.from).number,n=r.state.doc.lineAt(e.to).number;return Rt.announce.of(`${r.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${r.state.phrase("to")} ${n}.`)}const G7=r=>{let{state:e}=r,t=[];for(let i=0;i<e.doc.length;){let n=r.lineBlockAt(i),s=B0(e,n.from,n.to);s&&t.push(Nb.of(s)),i=(s?r.lineBlockAt(s.to):n).to+1}return t.length&&r.dispatch({effects:b5(r.state,t)}),!!t.length},U7=r=>{let e=r.state.field(Lh,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,r.state.doc.length,(i,n)=>{t.push(dp.of({from:i,to:n}))}),r.dispatch({effects:t}),!0},Y7=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:X7},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:Z7},{key:"Ctrl-Alt-[",run:G7},{key:"Ctrl-Alt-]",run:U7}],K7={placeholderDOM:null,placeholderText:"\u2026"},k5=st.define({combine(r){return mQ(r,K7)}});function w5(r){let e=[Lh,iV];return r&&e.push(k5.of(r)),e}const J7=hi.replace({widget:new class extends up{toDOM(r){let{state:e}=r,t=e.facet(k5),i=s=>{let o=r.lineBlockAt(r.posAtDOM(s.target)),l=N0(r.state,o.from,o.to);l&&r.dispatch({effects:dp.of(l)}),s.preventDefault()};if(t.placeholderDOM)return t.placeholderDOM(r,i);let n=document.createElement("span");return n.textContent=t.placeholderText,n.setAttribute("aria-label",e.phrase("folded code")),n.title=e.phrase("unfold"),n.className="cm-foldPlaceholder",n.onclick=i,n}}}),eV={openText:"\u2304",closedText:"\u203A",markerDOM:null,domEventHandlers:{}};class XO extends Ih{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function tV(r={}){let e=Object.assign(Object.assign({},eV),r),t=new XO(e,!0),i=new XO(e,!1),n=za.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(Wa)!=o.state.facet(Wa)||o.startState.field(Lh,!1)!=o.state.field(Lh,!1)||ns(o.startState)!=ns(o.state))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let l=new af;for(let a of o.viewportLineBlocks){let h=N0(o.state,a.from,a.to)?i:B0(o.state,a.from,a.to)?t:null;h&&l.add(a.from,a.from,h)}return l.finish()}}),{domEventHandlers:s}=e;return[n,d7({class:"cm-foldGutter",markers(o){var l;return((l=o.plugin(n))===null||l===void 0?void 0:l.markers)||qt.empty},initialSpacer(){return new XO(e,!1)},domEventHandlers:Object.assign(Object.assign({},s),{click:(o,l,a)=>{if(s.click&&s.click(o,l,a))return!0;let h=N0(o.state,l.from,l.to);if(h)return o.dispatch({effects:dp.of(h)}),!0;let u=B0(o.state,l.from,l.to);return u?(o.dispatch({effects:Nb.of(u)}),!0):!1}})}),w5()]}const iV=Rt.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Ib{constructor(e,t){let i;function n(l){let a=Ct.newName();return(i||(i=Object.create(null)))["."+a]=l,a}const s=typeof t.all=="string"?t.all:t.all?n(t.all):void 0,o=t.scope;this.scope=o instanceof Bo?l=>l.prop(D0)==o.data:o?l=>l==o:void 0,this.style=u5(e.map(l=>({tag:l.tag,class:l.class||n(Object.assign({},l,{tag:null}))})),{all:s}).style,this.module=i?new Ct(i):null,this.themeType=t.themeType}static define(e,t){return new Ib(e,t||{})}}const nv=st.define(),y5=st.define({combine(r){return r.length?[r[0]]:null}});function ZO(r){let e=r.facet(nv);return e.length?e:r.facet(y5)}function nV(r,e){let t=[sV],i;return r instanceof Ib&&(r.module&&t.push(Rt.styleModule.of(r.module)),i=r.themeType),e!=null&&e.fallback?t.push(y5.of(r)):i?t.push(nv.computeN([Rt.darkTheme],n=>n.facet(Rt.darkTheme)==(i=="dark")?[r]:[])):t.push(nv.of(r)),t}class rV{constructor(e){this.markCache=Object.create(null),this.tree=ns(e.state),this.decorations=this.buildDeco(e,ZO(e.state))}update(e){let t=ns(e.state),i=ZO(e.state),n=i!=ZO(e.startState);t.length<e.view.viewport.to&&!n&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||n)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i))}buildDeco(e,t){if(!t||!this.tree.length)return hi.none;let i=new af;for(let{from:n,to:s}of e.visibleRanges)x7(this.tree,t,(o,l,a)=>{i.add(o,l,this.markCache[a]||(this.markCache[a]=hi.mark({class:a})))},n,s);return i.finish()}}const sV=sQ.high(za.fromClass(rV,{decorations:r=>r.decorations})),oV=Ib.define([{tag:Te.meta,color:"#7a757a"},{tag:Te.link,textDecoration:"underline"},{tag:Te.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Te.emphasis,fontStyle:"italic"},{tag:Te.strong,fontWeight:"bold"},{tag:Te.strikethrough,textDecoration:"line-through"},{tag:Te.keyword,color:"#708"},{tag:[Te.atom,Te.bool,Te.url,Te.contentSeparator,Te.labelName],color:"#219"},{tag:[Te.literal,Te.inserted],color:"#164"},{tag:[Te.string,Te.deleted],color:"#a11"},{tag:[Te.regexp,Te.escape,Te.special(Te.string)],color:"#e40"},{tag:Te.definition(Te.variableName),color:"#00f"},{tag:Te.local(Te.variableName),color:"#30a"},{tag:[Te.typeName,Te.namespace],color:"#085"},{tag:Te.className,color:"#167"},{tag:[Te.special(Te.variableName),Te.macroName],color:"#256"},{tag:Te.definition(Te.propertyName),color:"#00c"},{tag:Te.comment,color:"#940"},{tag:Te.invalid,color:"#f00"}]),lV=Rt.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),v5=1e4,S5="()[]{}",x5=st.define({combine(r){return mQ(r,{afterCursor:!0,brackets:S5,maxScanDistance:v5,renderMatch:uV})}}),aV=hi.mark({class:"cm-matchingBracket"}),hV=hi.mark({class:"cm-nonmatchingBracket"});function uV(r){let e=[],t=r.matched?aV:hV;return e.push(t.range(r.start.from,r.start.to)),r.end&&e.push(t.range(r.end.from,r.end.to)),e}const fV=_l.define({create(){return hi.none},update(r,e){if(!e.docChanged&&!e.selection)return r;let t=[],i=e.state.facet(x5);for(let n of e.state.selection.ranges){if(!n.empty)continue;let s=fg(e.state,n.head,-1,i)||n.head>0&&fg(e.state,n.head-1,1,i)||i.afterCursor&&(fg(e.state,n.head,1,i)||n.head<e.state.doc.length&&fg(e.state,n.head+1,-1,i));s&&(t=t.concat(i.renderMatch(s,e.state)))}return hi.set(t,!0)},provide:r=>Rt.decorations.from(r)}),cV=[fV,lV];function dV(r={}){return[x5.of(r),cV]}function rv(r,e,t){let i=r.prop(e<0?$t.openedBy:$t.closedBy);if(i)return i;if(r.name.length==1){let n=t.indexOf(r.name);if(n>-1&&n%2==(e<0?1:0))return[t[n+e]]}return null}function fg(r,e,t,i={}){let n=i.maxScanDistance||v5,s=i.brackets||S5,o=ns(r),l=o.resolveInner(e,t);for(let a=l;a;a=a.parent){let h=rv(a.type,t,s);if(h&&a.from<a.to)return pV(r,e,t,a,h,s)}return gV(r,e,t,o,l.type,n,s)}function pV(r,e,t,i,n,s){let o=i.parent,l={from:i.from,to:i.to},a=0,h=o==null?void 0:o.cursor();if(h&&(t<0?h.childBefore(i.from):h.childAfter(i.to)))do if(t<0?h.to<=i.from:h.from>=i.to){if(a==0&&n.indexOf(h.type.name)>-1&&h.from<h.to)return{start:l,end:{from:h.from,to:h.to},matched:!0};if(rv(h.type,t,s))a++;else if(rv(h.type,-t,s)&&(a--,a==0))return{start:l,end:h.from==h.to?void 0:{from:h.from,to:h.to},matched:!1}}while(t<0?h.prevSibling():h.nextSibling());return{start:l,matched:!1}}function gV(r,e,t,i,n,s,o){let l=t<0?r.sliceDoc(e-1,e):r.sliceDoc(e,e+1),a=o.indexOf(l);if(a<0||a%2==0!=t>0)return null;let h={from:t<0?e-1:e,to:t>0?e+1:e},u=r.doc.iterRange(e,t>0?r.doc.length:0),f=0;for(let c=0;!u.next().done&&c<=s;){let d=u.value;t<0&&(c+=d.length);let g=e+c*t;for(let w=t>0?0:d.length-1,S=t>0?d.length:-1;w!=S;w+=t){let x=o.indexOf(d[w]);if(!(x<0||i.resolve(g+w,1).type!=n))if(x%2==0==t>0)f++;else{if(f==1)return{start:h,end:{from:g+w,to:g+w+1},matched:x>>1==a>>1};f--}}t>0&&(c+=d.length)}return u.done?{start:h,matched:!1}:null}const mV=Object.create(null),N3=[us.none],I3=[],bV=Object.create(null);for(let[r,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","typeName"],["attribute","propertyName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])bV[r]=OV(mV,e);function GO(r,e){I3.indexOf(r)>-1||(I3.push(r),console.warn(e))}function OV(r,e){let t=null;for(let s of e.split(".")){let o=r[s]||Te[s];o?typeof o=="function"?t?t=o(t):GO(s,`Modifier ${s} used at start of tag`):t?GO(s,`Tag ${s} used as modifier`):t=o:GO(s,`Unknown highlighting tag ${s}`)}if(!t)return 0;let i=e.replace(/ /g,"_"),n=us.define({id:N3.length,name:i,props:[y7({[i]:t})]});return N3.push(n),n.id}function gi(){var r=arguments[0];typeof r=="string"&&(r=document.createElement(r));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var n=t[i];typeof n=="string"?r.setAttribute(i,n):n!=null&&(r[i]=n)}e++}for(;e<arguments.length;e++)C5(r,arguments[e]);return r}function C5(r,e){if(typeof e=="string")r.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)r.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)C5(r,e[t]);else throw new RangeError("Unsupported child node: "+e)}class Lt{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){let n=[];return this.decompose(0,e,n,2),i.length&&i.decompose(0,i.length,n,3),this.decompose(t,this.length,n,1),Do.from(n,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let i=[];return this.decompose(e,t,i,0),Do.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),n=new td(this),s=new td(e);for(let o=t,l=t;;){if(n.next(o),s.next(o),o=0,n.lineBreak!=s.lineBreak||n.done!=s.done||n.value!=s.value)return!1;if(l+=n.value.length,n.done||l>=i)return!0}}iter(e=1){return new td(this,e)}iterRange(e,t=this.length){return new A5(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let n=this.line(e).from;i=this.iterRange(n,Math.max(n,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new T5(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Lt.empty:e.length<=32?new Li(e):Do.from(Li.split(e,[]))}}class Li extends Lt{constructor(e,t=kV(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,n){for(let s=0;;s++){let o=this.text[s],l=n+o.length;if((t?i:l)>=e)return new wV(n,l,i,o);n=l+1,i++}}decompose(e,t,i,n){let s=e<=0&&t>=this.length?this:new Li(L3(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(n&1){let o=i.pop(),l=Qm(s.text,o.text.slice(),0,s.length);if(l.length<=32)i.push(new Li(l,o.length+s.length));else{let a=l.length>>1;i.push(new Li(l.slice(0,a)),new Li(l.slice(a)))}}else i.push(s)}replace(e,t,i){if(!(i instanceof Li))return super.replace(e,t,i);let n=Qm(this.text,Qm(i.text,L3(this.text,0,e)),t),s=this.length+i.length-(t-e);return n.length<=32?new Li(n,s):Do.from(Li.split(n,[]),s)}sliceString(e,t=this.length,i=`
`){let n="";for(let s=0,o=0;s<=t&&o<this.text.length;o++){let l=this.text[o],a=s+l.length;s>e&&o&&(n+=i),e<a&&t>s&&(n+=l.slice(Math.max(0,e-s),t-s)),s=a+1}return n}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],n=-1;for(let s of e)i.push(s),n+=s.length+1,i.length==32&&(t.push(new Li(i,n)),i=[],n=-1);return n>-1&&t.push(new Li(i,n)),t}}class Do extends Lt{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,n){for(let s=0;;s++){let o=this.children[s],l=n+o.length,a=i+o.lines-1;if((t?a:l)>=e)return o.lineInner(e,t,i,n);n=l+1,i=a+1}}decompose(e,t,i,n){for(let s=0,o=0;o<=t&&s<this.children.length;s++){let l=this.children[s],a=o+l.length;if(e<=a&&t>=o){let h=n&((o<=e?1:0)|(a>=t?2:0));o>=e&&a<=t&&!h?i.push(l):l.decompose(e-o,t-o,i,h)}o=a+1}}replace(e,t,i){if(i.lines<this.lines)for(let n=0,s=0;n<this.children.length;n++){let o=this.children[n],l=s+o.length;if(e>=s&&t<=l){let a=o.replace(e-s,t-s,i),h=this.lines-o.lines+a.lines;if(a.lines<h>>5-1&&a.lines>h>>5+1){let u=this.children.slice();return u[n]=a,new Do(u,this.length-(t-e)+i.length)}return super.replace(s,l,a)}s=l+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){let n="";for(let s=0,o=0;s<this.children.length&&o<=t;s++){let l=this.children[s],a=o+l.length;o>e&&s&&(n+=i),e<a&&t>o&&(n+=l.sliceString(e-o,t-o,i)),o=a+1}return n}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Do))return 0;let i=0,[n,s,o,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;n+=t,s+=t){if(n==o||s==l)return i;let a=this.children[n],h=e.children[s];if(a!=h)return i+a.scanIdentical(h,t);i+=a.length+1}}static from(e,t=e.reduce((i,n)=>i+n.length+1,-1)){let i=0;for(let d of e)i+=d.lines;if(i<32){let d=[];for(let g of e)g.flatten(d);return new Li(d,t)}let n=Math.max(32,i>>5),s=n<<1,o=n>>1,l=[],a=0,h=-1,u=[];function f(d){let g;if(d.lines>s&&d instanceof Do)for(let w of d.children)f(w);else d.lines>o&&(a>o||!a)?(c(),l.push(d)):d instanceof Li&&a&&(g=u[u.length-1])instanceof Li&&d.lines+g.lines<=32?(a+=d.lines,h+=d.length+1,u[u.length-1]=new Li(g.text.concat(d.text),g.length+1+d.length)):(a+d.lines>n&&c(),a+=d.lines,h+=d.length+1,u.push(d))}function c(){a!=0&&(l.push(u.length==1?u[0]:Do.from(u,h)),h=-1,a=u.length=0)}for(let d of e)f(d);return c(),l.length==1?l[0]:new Do(l,t)}}Lt.empty=new Li([""],0);function kV(r){let e=-1;for(let t of r)e+=t.length+1;return e}function Qm(r,e,t=0,i=1e9){for(let n=0,s=0,o=!0;s<r.length&&n<=i;s++){let l=r[s],a=n+l.length;a>=t&&(a>i&&(l=l.slice(0,i-n)),n<t&&(l=l.slice(t-n)),o?(e[e.length-1]+=l,o=!1):e.push(l)),n=a+1}return e}function L3(r,e,t){return Qm(r,[""],e,t)}class td{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Li?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,n=this.nodes[i],s=this.offsets[i],o=s>>1,l=n instanceof Li?n.text.length:n.children.length;if(o==(t>0?l:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(n instanceof Li){let a=n.text[o+(t<0?-1:0)];if(this.offsets[i]+=t,a.length>Math.max(0,e))return this.value=e==0?a:t>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=n.children[o+(t<0?-1:0)];e>a.length?(e-=a.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(a),this.offsets.push(t>0?1:(a instanceof Li?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class A5{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new td(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:n}=this.cursor.next(e);return this.pos+=(n.length+e)*t,this.value=n.length<=i?n:t<0?n.slice(n.length-i):n.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class T5{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:n}=this.inner.next(e);return t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=n,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol!="undefined"&&(Lt.prototype[Symbol.iterator]=function(){return this.iter()},td.prototype[Symbol.iterator]=A5.prototype[Symbol.iterator]=T5.prototype[Symbol.iterator]=function(){return this});class wV{constructor(e,t,i,n){this.from=e,this.to=t,this.number=i,this.text=n}get length(){return this.to-this.from}}let Wu="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(r=>r?parseInt(r,36):1);for(let r=1;r<Wu.length;r++)Wu[r]+=Wu[r-1];function yV(r){for(let e=1;e<Wu.length;e+=2)if(Wu[e]>r)return Wu[e-1]<=r;return!1}function z3(r){return r>=127462&&r<=127487}const W3=8205;function ma(r,e,t=!0,i=!0){return(t?P5:vV)(r,e,i)}function P5(r,e,t){if(e==r.length)return e;e&&_5(r.charCodeAt(e))&&$5(r.charCodeAt(e-1))&&e--;let i=Cr(r,e);for(e+=Ps(i);e<r.length;){let n=Cr(r,e);if(i==W3||n==W3||t&&yV(n))e+=Ps(n),i=n;else if(z3(n)){let s=0,o=e-2;for(;o>=0&&z3(Cr(r,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function vV(r,e,t){for(;e>0;){let i=P5(r,e-2,t);if(i<e)return i;e--}return 0}function _5(r){return r>=56320&&r<57344}function $5(r){return r>=55296&&r<56320}function Cr(r,e){let t=r.charCodeAt(e);if(!$5(t)||e+1==r.length)return t;let i=r.charCodeAt(e+1);return _5(i)?(t-55296<<10)+(i-56320)+65536:t}function M5(r){return r<=65535?String.fromCharCode(r):(r-=65536,String.fromCharCode((r>>10)+55296,(r&1023)+56320))}function Ps(r){return r<65536?1:2}const sv=/\r\n?|\n/;var Tr=function(r){return r[r.Simple=0]="Simple",r[r.TrackDel=1]="TrackDel",r[r.TrackBefore=2]="TrackBefore",r[r.TrackAfter=3]="TrackAfter",r}(Tr||(Tr={}));class bl{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,n=0;t<this.sections.length;){let s=this.sections[t++],o=this.sections[t++];o<0?(e(i,n,s),n+=s):n+=o,i+=s}}iterChangedRanges(e,t=!1){ov(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];n<0?e.push(i,n):e.push(n,i)}return new bl(e)}composeDesc(e){return this.empty?e:e.empty?this:R5(this,e)}mapDesc(e,t=!1){return e.empty?this:lv(this,e,t)}mapPos(e,t=-1,i=Tr.Simple){let n=0,s=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],h=n+l;if(a<0){if(h>e)return s+(e-n);s+=l}else{if(i!=Tr.Simple&&h>=e&&(i==Tr.TrackDel&&n<e&&h>e||i==Tr.TrackBefore&&n<e||i==Tr.TrackAfter&&h>e))return null;if(h>e||h==e&&t<0&&!l)return e==n||t<0?s:s+a;s+=a}n=h}if(e>n)throw new RangeError(`Position ${e} is out of range for changeset of length ${n}`);return s}touchesRange(e,t=e){for(let i=0,n=0;i<this.sections.length&&n<=t;){let s=this.sections[i++],o=this.sections[i++],l=n+s;if(o>=0&&n<=t&&l>=e)return n<e&&l>t?"cover":!0;n=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];e+=(e?" ":"")+i+(n>=0?":"+n:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new bl(e)}static create(e){return new bl(e)}}class hn extends bl{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return ov(this,(t,i,n,s,o)=>e=e.replace(n,n+(i-t),o),!1),e}mapDesc(e,t=!1){return lv(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let n=0,s=0;n<t.length;n+=2){let o=t[n],l=t[n+1];if(l>=0){t[n]=l,t[n+1]=o;let a=n>>1;for(;i.length<a;)i.push(Lt.empty);i.push(o?e.slice(s,s+o):Lt.empty)}s+=o}return new hn(t,i)}compose(e){return this.empty?e:e.empty?this:R5(this,e,!0)}map(e,t=!1){return e.empty?this:lv(this,e,t,!0)}iterChanges(e,t=!1){ov(this,e,t)}get desc(){return bl.create(this.sections)}filter(e){let t=[],i=[],n=[],s=new _d(this);e:for(let o=0,l=0;;){let a=o==e.length?1e9:e[o++];for(;l<a||l==a&&s.len==0;){if(s.done)break e;let u=Math.min(s.len,a-l);dr(n,u,-1);let f=s.ins==-1?-1:s.off==0?s.ins:0;dr(t,u,f),f>0&&bh(i,t,s.text),s.forward(u),l+=u}let h=e[o++];for(;l<h;){if(s.done)break e;let u=Math.min(s.len,h-l);dr(t,u,-1),dr(n,u,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(u),l+=u}}return{changes:new hn(t,i),filtered:bl.create(n)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],n=this.sections[t+1];n<0?e.push(i):n==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let n=[],s=[],o=0,l=null;function a(u=!1){if(!u&&!n.length)return;o<t&&dr(n,t-o,-1);let f=new hn(n,s);l=l?l.compose(f.map(l)):f,n=[],s=[],o=0}function h(u){if(Array.isArray(u))for(let f of u)h(f);else if(u instanceof hn){if(u.length!=t)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${t})`);a(),l=l?l.compose(u.map(l)):u}else{let{from:f,to:c=f,insert:d}=u;if(f>c||f<0||c>t)throw new RangeError(`Invalid change range ${f} to ${c} (in doc of length ${t})`);let g=d?typeof d=="string"?Lt.of(d.split(i||sv)):d:Lt.empty,w=g.length;if(f==c&&w==0)return;f<o&&a(),f>o&&dr(n,f-o,-1),dr(n,c-f,w),bh(s,n,g),o=c}}return h(e),a(!l),l}static empty(e){return new hn(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let n=0;n<e.length;n++){let s=e[n];if(typeof s=="number")t.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)t.push(s[0],0);else{for(;i.length<n;)i.push(Lt.empty);i[n]=Lt.of(s.slice(1)),t.push(s[0],i[n].length)}}}return new hn(t,i)}static createSet(e,t){return new hn(e,t)}}function dr(r,e,t,i=!1){if(e==0&&t<=0)return;let n=r.length-2;n>=0&&t<=0&&t==r[n+1]?r[n]+=e:e==0&&r[n]==0?r[n+1]+=t:i?(r[n]+=e,r[n+1]+=t):r.push(e,t)}function bh(r,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<r.length)r[r.length-1]=r[r.length-1].append(t);else{for(;r.length<i;)r.push(Lt.empty);r.push(t)}}function ov(r,e,t){let i=r.inserted;for(let n=0,s=0,o=0;o<r.sections.length;){let l=r.sections[o++],a=r.sections[o++];if(a<0)n+=l,s+=l;else{let h=n,u=s,f=Lt.empty;for(;h+=l,u+=a,a&&i&&(f=f.append(i[o-2>>1])),!(t||o==r.sections.length||r.sections[o+1]<0);)l=r.sections[o++],a=r.sections[o++];e(n,h,s,u,f),n=h,s=u}}}function lv(r,e,t,i=!1){let n=[],s=i?[]:null,o=new _d(r),l=new _d(e);for(let a=0,h=0;;)if(o.ins==-1)a+=o.len,o.next();else if(l.ins==-1&&h<a){let u=Math.min(l.len,a-h);l.forward(u),dr(n,u,-1),h+=u}else if(l.ins>=0&&(o.done||h<a||h==a&&(l.len<o.len||l.len==o.len&&!t))){for(dr(n,l.ins,-1);a>h&&!o.done&&a+o.len<h+l.len;)a+=o.len,o.next();h+=l.len,l.next()}else if(o.ins>=0){let u=0,f=a+o.len;for(;;)if(l.ins>=0&&h>a&&h+l.len<f)u+=l.ins,h+=l.len,l.next();else if(l.ins==-1&&h<f){let c=Math.min(l.len,f-h);u+=c,l.forward(c),h+=c}else break;dr(n,u,o.ins),s&&bh(s,n,o.text),a=f,o.next()}else{if(o.done&&l.done)return s?hn.createSet(n,s):bl.create(n);throw new Error("Mismatched change set lengths")}}function R5(r,e,t=!1){let i=[],n=t?[]:null,s=new _d(r),o=new _d(e);for(let l=!1;;){if(s.done&&o.done)return n?hn.createSet(i,n):bl.create(i);if(s.ins==0)dr(i,s.len,0,l),s.next();else if(o.len==0&&!o.done)dr(i,0,o.ins,l),n&&bh(n,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(s.len2,o.len),h=i.length;if(s.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;dr(i,a,u,l),n&&u&&bh(n,i,o.text)}else o.ins==-1?(dr(i,s.off?0:s.len,a,l),n&&bh(n,i,s.textBit(a))):(dr(i,s.off?0:s.len,o.off?0:o.ins,l),n&&!o.off&&bh(n,i,o.text));l=(s.ins>a||o.ins>=0&&o.len>a)&&(l||i.length>h),s.forward2(a),o.forward(a)}}}}class _d{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Lt.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?Lt.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Oh{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,t=-1){let i,n;return this.empty?i=n=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),n=e.mapPos(this.to,-1)),i==this.from&&n==this.to?this:new Oh(i,n,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return De.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return De.range(this.anchor,i)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return De.range(e.anchor,e.head)}static create(e,t,i){return new Oh(e,t,i)}}class De{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:De.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new De([this.main],0)}addRange(e,t=!0){return De.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,De.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new De(e.ranges.map(t=>Oh.fromJSON(t)),e.main)}static single(e,t=e){return new De([De.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,n=0;n<e.length;n++){let s=e[n];if(s.empty?s.from<=i:s.from<i)return De.normalized(e.slice(),t);i=s.to}return new De(e,t)}static cursor(e,t=0,i,n){return Oh.create(e,e,(t==0?0:t<0?4:8)|(i==null?3:Math.min(2,i))|(n!=null?n:33554431)<<5)}static range(e,t,i){let n=(i!=null?i:33554431)<<5;return t<e?Oh.create(t,e,16|n|8):Oh.create(e,t,n|(t>e?4:0))}static normalized(e,t=0){let i=e[t];e.sort((n,s)=>n.from-s.from),t=e.indexOf(i);for(let n=1;n<e.length;n++){let s=e[n],o=e[n-1];if(s.empty?s.from<=o.to:s.from<o.to){let l=o.from,a=Math.max(s.to,o.to);n<=t&&t--,e.splice(--n,2,s.anchor>s.head?De.range(a,l):De.range(l,a))}}return new De(e,t)}}function Q5(r,e){for(let t of r.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let dS=0;class Ot{constructor(e,t,i,n,s){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=n,this.extensions=s,this.id=dS++,this.default=e([])}static define(e={}){return new Ot(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:pS),!!e.static,e.enables)}of(e){return new Dm([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Dm(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Dm(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function pS(r,e){return r==e||r.length==e.length&&r.every((t,i)=>t===e[i])}class Dm{constructor(e,t,i,n){this.dependencies=e,this.facet=t,this.type=i,this.value=n,this.id=dS++}dynamicSlot(e){var t;let i=this.value,n=this.facet.compareInput,s=this.id,o=e[s]>>1,l=this.type==2,a=!1,h=!1,u=[];for(let f of this.dependencies)f=="doc"?a=!0:f=="selection"?h=!0:(((t=e[f.id])!==null&&t!==void 0?t:1)&1)==0&&u.push(e[f.id]);return{create(f){return f.values[o]=i(f),1},update(f,c){if(a&&c.docChanged||h&&(c.docChanged||c.selection)||av(f,u)){let d=i(f);if(l?!V3(d,f.values[o],n):!n(d,f.values[o]))return f.values[o]=d,1}return 0},reconfigure:(f,c)=>{let d=i(f),g=c.config.address[s];if(g!=null){let w=L0(c,g);if(this.dependencies.every(S=>S instanceof Ot?c.facet(S)===f.facet(S):S instanceof Za?c.field(S,!1)==f.field(S,!1):!0)||(l?V3(d,w,n):n(d,w)))return f.values[o]=w,0}return f.values[o]=d,1}}}}function V3(r,e,t){if(r.length!=e.length)return!1;for(let i=0;i<r.length;i++)if(!t(r[i],e[i]))return!1;return!0}function av(r,e){let t=!1;for(let i of e)id(r,i)&1&&(t=!0);return t}function SV(r,e,t){let i=t.map(a=>r[a.id]),n=t.map(a=>a.type),s=i.filter(a=>!(a&1)),o=r[e.id]>>1;function l(a){let h=[];for(let u=0;u<i.length;u++){let f=L0(a,i[u]);if(n[u]==2)for(let c of f)h.push(c);else h.push(f)}return e.combine(h)}return{create(a){for(let h of i)id(a,h);return a.values[o]=l(a),1},update(a,h){if(!av(a,s))return 0;let u=l(a);return e.compare(u,a.values[o])?0:(a.values[o]=u,1)},reconfigure(a,h){let u=av(a,i),f=h.config.facets[e.id],c=h.facet(e);if(f&&!u&&pS(t,f))return a.values[o]=c,0;let d=l(a);return e.compare(d,c)?(a.values[o]=c,0):(a.values[o]=d,1)}}}const j3=Ot.define({static:!0});class Za{constructor(e,t,i,n,s){this.id=e,this.createF=t,this.updateF=i,this.compareF=n,this.spec=s,this.provides=void 0}static define(e){let t=new Za(dS++,e.create,e.update,e.compare||((i,n)=>i===n),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(j3).find(i=>i.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,n)=>{let s=i.values[t],o=this.updateF(s,n);return this.compareF(s,o)?0:(i.values[t]=o,1)},reconfigure:(i,n)=>n.config.address[this.id]!=null?(i.values[t]=n.field(this),0):(i.values[t]=this.create(i),1)}}init(e){return[this,j3.of({field:this,create:e})]}get extension(){return this}}const Su={lowest:4,low:3,default:2,high:1,highest:0};function rc(r){return e=>new E5(e,r)}const D5={highest:rc(Su.highest),high:rc(Su.high),default:rc(Su.default),low:rc(Su.low),lowest:rc(Su.lowest)};class E5{constructor(e,t){this.inner=e,this.prec=t}}class Lb{of(e){return new hv(this,e)}reconfigure(e){return Lb.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class hv{constructor(e,t){this.compartment=e,this.inner=t}}class I0{constructor(e,t,i,n,s,o){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=n,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let n=[],s=Object.create(null),o=new Map;for(let c of xV(e,t,o))c instanceof Za?n.push(c):(s[c.facet.id]||(s[c.facet.id]=[])).push(c);let l=Object.create(null),a=[],h=[];for(let c of n)l[c.id]=h.length<<1,h.push(d=>c.slot(d));let u=i==null?void 0:i.config.facets;for(let c in s){let d=s[c],g=d[0].facet,w=u&&u[c]||[];if(d.every(S=>S.type==0))if(l[g.id]=a.length<<1|1,pS(w,d))a.push(i.facet(g));else{let S=g.combine(d.map(x=>x.value));a.push(i&&g.compare(S,i.facet(g))?i.facet(g):S)}else{for(let S of d)S.type==0?(l[S.id]=a.length<<1|1,a.push(S.value)):(l[S.id]=h.length<<1,h.push(x=>S.dynamicSlot(x)));l[g.id]=h.length<<1,h.push(S=>SV(S,g,d))}}let f=h.map(c=>c(l));return new I0(e,o,f,l,a,s)}}function xV(r,e,t){let i=[[],[],[],[],[]],n=new Map;function s(o,l){let a=n.get(o);if(a!=null){if(a<=l)return;let h=i[a].indexOf(o);h>-1&&i[a].splice(h,1),o instanceof hv&&t.delete(o.compartment)}if(n.set(o,l),Array.isArray(o))for(let h of o)s(h,l);else if(o instanceof hv){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let h=e.get(o.compartment)||o.inner;t.set(o.compartment,h),s(h,l)}else if(o instanceof E5)s(o.inner,o.prec);else if(o instanceof Za)i[l].push(o),o.provides&&s(o.provides,l);else if(o instanceof Dm)i[l].push(o),o.facet.extensions&&s(o.facet.extensions,l);else{let h=o.extension;if(!h)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(h,l)}}return s(r,Su.default),i.reduce((o,l)=>o.concat(l))}function id(r,e){if(e&1)return 2;let t=e>>1,i=r.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;r.status[t]=4;let n=r.computeSlot(r,r.config.dynamicSlots[t]);return r.status[t]=2|n}function L0(r,e){return e&1?r.config.staticValues[e>>1]:r.values[e>>1]}const B5=Ot.define(),N5=Ot.define({combine:r=>r.some(e=>e),static:!0}),I5=Ot.define({combine:r=>r.length?r[0]:void 0,static:!0}),L5=Ot.define(),z5=Ot.define(),W5=Ot.define(),V5=Ot.define({combine:r=>r.length?r[0]:!1});class pp{constructor(e,t){this.type=e,this.value=t}static define(){return new CV}}class CV{of(e){return new pp(this,e)}}class AV{constructor(e){this.map=e}of(e){return new Ai(this,e)}}class Ai{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new Ai(this.type,t)}is(e){return this.type==e}static define(e={}){return new AV(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let n of e){let s=n.map(t);s&&i.push(s)}return i}}Ai.reconfigure=Ai.define();Ai.appendConfig=Ai.define();class Kn{constructor(e,t,i,n,s,o){this.startState=e,this.changes=t,this.selection=i,this.effects=n,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&Q5(i,t.newLength),s.some(l=>l.type==Kn.time)||(this.annotations=s.concat(Kn.time.of(Date.now())))}static create(e,t,i,n,s,o){return new Kn(e,t,i,n,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Kn.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Kn.time=pp.define();Kn.userEvent=pp.define();Kn.addToHistory=pp.define();Kn.remote=pp.define();function TV(r,e){let t=[];for(let i=0,n=0;;){let s,o;if(i<r.length&&(n==e.length||e[n]>=r[i]))s=r[i++],o=r[i++];else if(n<e.length)s=e[n++],o=e[n++];else return t;!t.length||t[t.length-1]<s?t.push(s,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function j5(r,e,t){var i;let n,s,o;return t?(n=e.changes,s=hn.empty(e.changes.length),o=r.changes.compose(e.changes)):(n=e.changes.map(r.changes),s=r.changes.mapDesc(e.changes,!0),o=r.changes.compose(n)),{changes:o,selection:e.selection?e.selection.map(s):(i=r.selection)===null||i===void 0?void 0:i.map(n),effects:Ai.mapEffects(r.effects,n).concat(Ai.mapEffects(e.effects,s)),annotations:r.annotations.length?r.annotations.concat(e.annotations):e.annotations,scrollIntoView:r.scrollIntoView||e.scrollIntoView}}function uv(r,e,t){let i=e.selection,n=Vu(e.annotations);return e.userEvent&&(n=n.concat(Kn.userEvent.of(e.userEvent))),{changes:e.changes instanceof hn?e.changes:hn.of(e.changes||[],t,r.facet(I5)),selection:i&&(i instanceof De?i:De.single(i.anchor,i.head)),effects:Vu(e.effects),annotations:n,scrollIntoView:!!e.scrollIntoView}}function F5(r,e,t){let i=uv(r,e.length?e[0]:{},r.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(t=!1);let o=!!e[s].sequential;i=j5(i,uv(r,e[s],o?i.changes.newLength:r.doc.length),o)}let n=Kn.create(r,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return _V(t?PV(n):n)}function PV(r){let e=r.startState,t=!0;for(let n of e.facet(L5)){let s=n(r);if(s===!1){t=!1;break}Array.isArray(s)&&(t=t===!0?s:TV(t,s))}if(t!==!0){let n,s;if(t===!1)s=r.changes.invertedDesc,n=hn.empty(e.doc.length);else{let o=r.changes.filter(t);n=o.changes,s=o.filtered.invertedDesc}r=Kn.create(e,n,r.selection&&r.selection.map(s),Ai.mapEffects(r.effects,s),r.annotations,r.scrollIntoView)}let i=e.facet(z5);for(let n=i.length-1;n>=0;n--){let s=i[n](r);s instanceof Kn?r=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Kn?r=s[0]:r=F5(e,Vu(s),!1)}return r}function _V(r){let e=r.startState,t=e.facet(W5),i=r;for(let n=t.length-1;n>=0;n--){let s=t[n](r);s&&Object.keys(s).length&&(i=j5(r,uv(e,s,r.changes.newLength),!0))}return i==r?r:Kn.create(e,r.changes,r.selection,i.effects,i.annotations,i.scrollIntoView)}const $V=[];function Vu(r){return r==null?$V:Array.isArray(r)?r:[r]}var Ms=function(r){return r[r.Word=0]="Word",r[r.Space=1]="Space",r[r.Other=2]="Other",r}(Ms||(Ms={}));const MV=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let fv;try{fv=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function RV(r){if(fv)return fv.test(r);for(let e=0;e<r.length;e++){let t=r[e];if(/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||MV.test(t)))return!0}return!1}function QV(r){return e=>{if(!/\S/.test(e))return Ms.Space;if(RV(e))return Ms.Word;for(let t=0;t<r.length;t++)if(e.indexOf(r[t])>-1)return Ms.Word;return Ms.Other}}class oi{constructor(e,t,i,n,s,o){this.config=e,this.doc=t,this.selection=i,this.values=n,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)id(this,l<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return id(this,i),L0(this,i)}update(...e){return F5(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:n}=t;for(let o of e.effects)o.is(Lb.reconfigure)?(t&&(n=new Map,t.compartments.forEach((l,a)=>n.set(a,l)),t=null),n.set(o.value.compartment,o.value.extension)):o.is(Ai.reconfigure)?(t=null,i=o.value):o.is(Ai.appendConfig)&&(t=null,i=Vu(i).concat(o.value));let s;t?s=e.startState.values.slice():(t=I0.resolve(i,n,this),s=new oi(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(l,a)=>a.reconfigure(l,this),null).values),new oi(t,e.newDoc,e.newSelection,s,(o,l)=>l.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:De.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),n=this.changes(i.changes),s=[i.range],o=Vu(i.effects);for(let l=1;l<t.ranges.length;l++){let a=e(t.ranges[l]),h=this.changes(a.changes),u=h.map(n);for(let c=0;c<l;c++)s[c]=s[c].map(u);let f=n.mapDesc(h,!0);s.push(a.range.map(f)),n=n.compose(u),o=Ai.mapEffects(o,u).concat(Ai.mapEffects(Vu(a.effects),f))}return{changes:n,selection:De.create(s,t.mainIndex),effects:o}}changes(e=[]){return e instanceof hn?e:hn.of(e,this.doc.length,this.facet(oi.lineSeparator))}toText(e){return Lt.of(e.split(this.facet(oi.lineSeparator)||sv))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(id(this,t),L0(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let n=e[i];n instanceof Za&&(t[i]=n.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let n=[];if(i)for(let s in i){let o=i[s],l=e[s];n.push(o.init(a=>o.spec.fromJSON(l,a)))}return oi.create({doc:e.doc,selection:De.fromJSON(e.selection),extensions:t.extensions?n.concat([t.extensions]):n})}static create(e={}){let t=I0.resolve(e.extensions||[],new Map),i=e.doc instanceof Lt?e.doc:Lt.of((e.doc||"").split(t.staticFacet(oi.lineSeparator)||sv)),n=e.selection?e.selection instanceof De?e.selection:De.single(e.selection.anchor,e.selection.head):De.single(0);return Q5(n,i.length),t.staticFacet(N5)||(n=n.asSingle()),new oi(t,i,n,t.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(oi.tabSize)}get lineBreak(){return this.facet(oi.lineSeparator)||`
`}get readOnly(){return this.facet(V5)}phrase(e,...t){for(let i of this.facet(oi.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,n)=>{if(n=="$")return"$";let s=+(n||1);return s>t.length?i:t[s-1]})),e}languageDataAt(e,t,i=-1){let n=[];for(let s of this.facet(B5))for(let o of s(this,t,i))Object.prototype.hasOwnProperty.call(o,e)&&n.push(o[e]);return n}charCategorizer(e){return QV(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:n}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,l=e-i;for(;o>0;){let a=ma(t,o,!1);if(s(t.slice(a,o))!=Ms.Word)break;o=a}for(;l<n;){let a=ma(t,l);if(s(t.slice(l,a))!=Ms.Word)break;l=a}return o==l?null:De.range(o+i,l+i)}}oi.allowMultipleSelections=N5;oi.tabSize=Ot.define({combine:r=>r.length?r[0]:4});oi.lineSeparator=I5;oi.readOnly=V5;oi.phrases=Ot.define({compare(r,e){let t=Object.keys(r),i=Object.keys(e);return t.length==i.length&&t.every(n=>r[n]==e[n])}});oi.languageData=B5;oi.changeFilter=L5;oi.transactionFilter=z5;oi.transactionExtender=W5;Lb.reconfigure=Ai.define();function DV(r,e,t={}){let i={};for(let n of r)for(let s of Object.keys(n)){let o=n[s],l=i[s];if(l===void 0)i[s]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(t,s))i[s]=t[s](l,o);else throw new Error("Config merge conflict for field "+s)}for(let n in e)i[n]===void 0&&(i[n]=e[n]);return i}class zh{eq(e){return this==e}range(e,t=e){return $d.create(e,t,this)}}zh.prototype.startSide=zh.prototype.endSide=0;zh.prototype.point=!1;zh.prototype.mapMode=Tr.TrackDel;class $d{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new $d(e,t,i)}}function cv(r,e){return r.from-e.from||r.value.startSide-e.value.startSide}class gS{constructor(e,t,i,n){this.from=e,this.to=t,this.value=i,this.maxPoint=n}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,n=0){let s=i?this.to:this.from;for(let o=n,l=s.length;;){if(o==l)return o;let a=o+l>>1,h=s[a]-e||(i?this.value[a].endSide:this.value[a].startSide)-t;if(a==o)return h>=0?o:l;h>=0?l=a:o=a+1}}between(e,t,i,n){for(let s=this.findIndex(t,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(n(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,t){let i=[],n=[],s=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let h=this.value[a],u=this.from[a]+e,f=this.to[a]+e,c,d;if(u==f){let g=t.mapPos(u,h.startSide,h.mapMode);if(g==null||(c=d=g,h.startSide!=h.endSide&&(d=t.mapPos(u,h.endSide),d<c)))continue}else if(c=t.mapPos(u,h.startSide),d=t.mapPos(f,h.endSide),c>d||c==d&&h.startSide>0&&h.endSide<=0)continue;(d-c||h.endSide-h.startSide)<0||(o<0&&(o=c),h.point&&(l=Math.max(l,d-c)),i.push(h),n.push(c-o),s.push(d-o))}return{mapped:i.length?new gS(n,s,i,l):null,pos:o}}}class Mi{constructor(e,t,i,n){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=n}static create(e,t,i,n){return new Mi(e,t,i,n)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:n=0,filterTo:s=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(i&&(t=t.slice().sort(cv)),this.isEmpty)return t.length?Mi.of(t):this;let l=new H5(this,null,-1).goto(0),a=0,h=[],u=new z0;for(;l.value||a<t.length;)if(a<t.length&&(l.from-t[a].from||l.startSide-t[a].value.startSide)>=0){let f=t[a++];u.addInner(f.from,f.to,f.value)||h.push(f)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(l.chunkIndex)<t[a].from)&&(!o||n>this.chunkEnd(l.chunkIndex)||s<this.chunkPos[l.chunkIndex])&&u.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||n>l.to||s<l.from||o(l.from,l.to,l.value))&&(u.addInner(l.from,l.to,l.value)||h.push($d.create(l.from,l.to,l.value))),l.next());return u.finishInner(this.nextLayer.isEmpty&&!h.length?Mi.empty:this.nextLayer.update({add:h,filter:o,filterFrom:n,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],n=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],h=e.touchesRange(l,l+a.length);if(h===!1)n=Math.max(n,a.maxPoint),t.push(a),i.push(e.mapPos(l));else if(h===!0){let{mapped:u,pos:f}=a.map(l,e);u&&(n=Math.max(n,u.maxPoint),t.push(u),i.push(f))}}let s=this.nextLayer.map(e);return t.length==0?s:new Mi(i,t,s||Mi.empty,n)}between(e,t,i){if(!this.isEmpty){for(let n=0;n<this.chunk.length;n++){let s=this.chunkPos[n],o=this.chunk[n];if(t>=s&&e<=s+o.length&&o.between(s,e-s,t-s,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return Md.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Md.from(e).goto(t)}static compare(e,t,i,n,s=-1){let o=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=s),l=t.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=s),a=F3(o,l,i),h=new sc(o,a,s),u=new sc(l,a,s);i.iterGaps((f,c,d)=>H3(h,f,u,c,d,n)),i.empty&&i.length==0&&H3(h,0,u,0,0,n)}static eq(e,t,i=0,n){n==null&&(n=1e9);let s=e.filter(u=>!u.isEmpty&&t.indexOf(u)<0),o=t.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let l=F3(s,o),a=new sc(s,l,0).goto(i),h=new sc(o,l,0).goto(i);for(;;){if(a.to!=h.to||!dv(a.active,h.active)||a.point&&(!h.point||!a.point.eq(h.point)))return!1;if(a.to>n)return!0;a.next(),h.next()}}static spans(e,t,i,n,s=-1){let o=new sc(e,null,s).goto(t),l=t,a=o.openStart;for(;;){let h=Math.min(o.to,i);if(o.point?(n.point(l,h,o.point,o.activeForPoint(o.to),a,o.pointRank),a=o.openEnd(h)+(o.to>h?1:0)):h>l&&(n.span(l,h,o.active,a),a=o.openEnd(h)),o.to>i)break;l=o.to,o.next()}return a}static of(e,t=!1){let i=new z0;for(let n of e instanceof $d?[e]:t?EV(e):e)i.add(n.from,n.to,n.value);return i.finish()}}Mi.empty=new Mi([],[],null,-1);function EV(r){if(r.length>1)for(let e=r[0],t=1;t<r.length;t++){let i=r[t];if(cv(e,i)>0)return r.slice().sort(cv);e=i}return r}Mi.empty.nextLayer=Mi.empty;class z0{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new gS(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new z0)).add(e,t,i)}addInner(e,t,i){let n=e-this.lastTo||i.startSide-this.last.endSide;if(n<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return n<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(Mi.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Mi.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function F3(r,e,t){let i=new Map;for(let s of r)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let n=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let l=i.get(s.chunk[o]);l!=null&&(t?t.mapPos(l):l)==s.chunkPos[o]&&!(t!=null&&t.touchesRange(l,l+s.chunk[o].length))&&n.add(s.chunk[o])}return n}class H5{constructor(e,t,i,n=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=n}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let n=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(n)||this.layer.chunkEnd(this.chunkIndex)<e||n.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let n=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<n)&&this.setRangeIndex(n)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Md{constructor(e){this.heap=e}static from(e,t=null,i=-1){let n=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&n.push(new H5(o,t,i,s));return n.length==1?n[0]:new Md(n)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)UO(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)UO(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),UO(this.heap,0)}}}function UO(r,e){for(let t=r[e];;){let i=(e<<1)+1;if(i>=r.length)break;let n=r[i];if(i+1<r.length&&n.compare(r[i+1])>=0&&(n=r[i+1],i++),t.compare(n)<0)break;r[i]=t,r[e]=n,e=i}}class sc{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Md.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){cg(this.active,e),cg(this.activeTo,e),cg(this.activeRank,e),this.minActive=q3(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:n,rank:s}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=s;)t++;dg(this.active,t,i),dg(this.activeTo,t,n),dg(this.activeRank,t,s),e&&dg(e,t,this.cursor.from),this.minActive=q3(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null,n=0;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),i&&cg(i,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.from<e&&(n=1),this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){let s=0;for(;s<i.length&&i[s]<e;)s++;this.openStart=s+n}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function H3(r,e,t,i,n,s){r.goto(e),t.goto(i);let o=i+n,l=i,a=i-e;for(;;){let h=r.to+a-t.to||r.endSide-t.endSide,u=h<0?r.to+a:t.to,f=Math.min(u,o);if(r.point||t.point?r.point&&t.point&&(r.point==t.point||r.point.eq(t.point))&&dv(r.activeForPoint(r.to+a),t.activeForPoint(t.to))||s.comparePoint(l,f,r.point,t.point):f>l&&!dv(r.active,t.active)&&s.compareRange(l,f,r.active,t.active),u>o)break;l=u,h<=0&&r.next(),h>=0&&t.next()}}function dv(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!=e[t]&&!r[t].eq(e[t]))return!1;return!0}function cg(r,e){for(let t=e,i=r.length-1;t<i;t++)r[t]=r[t+1];r.pop()}function dg(r,e,t){for(let i=r.length-1;i>=e;i--)r[i+1]=r[i];r[e]=t}function q3(r,e){let t=-1,i=1e9;for(let n=0;n<e.length;n++)(e[n]-i||r[n].endSide-r[t].endSide)<0&&(t=n,i=e[n]);return t}function BV(r,e,t,i){for(let n=0,s=0;;){if(s>=e)return n;if(n==r.length)break;s+=r.charCodeAt(n)==9?t-s%t:1,n=ma(r,n)}return i===!0?-1:r.length}function W0(r){let e;return r.nodeType==11?e=r.getSelection?r:r.ownerDocument:e=r,e.getSelection()}function cf(r,e){return e?r==e||r.contains(e.nodeType!=1?e.parentNode:e):!1}function NV(){let r=document.activeElement;for(;r&&r.shadowRoot;)r=r.shadowRoot.activeElement;return r}function pv(r,e){if(!e.anchorNode)return!1;try{return cf(r,e.anchorNode)}catch{return!1}}function Rd(r){return r.nodeType==3?Qd(r,0,r.nodeValue.length).getClientRects():r.nodeType==1?r.getClientRects():[]}function V0(r,e,t,i){return t?X3(r,e,t,i,-1)||X3(r,e,t,i,1):!1}function gv(r){for(var e=0;;e++)if(r=r.previousSibling,!r)return e}function X3(r,e,t,i,n){for(;;){if(r==t&&e==i)return!0;if(e==(n<0?0:j0(r))){if(r.nodeName=="DIV")return!1;let s=r.parentNode;if(!s||s.nodeType!=1)return!1;e=gv(r)+(n<0?0:1),r=s}else if(r.nodeType==1){if(r=r.childNodes[e+(n<0?-1:0)],r.nodeType==1&&r.contentEditable=="false")return!1;e=n<0?j0(r):0}else return!1}}function j0(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}const q5={left:0,right:0,top:0,bottom:0};function zb(r,e){let t=e?r.left:r.right;return{left:t,right:t,top:r.top,bottom:r.bottom}}function IV(r){return{left:0,right:r.innerWidth,top:0,bottom:r.innerHeight}}function LV(r,e,t,i,n,s,o,l){let a=r.ownerDocument,h=a.defaultView;for(let u=r;u;)if(u.nodeType==1){let f,c=u==a.body;if(c)f=IV(h);else{if(u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.parentNode;continue}let w=u.getBoundingClientRect();f={left:w.left,right:w.left+u.clientWidth,top:w.top,bottom:w.top+u.clientHeight}}let d=0,g=0;if(n=="nearest")e.top<f.top?(g=-(f.top-e.top+o),t>0&&e.bottom>f.bottom+g&&(g=e.bottom-f.bottom+g+o)):e.bottom>f.bottom&&(g=e.bottom-f.bottom+o,t<0&&e.top-g<f.top&&(g=-(f.top+g-e.top+o)));else{let w=e.bottom-e.top,S=f.bottom-f.top;g=(n=="center"&&w<=S?e.top+w/2-S/2:n=="start"||n=="center"&&t<0?e.top-o:e.bottom-S+o)-f.top}if(i=="nearest"?e.left<f.left?(d=-(f.left-e.left+s),t>0&&e.right>f.right+d&&(d=e.right-f.right+d+s)):e.right>f.right&&(d=e.right-f.right+s,t<0&&e.left<f.left+d&&(d=-(f.left+d-e.left+s))):d=(i=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:i=="start"==l?e.left-s:e.right-(f.right-f.left)+s)-f.left,d||g)if(c)h.scrollBy(d,g);else{if(g){let w=u.scrollTop;u.scrollTop+=g,g=u.scrollTop-w}if(d){let w=u.scrollLeft;u.scrollLeft+=d,d=u.scrollLeft-w}e={left:e.left-d,top:e.top-g,right:e.right-d,bottom:e.bottom-g}}if(c)break;u=u.assignedSlot||u.parentNode,i=n="nearest"}else if(u.nodeType==11)u=u.host;else break}class zV{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,t,i,n){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=n}}let bu=null;function X5(r){if(r.setActive)return r.setActive();if(bu)return r.focus(bu);let e=[];for(let t=r;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(r.focus(bu==null?{get preventScroll(){return bu={preventScroll:!0},!0}}:void 0),!bu){bu=!1;for(let t=0;t<e.length;){let i=e[t++],n=e[t++],s=e[t++];i.scrollTop!=n&&(i.scrollTop=n),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let Z3;function Qd(r,e,t=e){let i=Z3||(Z3=document.createRange());return i.setEnd(r,t),i.setStart(r,e),i}function nd(r,e,t){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0},n=new KeyboardEvent("keydown",i);n.synthetic=!0,r.dispatchEvent(n);let s=new KeyboardEvent("keyup",i);return s.synthetic=!0,r.dispatchEvent(s),n.defaultPrevented||s.defaultPrevented}function WV(r){for(;r;){if(r&&(r.nodeType==9||r.nodeType==11&&r.host))return r;r=r.assignedSlot||r.parentNode}return null}function Z5(r){for(;r.attributes.length;)r.removeAttributeNode(r.attributes[0])}class Mn{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new Mn(e.parentNode,gv(e),t)}static after(e,t){return new Mn(e.parentNode,gv(e)+1,t)}}const mS=[];class Di{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e){if(this.dirty&2){let t=this.dom,i=null,n;for(let s of this.children){if(s.dirty){if(!s.dom&&(n=i?i.nextSibling:t.firstChild)){let o=Di.get(n);(!o||!o.parent&&o.constructor==s.constructor)&&s.reuseDOM(n)}s.sync(e),s.dirty=0}if(n=i?i.nextSibling:t.firstChild,e&&!e.written&&e.node==t&&n!=s.dom&&(e.written=!0),s.dom.parentNode==t)for(;n&&n!=s.dom;)n=G3(n);else t.insertBefore(s.dom,n);i=s.dom}for(n=i?i.nextSibling:t.firstChild,n&&e&&e.node==t&&(e.written=!0);n;)n=G3(n)}else if(this.dirty&1)for(let t of this.children)t.dirty&&(t.sync(e),t.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let n=j0(e)==0?0:t==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;n==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?n=-1:n=1),e=s}n<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Di.get(i);)i=i.nextSibling;if(!i)return this.length;for(let n=0,s=0;;n++){let o=this.children[n];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,t,i=0){let n=-1,s=-1,o=-1,l=-1;for(let a=0,h=i,u=i;a<this.children.length;a++){let f=this.children[a],c=h+f.length;if(h<e&&c>t)return f.domBoundsAround(e,t,h);if(c>=e&&n==-1&&(n=a,s=h),h>t&&f.dom.parentNode==this.dom){o=a,l=u;break}u=c,h=c+f.breakAfter}return{from:s,to:l<0?i+this.length:l,startDOM:(n?this.children[n-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),t.dirty&1)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=mS){this.markDirty();for(let n=e;n<t;n++){let s=this.children[n];s.parent==this&&s.destroy()}this.children.splice(e,t-e,...i);for(let n=0;n<i.length;n++)i[n].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new G5(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}merge(e,t,i,n,s,o){return!1}become(e){return!1}getSide(){return 0}destroy(){this.parent=null}}Di.prototype.breakAfter=0;function G3(r){let e=r.nextSibling;return r.parentNode.removeChild(r),e}class G5{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function U5(r,e,t,i,n,s,o,l,a){let{children:h}=r,u=h.length?h[e]:null,f=s.length?s[s.length-1]:null,c=f?f.breakAfter:o;if(!(e==i&&u&&!o&&!c&&s.length<2&&u.merge(t,n,s.length?f:null,t==0,l,a))){if(i<h.length){let d=h[i];d&&n<d.length?(e==i&&(d=d.split(n),n=0),!c&&f&&d.merge(0,n,f,!0,0,a)?s[s.length-1]=d:(n&&d.merge(0,n,null,!1,0,a),s.push(d))):d!=null&&d.breakAfter&&(f?f.breakAfter=1:o=1),i++}for(u&&(u.breakAfter=o,t>0&&(!o&&s.length&&u.merge(t,u.length,s[0],!1,l,0)?u.breakAfter=s.shift().breakAfter:(t<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(t,u.length,null,!1,l,0),e++));e<i&&s.length;)if(h[i-1].become(s[s.length-1]))i--,s.pop(),a=s.length?0:l;else if(h[e].become(s[0]))e++,s.shift(),l=s.length?0:a;else break;!s.length&&e&&i<h.length&&!h[e-1].breakAfter&&h[i].merge(0,0,h[e-1],!1,l,a)&&e--,(e<i||s.length)&&r.replaceChildren(e,i,s)}}function Y5(r,e,t,i,n,s){let o=r.childCursor(),{i:l,off:a}=o.findPos(t,1),{i:h,off:u}=o.findPos(e,-1),f=e-t;for(let c of i)f+=c.length;r.length+=f,U5(r,h,u,l,a,i,0,n,s)}let Ur=typeof navigator!="undefined"?navigator:{userAgent:"",vendor:"",platform:""},mv=typeof document!="undefined"?document:{documentElement:{style:{}}};const bv=/Edge\/(\d+)/.exec(Ur.userAgent),K5=/MSIE \d/.test(Ur.userAgent),Ov=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ur.userAgent),Wb=!!(K5||Ov||bv),U3=!Wb&&/gecko\/(\d+)/i.test(Ur.userAgent),YO=!Wb&&/Chrome\/(\d+)/.exec(Ur.userAgent),Y3="webkitFontSmoothing"in mv.documentElement.style,J5=!Wb&&/Apple Computer/.test(Ur.vendor),K3=J5&&(/Mobile\/\w+/.test(Ur.userAgent)||Ur.maxTouchPoints>2);var Ne={mac:K3||/Mac/.test(Ur.platform),windows:/Win/.test(Ur.platform),linux:/Linux|X11/.test(Ur.platform),ie:Wb,ie_version:K5?mv.documentMode||6:Ov?+Ov[1]:bv?+bv[1]:0,gecko:U3,gecko_version:U3?+(/Firefox\/(\d+)/.exec(Ur.userAgent)||[0,0])[1]:0,chrome:!!YO,chrome_version:YO?+YO[1]:0,ios:K3,android:/Android\b/.test(Ur.userAgent),webkit:Y3,safari:J5,webkit_version:Y3?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:mv.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const VV=256;class Va extends Di{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return i&&(!(i instanceof Va)||this.length-(t-e)+i.length>VV)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Va(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new Mn(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return kv(this.dom,e,t)}}class Uo extends Di{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let n of t)n.setParent(this)}setAttrs(e){if(Z5(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e)}merge(e,t,i,n,s,o){return i&&(!(i instanceof Uo&&i.mark.eq(this.mark))||e&&s<=0||t<this.length&&o<=0)?!1:(Y5(this,e,t,i?i.children:[],s-1,o-1),this.markDirty(),!0)}split(e){let t=[],i=0,n=-1,s=0;for(let l of this.children){let a=i+l.length;a>e&&t.push(i<e?l.split(e-i):l),n<0&&i>=e&&(n=s),i=a,s++}let o=this.length-e;return this.length=e,n>-1&&(this.children.length=n,this.markDirty()),new Uo(this.mark,t,o)}domAtPos(e){return iD(this.dom,this.children,e)}coordsAt(e,t){return rD(this,e,t)}}function kv(r,e,t){let i=r.nodeValue.length;e>i&&(e=i);let n=e,s=e,o=0;e==0&&t<0||e==i&&t>=0?Ne.chrome||Ne.gecko||(e?(n--,o=1):s<i&&(s++,o=-1)):t<0?n--:s<i&&s++;let l=Qd(r,n,s).getClientRects();if(!l.length)return q5;let a=l[(o?o<0:t>=0)?0:l.length-1];return Ne.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,h=>h.width)||a),o?zb(a,o<0):a||null}class ba extends Di{constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}static create(e,t,i){return new(e.customView||ba)(e,t,i)}split(e){let t=ba.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,i,n,s,o){return i&&(!(i instanceof ba)||!this.widget.compare(i.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e.length==this.length&&e instanceof ba&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Lt.empty;let e=this;for(;e.parent;)e=e.parent;let t=e.editorView,i=t&&t.state.doc,n=this.posAtStart;return i?i.slice(n,n+this.length):Lt.empty}domAtPos(e){return e==0?Mn.before(this.dom):Mn.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.dom.getClientRects(),n=null;if(!i.length)return q5;for(let s=e>0?i.length-1:0;n=i[s],!(e>0?s==0:s==i.length-1||n.top<n.bottom);s+=e>0?-1:1);return e==0&&t>0||e==this.length&&t<=0?n:zb(n,e==0)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class eD extends ba{domAtPos(e){let{topView:t,text:i}=this.widget;return t?wv(e,0,t,i,(n,s)=>n.domAtPos(s),n=>new Mn(i,Math.min(n,i.nodeValue.length))):new Mn(i,Math.min(e,i.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:i,text:n}=this.widget;return i?tD(e,t,i,n):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:i,text:n}=this.widget;return i?wv(e,t,i,n,(s,o,l)=>s.coordsAt(o,l),(s,o)=>kv(n,s,o)):kv(n,e,t)}destroy(){var e;super.destroy(),(e=this.widget.topView)===null||e===void 0||e.destroy()}get isEditable(){return!0}}function wv(r,e,t,i,n,s){if(t instanceof Uo){for(let o of t.children){let l=cf(o.dom,i),a=l?i.nodeValue.length:o.length;if(r<a||r==a&&o.getSide()<=0)return l?wv(r,e,o,i,n,s):n(o,r,e);r-=a}return n(t,t.length,-1)}else return t.dom==i?s(r,e):n(t,r,e)}function tD(r,e,t,i){if(t instanceof Uo)for(let n of t.children){let s=0,o=cf(n.dom,i);if(cf(n.dom,r))return s+(o?tD(r,e,n,i):n.localPosFromDOM(r,e));s+=o?i.nodeValue.length:n.length}else if(t.dom==i)return Math.min(e,i.nodeValue.length);return t.localPosFromDOM(r,e)}class df extends Di{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof df&&e.side==this.side}split(){return new df(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return Mn.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let t=this.dom.getBoundingClientRect(),i=jV(this,this.side>0?-1:1);return i&&i.top<t.bottom&&i.bottom>t.top?{left:t.left,right:t.right,top:i.top,bottom:i.bottom}:t}get overrideDOMText(){return Lt.empty}}Va.prototype.children=ba.prototype.children=df.prototype.children=mS;function jV(r,e){let t=r.parent,i=t?t.children.indexOf(r):-1;for(;t&&i>=0;)if(e<0?i>0:i<t.children.length){let n=t.children[i+e];if(n instanceof Va){let s=n.coordsAt(e<0?n.length:0,e);if(s)return s}i+=e}else if(t instanceof Uo&&t.parent)i=t.parent.children.indexOf(t)+(e<0?0:1),t=t.parent;else{let n=t.dom.lastChild;if(n&&n.nodeName=="BR")return n.getClientRects()[0];break}}function iD(r,e,t){let i=0;for(let n=0;i<e.length;i++){let s=e[i],o=n+s.length;if(!(o==n&&s.getSide()<=0)){if(t>n&&t<o&&s.dom.parentNode==r)return s.domAtPos(t-n);if(t<=n)break;n=o}}for(;i>0;i--){let n=e[i-1].dom;if(n.parentNode==r)return Mn.after(n)}return new Mn(r,0)}function nD(r,e,t){let i,{children:n}=r;t>0&&e instanceof Uo&&n.length&&(i=n[n.length-1])instanceof Uo&&i.mark.eq(e.mark)?nD(i,e.children[0],t-1):(n.push(e),e.setParent(r)),r.length+=e.length}function rD(r,e,t){for(let s=0,o=0;o<r.children.length;o++){let l=r.children[o],a=s+l.length,h;if((t<=0||a==r.length||l.getSide()>0?a>=e:a>e)&&(e<a||o+1==r.children.length||(h=r.children[o+1]).length||h.getSide()>0)){let u=0;if(a==s){if(l.getSide()<=0)continue;u=t=-l.getSide()}let f=l.coordsAt(Math.max(0,e-s),t);return u&&f?zb(f,t<0):f}s=a}let i=r.dom.lastChild;if(!i)return r.dom.getBoundingClientRect();let n=Rd(i);return n[n.length-1]||null}function yv(r,e){for(let t in r)t=="class"&&e.class?e.class+=" "+r.class:t=="style"&&e.style?e.style+=";"+r.style:e[t]=r[t];return e}function bS(r,e){if(r==e)return!0;if(!r||!e)return!1;let t=Object.keys(r),i=Object.keys(e);if(t.length!=i.length)return!1;for(let n of t)if(i.indexOf(n)==-1||r[n]!==e[n])return!1;return!0}function vv(r,e,t){let i=null;if(e)for(let n in e)t&&n in t||r.removeAttribute(i=n);if(t)for(let n in t)e&&e[n]==t[n]||r.setAttribute(i=n,t[n]);return!!i}class Vb{eq(e){return!1}updateDOM(e){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}destroy(e){}}var tn=function(r){return r[r.Text=0]="Text",r[r.WidgetBefore=1]="WidgetBefore",r[r.WidgetAfter=2]="WidgetAfter",r[r.WidgetRange=3]="WidgetRange",r}(tn||(tn={}));class An extends zh{constructor(e,t,i,n){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=n}get heightRelevant(){return!1}static mark(e){return new jb(e)}static widget(e){let t=e.side||0,i=!!e.block;return t+=i?t>0?3e8:-4e8:t>0?1e8:-1e8,new Wh(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,n;if(e.isBlockGap)i=-5e8,n=4e8;else{let{start:s,end:o}=sD(e,t);i=(s?t?-3e8:-1:5e8)-1,n=(o?t?2e8:1:-6e8)+1}return new Wh(e,i,n,t,e.widget||null,!0)}static line(e){return new gp(e)}static set(e,t=!1){return Mi.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}An.none=Mi.empty;class jb extends An{constructor(e){let{start:t,end:i}=sD(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof jb&&this.tagName==e.tagName&&this.class==e.class&&bS(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}jb.prototype.point=!1;class gp extends An{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof gp&&bS(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}gp.prototype.mapMode=Tr.TrackBefore;gp.prototype.point=!0;class Wh extends An{constructor(e,t,i,n,s,o){super(t,i,s,e),this.block=n,this.isReplace=o,this.mapMode=n?t<=0?Tr.TrackBefore:Tr.TrackAfter:Tr.TrackDel}get type(){return this.startSide<this.endSide?tn.WidgetRange:this.startSide<=0?tn.WidgetBefore:tn.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof Wh&&FV(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Wh.prototype.point=!0;function sD(r,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=r;return t==null&&(t=r.inclusive),i==null&&(i=r.inclusive),{start:t!=null?t:e,end:i!=null?i:e}}function FV(r,e){return r==e||!!(r&&e&&r.compare(e))}function Sv(r,e,t,i=0){let n=t.length-1;n>=0&&t[n]+i>=r?t[n]=Math.max(t[n],e):t.push(r,e)}class wr extends Di{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,n,s,o){if(i){if(!(i instanceof wr))return!1;this.dom||i.transferDOM(this)}return n&&this.setDeco(i?i.attrs:null),Y5(this,e,t,i?i.children:[],s,o),!0}split(e){let t=new wr;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:n}=this.childPos(e);n&&(t.append(this.children[i].split(n),0),this.children[i].merge(n,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)t.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){!this.dom||(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){bS(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){nD(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=yv(t,this.attrs||{})),i&&(this.attrs=yv({class:i},this.attrs||{}))}domAtPos(e){return iD(this.dom,this.children,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.dirty|=6)}sync(e){var t;this.dom?this.dirty&4&&(Z5(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(vv(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e);let i=this.dom.lastChild;for(;i&&Di.get(i)instanceof Uo;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((t=Di.get(i))===null||t===void 0?void 0:t.isEditable)==!1&&(!Ne.ios||!this.children.some(n=>n instanceof Va))){let n=document.createElement("BR");n.cmIgnore=!0,this.dom.appendChild(n)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0;for(let t of this.children){if(!(t instanceof Va))return null;let i=Rd(t.dom);if(i.length!=1)return null;e+=i[0].width}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}}coordsAt(e,t){return rD(this,e,t)}become(e){return!1}get type(){return tn.Text}static find(e,t){for(let i=0,n=0;i<e.children.length;i++){let s=e.children[i],o=n+s.length;if(o>=t){if(s instanceof wr)return s;if(o>t)break}n=o+s.breakAfter}return null}}class Th extends Di{constructor(e,t,i){super(),this.widget=e,this.length=t,this.type=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,n,s,o){return i&&(!(i instanceof Th)||!this.widget.compare(i.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?Mn.before(this.dom):Mn.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new Th(this.widget,t,this.type);return i.breakAfter=this.breakAfter,i}get children(){return mS}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Lt.empty}domBoundsAround(){return null}become(e){return e instanceof Th&&e.type==this.type&&e.widget.constructor==this.widget.constructor?(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class OS{constructor(e,t,i,n){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=n,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof Th&&e.type==tn.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new wr),this.atCursorPos=!0),this.curLine}flushBuffer(e){this.pendingBuffer&&(this.curLine.append(pg(new df(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer([]),this.curLine=null,this.content.push(e)}finish(e){e?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,e--;continue}else this.text=s,this.textOff=0}let n=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(0,i)),this.getLine().append(pg(new Va(this.text.slice(this.textOff,this.textOff+n)),t),i),this.atCursorPos=!0,this.textOff+=n,e-=n,i=0}}span(e,t,i,n){this.buildText(t-e,i,n),this.pos=t,this.openStart<0&&(this.openStart=n)}point(e,t,i,n,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof Wh){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=t-e;if(i instanceof Wh)if(i.block){let{type:a}=i;a==tn.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Th(i.widget||new J3("div"),l,a))}else{let a=ba.create(i.widget||new J3("span"),l,i.startSide),h=this.atCursorPos&&!a.isEditable&&s<=n.length&&(e<t||i.startSide>0),u=!a.isEditable&&(e<t||i.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!h&&(this.pendingBuffer=0),this.flushBuffer(n),h&&(f.append(pg(new df(1),n),s),s=n.length+Math.max(0,s-n.length)),f.append(pg(a,n),s),this.atCursorPos=u,this.pendingBuffer=u?e<t?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=s)}static build(e,t,i,n,s){let o=new OS(e,t,i,s);return o.openEnd=Mi.spans(n,t,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function pg(r,e){for(let t of e)r=new Uo(t,[r],r.length);return r}class J3 extends Vb{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}}const oD=Ot.define(),lD=Ot.define(),aD=Ot.define(),hD=Ot.define(),xv=Ot.define(),uD=Ot.define(),fD=Ot.define({combine:r=>r.some(e=>e)});class F0{constructor(e,t="nearest",i="nearest",n=5,s=5){this.range=e,this.y=t,this.x=i,this.yMargin=n,this.xMargin=s}map(e){return e.empty?this:new F0(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const eT=Ai.define({map:(r,e)=>r.map(e)});function Fo(r,e,t){let i=r.facet(hD);i.length?i[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const mp=Ot.define({combine:r=>r.length?r[0]:!0});let HV=0;const Lc=Ot.define();class pf{constructor(e,t,i,n){this.id=e,this.create=t,this.domEventHandlers=i,this.extension=n(this)}static define(e,t){const{eventHandlers:i,provide:n,decorations:s}=t||{};return new pf(HV++,e,i,o=>{let l=[Lc.of(o)];return s&&l.push(Dd.of(a=>{let h=a.plugin(o);return h?s(h):An.none})),n&&l.push(n(o)),l})}static fromClass(e,t){return pf.define(i=>new e(i),t)}}class KO{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(Fo(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Fo(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){Fo(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const cD=Ot.define(),dD=Ot.define(),Dd=Ot.define(),pD=Ot.define(),gD=Ot.define(),zc=Ot.define();class Ol{constructor(e,t,i,n){this.fromA=e,this.toA=t,this.fromB=i,this.toB=n}join(e){return new Ol(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let n=e[t-1];if(!(n.fromA>i.toA)){if(n.toA<i.fromA)break;i=i.join(n),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let n=0,s=0,o=0,l=0;;n++){let a=n==e.length?null:e[n],h=o-l,u=a?a.fromB:1e9;for(;s<t.length&&t[s]<u;){let f=t[s],c=t[s+1],d=Math.max(l,f),g=Math.min(u,c);if(d<=g&&new Ol(d+h,g+h,d,g).addToSet(i),c>u)break;s+=2}if(!a)return i;new Ol(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),o=a.toA,l=a.toB}}}class H0{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=hn.empty(this.startState.doc.length);for(let o of i)this.changes=this.changes.compose(o.changes);let n=[];this.changes.iterChangedRanges((o,l,a,h)=>n.push(new Ol(o,l,a,h))),this.changedRanges=n;let s=e.hasFocus;s!=e.inputState.notifiedFocused&&(e.inputState.notifiedFocused=s,this.flags|=1)}static create(e,t,i){return new H0(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var Rn=function(r){return r[r.LTR=0]="LTR",r[r.RTL=1]="RTL",r}(Rn||(Rn={}));const Cv=Rn.LTR,qV=Rn.RTL;function mD(r){let e=[];for(let t=0;t<r.length;t++)e.push(1<<+r[t]);return e}const XV=mD("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ZV=mD("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Av=Object.create(null),Fs=[];for(let r of["()","[]","{}"]){let e=r.charCodeAt(0),t=r.charCodeAt(1);Av[e]=t,Av[t]=-e}function GV(r){return r<=247?XV[r]:1424<=r&&r<=1524?2:1536<=r&&r<=1785?ZV[r-1536]:1774<=r&&r<=2220?4:8192<=r&&r<=8203||r==8204?256:1}const UV=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;class ju{constructor(e,t,i){this.from=e,this.to=t,this.level=i}get dir(){return this.level%2?qV:Cv}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,i,n){let s=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=t&&l.to>=t){if(l.level==i)return o;(s<0||(n!=0?n<0?l.from<t:l.to>t:e[s].level>l.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}const Si=[];function YV(r,e){let t=r.length,i=e==Cv?1:2,n=e==Cv?2:1;if(!r||i==1&&!UV.test(r))return bD(t);for(let o=0,l=i,a=i;o<t;o++){let h=GV(r.charCodeAt(o));h==512?h=l:h==8&&a==4&&(h=16),Si[o]=h==4?2:h,h&7&&(a=h),l=h}for(let o=0,l=i,a=i;o<t;o++){let h=Si[o];if(h==128)o<t-1&&l==Si[o+1]&&l&24?h=Si[o]=l:Si[o]=256;else if(h==64){let u=o+1;for(;u<t&&Si[u]==64;)u++;let f=o&&l==8||u<t&&Si[u]==8?a==1?1:8:256;for(let c=o;c<u;c++)Si[c]=f;o=u-1}else h==8&&a==1&&(Si[o]=1);l=h,h&7&&(a=h)}for(let o=0,l=0,a=0,h,u,f;o<t;o++)if(u=Av[h=r.charCodeAt(o)])if(u<0){for(let c=l-3;c>=0;c-=3)if(Fs[c+1]==-u){let d=Fs[c+2],g=d&2?i:d&4?d&1?n:i:0;g&&(Si[o]=Si[Fs[c]]=g),l=c;break}}else{if(Fs.length==189)break;Fs[l++]=o,Fs[l++]=h,Fs[l++]=a}else if((f=Si[o])==2||f==1){let c=f==i;a=c?0:1;for(let d=l-3;d>=0;d-=3){let g=Fs[d+2];if(g&2)break;if(c)Fs[d+2]|=2;else{if(g&4)break;Fs[d+2]|=4}}}for(let o=0;o<t;o++)if(Si[o]==256){let l=o+1;for(;l<t&&Si[l]==256;)l++;let a=(o?Si[o-1]:i)==1,h=(l<t?Si[l]:i)==1,u=a==h?a?1:2:i;for(let f=o;f<l;f++)Si[f]=u;o=l-1}let s=[];if(i==1)for(let o=0;o<t;){let l=o,a=Si[o++]!=1;for(;o<t&&a==(Si[o]!=1);)o++;if(a)for(let h=o;h>l;){let u=h,f=Si[--h]!=2;for(;h>l&&f==(Si[h-1]!=2);)h--;s.push(new ju(h,u,f?2:1))}else s.push(new ju(l,o,0))}else for(let o=0;o<t;){let l=o,a=Si[o++]==2;for(;o<t&&a==(Si[o]==2);)o++;s.push(new ju(l,o,a?1:2))}return s}function bD(r){return[new ju(0,r,0)]}let OD="";function KV(r,e,t,i,n){var s;let o=i.head-r.from,l=-1;if(o==0){if(!n||!r.length)return null;e[0].level!=t&&(o=e[0].side(!1,t),l=0)}else if(o==r.length){if(n)return null;let c=e[e.length-1];c.level!=t&&(o=c.side(!0,t),l=e.length-1)}l<0&&(l=ju.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc));let a=e[l];o==a.side(n,t)&&(a=e[l+=n?1:-1],o=a.side(!n,t));let h=n==(a.dir==t),u=ma(r.text,o,h);if(OD=r.text.slice(Math.min(o,u),Math.max(o,u)),u!=a.side(n,t))return De.cursor(u+r.from,h?-1:1,a.level);let f=l==(n?e.length-1:0)?null:e[l+(n?1:-1)];return!f&&a.level!=t?De.cursor(n?r.to:r.from,n?-1:1,t):f&&f.level<a.level?De.cursor(f.side(!n,t)+r.from,n?1:-1,f.level):De.cursor(u+r.from,n?-1:1,a.level)}const Oa="\uFFFF";class kD{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(oi.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Oa}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let n=e;;){this.findPointBefore(i,n),this.readNode(n);let s=n.nextSibling;if(s==t)break;let o=Di.get(n),l=Di.get(s);(o&&l?o.breakAfter:(o?o.breakAfter:tT(n))||tT(s)&&(n.nodeName!="BR"||n.cmIgnore))&&this.lineBreak(),n=s}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,n=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,l;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(l=n.exec(t))&&(s=l.index,o=l[0].length),this.append(t.slice(i,s<0?t.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let t=Di.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let n=i.iter();!n.next().done;)n.lineBreak?this.lineBreak():this.append(n.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+Math.min(t,i.offset))}}function tT(r){return r.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(r.nodeName)}class iT{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class nT extends Di{constructor(e){super(),this.view=e,this.compositionDeco=An.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new wr],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Ol(0,0,0,e.state.doc.length)],0)}get root(){return this.view.root}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every(({fromA:o,toA:l})=>l<this.minWidthFrom||o>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=An.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=ej(this.view,e.changes)),(Ne.ie||Ne.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let i=this.decorations,n=this.updateDeco(),s=rj(i,n,e.changes);return t=Ol.extendWithRanges(t,s),this.dirty==0&&t.length==0?!1:(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=Ne.chrome||Ne.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(s),this.dirty=0,s&&(s.written||i.selectionRange.focusNode!=s.node)&&(this.forceSelection=!0),this.dom.style.height=""});let n=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.children)s instanceof Th&&s.widget instanceof rT&&n.push(s.dom);i.updateGaps(n)}updateChildren(e,t){let i=this.childCursor(t);for(let n=e.length-1;;n--){let s=n>=0?e[n]:null;if(!s)break;let{fromA:o,toA:l,fromB:a,toB:h}=s,{content:u,breakAtStart:f,openStart:c,openEnd:d}=OS.build(this.view.state.doc,a,h,this.decorations,this.dynamicDecorationMap),{i:g,off:w}=i.findPos(l,1),{i:S,off:x}=i.findPos(o,-1);U5(this,S,x,g,w,u,f,c,d)}}updateSelection(e=!1,t=!1){if(e&&this.view.observer.readSelectionRange(),!(t||this.mayControlSelection())||Ne.ios&&this.view.inputState.rapidCompositionStart)return;let i=this.forceSelection;this.forceSelection=!1;let n=this.view.state.selection.main,s=this.domAtPos(n.anchor),o=n.empty?s:this.domAtPos(n.head);if(Ne.gecko&&n.empty&&JV(s)){let a=document.createTextNode("");this.view.observer.ignore(()=>s.node.insertBefore(a,s.node.childNodes[s.offset]||null)),s=o=new Mn(a,0),i=!0}let l=this.view.observer.selectionRange;(i||!l.focusNode||!V0(s.node,s.offset,l.anchorNode,l.anchorOffset)||!V0(o.node,o.offset,l.focusNode,l.focusOffset))&&(this.view.observer.ignore(()=>{Ne.android&&Ne.chrome&&this.dom.contains(l.focusNode)&&sj(l.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let a=W0(this.root);if(n.empty){if(Ne.gecko){let h=ij(s.node,s.offset);if(h&&h!=3){let u=yD(s.node,s.offset,h==1?1:-1);u&&(s=new Mn(u,h==1?0:u.nodeValue.length))}}a.collapse(s.node,s.offset),n.bidiLevel!=null&&l.cursorBidiLevel!=null&&(l.cursorBidiLevel=n.bidiLevel)}else if(a.extend)a.collapse(s.node,s.offset),a.extend(o.node,o.offset);else{let h=document.createRange();n.anchor>n.head&&([s,o]=[o,s]),h.setEnd(o.node,o.offset),h.setStart(s.node,s.offset),a.removeAllRanges(),a.addRange(h)}}),this.view.observer.setSelectionRange(s,o)),this.impreciseAnchor=s.precise?null:new Mn(l.anchorNode,l.anchorOffset),this.impreciseHead=o.precise?null:new Mn(l.focusNode,l.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let e=this.view.state.selection.main,t=W0(this.root);if(!e.empty||!e.assoc||!t.modify)return;let i=wr.find(this,e.head);if(!i)return;let n=i.posAtStart;if(e.head==n||e.head==n+i.length)return;let s=this.coordsAt(e.head,-1),o=this.coordsAt(e.head,1);if(!s||!o||s.bottom>o.top)return;let l=this.domAtPos(e.head+e.assoc);t.collapse(l.node,l.offset),t.modify("move",e.assoc<0?"forward":"backward","lineboundary")}mayControlSelection(){return this.view.state.facet(mp)?this.root.activeElement==this.dom:pv(this.dom,this.view.observer.selectionRange)}nearest(e){for(let t=e;t;){let i=Di.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let n=this.children[t];if(i<n.length||n instanceof wr)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){for(let i=this.length,n=this.children.length-1;;n--){let s=this.children[n],o=i-s.breakAfter-s.length;if(e>o||e==o&&s.type!=tn.WidgetBefore&&s.type!=tn.WidgetAfter&&(!n||t==2||this.children[n-1].breakAfter||this.children[n-1].type==tn.WidgetBefore&&t>-2))return s.coordsAt(e-o,t);i=o}}measureVisibleLineHeights(e){let t=[],{from:i,to:n}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==Rn.LTR;for(let h=0,u=0;u<this.children.length;u++){let f=this.children[u],c=h+f.length;if(c>n)break;if(h>=i){let d=f.dom.getBoundingClientRect();if(t.push(d.height),o){let g=f.dom.lastChild,w=g?Rd(g):[];if(w.length){let S=w[w.length-1],x=a?S.right-d.left:d.right-S.left;x>l&&(l=x,this.minWidth=s,this.minWidthFrom=h,this.minWidthTo=c)}}}h=c+f.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?Rn.RTL:Rn.LTR}measureTextSize(){for(let n of this.children)if(n instanceof wr){let s=n.measureTextSize();if(s)return s}let e=document.createElement("div"),t,i;return e.className="cm-line",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let n=Rd(e.firstChild)[0];t=e.getBoundingClientRect().height,i=n?n.width/27:7,e.remove()}),{lineHeight:t,charWidth:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new G5(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,n=0;;n++){let s=n==t.viewports.length?null:t.viewports[n],o=s?s.from-1:this.length;if(o>i){let l=t.lineBlockAt(o).bottom-t.lineBlockAt(i).top;e.push(An.replace({widget:new rT(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return An.set(e)}updateDeco(){let e=this.view.state.facet(Dd).map((t,i)=>(this.dynamicDecorationMap[i]=typeof t=="function")?t(this.view):t);for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),n;if(!i)return;!t.empty&&(n=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,n.left),top:Math.min(i.top,n.top),right:Math.max(i.right,n.right),bottom:Math.max(i.bottom,n.bottom)});let s=0,o=0,l=0,a=0;for(let u of this.view.state.facet(gD).map(f=>f(this.view)))if(u){let{left:f,right:c,top:d,bottom:g}=u;f!=null&&(s=Math.max(s,f)),c!=null&&(o=Math.max(o,c)),d!=null&&(l=Math.max(l,d)),g!=null&&(a=Math.max(a,g))}let h={left:i.left-s,top:i.top-l,right:i.right+o,bottom:i.bottom+a};LV(this.view.scrollDOM,h,t.head<t.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==Rn.LTR)}}function JV(r){return r.node.nodeType==1&&r.node.firstChild&&(r.offset==0||r.node.childNodes[r.offset-1].contentEditable=="false")&&(r.offset==r.node.childNodes.length||r.node.childNodes[r.offset].contentEditable=="false")}class rT extends Vb{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function wD(r){let e=r.observer.selectionRange,t=e.focusNode&&yD(e.focusNode,e.focusOffset,0);if(!t)return null;let i=r.docView.nearest(t);if(!i)return null;if(i instanceof wr){let n=t;for(;n.parentNode!=i.dom;)n=n.parentNode;let s=n.previousSibling;for(;s&&!Di.get(s);)s=s.previousSibling;let o=s?Di.get(s).posAtEnd:i.posAtStart;return{from:o,to:o,node:n,text:t}}else{for(;;){let{parent:s}=i;if(!s)return null;if(s instanceof wr)break;i=s}let n=i.posAtStart;return{from:n,to:n+i.length,node:i.dom,text:t}}}function ej(r,e){let t=wD(r);if(!t)return An.none;let{from:i,to:n,node:s,text:o}=t,l=e.mapPos(i,1),a=Math.max(l,e.mapPos(n,-1)),{state:h}=r,u=s.nodeType==3?s.nodeValue:new kD([],h).readRange(s.firstChild,null).text;if(a-l<u.length)if(h.doc.sliceString(l,Math.min(h.doc.length,l+u.length),Oa)==u)a=l+u.length;else if(h.doc.sliceString(Math.max(0,a-u.length),a,Oa)==u)l=a-u.length;else return An.none;else if(h.doc.sliceString(l,a,Oa)!=u)return An.none;let f=Di.get(s);return f instanceof eD?f=f.widget.topView:f&&(f.parent=null),An.set(An.replace({widget:new tj(s,o,f),inclusive:!0}).range(l,a))}class tj extends Vb{constructor(e,t,i){super(),this.top=e,this.text=t,this.topView=i}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return eD}}function yD(r,e,t){for(;;){if(r.nodeType==3)return r;if(r.nodeType==1&&e>0&&t<=0)r=r.childNodes[e-1],e=j0(r);else if(r.nodeType==1&&e<r.childNodes.length&&t>=0)r=r.childNodes[e],e=0;else return null}}function ij(r,e){return r.nodeType!=1?0:(e&&r.childNodes[e-1].contentEditable=="false"?1:0)|(e<r.childNodes.length&&r.childNodes[e].contentEditable=="false"?2:0)}class nj{constructor(){this.changes=[]}compareRange(e,t){Sv(e,t,this.changes)}comparePoint(e,t){Sv(e,t,this.changes)}}function rj(r,e,t){let i=new nj;return Mi.compare(r,e,t,i),i.changes}function sj(r,e){for(let t=r;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function oj(r,e,t=1){let i=r.charCategorizer(e),n=r.doc.lineAt(e),s=e-n.from;if(n.length==0)return De.cursor(e);s==0?t=1:s==n.length&&(t=-1);let o=s,l=s;t<0?o=ma(n.text,s,!1):l=ma(n.text,s);let a=i(n.text.slice(o,l));for(;o>0;){let h=ma(n.text,o,!1);if(i(n.text.slice(h,o))!=a)break;o=h}for(;l<n.length;){let h=ma(n.text,l);if(i(n.text.slice(l,h))!=a)break;l=h}return De.range(o+n.from,l+n.from)}function lj(r,e){return e.left>r?e.left-r:Math.max(0,r-e.right)}function aj(r,e){return e.top>r?e.top-r:Math.max(0,r-e.bottom)}function JO(r,e){return r.top<e.bottom-1&&r.bottom>e.top+1}function sT(r,e){return e<r.top?{top:e,left:r.left,right:r.right,bottom:r.bottom}:r}function oT(r,e){return e>r.bottom?{top:r.top,left:r.left,right:r.right,bottom:e}:r}function Tv(r,e,t){let i,n,s,o,l,a,h,u;for(let d=r.firstChild;d;d=d.nextSibling){let g=Rd(d);for(let w=0;w<g.length;w++){let S=g[w];n&&JO(n,S)&&(S=sT(oT(S,n.bottom),n.top));let x=lj(e,S),Q=aj(t,S);if(x==0&&Q==0)return d.nodeType==3?lT(d,e,t):Tv(d,e,t);(!i||o>Q||o==Q&&s>x)&&(i=d,n=S,s=x,o=Q),x==0?t>S.bottom&&(!h||h.bottom<S.bottom)?(l=d,h=S):t<S.top&&(!u||u.top>S.top)&&(a=d,u=S):h&&JO(h,S)?h=oT(h,S.bottom):u&&JO(u,S)&&(u=sT(u,S.top))}}if(h&&h.bottom>=t?(i=l,n=h):u&&u.top<=t&&(i=a,n=u),!i)return{node:r,offset:0};let f=Math.max(n.left,Math.min(n.right,e));if(i.nodeType==3)return lT(i,f,t);if(!s&&i.contentEditable=="true")return Tv(i,f,t);let c=Array.prototype.indexOf.call(r.childNodes,i)+(e>=(n.left+n.right)/2?1:0);return{node:r,offset:c}}function lT(r,e,t){let i=r.nodeValue.length,n=-1,s=1e9,o=0;for(let l=0;l<i;l++){let a=Qd(r,l,l+1).getClientRects();for(let h=0;h<a.length;h++){let u=a[h];if(u.top==u.bottom)continue;o||(o=e-u.left);let f=(u.top>t?u.top-t:t-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&f<s){let c=e>=(u.left+u.right)/2,d=c;if((Ne.chrome||Ne.gecko)&&Qd(r,l).getBoundingClientRect().left==u.right&&(d=!c),f<=0)return{node:r,offset:l+(d?1:0)};n=l+(d?1:0),s=f}}}return{node:r,offset:n>-1?n:o>0?r.nodeValue.length:0}}function vD(r,{x:e,y:t},i,n=-1){var s;let o=r.contentDOM.getBoundingClientRect(),l=o.top+r.viewState.paddingTop,a,{docHeight:h}=r.viewState,u=t-l;if(u<0)return 0;if(u>h)return r.state.doc.length;for(let x=r.defaultLineHeight/2,Q=!1;a=r.elementAtHeight(u),a.type!=tn.Text;)for(;u=n>0?a.bottom+x:a.top-x,!(u>=0&&u<=h);){if(Q)return i?null:0;Q=!0,n=-n}t=l+u;let f=a.from;if(f<r.viewport.from)return r.viewport.from==0?0:i?null:aT(r,o,a,e,t);if(f>r.viewport.to)return r.viewport.to==r.state.doc.length?r.state.doc.length:i?null:aT(r,o,a,e,t);let c=r.dom.ownerDocument,d=r.root.elementFromPoint?r.root:c,g=d.elementFromPoint(e,t);g&&!r.contentDOM.contains(g)&&(g=null),g||(e=Math.max(o.left+1,Math.min(o.right-1,e)),g=d.elementFromPoint(e,t),g&&!r.contentDOM.contains(g)&&(g=null));let w,S=-1;if(g&&((s=r.docView.nearest(g))===null||s===void 0?void 0:s.isEditable)!=!1){if(c.caretPositionFromPoint){let x=c.caretPositionFromPoint(e,t);x&&({offsetNode:w,offset:S}=x)}else if(c.caretRangeFromPoint){let x=c.caretRangeFromPoint(e,t);x&&({startContainer:w,startOffset:S}=x,Ne.safari&&hj(w,S,e)&&(w=void 0))}}if(!w||!r.docView.dom.contains(w)){let x=wr.find(r.docView,f);if(!x)return u>a.top+a.height/2?a.to:a.from;({node:w,offset:S}=Tv(x.dom,e,t))}return r.docView.posFromDOM(w,S)}function aT(r,e,t,i,n){let s=Math.round((i-e.left)*r.defaultCharacterWidth);r.lineWrapping&&t.height>r.defaultLineHeight*1.5&&(s+=Math.floor((n-t.top)/r.defaultLineHeight)*r.viewState.heightOracle.lineLength);let o=r.state.sliceDoc(t.from,t.to);return t.from+BV(o,s,r.state.tabSize)}function hj(r,e,t){let i;if(r.nodeType!=3||e!=(i=r.nodeValue.length))return!1;for(let n=r.nextSibling;n;n=n.nextSibling)if(n.nodeType!=1||n.nodeName!="BR")return!1;return Qd(r,i-1,i).getBoundingClientRect().left>t}function uj(r,e,t,i){let n=r.state.doc.lineAt(e.head),s=!i||!r.lineWrapping?null:r.coordsAtPos(e.assoc<0&&e.head>n.from?e.head-1:e.head);if(s){let a=r.dom.getBoundingClientRect(),h=r.textDirectionAt(n.from),u=r.posAtCoords({x:t==(h==Rn.LTR)?a.right-1:a.left+1,y:(s.top+s.bottom)/2});if(u!=null)return De.cursor(u,t?-1:1)}let o=wr.find(r.docView,e.head),l=o?t?o.posAtEnd:o.posAtStart:t?n.to:n.from;return De.cursor(l,t?-1:1)}function hT(r,e,t,i){let n=r.state.doc.lineAt(e.head),s=r.bidiSpans(n),o=r.textDirectionAt(n.from);for(let l=e,a=null;;){let h=KV(n,s,o,l,t),u=OD;if(!h){if(n.number==(t?r.state.doc.lines:1))return l;u=`
`,n=r.state.doc.line(n.number+(t?1:-1)),s=r.bidiSpans(n),h=De.cursor(t?n.from:n.to)}if(a){if(!a(u))return l}else{if(!i)return h;a=i(u)}l=h}}function fj(r,e,t){let i=r.state.charCategorizer(e),n=i(t);return s=>{let o=i(s);return n==Ms.Space&&(n=o),n==o}}function cj(r,e,t,i){let n=e.head,s=t?1:-1;if(n==(t?r.state.doc.length:0))return De.cursor(n,e.assoc);let o=e.goalColumn,l,a=r.contentDOM.getBoundingClientRect(),h=r.coordsAtPos(n),u=r.documentTop;if(h)o==null&&(o=h.left-a.left),l=s<0?h.top:h.bottom;else{let d=r.viewState.lineBlockAt(n);o==null&&(o=Math.min(a.right-a.left,r.defaultCharacterWidth*(n-d.from))),l=(s<0?d.top:d.bottom)+u}let f=a.left+o,c=i!=null?i:r.defaultLineHeight>>1;for(let d=0;;d+=10){let g=l+(c+d)*s,w=vD(r,{x:f,y:g},!1,s);if(g<a.top||g>a.bottom||(s<0?w<n:w>n))return De.cursor(w,e.assoc,void 0,o)}}function ek(r,e,t){let i=r.state.facet(pD).map(n=>n(r));for(;;){let n=!1;for(let s of i)s.between(t.from-1,t.from+1,(o,l,a)=>{t.from>o&&t.from<l&&(t=e.from>t.from?De.cursor(o,1):De.cursor(l,-1),n=!0)});if(!n)return t}}class dj{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.rapidCompositionStart=!1,this.mouseSelection=null;for(let t in gn){let i=gn[t];e.contentDOM.addEventListener(t,n=>{!uT(e,n)||this.ignoreDuringComposition(n)||t=="keydown"&&this.keydown(e,n)||(this.mustFlushObserver(n)&&e.observer.forceFlush(),this.runCustomHandlers(t,e,n)?n.preventDefault():i(e,n))}),this.registeredEvents.push(t)}Ne.chrome&&Ne.chrome_version>=102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,Ne.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var i;let n;this.customHandlers=[];for(let s of t)if(n=(i=s.update(e).spec)===null||i===void 0?void 0:i.domEventHandlers){this.customHandlers.push({plugin:s.value,handlers:n});for(let o in n)this.registeredEvents.indexOf(o)<0&&o!="scroll"&&(this.registeredEvents.push(o),e.contentDOM.addEventListener(o,l=>{!uT(e,l)||this.runCustomHandlers(o,e,l)&&l.preventDefault()}))}}runCustomHandlers(e,t,i){for(let n of this.customHandlers){let s=n.handlers[e];if(s)try{if(s.call(n.plugin,i,t)||i.defaultPrevented)return!0}catch(o){Fo(t.state,o)}}return!1}runScrollHandlers(e,t){for(let i of this.customHandlers){let n=i.handlers.scroll;if(n)try{n.call(i.plugin,t,e)}catch(s){Fo(e.state,s)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(Ne.android&&Ne.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let i;return Ne.ios&&(i=SD.find(n=>n.keyCode==t.keyCode))&&!(t.ctrlKey||t.altKey||t.metaKey)&&!t.synthetic?(this.pendingIOSKey=i,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let t=this.pendingIOSKey;return t?(this.pendingIOSKey=void 0,nd(e.contentDOM,t.key,t.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Ne.safari&&Date.now()-this.compositionEndedAt<100?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229||e.type=="compositionend"&&!Ne.ios}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const SD=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],xD=[16,17,18,20,91,92,224,225];class pj{constructor(e,t,i,n){this.view=e,this.style=i,this.mustSelect=n,this.lastEvent=t;let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(oi.allowMultipleSelections)&&gj(e,t),this.dragMove=mj(e,t),this.dragging=bj(e,t)&&kS(t)==1?null:!1,this.dragging===!1&&(t.preventDefault(),this.select(t))}move(e){if(e.buttons==0)return this.destroy();this.dragging===!1&&this.select(this.lastEvent=e)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(e){let t=this.style.get(e,this.extend,this.multiple);(this.mustSelect||!t.eq(this.view.state.selection)||t.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:t,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function gj(r,e){let t=r.state.facet(oD);return t.length?t[0](e):Ne.mac?e.metaKey:e.ctrlKey}function mj(r,e){let t=r.state.facet(lD);return t.length?t[0](e):Ne.mac?!e.altKey:!e.ctrlKey}function bj(r,e){let{main:t}=r.state.selection;if(t.empty)return!1;let i=W0(r.root);if(i.rangeCount==0)return!0;let n=i.getRangeAt(0).getClientRects();for(let s=0;s<n.length;s++){let o=n[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function uT(r,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=r.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=Di.get(t))&&i.ignoreEvent(e))return!1;return!0}const gn=Object.create(null),CD=Ne.ie&&Ne.ie_version<15||Ne.ios&&Ne.webkit_version<604;function Oj(r){let e=r.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{r.focus(),t.remove(),AD(r,t.value)},50)}function AD(r,e){let{state:t}=r,i,n=1,s=t.toText(e),o=s.lines==t.selection.ranges.length;if(Pv!=null&&t.selection.ranges.every(a=>a.empty)&&Pv==s.toString()){let a=-1;i=t.changeByRange(h=>{let u=t.doc.lineAt(h.from);if(u.from==a)return{range:h};a=u.from;let f=t.toText((o?s.line(n++).text:e)+t.lineBreak);return{changes:{from:u.from,insert:f},range:De.cursor(h.from+f.length)}})}else o?i=t.changeByRange(a=>{let h=s.line(n++);return{changes:{from:a.from,to:a.to,insert:h.text},range:De.cursor(a.from+h.length)}}):i=t.replaceSelection(s);r.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}gn.keydown=(r,e)=>{r.inputState.setSelectionOrigin("select"),e.keyCode==27?r.inputState.lastEscPress=Date.now():xD.indexOf(e.keyCode)<0&&(r.inputState.lastEscPress=0)};let TD=0;gn.touchstart=(r,e)=>{TD=Date.now(),r.inputState.setSelectionOrigin("select.pointer")};gn.touchmove=r=>{r.inputState.setSelectionOrigin("select.pointer")};gn.mousedown=(r,e)=>{if(r.observer.flush(),TD>Date.now()-2e3&&kS(e)==1)return;let t=null;for(let i of r.state.facet(aD))if(t=i(r,e),t)break;if(!t&&e.button==0&&(t=yj(r,e)),t){let i=r.root.activeElement!=r.contentDOM;i&&r.observer.ignore(()=>X5(r.contentDOM)),r.inputState.startMouseSelection(new pj(r,e,t,i))}};function fT(r,e,t,i){if(i==1)return De.cursor(e,t);if(i==2)return oj(r.state,e,t);{let n=wr.find(r.docView,e),s=r.state.doc.lineAt(n?n.posAtEnd:e),o=n?n.posAtStart:s.from,l=n?n.posAtEnd:s.to;return l<r.state.doc.length&&l==s.to&&l++,De.range(o,l)}}let PD=(r,e)=>r>=e.top&&r<=e.bottom,cT=(r,e,t)=>PD(e,t)&&r>=t.left&&r<=t.right;function kj(r,e,t,i){let n=wr.find(r.docView,e);if(!n)return 1;let s=e-n.posAtStart;if(s==0)return 1;if(s==n.length)return-1;let o=n.coordsAt(s,-1);if(o&&cT(t,i,o))return-1;let l=n.coordsAt(s,1);return l&&cT(t,i,l)?1:o&&PD(i,o)?-1:1}function dT(r,e){let t=r.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:kj(r,t,e.clientX,e.clientY)}}const wj=Ne.ie&&Ne.ie_version<=11;let pT=null,gT=0,mT=0;function kS(r){if(!wj)return r.detail;let e=pT,t=mT;return pT=r,mT=Date.now(),gT=!e||t>Date.now()-400&&Math.abs(e.clientX-r.clientX)<2&&Math.abs(e.clientY-r.clientY)<2?(gT+1)%3:1}function yj(r,e){let t=dT(r,e),i=kS(e),n=r.state.selection,s=t,o=e;return{update(l){l.docChanged&&(t&&(t.pos=l.changes.mapPos(t.pos)),n=n.map(l.changes),o=null)},get(l,a,h){let u;if(o&&l.clientX==o.clientX&&l.clientY==o.clientY?u=s:(u=s=dT(r,l),o=l),!u||!t)return n;let f=fT(r,u.pos,u.bias,i);if(t.pos!=u.pos&&!a){let c=fT(r,t.pos,t.bias,i),d=Math.min(c.from,f.from),g=Math.max(c.to,f.to);f=d<f.from?De.range(d,g):De.range(g,d)}return a?n.replaceRange(n.main.extend(f.from,f.to)):h?n.addRange(f):De.create([f])}}}gn.dragstart=(r,e)=>{let{selection:{main:t}}=r.state,{mouseSelection:i}=r.inputState;i&&(i.dragging=t),e.dataTransfer&&(e.dataTransfer.setData("Text",r.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove")};function bT(r,e,t,i){if(!t)return;let n=r.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:s}=r.inputState,o=i&&s&&s.dragging&&s.dragMove?{from:s.dragging.from,to:s.dragging.to}:null,l={from:n,insert:t},a=r.state.changes(o?[o,l]:l);r.focus(),r.dispatch({changes:a,selection:{anchor:a.mapPos(n,-1),head:a.mapPos(n,1)},userEvent:o?"move.drop":"input.drop"})}gn.drop=(r,e)=>{if(!e.dataTransfer)return;if(r.state.readOnly)return e.preventDefault();let t=e.dataTransfer.files;if(t&&t.length){e.preventDefault();let i=Array(t.length),n=0,s=()=>{++n==t.length&&bT(r,e,i.filter(o=>o!=null).join(r.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let l=new FileReader;l.onerror=s,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[o]=l.result),s()},l.readAsText(t[o])}}else bT(r,e,e.dataTransfer.getData("Text"),!0)};gn.paste=(r,e)=>{if(r.state.readOnly)return e.preventDefault();r.observer.flush();let t=CD?null:e.clipboardData;t?(AD(r,t.getData("text/plain")),e.preventDefault()):Oj(r)};function vj(r,e){let t=r.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),r.focus()},50)}function Sj(r){let e=[],t=[],i=!1;for(let n of r.selection.ranges)n.empty||(e.push(r.sliceDoc(n.from,n.to)),t.push(n));if(!e.length){let n=-1;for(let{from:s}of r.selection.ranges){let o=r.doc.lineAt(s);o.number>n&&(e.push(o.text),t.push({from:o.from,to:Math.min(r.doc.length,o.to+1)})),n=o.number}i=!0}return{text:e.join(r.lineBreak),ranges:t,linewise:i}}let Pv=null;gn.copy=gn.cut=(r,e)=>{let{text:t,ranges:i,linewise:n}=Sj(r.state);if(!t&&!n)return;Pv=n?t:null;let s=CD?null:e.clipboardData;s?(e.preventDefault(),s.clearData(),s.setData("text/plain",t)):vj(r,t),e.type=="cut"&&!r.state.readOnly&&r.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"})};function _D(r){setTimeout(()=>{r.hasFocus!=r.inputState.notifiedFocused&&r.update([])},10)}gn.focus=_D;gn.blur=r=>{r.observer.clearSelectionRange(),_D(r)};function $D(r,e){if(r.docView.compositionDeco.size){r.inputState.rapidCompositionStart=e;try{r.update([])}finally{r.inputState.rapidCompositionStart=!1}}}gn.compositionstart=gn.compositionupdate=r=>{r.inputState.compositionFirstChange==null&&(r.inputState.compositionFirstChange=!0),r.inputState.composing<0&&(r.inputState.composing=0,r.docView.compositionDeco.size&&(r.observer.flush(),$D(r,!0)))};gn.compositionend=r=>{r.inputState.composing=-1,r.inputState.compositionEndedAt=Date.now(),r.inputState.compositionFirstChange=null,setTimeout(()=>{r.inputState.composing<0&&$D(r,!1)},50)};gn.contextmenu=r=>{r.inputState.lastContextMenu=Date.now()};gn.beforeinput=(r,e)=>{var t;let i;if(Ne.chrome&&Ne.android&&(i=SD.find(n=>n.inputType==e.inputType))&&(r.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let n=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>n+10&&r.hasFocus&&(r.contentDOM.blur(),r.focus())},100)}};const OT=["pre-wrap","normal","pre-line","break-spaces"];class xj{constructor(){this.doc=Lt.empty,this.lineWrapping=!1,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength)),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return OT.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let n=e[i];n<0?i++:this.heightSamples[Math.floor(n*10)]||(t=!0,this.heightSamples[Math.floor(n*10)]=!0)}return t}refresh(e,t,i,n,s){let o=OT.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=t,this.charWidth=i,this.lineLength=n,l){this.heightSamples={};for(let a=0;a<s.length;a++){let h=s[a];h<0?a++:this.heightSamples[Math.floor(h*10)]=!0}}return l}}class Cj{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class ka{constructor(e,t,i,n,s){this.from=e,this.length=t,this.top=i,this.height=n,this.type=s}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new ka(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var ni=function(r){return r[r.ByPos=0]="ByPos",r[r.ByHeight=1]="ByHeight",r[r.ByPosNoHeight=2]="ByPosNoHeight",r}(ni||(ni={}));const Em=.001;class Qr{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>Em&&(e.heightChanged=!0),this.height=t)}replace(e,t,i){return Qr.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,n){let s=this;for(let o=n.length-1;o>=0;o--){let{fromA:l,toA:a,fromB:h,toB:u}=n[o],f=s.lineAt(l,ni.ByPosNoHeight,t,0,0),c=f.to>=a?f:s.lineAt(a,ni.ByPosNoHeight,t,0,0);for(u+=c.to-a,a=c.to;o>0&&f.from<=n[o-1].toA;)l=n[o-1].fromA,h=n[o-1].fromB,o--,l<f.from&&(f=s.lineAt(l,ni.ByPosNoHeight,t,0,0));h+=f.from-l,l=f.from;let d=wS.build(i,e,h,u);s=s.replace(l,a,d)}return s.updateHeight(i,0)}static empty(){return new jr(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,n=0,s=0;for(;;)if(t==i)if(n>s*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),i+=1+l.break,n-=l.size}else if(s>n*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,s-=l.size}else break;else if(n<s){let l=e[t++];l&&(n+=l.size)}else{let l=e[--i];l&&(s+=l.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,i++),new Aj(Qr.of(e.slice(0,t)),o,Qr.of(e.slice(i)))}}Qr.prototype.size=1;class MD extends Qr{constructor(e,t,i){super(e,t),this.type=i}blockAt(e,t,i,n){return new ka(n,this.length,i,this.height,this.type)}lineAt(e,t,i,n,s){return this.blockAt(0,i,n,s)}forEachLine(e,t,i,n,s,o){e<=s+this.length&&t>=s&&o(this.blockAt(0,i,n,s))}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more&&this.setHeight(e,n.heights[n.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class jr extends MD{constructor(e,t){super(e,t,tn.Text),this.collapsed=0,this.widgetHeight=0}replace(e,t,i){let n=i[0];return i.length==1&&(n instanceof jr||n instanceof yn&&n.flags&4)&&Math.abs(this.length-n.length)<10?(n instanceof yn?n=new jr(n.length,this.height):n.height=this.height,this.outdated||(n.outdated=!1),n):Qr.of(i)}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more?this.setHeight(e,n.heights[n.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class yn extends Qr{constructor(e){super(e,0)}lines(e,t){let i=e.lineAt(t).number,n=e.lineAt(t+this.length).number;return{firstLine:i,lastLine:n,lineHeight:this.height/(n-i+1)}}blockAt(e,t,i,n){let{firstLine:s,lastLine:o,lineHeight:l}=this.lines(t,n),a=Math.max(0,Math.min(o-s,Math.floor((e-i)/l))),{from:h,length:u}=t.line(s+a);return new ka(h,u,i+l*a,l,tn.Text)}lineAt(e,t,i,n,s){if(t==ni.ByHeight)return this.blockAt(e,i,n,s);if(t==ni.ByPosNoHeight){let{from:f,to:c}=i.lineAt(e);return new ka(f,c-f,0,0,tn.Text)}let{firstLine:o,lineHeight:l}=this.lines(i,s),{from:a,length:h,number:u}=i.lineAt(e);return new ka(a,h,n+l*(u-o),l,tn.Text)}forEachLine(e,t,i,n,s,o){let{firstLine:l,lineHeight:a}=this.lines(i,s);for(let h=Math.max(e,s),u=Math.min(s+this.length,t);h<=u;){let f=i.lineAt(h);h==e&&(n+=a*(f.number-l)),o(new ka(f.from,f.length,n,a,tn.Text)),n+=a,h=f.to+1}}replace(e,t,i){let n=this.length-t;if(n>0){let s=i[i.length-1];s instanceof yn?i[i.length-1]=new yn(s.length+n):i.push(null,new yn(n-1))}if(e>0){let s=i[0];s instanceof yn?i[0]=new yn(e+s.length):i.unshift(new yn(e-1),null)}return Qr.of(i)}decomposeLeft(e,t){t.push(new yn(e-1),null)}decomposeRight(e,t){t.push(null,new yn(this.length-e-1))}updateHeight(e,t=0,i=!1,n){let s=t+this.length;if(n&&n.from<=t+this.length&&n.more){let o=[],l=Math.max(t,n.from),a=-1,h=e.heightChanged;for(n.from>t&&o.push(new yn(n.from-t-1).updateHeight(e,t));l<=s&&n.more;){let f=e.doc.lineAt(l).length;o.length&&o.push(null);let c=n.heights[n.index++];a==-1?a=c:Math.abs(c-a)>=Em&&(a=-2);let d=new jr(f,c);d.outdated=!1,o.push(d),l+=f+1}l<=s&&o.push(null,new yn(s-l).updateHeight(e,l));let u=Qr.of(o);return e.heightChanged=h||a<0||Math.abs(u.height-this.height)>=Em||Math.abs(a-this.lines(e.doc,t).lineHeight)>=Em,u}else(i||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class Aj extends Qr{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,n){let s=i+this.left.height;return e<s?this.left.blockAt(e,t,i,n):this.right.blockAt(e,t,s,n+this.left.length+this.break)}lineAt(e,t,i,n,s){let o=n+this.left.height,l=s+this.left.length+this.break,a=t==ni.ByHeight?e<o:e<l,h=a?this.left.lineAt(e,t,i,n,s):this.right.lineAt(e,t,i,o,l);if(this.break||(a?h.to<l:h.from>l))return h;let u=t==ni.ByPosNoHeight?ni.ByPosNoHeight:ni.ByPos;return a?h.join(this.right.lineAt(l,u,i,o,l)):this.left.lineAt(l,u,i,n,s).join(h)}forEachLine(e,t,i,n,s,o){let l=n+this.left.height,a=s+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,i,n,s,o),t>=a&&this.right.forEachLine(e,t,i,l,a,o);else{let h=this.lineAt(a,ni.ByPos,i,n,s);e<h.from&&this.left.forEachLine(e,h.from-1,i,n,s,o),h.to>=e&&h.from<=t&&o(h),t>h.to&&this.right.forEachLine(h.to+1,t,i,l,a,o)}}replace(e,t,i){let n=this.left.length+this.break;if(t<n)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-n,t-n,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let l of i)s.push(l);if(e>0&&kT(s,o-1),t<this.length){let l=s.length;this.decomposeRight(t,s),kT(s,l)}return Qr.of(s)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,n=i+this.break;if(e>=n)return this.right.decomposeRight(e-n,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<n&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Qr.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,n){let{left:s,right:o}=this,l=t+s.length+this.break,a=null;return n&&n.from<=t+s.length&&n.more?a=s=s.updateHeight(e,t,i,n):s.updateHeight(e,t,i),n&&n.from<=l+o.length&&n.more?a=o=o.updateHeight(e,l,i,n):o.updateHeight(e,l,i),a?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function kT(r,e){let t,i;r[e]==null&&(t=r[e-1])instanceof yn&&(i=r[e+1])instanceof yn&&r.splice(e-1,3,new yn(t.length+1+i.length))}const Tj=5;class wS{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof jr?n.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new jr(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let n=i.widget?i.widget.estimatedHeight:0;n<0&&(n=this.oracle.lineHeight);let s=t-e;i.block?this.addBlock(new MD(s,n,i.type)):(s||n>=Tj)&&this.addLineDeco(n,s)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new jr(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new yn(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof jr)return e;let t=new jr(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type==tn.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=tn.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let i=this.ensureLine();i.length+=t,i.collapsed+=t,i.widgetHeight=Math.max(i.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof jr)&&!this.isCovered?this.nodes.push(new jr(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let n of this.nodes)n instanceof jr&&n.updateHeight(this.oracle,i),i+=n?n.length:1;return this.nodes}static build(e,t,i,n){let s=new wS(i,e);return Mi.spans(t,i,n,s,0),s.finish(i)}}function Pj(r,e,t){let i=new _j;return Mi.compare(r,e,t,i,0),i.changes}class _j{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,n){(e<t||i&&i.heightRelevant||n&&n.heightRelevant)&&Sv(e,t,this.changes,5)}}function $j(r,e){let t=r.getBoundingClientRect(),i=Math.max(0,t.left),n=Math.min(innerWidth,t.right),s=Math.max(0,t.top),o=Math.min(innerHeight,t.bottom),l=r.ownerDocument.body;for(let a=r.parentNode;a&&a!=l;)if(a.nodeType==1){let h=a,u=window.getComputedStyle(h);if((h.scrollHeight>h.clientHeight||h.scrollWidth>h.clientWidth)&&u.overflow!="visible"){let f=h.getBoundingClientRect();i=Math.max(i,f.left),n=Math.min(n,f.right),s=Math.max(s,f.top),o=Math.min(o,f.bottom)}a=u.position=="absolute"||u.position=="fixed"?h.offsetParent:h.parentNode}else if(a.nodeType==11)a=a.host;else break;return{left:i-t.left,right:Math.max(i,n)-t.left,top:s-(t.top+e),bottom:Math.max(s,o)-(t.top+e)}}function Mj(r,e){let t=r.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class tk{constructor(e,t,i){this.from=e,this.to=t,this.size=i}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let n=e[i],s=t[i];if(n.from!=s.from||n.to!=s.to||n.size!=s.size)return!1}return!0}draw(e){return An.replace({widget:new Rj(this.size,e)}).range(this.from,this.to)}}class Rj extends Vb{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class wT{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.heightOracle=new xj,this.scaler=ST,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Rn.RTL,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.stateDeco=e.facet(Dd).filter(t=>typeof t!="function"),this.heightMap=Qr.empty().applyChanges(this.stateDeco,Lt.empty,this.heightOracle.setDoc(e.doc),[new Ol(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=An.set(this.lineGaps.map(t=>t.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let n=i?t.head:t.anchor;if(!e.some(({from:s,to:o})=>n>=s&&n<=o)){let{from:s,to:o}=this.lineBlockAt(n);e.push(new gg(s,o))}}this.viewports=e.sort((i,n)=>i.from-n.from),this.scaler=this.heightMap.height<=7e6?ST:new Ej(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:Wc(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Dd).filter(h=>typeof h!="function");let n=e.changedRanges,s=Ol.extendWithRanges(n,Pj(i,this.stateDeco,e?e.changes:hn.empty(this.state.doc.length))),o=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=o&&(e.flags|=2);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let a=!e.changes.empty||e.flags&2||l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,this.updateForViewport(),a&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),n=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Rn.RTL:Rn.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),l=o||this.mustMeasureContent||this.contentDOMHeight!=t.clientHeight;this.contentDOMHeight=t.clientHeight,this.mustMeasureContent=!1;let a=0,h=0,u=parseInt(i.paddingTop)||0,f=parseInt(i.paddingBottom)||0;(this.paddingTop!=u||this.paddingBottom!=f)&&(this.paddingTop=u,this.paddingBottom=f,a|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(n.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,a|=8);let c=(this.printing?Mj:$j)(t,this.paddingTop),d=c.top-this.pixelViewport.top,g=c.bottom-this.pixelViewport.bottom;this.pixelViewport=c;let w=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(w!=this.inView&&(this.inView=w,w&&(l=!0)),!this.inView)return 0;let S=t.clientWidth;if((this.contentDOMWidth!=S||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=S,this.editorHeight=e.scrollDOM.clientHeight,a|=8),l){let Q=e.docView.measureVisibleLineHeights(this.viewport);if(n.mustRefreshForHeights(Q)&&(o=!0),o||n.lineWrapping&&Math.abs(S-this.contentDOMWidth)>n.charWidth){let{lineHeight:M,charWidth:p}=e.docView.measureTextSize();o=n.refresh(s,M,p,S/p,Q),o&&(e.docView.minWidth=0,a|=8)}d>0&&g>0?h=Math.max(d,g):d<0&&g<0&&(h=Math.min(d,g)),n.heightChanged=!1;for(let M of this.viewports){let p=M.from==this.viewport.from?Q:e.docView.measureVisibleLineHeights(M);this.heightMap=this.heightMap.updateHeight(n,0,o,new Cj(M.from,p))}n.heightChanged&&(a|=2)}let x=!this.viewportIsAppropriate(this.viewport,h)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return x&&(this.viewport=this.getViewport(h,this.scrollTarget)),this.updateForViewport(),(a&2||x)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps)),a|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),a}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),n=this.heightMap,s=this.state.doc,{visibleTop:o,visibleBottom:l}=this,a=new gg(n.lineAt(o-i*1e3,ni.ByHeight,s,0,0).from,n.lineAt(l+(1-i)*1e3,ni.ByHeight,s,0,0).to);if(t){let{head:h}=t.range;if(h<a.from||h>a.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=n.lineAt(h,ni.ByPos,s,0,0),c;t.y=="center"?c=(f.top+f.bottom)/2-u/2:t.y=="start"||t.y=="nearest"&&h<a.from?c=f.top:c=f.bottom-u,a=new gg(n.lineAt(c-1e3/2,ni.ByHeight,s,0,0).from,n.lineAt(c+u+1e3/2,ni.ByHeight,s,0,0).to)}}return a}mapViewport(e,t){let i=t.mapPos(e.from,-1),n=t.mapPos(e.to,1);return new gg(this.heightMap.lineAt(i,ni.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(n,ni.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:n}=this.heightMap.lineAt(e,ni.ByPos,this.state.doc,0,0),{bottom:s}=this.heightMap.lineAt(t,ni.ByPos,this.state.doc,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||n<=o-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||s>=l+Math.max(10,Math.min(i,250)))&&n>o-2*1e3&&s<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let n of e)t.touchesRange(n.from,n.to)||i.push(new tk(t.mapPos(n.from),t.mapPos(n.to),n.size));return i}ensureLineGaps(e){let t=[];if(this.defaultTextDirection!=Rn.LTR)return t;for(let i of this.viewportLines){if(i.length<4e3)continue;let n=Qj(i.from,i.to,this.stateDeco);if(n.total<4e3)continue;let s,o;if(this.heightOracle.lineWrapping){let h=2e3/this.heightOracle.lineLength*this.heightOracle.lineHeight;s=mg(n,(this.visibleTop-i.top-h)/i.height),o=mg(n,(this.visibleBottom-i.top+h)/i.height)}else{let h=n.total*this.heightOracle.charWidth,u=2e3*this.heightOracle.charWidth;s=mg(n,(this.pixelViewport.left-u)/h),o=mg(n,(this.pixelViewport.right+u)/h)}let l=[];s>i.from&&l.push({from:i.from,to:s}),o<i.to&&l.push({from:o,to:i.to});let a=this.state.selection.main;a.from>=i.from&&a.from<=i.to&&vT(l,a.from-10,a.from+10),!a.empty&&a.to>=i.from&&a.to<=i.to&&vT(l,a.to-10,a.to+10);for(let{from:h,to:u}of l)u-h>1e3&&t.push(Dj(e,f=>f.from>=i.from&&f.to<=i.to&&Math.abs(f.from-h)<1e3&&Math.abs(f.to-u)<1e3)||new tk(h,u,this.gapSize(i,h,u,n)))}return t}gapSize(e,t,i,n){let s=yT(n,i)-yT(n,t);return this.heightOracle.lineWrapping?e.height*s:n.total*this.heightOracle.charWidth*s}updateLineGaps(e){tk.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=An.set(e.map(t=>t.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];Mi.spans(e,this.viewport.from,this.viewport.to,{span(n,s){t.push({from:n,to:s})},point(){}},20);let i=t.length!=this.visibleRanges.length||this.visibleRanges.some((n,s)=>n.from!=t[s].from||n.to!=t[s].to);return this.visibleRanges=t,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Wc(this.heightMap.lineAt(e,ni.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(e){return Wc(this.heightMap.lineAt(this.scaler.fromDOM(e),ni.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(e){return Wc(this.heightMap.blockAt(this.scaler.fromDOM(e),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class gg{constructor(e,t){this.from=e,this.to=t}}function Qj(r,e,t){let i=[],n=r,s=0;return Mi.spans(t,r,e,{span(){},point(o,l){o>n&&(i.push({from:n,to:o}),s+=o-n),n=l}},20),n<e&&(i.push({from:n,to:e}),s+=e-n),{total:s,ranges:i}}function mg({total:r,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(r*t);for(let n=0;;n++){let{from:s,to:o}=e[n],l=o-s;if(i<=l)return s+i;i-=l}}function yT(r,e){let t=0;for(let{from:i,to:n}of r.ranges){if(e<=n){t+=e-i;break}t+=n-i}return t/r.total}function vT(r,e,t){for(let i=0;i<r.length;i++){let n=r[i];if(n.from<t&&n.to>e){let s=[];n.from<e&&s.push({from:n.from,to:e}),n.to>t&&s.push({from:t,to:n.to}),r.splice(i,1,...s),i+=s.length-1}}}function Dj(r,e){for(let t of r)if(e(t))return t}const ST={toDOM(r){return r},fromDOM(r){return r},scale:1};class Ej{constructor(e,t,i){let n=0,s=0,o=0;this.viewports=i.map(({from:l,to:a})=>{let h=t.lineAt(l,ni.ByPos,e,0,0).top,u=t.lineAt(a,ni.ByPos,e,0,0).bottom;return n+=u-h,{from:l,to:a,top:h,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-n)/(t.height-n);for(let l of this.viewports)l.domTop=o+(l.top-s)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),s=l.bottom}toDOM(e){for(let t=0,i=0,n=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return n+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,n=s.domBottom}}fromDOM(e){for(let t=0,i=0,n=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return i+(e-n)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,n=s.domBottom}}}function Wc(r,e){if(e.scale==1)return r;let t=e.toDOM(r.top),i=e.toDOM(r.bottom);return new ka(r.from,r.length,t,i-t,Array.isArray(r.type)?r.type.map(n=>Wc(n,e)):r.type)}const bg=Ot.define({combine:r=>r.join(" ")}),_v=Ot.define({combine:r=>r.indexOf(!0)>-1}),$v=Ct.newName(),RD=Ct.newName(),QD=Ct.newName(),DD={"&light":"."+RD,"&dark":"."+QD};function Mv(r,e,t){return new Ct(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,n=>{if(n=="&")return r;if(!t||!t[n])throw new RangeError(`Unsupported selector: ${n}`);return t[n]}):r+" "+i}})}const Bj=Mv("."+$v,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere"},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#f3f9ff"},"&dark .cm-activeLine":{backgroundColor:"#223039"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},DD),Nj={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},ik=Ne.ie&&Ne.ie_version<=11;class Ij{constructor(e,t,i){this.view=e,this.onChange=t,this.onScrollChanged=i,this.active=!1,this.selectionRange=new zV,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let s of n)this.queue.push(s);(Ne.ie&&Ne.ie_version<=11||Ne.ios&&e.composing)&&n.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),ik&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),window.addEventListener("resize",this.onResize=this.onResize.bind(this)),typeof ResizeObserver=="function"&&(this.resize=new ResizeObserver(()=>{this.view.docView.lastUpdate<Date.now()-75&&this.onResize()}),this.resize.observe(e.scrollDOM)),window.addEventListener("beforeprint",this.onPrint=this.onPrint.bind(this)),this.start(),window.addEventListener("scroll",this.onScroll=this.onScroll.bind(this)),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange(),this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:t}=this,i=this.selectionRange;if(t.state.facet(mp)?t.root.activeElement!=this.dom:!pv(t.dom,i))return;let n=i.anchorNode&&t.docView.nearest(i.anchorNode);n&&n.ignoreEvent(e)||((Ne.ie&&Ne.ie_version<=11||Ne.android&&Ne.chrome)&&!t.state.selection.main.empty&&i.focusNode&&V0(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1))}readSelectionRange(){let{root:e}=this.view,t=W0(e),i=Ne.safari&&e.nodeType==11&&NV()==this.view.contentDOM&&Lj(this.view)||t;return this.selectionRange.eq(i)?!1:(this.selectionRange.setRange(i),this.selectionChanged=!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Nj),ik&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){!this.active||(this.active=!1,this.observer.disconnect(),ik&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){this.delayedAndroidKey||requestAnimationFrame(()=>{let i=this.delayedAndroidKey;this.delayedAndroidKey=null,this.delayedFlush=-1,this.flush()||nd(this.view.contentDOM,i.key,i.keyCode)}),(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t})}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=window.setTimeout(()=>{this.delayedFlush=-1,this.flush()},20))}forceFlush(){this.delayedFlush>=0&&(window.clearTimeout(this.delayedFlush),this.delayedFlush=-1,this.flush())}processRecords(){let e=this.queue;for(let s of this.observer.takeRecords())e.push(s);e.length&&(this.queue=[]);let t=-1,i=-1,n=!1;for(let s of e){let o=this.readMutation(s);!o||(o.typeOver&&(n=!0),t==-1?{from:t,to:i}=o:(t=Math.min(o.from,t),i=Math.max(o.to,i)))}return{from:t,to:i,typeOver:n}}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return;e&&this.readSelectionRange();let{from:t,to:i,typeOver:n}=this.processRecords(),s=this.selectionChanged&&pv(this.dom,this.selectionRange);if(t<0&&!s)return;this.selectionChanged=!1;let o=this.view.state,l=this.onChange(t,i,n);return this.view.state==o&&this.view.update([]),l}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.dirty|=4),e.type=="childList"){let i=xT(t,e.previousSibling||e.target.previousSibling,-1),n=xT(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:n?t.posBefore(n):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resize)===null||i===void 0||i.disconnect();for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResize),window.removeEventListener("beforeprint",this.onPrint),this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout)}}function xT(r,e,t){for(;e;){let i=Di.get(e);if(i&&i.parent==r)return i;let n=e.parentNode;e=n!=r.dom?n:t>0?e.nextSibling:e.previousSibling}return null}function Lj(r){let e=null;function t(a){a.preventDefault(),a.stopImmediatePropagation(),e=a.getTargetRanges()[0]}if(r.contentDOM.addEventListener("beforeinput",t,!0),document.execCommand("indent"),r.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let i=e.startContainer,n=e.startOffset,s=e.endContainer,o=e.endOffset,l=r.docView.domAtPos(r.state.selection.main.anchor);return V0(l.node,l.offset,s,o)&&([i,n,s,o]=[s,o,i,n]),{anchorNode:i,anchorOffset:n,focusNode:s,focusOffset:o}}function zj(r,e,t,i){let n,s,o=r.state.selection.main;if(e>-1){let l=r.docView.domBoundsAround(e,t,0);if(!l||r.state.readOnly)return!1;let{from:a,to:h}=l,u=r.docView.impreciseHead||r.docView.impreciseAnchor?[]:Vj(r),f=new kD(u,r.state);f.readRange(l.startDOM,l.endDOM);let c=o.from,d=null;(r.inputState.lastKeyCode===8&&r.inputState.lastKeyTime>Date.now()-100||Ne.android&&f.text.length<h-a)&&(c=o.to,d="end");let g=Wj(r.state.doc.sliceString(a,h,Oa),f.text,c-a,d);g&&(Ne.chrome&&r.inputState.lastKeyCode==13&&g.toB==g.from+2&&f.text.slice(g.from,g.toB)==Oa+Oa&&g.toB--,n={from:a+g.from,to:a+g.toA,insert:Lt.of(f.text.slice(g.from,g.toB).split(Oa))}),s=jj(u,a)}else if(r.hasFocus||!r.state.facet(mp)){let l=r.observer.selectionRange,{impreciseHead:a,impreciseAnchor:h}=r.docView,u=a&&a.node==l.focusNode&&a.offset==l.focusOffset||!cf(r.contentDOM,l.focusNode)?r.state.selection.main.head:r.docView.posFromDOM(l.focusNode,l.focusOffset),f=h&&h.node==l.anchorNode&&h.offset==l.anchorOffset||!cf(r.contentDOM,l.anchorNode)?r.state.selection.main.anchor:r.docView.posFromDOM(l.anchorNode,l.anchorOffset);(u!=o.head||f!=o.anchor)&&(s=De.single(f,u))}if(!n&&!s)return!1;if(!n&&i&&!o.empty&&s&&s.main.empty?n={from:o.from,to:o.to,insert:r.state.doc.slice(o.from,o.to)}:n&&n.from>=o.from&&n.to<=o.to&&(n.from!=o.from||n.to!=o.to)&&o.to-o.from-(n.to-n.from)<=4?n={from:o.from,to:o.to,insert:r.state.doc.slice(o.from,n.from).append(n.insert).append(r.state.doc.slice(n.to,o.to))}:(Ne.mac||Ne.android)&&n&&n.from==n.to&&n.from==o.head-1&&n.insert.toString()=="."&&(n={from:o.from,to:o.to,insert:Lt.of([" "])}),n){let l=r.state;if(Ne.ios&&r.inputState.flushIOSKey(r)||Ne.android&&(n.from==o.from&&n.to==o.to&&n.insert.length==1&&n.insert.lines==2&&nd(r.contentDOM,"Enter",13)||n.from==o.from-1&&n.to==o.to&&n.insert.length==0&&nd(r.contentDOM,"Backspace",8)||n.from==o.from&&n.to==o.to+1&&n.insert.length==0&&nd(r.contentDOM,"Delete",46)))return!0;let a=n.insert.toString();if(r.state.facet(uD).some(f=>f(r,n.from,n.to,a)))return!0;r.inputState.composing>=0&&r.inputState.composing++;let h;if(n.from>=o.from&&n.to<=o.to&&n.to-n.from>=(o.to-o.from)/3&&(!s||s.main.empty&&s.main.from==n.from+n.insert.length)&&r.inputState.composing<0){let f=o.from<n.from?l.sliceDoc(o.from,n.from):"",c=o.to>n.to?l.sliceDoc(n.to,o.to):"";h=l.replaceSelection(r.state.toText(f+n.insert.sliceString(0,void 0,r.state.lineBreak)+c))}else{let f=l.changes(n),c=s&&!l.selection.main.eq(s.main)&&s.main.to<=f.newLength?s.main:void 0;if(l.selection.ranges.length>1&&r.inputState.composing>=0&&n.to<=o.to&&n.to>=o.to-10){let d=r.state.sliceDoc(n.from,n.to),g=wD(r)||r.state.doc.lineAt(o.head),w=o.to-n.to,S=o.to-o.from;h=l.changeByRange(x=>{if(x.from==o.from&&x.to==o.to)return{changes:f,range:c||x.map(f)};let Q=x.to-w,M=Q-d.length;if(x.to-x.from!=S||r.state.sliceDoc(M,Q)!=d||g&&x.to>=g.from&&x.from<=g.to)return{range:x};let p=l.changes({from:M,to:Q,insert:n.insert}),b=x.to-o.to;return{changes:p,range:c?De.range(Math.max(0,c.anchor+b),Math.max(0,c.head+b)):x.map(p)}})}else h={changes:f,selection:c&&l.selection.replaceRange(c)}}let u="input.type";return r.composing&&(u+=".compose",r.inputState.compositionFirstChange&&(u+=".start",r.inputState.compositionFirstChange=!1)),r.dispatch(h,{scrollIntoView:!0,userEvent:u}),!0}else if(s&&!s.main.eq(o)){let l=!1,a="select";return r.inputState.lastSelectionTime>Date.now()-50&&(r.inputState.lastSelectionOrigin=="select"&&(l=!0),a=r.inputState.lastSelectionOrigin),r.dispatch({selection:s,scrollIntoView:l,userEvent:a}),!0}else return!1}function Wj(r,e,t,i){let n=Math.min(r.length,e.length),s=0;for(;s<n&&r.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==n&&r.length==e.length)return null;let o=r.length,l=e.length;for(;o>0&&l>0&&r.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(i=="end"){let a=Math.max(0,s-Math.min(o,l));t-=o+a-s}return o<s&&r.length<e.length?(s-=t<=s&&t>=o?s-t:0,l=s+(l-o),o=s):l<s&&(s-=t<=s&&t>=l?s-t:0,o=s+(o-l),l=s),{from:s,toA:o,toB:l}}function Vj(r){let e=[];if(r.root.activeElement!=r.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:n,focusOffset:s}=r.observer.selectionRange;return t&&(e.push(new iT(t,i)),(n!=t||s!=i)&&e.push(new iT(n,s))),e}function jj(r,e){if(r.length==0)return null;let t=r[0].pos,i=r.length==2?r[1].pos:t;return t>-1&&i>-1?De.single(t+e,i+e):null}class ci{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(t=>this.update([t])),this.dispatch=this.dispatch.bind(this),this.root=e.root||WV(e.parent)||document,this.viewState=new wT(e.state||oi.create()),this.plugins=this.state.facet(Lc).map(t=>new KO(t));for(let t of this.plugins)t.update(this);this.observer=new Ij(this,(t,i,n)=>zj(this,t,i,n),t=>{this.inputState.runScrollHandlers(this,t),this.observer.intersecting&&this.measure()}),this.inputState=new dj(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new nT(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}dispatch(...e){this._dispatch(e.length==1&&e[0]instanceof Kn?e[0]:this.state.update(...e))}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,n,s=this.state;for(let l of e){if(l.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=l.state}if(this.destroyed){this.viewState.state=s;return}if(this.observer.clear(),s.facet(oi.phrases)!=this.state.facet(oi.phrases))return this.setState(s);n=H0.create(this,s,e);let o=this.viewState.scrollTarget;try{this.updateState=2;for(let l of e){if(o&&(o=o.map(l.changes)),l.scrollIntoView){let{main:a}=l.state.selection;o=new F0(a.empty?a:De.cursor(a.head,a.head>a.anchor?-1:1))}for(let a of l.effects)a.is(eT)&&(o=a.value)}this.viewState.update(n,o),this.bidiCache=q0.update(this.bidiCache,n.changes),n.empty||(this.updatePlugins(n),this.inputState.update(n)),t=this.docView.update(n),this.state.facet(zc)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(l=>l.isUserEvent("select.pointer")))}finally{this.updateState=0}if(n.startState.facet(bg)!=n.state.facet(bg)&&(this.viewState.mustMeasureContent=!0),(t||i||o||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!n.empty)for(let l of this.state.facet(xv))l(n)}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new wT(e),this.plugins=e.facet(Lc).map(i=>new KO(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView=new nT(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Lc),i=e.state.facet(Lc);if(t!=i){let n=[];for(let s of i){let o=t.indexOf(s);if(o<0)n.push(new KO(s));else{let l=this.plugins[o];l.mustUpdate=e,n.push(l)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=n,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let n of this.plugins)n.mustUpdate=e;for(let n=0;n<this.plugins.length;n++)this.plugins[n].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.flush();let t=null;try{for(let i=0;;i++){this.updateState=1;let n=this.viewport,s=this.viewState.measure(this);if(!s&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(i>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let o=[];s&4||([this.measureRequests,o]=[o,this.measureRequests]);let l=o.map(f=>{try{return f.read(this)}catch(c){return Fo(this.state,c),CT}}),a=H0.create(this,this.state,[]),h=!1,u=!1;a.flags|=s,t?t.flags|=s:t=a,this.updateState=2,a.empty||(this.updatePlugins(a),this.inputState.update(a),this.updateAttrs(),h=this.docView.update(a));for(let f=0;f<o.length;f++)if(l[f]!=CT)try{let c=o[f];c.write&&c.write(l[f],this)}catch(c){Fo(this.state,c)}if(this.viewState.scrollTarget&&(this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,u=!0),h&&this.docView.updateSelection(!0),this.viewport.from==n.from&&this.viewport.to==n.to&&!u&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let i of this.state.facet(xv))i(t)}get themeClasses(){return $v+" "+(this.state.facet(_v)?QD:RD)+" "+this.state.facet(bg)}updateAttrs(){let e=AT(this,cD,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(mp)?"true":"false",class:"cm-content",style:`${Ne.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),AT(this,dD,t);let i=this.observer.ignore(()=>{let n=vv(this.contentDOM,this.contentAttrs,t),s=vv(this.dom,this.editorAttrs,e);return n||s});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let n of i.effects)if(n.is(ci.announce)){t&&(this.announceDOM.textContent=""),t=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=n.value}}mountStyles(){this.styleModules=this.state.facet(zc),Ct.mount(this.root,this.styleModules.concat(Bj).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=requestAnimationFrame(()=>this.measure())),e){if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return ek(this,e,hT(this,e,t,i))}moveByGroup(e,t){return ek(this,e,hT(this,e,t,i=>fj(this,e.head,i)))}moveToLineBoundary(e,t,i=!0){return uj(this,e,t,i)}moveVertically(e,t,i){return ek(this,e,cj(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),vD(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let n=this.state.doc.lineAt(e),s=this.bidiSpans(n),o=s[ju.find(s,e-n.from,-1,t)];return zb(i,o.dir==Rn.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(fD)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Fj)return bD(e.length);let t=this.textDirectionAt(e.from);for(let n of this.bidiCache)if(n.from==e.from&&n.dir==t)return n.order;let i=YV(e.text,t);return this.bidiCache.push(new q0(e.from,e.to,t,i)),i}get hasFocus(){var e;return(document.hasFocus()||Ne.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{X5(this.contentDOM),this.docView.updateSelection()})}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return eT.of(new F0(typeof e=="number"?De.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return pf.define(()=>({}),{eventHandlers:e})}static theme(e,t){let i=Ct.newName(),n=[bg.of(i),zc.of(Mv(`.${i}`,e))];return t&&t.dark&&n.push(_v.of(!0)),n}static baseTheme(e){return D5.lowest(zc.of(Mv("."+$v,e,DD)))}}ci.styleModule=zc;ci.inputHandler=uD;ci.perLineTextDirection=fD;ci.exceptionSink=hD;ci.updateListener=xv;ci.editable=mp;ci.mouseSelectionStyle=aD;ci.dragMovesSelection=lD;ci.clickAddsSelectionRange=oD;ci.decorations=Dd;ci.atomicRanges=pD;ci.scrollMargins=gD;ci.darkTheme=_v;ci.contentAttributes=dD;ci.editorAttributes=cD;ci.lineWrapping=ci.contentAttributes.of({class:"cm-lineWrapping"});ci.announce=Ai.define();const Fj=4096,CT={};class q0{constructor(e,t,i,n){this.from=e,this.to=t,this.dir=i,this.order=n}static update(e,t){if(t.empty)return e;let i=[],n=e.length?e[e.length-1].dir:Rn.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==n&&!t.touchesRange(o.from,o.to)&&i.push(new q0(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.order))}return i}}function AT(r,e,t){for(let i=r.state.facet(e),n=i.length-1;n>=0;n--){let s=i[n],o=typeof s=="function"?s(r):s;o&&yv(o,t)}return t}const Hj=Ne.mac?"mac":Ne.windows?"win":Ne.linux?"linux":"key";function qj(r,e){const t=r.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let n,s,o,l;for(let a=0;a<t.length-1;++a){const h=t[a];if(/^(cmd|meta|m)$/i.test(h))l=!0;else if(/^a(lt)?$/i.test(h))n=!0;else if(/^(c|ctrl|control)$/i.test(h))s=!0;else if(/^s(hift)?$/i.test(h))o=!0;else if(/^mod$/i.test(h))e=="mac"?l=!0:s=!0;else throw new Error("Unrecognized modifier name: "+h)}return n&&(i="Alt-"+i),s&&(i="Ctrl-"+i),l&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function nk(r,e,t){return e.altKey&&(r="Alt-"+r),e.ctrlKey&&(r="Ctrl-"+r),e.metaKey&&(r="Meta-"+r),t!==!1&&e.shiftKey&&(r="Shift-"+r),r}const Xj=ci.domEventHandlers({keydown(r,e){return Yj(Zj(e.state),r,e,"editor")}}),ED=Ot.define({enables:Xj}),TT=new WeakMap;function Zj(r){let e=r.facet(ED),t=TT.get(e);return t||TT.set(e,t=Uj(e.reduce((i,n)=>i.concat(n),[]))),t}let na=null;const Gj=4e3;function Uj(r,e=Hj){let t=Object.create(null),i=Object.create(null),n=(o,l)=>{let a=i[o];if(a==null)i[o]=l;else if(a!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,l,a,h)=>{let u=t[o]||(t[o]=Object.create(null)),f=l.split(/ (?!$)/).map(g=>qj(g,e));for(let g=1;g<f.length;g++){let w=f.slice(0,g).join(" ");n(w,!0),u[w]||(u[w]={preventDefault:!0,commands:[S=>{let x=na={view:S,prefix:w,scope:o};return setTimeout(()=>{na==x&&(na=null)},Gj),!0}]})}let c=f.join(" ");n(c,!1);let d=u[c]||(u[c]={preventDefault:!1,commands:[]});d.commands.push(a),h&&(d.preventDefault=!0)};for(let o of r){let l=o[e]||o.key;if(!!l)for(let a of o.scope?o.scope.split(" "):["editor"])s(a,l,o.run,o.preventDefault),o.shift&&s(a,"Shift-"+l,o.shift,o.preventDefault)}return t}function Yj(r,e,t,i){let n=F4(e),s=n.length==1&&n!=" ",o="",l=!1;na&&na.view==t&&na.scope==i&&(o=na.prefix+" ",(l=xD.indexOf(e.keyCode)<0)&&(na=null));let a=f=>{if(f){for(let c of f.commands)if(c(t))return!0;f.preventDefault&&(l=!0)}return!1},h=r[i],u;if(h){if(a(h[o+nk(n,e,!s)]))return!0;if(s&&(e.shiftKey||e.altKey||e.metaKey)&&(u=Pl[e.keyCode])&&u!=n){if(a(h[o+nk(u,e,!0)]))return!0}else if(s&&e.shiftKey&&a(h[o+nk(n,e,!0)]))return!0}return l}const Kj=!Ne.ios,Jj={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};Kj&&(Jj[".cm-line"].caretColor="transparent !important");const rk="-10000px";class eF{constructor(e,t,i){this.facet=t,this.createTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter(n=>n),this.tooltipViews=this.tooltips.map(i)}update(e){let t=e.state.facet(this.facet),i=t.filter(s=>s);if(t===this.input){for(let s of this.tooltipViews)s.update&&s.update(e);return!1}let n=[];for(let s=0;s<i.length;s++){let o=i[s],l=-1;if(!!o){for(let a=0;a<this.tooltips.length;a++){let h=this.tooltips[a];h&&h.create==o.create&&(l=a)}if(l<0)n[s]=this.createTooltipView(o);else{let a=n[s]=this.tooltipViews[l];a.update&&a.update(e)}}}for(let s of this.tooltipViews)n.indexOf(s)<0&&s.dom.remove();return this.input=t,this.tooltips=i,this.tooltipViews=n,!0}}function tF(){return{top:0,left:0,bottom:innerHeight,right:innerWidth}}const sk=Ot.define({combine:r=>{var e,t,i;return{position:Ne.ios?"absolute":((e=r.find(n=>n.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=r.find(n=>n.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=r.find(n=>n.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||tF}}}),BD=pf.fromClass(class{constructor(r){var e;this.view=r,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let t=r.state.facet(sk);this.position=t.position,this.parent=t.parent,this.classes=r.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new eF(r,ND,i=>this.createTooltip(i)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(i=>{Date.now()>this.lastTransaction-50&&i.length>0&&i[i.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),(e=r.dom.ownerDocument.defaultView)===null||e===void 0||e.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let r of this.manager.tooltipViews)this.intersectionObserver.observe(r.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(r){r.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(r);e&&this.observeIntersection();let t=e||r.geometryChanged,i=r.state.facet(sk);if(i.position!=this.position){this.position=i.position;for(let n of this.manager.tooltipViews)n.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let n of this.manager.tooltipViews)this.container.appendChild(n.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(r){let e=r.create(this.view);if(e.dom.classList.add("cm-tooltip"),r.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let t=document.createElement("div");t.className="cm-tooltip-arrow",e.dom.appendChild(t)}return e.dom.style.position=this.position,e.dom.style.top=rk,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var r,e;(r=this.view.dom.ownerDocument.defaultView)===null||r===void 0||r.removeEventListener("resize",this.measureSoon);for(let{dom:t}of this.manager.tooltipViews)t.remove();(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let r=this.view.dom.getBoundingClientRect();return{editor:r,parent:this.parent?this.container.getBoundingClientRect():r,pos:this.manager.tooltips.map((e,t)=>{let i=this.manager.tooltipViews[t];return i.getCoords?i.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(sk).tooltipSpace(this.view)}}writeMeasure(r){let{editor:e,space:t}=r,i=[];for(let n=0;n<this.manager.tooltips.length;n++){let s=this.manager.tooltips[n],o=this.manager.tooltipViews[n],{dom:l}=o,a=r.pos[n],h=r.size[n];if(!a||a.bottom<=Math.max(e.top,t.top)||a.top>=Math.min(e.bottom,t.bottom)||a.right<Math.max(e.left,t.left)-.1||a.left>Math.min(e.right,t.right)+.1){l.style.top=rk;continue}let u=s.arrow?o.dom.querySelector(".cm-tooltip-arrow"):null,f=u?7:0,c=h.right-h.left,d=h.bottom-h.top,g=o.offset||nF,w=this.view.textDirection==Rn.LTR,S=h.width>t.right-t.left?w?t.left:t.right-h.width:w?Math.min(a.left-(u?14:0)+g.x,t.right-c):Math.max(t.left,a.left-c+(u?14:0)-g.x),x=!!s.above;!s.strictSide&&(x?a.top-(h.bottom-h.top)-g.y<t.top:a.bottom+(h.bottom-h.top)+g.y>t.bottom)&&x==t.bottom-a.bottom>a.top-t.top&&(x=!x);let Q=x?a.top-d-f-g.y:a.bottom+f+g.y,M=S+c;if(o.overlap!==!0)for(let p of i)p.left<M&&p.right>S&&p.top<Q+d&&p.bottom>Q&&(Q=x?p.top-d-2-f:p.bottom+f+2);this.position=="absolute"?(l.style.top=Q-r.parent.top+"px",l.style.left=S-r.parent.left+"px"):(l.style.top=Q+"px",l.style.left=S+"px"),u&&(u.style.left=`${a.left+(w?g.x:-g.x)-(S+14-7)}px`),o.overlap!==!0&&i.push({left:S,top:Q,right:M,bottom:Q+d}),l.classList.toggle("cm-tooltip-above",x),l.classList.toggle("cm-tooltip-below",!x),o.positioned&&o.positioned()}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let r of this.manager.tooltipViews)r.dom.style.top=rk}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),iF=ci.baseTheme({".cm-tooltip":{zIndex:100},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:`${7}px`,width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:`${7}px solid transparent`,borderRight:`${7}px solid transparent`},".cm-tooltip-above &":{bottom:`-${7}px`,"&:before":{borderTop:`${7}px solid #bbb`},"&:after":{borderTop:`${7}px solid #f5f5f5`,bottom:"1px"}},".cm-tooltip-below &":{top:`-${7}px`,"&:before":{borderBottom:`${7}px solid #bbb`},"&:after":{borderBottom:`${7}px solid #f5f5f5`,top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),nF={x:0,y:0},ND=Ot.define({enables:[BD,iF]});function rF(r,e){let t=r.plugin(BD);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}class gf extends zh{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}gf.prototype.elementClass="";gf.prototype.toDOM=void 0;gf.prototype.mapMode=Tr.TrackBefore;gf.prototype.startSide=gf.prototype.endSide=-1;gf.prototype.point=!0;class ID{constructor(e,t,i){this.state=e,this.pos=t,this.explicit=i,this.abortListeners=[]}tokenBefore(e){let t=ns(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),n=t.text.slice(i-t.from,this.pos-t.from),s=n.search(LD(e,!1));return s<0?null:{from:i+s,to:this.pos,text:n.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,t){e=="abort"&&this.abortListeners&&this.abortListeners.push(t)}}function PT(r){let e=Object.keys(r).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function sF(r){let e=Object.create(null),t=Object.create(null);for(let{label:n}of r){e[n[0]]=!0;for(let s=1;s<n.length;s++)t[n[s]]=!0}let i=PT(e)+PT(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function oF(r){let e=r.map(n=>typeof n=="string"?{label:n}:n),[t,i]=e.every(n=>/^\w+$/.test(n.label))?[/\w*$/,/\w+$/]:sF(e);return n=>{let s=n.matchBefore(i);return s||n.explicit?{from:s?s.from:n.pos,options:e,validFor:t}:null}}class _T{constructor(e,t,i){this.completion=e,this.source=t,this.match=i}}function Qa(r){return r.selection.main.head}function LD(r,e){var t;let{source:i}=r,n=e&&i[0]!="^",s=i[i.length-1]!="$";return!n&&!s?r:new RegExp(`${n?"^":""}(?:${i})${s?"$":""}`,(t=r.flags)!==null&&t!==void 0?t:r.ignoreCase?"i":"")}function lF(r,e,t,i){return Object.assign(Object.assign({},r.changeByRange(n=>{if(n==r.selection.main)return{changes:{from:t,to:i,insert:e},range:De.cursor(t+e.length)};let s=i-t;return!n.empty||s&&r.sliceDoc(n.from-s,n.from)!=r.sliceDoc(t,i)?{range:n}:{changes:{from:n.from-s,to:n.from,insert:e},range:De.cursor(n.from-s+e.length)}})),{userEvent:"input.complete"})}function zD(r,e){const t=e.completion.apply||e.completion.label;let i=e.source;typeof t=="string"?r.dispatch(lF(r.state,t,i.from,i.to)):t(r,e.completion,i.from,i.to)}const $T=new WeakMap;function aF(r){if(!Array.isArray(r))return r;let e=$T.get(r);return e||$T.set(r,e=oF(r)),e}class hF{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let i=Cr(e,t),n=Ps(i);this.chars.push(i);let s=e.slice(t,t+n),o=s.toUpperCase();this.folded.push(Cr(o==s?s.toLowerCase():o,0)),t+=n}this.astral=e.length!=this.chars.length}match(e){if(this.pattern.length==0)return[0];if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:n,precise:s,byWord:o}=this;if(t.length==1){let Q=Cr(e,0);return Q==t[0]?[0,0,Ps(Q)]:Q==i[0]?[-200,0,Ps(Q)]:null}let l=e.indexOf(this.pattern);if(l==0)return[0,0,this.pattern.length];let a=t.length,h=0;if(l<0){for(let Q=0,M=Math.min(e.length,200);Q<M&&h<a;){let p=Cr(e,Q);(p==t[h]||p==i[h])&&(n[h++]=Q),Q+=Ps(p)}if(h<a)return null}let u=0,f=0,c=!1,d=0,g=-1,w=-1,S=/[a-z]/.test(e),x=!0;for(let Q=0,M=Math.min(e.length,200),p=0;Q<M&&f<a;){let b=Cr(e,Q);l<0&&(u<a&&b==t[u]&&(s[u++]=Q),d<a&&(b==t[d]||b==i[d]?(d==0&&(g=Q),w=Q+1,d++):d=0));let m,k=b<255?b>=48&&b<=57||b>=97&&b<=122?2:b>=65&&b<=90?1:0:(m=M5(b))!=m.toLowerCase()?1:m!=m.toUpperCase()?2:0;(!Q||k==1&&S||p==0&&k!=0)&&(t[f]==b||i[f]==b&&(c=!0)?o[f++]=Q:o.length&&(x=!1)),p=k,Q+=Ps(b)}return f==a&&o[0]==0&&x?this.result(-100+(c?-200:0),o,e):d==a&&g==0?[-200-e.length,0,w]:l>-1?[-700-e.length,l,l+this.pattern.length]:d==a?[-200+-700-e.length,g,w]:f==a?this.result(-100+(c?-200:0)+-700+(x?0:-1100),o,e):t.length==2?null:this.result((n[0]?-700:0)+-200+-1100,n,e)}result(e,t,i){let n=[e-i.length],s=1;for(let o of t){let l=o+(this.astral?Ps(Cr(i,o)):1);s>1&&n[s-1]==o?n[s-1]=l:(n[s++]=o,n[s++]=l)}return n}}const ja=Ot.define({combine(r){return DV(r,{activateOnTyping:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[]},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,optionClass:(e,t)=>i=>uF(e(i),t(i)),addToOptions:(e,t)=>e.concat(t)})}});function uF(r,e){return r?e?r+" "+e:r:e}function fF(r){let e=r.addToOptions.slice();return r.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(n=>"cm-completionIcon-"+n)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,n){let s=document.createElement("span");s.className="cm-completionLabel";let{label:o}=t,l=0;for(let a=1;a<n.length;){let h=n[a++],u=n[a++];h>l&&s.appendChild(document.createTextNode(o.slice(l,h)));let f=s.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(o.slice(h,u))),f.className="cm-completionMatchedText",l=u}return l<o.length&&s.appendChild(document.createTextNode(o.slice(l))),s},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function MT(r,e,t){if(r<=t)return{from:0,to:r};if(e<=r>>1){let n=Math.floor(e/t);return{from:n*t,to:(n+1)*t}}let i=Math.floor((r-e)/t);return{from:r-(i+1)*t,to:r-i*t}}class cF{constructor(e,t){this.view=e,this.stateField=t,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:l=>this.positionInfo(l),key:this};let i=e.state.field(t),{options:n,selected:s}=i.open,o=e.state.facet(ja);this.optionContent=fF(o),this.optionClass=o.optionClass,this.range=MT(n.length,s,o.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",l=>{for(let a=l.target,h;a&&a!=this.dom;a=a.parentNode)if(a.nodeName=="LI"&&(h=/-(\d+)$/.exec(a.id))&&+h[1]<n.length){zD(e,n[+h[1]]),l.preventDefault();return}}),this.list=this.dom.appendChild(this.createListBox(n,i.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(e){e.state.field(this.stateField)!=e.startState.field(this.stateField)&&this.updateSel()}positioned(){this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=MT(t.options.length,t.selected,this.view.state.facet(ja).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(t.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:i}=t.options[t.selected],{info:n}=i;if(!n)return;let s=typeof n=="string"?document.createTextNode(n):n(i);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o)}).catch(o=>Fo(this.view.state,o,"completion info")):this.addInfoPane(s)}}addInfoPane(e){let t=this.info=document.createElement("div");t.className="cm-tooltip cm-completionInfo",t.appendChild(e),this.dom.appendChild(t),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,n=this.range.from;i;i=i.nextSibling,n++)n==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return t&&pF(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),n=e.getBoundingClientRect();if(n.top>Math.min(innerHeight,t.bottom)-10||n.bottom<Math.max(0,t.top)+10)return null;let s=Math.max(0,Math.min(n.top,innerHeight-i.height))-t.top,o=this.view.textDirection==Rn.RTL,l=t.left,a=innerWidth-t.right;return o&&l<Math.min(i.width,a)?o=!1:!o&&a<Math.min(i.width,l)&&(o=!0),{top:s,left:o}}positionInfo(e){this.info&&(this.info.style.top=(e?e.top:-1e6)+"px",e&&(this.info.classList.toggle("cm-completionInfo-left",e.left),this.info.classList.toggle("cm-completionInfo-right",!e.left)))}createListBox(e,t,i){const n=document.createElement("ul");n.id=t,n.setAttribute("role","listbox"),n.setAttribute("aria-expanded","true"),n.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let s=i.from;s<i.to;s++){let{completion:o,match:l}=e[s];const a=n.appendChild(document.createElement("li"));a.id=t+"-"+s,a.setAttribute("role","option");let h=this.optionClass(o);h&&(a.className=h);for(let u of this.optionContent){let f=u(o,this.view.state,l);f&&a.appendChild(f)}}return i.from&&n.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&n.classList.add("cm-completionListIncompleteBottom"),n}}function dF(r){return e=>new cF(e,r)}function pF(r,e){let t=r.getBoundingClientRect(),i=e.getBoundingClientRect();i.top<t.top?r.scrollTop-=t.top-i.top:i.bottom>t.bottom&&(r.scrollTop+=i.bottom-t.bottom)}function RT(r){return(r.boost||0)*100+(r.apply?10:0)+(r.info?5:0)+(r.type?1:0)}function gF(r,e){let t=[],i=0;for(let o of r)if(o.hasResult())if(o.result.filter===!1){let l=o.result.getMatch;for(let a of o.result.options){let h=[1e9-i++];if(l)for(let u of l(a))h.push(u);t.push(new _T(a,o,h))}}else{let l=new hF(e.sliceDoc(o.from,o.to)),a;for(let h of o.result.options)(a=l.match(h.label))&&(h.boost!=null&&(a[0]+=h.boost),t.push(new _T(h,o,a)))}let n=[],s=null;for(let o of t.sort(kF))!s||s.label!=o.completion.label||s.detail!=o.completion.detail||s.type!=null&&o.completion.type!=null&&s.type!=o.completion.type||s.apply!=o.completion.apply?n.push(o):RT(o.completion)>RT(s)&&(n[n.length-1]=o),s=o.completion;return n}class rd{constructor(e,t,i,n,s){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=n,this.selected=s}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new rd(this.options,QT(t,e),this.tooltip,this.timestamp,e)}static build(e,t,i,n,s){let o=gF(e,t);if(!o.length)return null;let l=0;if(n&&n.selected){let a=n.options[n.selected].completion;for(let h=0;h<o.length;h++)if(o[h].completion==a){l=h;break}}return new rd(o,QT(i,l),{pos:e.reduce((a,h)=>h.hasResult()?Math.min(a,h.from):a,1e8),create:dF(ss),above:s.aboveCursor},n?n.timestamp:Date.now(),l)}map(e){return new rd(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected)}}class X0{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new X0(OF,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(ja),s=(i.override||t.languageDataAt("autocomplete",Qa(t)).map(aF)).map(l=>(this.active.find(h=>h.source==l)||new Ar(l,this.active.some(h=>h.state!=0)?1:0)).update(e,i));s.length==this.active.length&&s.every((l,a)=>l==this.active[a])&&(s=this.active);let o=e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!mF(s,this.active)?rd.build(s,t,this.id,this.open,i):this.open&&e.docChanged?this.open.map(e.changes):this.open;!o&&s.every(l=>l.state!=1)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new Ar(l.source,0):l));for(let l of e.effects)l.is(VD)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new X0(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:bF}}function mF(r,e){if(r==e)return!0;for(let t=0,i=0;;){for(;t<r.length&&!r[t].hasResult;)t++;for(;i<e.length&&!e[i].hasResult;)i++;let n=t==r.length,s=i==e.length;if(n||s)return n==s;if(r[t++].result!=e[i++].result)return!1}}const bF={"aria-autocomplete":"list"};function QT(r,e){return{"aria-autocomplete":"list","aria-haspopup":"listbox","aria-activedescendant":r+"-"+e,"aria-controls":r}}const OF=[];function kF(r,e){let t=e.match[0]-r.match[0];return t||r.completion.label.localeCompare(e.completion.label)}function Rv(r){return r.isUserEvent("input.type")?"input":r.isUserEvent("delete.backward")?"delete":null}class Ar{constructor(e,t,i=-1){this.source=e,this.state=t,this.explicitPos=i}hasResult(){return!1}update(e,t){let i=Rv(e),n=this;i?n=n.handleUserEvent(e,i,t):e.docChanged?n=n.handleChange(e):e.selection&&n.state!=0&&(n=new Ar(n.source,0));for(let s of e.effects)if(s.is(yS))n=new Ar(n.source,1,s.value?Qa(e.state):-1);else if(s.is(Z0))n=new Ar(n.source,0);else if(s.is(WD))for(let o of s.value)o.source==n.source&&(n=o);return n}handleUserEvent(e,t,i){return t=="delete"||!i.activateOnTyping?this.map(e.changes):new Ar(this.source,1)}handleChange(e){return e.changes.touchesRange(Qa(e.startState))?new Ar(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Ar(this.source,this.state,e.mapPos(this.explicitPos))}}class sd extends Ar{constructor(e,t,i,n,s){super(e,2,t),this.result=i,this.from=n,this.to=s}hasResult(){return!0}handleUserEvent(e,t,i){var n;let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),l=Qa(e.state);if((this.explicitPos<0?l<=s:l<this.from)||l>o||t=="delete"&&Qa(e.startState)==this.from)return new Ar(this.source,t=="input"&&i.activateOnTyping?1:0);let a=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),h;return wF(this.result.validFor,e.state,s,o)?new sd(this.source,a,this.result,s,o):this.result.update&&(h=this.result.update(this.result,s,o,new ID(e.state,l,a>=0)))?new sd(this.source,a,h,h.from,(n=h.to)!==null&&n!==void 0?n:Qa(e.state)):new Ar(this.source,1,a)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Ar(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new sd(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function wF(r,e,t,i){if(!r)return!1;let n=e.sliceDoc(t,i);return typeof r=="function"?r(n,t,i,e):LD(r,!0).test(n)}const yS=Ai.define(),Z0=Ai.define(),WD=Ai.define({map(r,e){return r.map(t=>t.map(e))}}),VD=Ai.define(),ss=Za.define({create(){return X0.start()},update(r,e){return r.update(e)},provide:r=>[ND.from(r,e=>e.tooltip),ci.contentAttributes.from(r,e=>e.attrs)]}),jD=75;function Og(r,e="option"){return t=>{let i=t.state.field(ss,!1);if(!i||!i.open||Date.now()-i.open.timestamp<jD)return!1;let n=1,s;e=="page"&&(s=rF(t,i.open.tooltip))&&(n=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let o=i.open.selected+n*(r?1:-1),{length:l}=i.open.options;return o<0?o=e=="page"?0:l-1:o>=l&&(o=e=="page"?l-1:0),t.dispatch({effects:VD.of(o)}),!0}}const yF=r=>{let e=r.state.field(ss,!1);return r.state.readOnly||!e||!e.open||Date.now()-e.open.timestamp<jD?!1:(zD(r,e.open.options[e.open.selected]),!0)},vF=r=>r.state.field(ss,!1)?(r.dispatch({effects:yS.of(!0)}),!0):!1,SF=r=>{let e=r.state.field(ss,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(r.dispatch({effects:Z0.of(null)}),!0)};class xF{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const DT=50,CF=50,AF=1e3,TF=pf.fromClass(class{constructor(r){this.view=r,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of r.state.field(ss).active)e.state==1&&this.startQuery(e)}update(r){let e=r.state.field(ss);if(!r.selectionSet&&!r.docChanged&&r.startState.field(ss)==e)return;let t=r.transactions.some(i=>(i.selection||i.docChanged)&&!Rv(i));for(let i=0;i<this.running.length;i++){let n=this.running[i];if(t||n.updates.length+r.transactions.length>CF&&Date.now()-n.time>AF){for(let s of n.context.abortListeners)try{s()}catch(o){Fo(this.view.state,o)}n.context.abortListeners=null,this.running.splice(i--,1)}else n.updates.push(...r.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(i=>i.state==1&&!this.running.some(n=>n.active.source==i.source))?setTimeout(()=>this.startUpdate(),DT):-1,this.composing!=0)for(let i of r.transactions)Rv(i)=="input"?this.composing=2:this.composing==2&&i.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:r}=this.view,e=r.field(ss);for(let t of e.active)t.state==1&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t)}startQuery(r){let{state:e}=this.view,t=Qa(e),i=new ID(e,t,r.explicitPos==t),n=new xF(r,i);this.running.push(n),Promise.resolve(r.source(i)).then(s=>{n.context.aborted||(n.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:Z0.of(null)}),Fo(this.view.state,s)})}scheduleAccept(){this.running.every(r=>r.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),DT))}accept(){var r;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(ja);for(let i=0;i<this.running.length;i++){let n=this.running[i];if(n.done===void 0)continue;if(this.running.splice(i--,1),n.done){let o=new sd(n.active.source,n.active.explicitPos,n.done,n.done.from,(r=n.done.to)!==null&&r!==void 0?r:Qa(n.updates.length?n.updates[0].startState:this.view.state));for(let l of n.updates)o=o.update(l,t);if(o.hasResult()){e.push(o);continue}}let s=this.view.state.field(ss).active.find(o=>o.source==n.active.source);if(s&&s.state==1)if(n.done==null){let o=new Ar(n.active.source,0);for(let l of n.updates)o=o.update(l,t);o.state!=1&&e.push(o)}else this.startQuery(s)}e.length&&this.view.dispatch({effects:WD.of(e)})}},{eventHandlers:{blur(){let r=this.view.state.field(ss,!1);r&&r.tooltip&&this.view.state.facet(ja).closeOnBlur&&this.view.dispatch({effects:Z0.of(null)})},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:yS.of(!1)}),20),this.composing=0}}}),PF=ci.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"300px"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),G0={brackets:["(","[","{","'",'"'],before:")]}:;>"},kh=Ai.define({map(r,e){let t=e.mapPos(r,-1,Tr.TrackAfter);return t==null?void 0:t}}),vS=Ai.define({map(r,e){return e.mapPos(r)}}),SS=new class extends zh{};SS.startSide=1;SS.endSide=-1;const FD=Za.define({create(){return Mi.empty},update(r,e){if(e.selection){let t=e.state.doc.lineAt(e.selection.main.head).from,i=e.startState.doc.lineAt(e.startState.selection.main.head).from;t!=e.changes.mapPos(i,-1)&&(r=Mi.empty)}r=r.map(e.changes);for(let t of e.effects)t.is(kh)?r=r.update({add:[SS.range(t.value,t.value+1)]}):t.is(vS)&&(r=r.update({filter:i=>i!=t.value}));return r}});function _F(){return[MF,FD]}const ok="()[]{}<>";function HD(r){for(let e=0;e<ok.length;e+=2)if(ok.charCodeAt(e)==r)return ok.charAt(e+1);return M5(r<128?r:r+1)}function qD(r,e){return r.languageDataAt("closeBrackets",e)[0]||G0}const $F=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),MF=ci.inputHandler.of((r,e,t,i)=>{if(($F?r.composing:r.compositionStarted)||r.state.readOnly)return!1;let n=r.state.selection.main;if(i.length>2||i.length==2&&Ps(Cr(i,0))==1||e!=n.from||t!=n.to)return!1;let s=DF(r.state,i);return s?(r.dispatch(s),!0):!1}),RF=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let i=qD(r,r.selection.main.head).brackets||G0.brackets,n=null,s=r.changeByRange(o=>{if(o.empty){let l=EF(r.doc,o.head);for(let a of i)if(a==l&&Fb(r.doc,o.head)==HD(Cr(a,0)))return{changes:{from:o.head-a.length,to:o.head+a.length},range:De.cursor(o.head-a.length),userEvent:"delete.backward"}}return{range:n=o}});return n||e(r.update(s,{scrollIntoView:!0})),!n},QF=[{key:"Backspace",run:RF}];function DF(r,e){let t=qD(r,r.selection.main.head),i=t.brackets||G0.brackets;for(let n of i){let s=HD(Cr(n,0));if(e==n)return s==n?IF(r,n,i.indexOf(n+n+n)>-1):BF(r,n,s,t.before||G0.before);if(e==s&&XD(r,r.selection.main.from))return NF(r,n,s)}return null}function XD(r,e){let t=!1;return r.field(FD).between(0,r.doc.length,i=>{i==e&&(t=!0)}),t}function Fb(r,e){let t=r.sliceString(e,e+2);return t.slice(0,Ps(Cr(t,0)))}function EF(r,e){let t=r.sliceString(e-2,e);return Ps(Cr(t,0))==t.length?t:t.slice(1)}function BF(r,e,t,i){let n=null,s=r.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:kh.of(o.to+e.length),range:De.range(o.anchor+e.length,o.head+e.length)};let l=Fb(r.doc,o.head);return!l||/\s/.test(l)||i.indexOf(l)>-1?{changes:{insert:e+t,from:o.head},effects:kh.of(o.head+e.length),range:De.cursor(o.head+e.length)}:{range:n=o}});return n?null:r.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function NF(r,e,t){let i=null,n=r.selection.ranges.map(s=>s.empty&&Fb(r.doc,s.head)==t?De.cursor(s.head+t.length):i=s);return i?null:r.update({selection:De.create(n,r.selection.mainIndex),scrollIntoView:!0,effects:r.selection.ranges.map(({from:s})=>vS.of(s))})}function IF(r,e,t){let i=null,n=r.changeByRange(s=>{if(!s.empty)return{changes:[{insert:e,from:s.from},{insert:e,from:s.to}],effects:kh.of(s.to+e.length),range:De.range(s.anchor+e.length,s.head+e.length)};let o=s.head,l=Fb(r.doc,o);if(l==e){if(ET(r,o))return{changes:{insert:e+e,from:o},effects:kh.of(o+e.length),range:De.cursor(o+e.length)};if(XD(r,o)){let a=t&&r.sliceDoc(o,o+e.length*3)==e+e+e;return{range:De.cursor(o+e.length*(a?3:1)),effects:vS.of(o)}}}else{if(t&&r.sliceDoc(o-2*e.length,o)==e+e&&ET(r,o-2*e.length))return{changes:{insert:e+e+e+e,from:o},effects:kh.of(o+e.length),range:De.cursor(o+e.length)};if(r.charCategorizer(o)(l)!=Ms.Word){let a=r.sliceDoc(o-1,o);if(a!=e&&r.charCategorizer(o)(a)!=Ms.Word&&!LF(r,o,e))return{changes:{insert:e+e,from:o},effects:kh.of(o+e.length),range:De.cursor(o+e.length)}}}return{range:i=s}});return i?null:r.update(n,{scrollIntoView:!0,userEvent:"input.type"})}function ET(r,e){let t=ns(r).resolveInner(e+1);return t.parent&&t.from==e}function LF(r,e,t){let i=ns(r).resolveInner(e,-1);for(let n=0;n<5;n++){if(r.sliceDoc(i.from,i.from+t.length)==t)return!0;let s=i.to==e&&i.parent;if(!s)break;i=s}return!1}function zF(r={}){return[ss,ja.of(r),TF,WF,PF]}const ZD=[{key:"Ctrl-Space",run:vF},{key:"Escape",run:SF},{key:"ArrowDown",run:Og(!0)},{key:"ArrowUp",run:Og(!1)},{key:"PageDown",run:Og(!0,"page")},{key:"PageUp",run:Og(!1,"page")},{key:"Enter",run:yF}],WF=D5.highest(ED.computeN([ja],r=>r.facet(ja).defaultKeymap?[ZD]:[]));class zt{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){let n=[];return this.decompose(0,e,n,2),i.length&&i.decompose(0,i.length,n,3),this.decompose(t,this.length,n,1),Eo.from(n,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let i=[];return this.decompose(e,t,i,0),Eo.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),n=new od(this),s=new od(e);for(let o=t,l=t;;){if(n.next(o),s.next(o),o=0,n.lineBreak!=s.lineBreak||n.done!=s.done||n.value!=s.value)return!1;if(l+=n.value.length,n.done||l>=i)return!0}}iter(e=1){return new od(this,e)}iterRange(e,t=this.length){return new GD(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let n=this.line(e).from;i=this.iterRange(n,Math.max(n,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new UD(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?zt.empty:e.length<=32?new zi(e):Eo.from(zi.split(e,[]))}}class zi extends zt{constructor(e,t=VF(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,n){for(let s=0;;s++){let o=this.text[s],l=n+o.length;if((t?i:l)>=e)return new jF(n,l,i,o);n=l+1,i++}}decompose(e,t,i,n){let s=e<=0&&t>=this.length?this:new zi(BT(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(n&1){let o=i.pop(),l=Bm(s.text,o.text.slice(),0,s.length);if(l.length<=32)i.push(new zi(l,o.length+s.length));else{let a=l.length>>1;i.push(new zi(l.slice(0,a)),new zi(l.slice(a)))}}else i.push(s)}replace(e,t,i){if(!(i instanceof zi))return super.replace(e,t,i);let n=Bm(this.text,Bm(i.text,BT(this.text,0,e)),t),s=this.length+i.length-(t-e);return n.length<=32?new zi(n,s):Eo.from(zi.split(n,[]),s)}sliceString(e,t=this.length,i=`
`){let n="";for(let s=0,o=0;s<=t&&o<this.text.length;o++){let l=this.text[o],a=s+l.length;s>e&&o&&(n+=i),e<a&&t>s&&(n+=l.slice(Math.max(0,e-s),t-s)),s=a+1}return n}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],n=-1;for(let s of e)i.push(s),n+=s.length+1,i.length==32&&(t.push(new zi(i,n)),i=[],n=-1);return n>-1&&t.push(new zi(i,n)),t}}class Eo extends zt{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,n){for(let s=0;;s++){let o=this.children[s],l=n+o.length,a=i+o.lines-1;if((t?a:l)>=e)return o.lineInner(e,t,i,n);n=l+1,i=a+1}}decompose(e,t,i,n){for(let s=0,o=0;o<=t&&s<this.children.length;s++){let l=this.children[s],a=o+l.length;if(e<=a&&t>=o){let h=n&((o<=e?1:0)|(a>=t?2:0));o>=e&&a<=t&&!h?i.push(l):l.decompose(e-o,t-o,i,h)}o=a+1}}replace(e,t,i){if(i.lines<this.lines)for(let n=0,s=0;n<this.children.length;n++){let o=this.children[n],l=s+o.length;if(e>=s&&t<=l){let a=o.replace(e-s,t-s,i),h=this.lines-o.lines+a.lines;if(a.lines<h>>5-1&&a.lines>h>>5+1){let u=this.children.slice();return u[n]=a,new Eo(u,this.length-(t-e)+i.length)}return super.replace(s,l,a)}s=l+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){let n="";for(let s=0,o=0;s<this.children.length&&o<=t;s++){let l=this.children[s],a=o+l.length;o>e&&s&&(n+=i),e<a&&t>o&&(n+=l.sliceString(e-o,t-o,i)),o=a+1}return n}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Eo))return 0;let i=0,[n,s,o,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;n+=t,s+=t){if(n==o||s==l)return i;let a=this.children[n],h=e.children[s];if(a!=h)return i+a.scanIdentical(h,t);i+=a.length+1}}static from(e,t=e.reduce((i,n)=>i+n.length+1,-1)){let i=0;for(let d of e)i+=d.lines;if(i<32){let d=[];for(let g of e)g.flatten(d);return new zi(d,t)}let n=Math.max(32,i>>5),s=n<<1,o=n>>1,l=[],a=0,h=-1,u=[];function f(d){let g;if(d.lines>s&&d instanceof Eo)for(let w of d.children)f(w);else d.lines>o&&(a>o||!a)?(c(),l.push(d)):d instanceof zi&&a&&(g=u[u.length-1])instanceof zi&&d.lines+g.lines<=32?(a+=d.lines,h+=d.length+1,u[u.length-1]=new zi(g.text.concat(d.text),g.length+1+d.length)):(a+d.lines>n&&c(),a+=d.lines,h+=d.length+1,u.push(d))}function c(){a!=0&&(l.push(u.length==1?u[0]:Eo.from(u,h)),h=-1,a=u.length=0)}for(let d of e)f(d);return c(),l.length==1?l[0]:new Eo(l,t)}}zt.empty=new zi([""],0);function VF(r){let e=-1;for(let t of r)e+=t.length+1;return e}function Bm(r,e,t=0,i=1e9){for(let n=0,s=0,o=!0;s<r.length&&n<=i;s++){let l=r[s],a=n+l.length;a>=t&&(a>i&&(l=l.slice(0,i-n)),n<t&&(l=l.slice(t-n)),o?(e[e.length-1]+=l,o=!1):e.push(l)),n=a+1}return e}function BT(r,e,t){return Bm(r,[""],e,t)}class od{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof zi?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,n=this.nodes[i],s=this.offsets[i],o=s>>1,l=n instanceof zi?n.text.length:n.children.length;if(o==(t>0?l:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(n instanceof zi){let a=n.text[o+(t<0?-1:0)];if(this.offsets[i]+=t,a.length>Math.max(0,e))return this.value=e==0?a:t>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=n.children[o+(t<0?-1:0)];e>a.length?(e-=a.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(a),this.offsets.push(t>0?1:(a instanceof zi?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class GD{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new od(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:n}=this.cursor.next(e);return this.pos+=(n.length+e)*t,this.value=n.length<=i?n:t<0?n.slice(n.length-i):n.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class UD{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:n}=this.inner.next(e);return t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=n,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol!="undefined"&&(zt.prototype[Symbol.iterator]=function(){return this.iter()},od.prototype[Symbol.iterator]=GD.prototype[Symbol.iterator]=UD.prototype[Symbol.iterator]=function(){return this});class jF{constructor(e,t,i,n){this.from=e,this.to=t,this.number=i,this.text=n}get length(){return this.to-this.from}}let Fu="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(r=>r?parseInt(r,36):1);for(let r=1;r<Fu.length;r++)Fu[r]+=Fu[r-1];function FF(r){for(let e=1;e<Fu.length;e+=2)if(Fu[e]>r)return Fu[e-1]<=r;return!1}function NT(r){return r>=127462&&r<=127487}const IT=8205;function wa(r,e,t=!0,i=!0){return(t?YD:HF)(r,e,i)}function YD(r,e,t){if(e==r.length)return e;e&&KD(r.charCodeAt(e))&&JD(r.charCodeAt(e-1))&&e--;let i=lk(r,e);for(e+=LT(i);e<r.length;){let n=lk(r,e);if(i==IT||n==IT||t&&FF(n))e+=LT(n),i=n;else if(NT(n)){let s=0,o=e-2;for(;o>=0&&NT(lk(r,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function HF(r,e,t){for(;e>0;){let i=YD(r,e-2,t);if(i<e)return i;e--}return 0}function KD(r){return r>=56320&&r<57344}function JD(r){return r>=55296&&r<56320}function lk(r,e){let t=r.charCodeAt(e);if(!JD(t)||e+1==r.length)return t;let i=r.charCodeAt(e+1);return KD(i)?(t-55296<<10)+(i-56320)+65536:t}function LT(r){return r<65536?1:2}const Qv=/\r\n?|\n/;var Pr=function(r){return r[r.Simple=0]="Simple",r[r.TrackDel=1]="TrackDel",r[r.TrackBefore=2]="TrackBefore",r[r.TrackAfter=3]="TrackAfter",r}(Pr||(Pr={}));class kl{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,n=0;t<this.sections.length;){let s=this.sections[t++],o=this.sections[t++];o<0?(e(i,n,s),n+=s):n+=o,i+=s}}iterChangedRanges(e,t=!1){Dv(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];n<0?e.push(i,n):e.push(n,i)}return new kl(e)}composeDesc(e){return this.empty?e:e.empty?this:eE(this,e)}mapDesc(e,t=!1){return e.empty?this:Ev(this,e,t)}mapPos(e,t=-1,i=Pr.Simple){let n=0,s=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],h=n+l;if(a<0){if(h>e)return s+(e-n);s+=l}else{if(i!=Pr.Simple&&h>=e&&(i==Pr.TrackDel&&n<e&&h>e||i==Pr.TrackBefore&&n<e||i==Pr.TrackAfter&&h>e))return null;if(h>e||h==e&&t<0&&!l)return e==n||t<0?s:s+a;s+=a}n=h}if(e>n)throw new RangeError(`Position ${e} is out of range for changeset of length ${n}`);return s}touchesRange(e,t=e){for(let i=0,n=0;i<this.sections.length&&n<=t;){let s=this.sections[i++],o=this.sections[i++],l=n+s;if(o>=0&&n<=t&&l>=e)return n<e&&l>t?"cover":!0;n=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];e+=(e?" ":"")+i+(n>=0?":"+n:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new kl(e)}static create(e){return new kl(e)}}class un extends kl{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Dv(this,(t,i,n,s,o)=>e=e.replace(n,n+(i-t),o),!1),e}mapDesc(e,t=!1){return Ev(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let n=0,s=0;n<t.length;n+=2){let o=t[n],l=t[n+1];if(l>=0){t[n]=l,t[n+1]=o;let a=n>>1;for(;i.length<a;)i.push(zt.empty);i.push(o?e.slice(s,s+o):zt.empty)}s+=o}return new un(t,i)}compose(e){return this.empty?e:e.empty?this:eE(this,e,!0)}map(e,t=!1){return e.empty?this:Ev(this,e,t,!0)}iterChanges(e,t=!1){Dv(this,e,t)}get desc(){return kl.create(this.sections)}filter(e){let t=[],i=[],n=[],s=new Ed(this);e:for(let o=0,l=0;;){let a=o==e.length?1e9:e[o++];for(;l<a||l==a&&s.len==0;){if(s.done)break e;let u=Math.min(s.len,a-l);pr(n,u,-1);let f=s.ins==-1?-1:s.off==0?s.ins:0;pr(t,u,f),f>0&&wh(i,t,s.text),s.forward(u),l+=u}let h=e[o++];for(;l<h;){if(s.done)break e;let u=Math.min(s.len,h-l);pr(t,u,-1),pr(n,u,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(u),l+=u}}return{changes:new un(t,i),filtered:kl.create(n)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],n=this.sections[t+1];n<0?e.push(i):n==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let n=[],s=[],o=0,l=null;function a(u=!1){if(!u&&!n.length)return;o<t&&pr(n,t-o,-1);let f=new un(n,s);l=l?l.compose(f.map(l)):f,n=[],s=[],o=0}function h(u){if(Array.isArray(u))for(let f of u)h(f);else if(u instanceof un){if(u.length!=t)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${t})`);a(),l=l?l.compose(u.map(l)):u}else{let{from:f,to:c=f,insert:d}=u;if(f>c||f<0||c>t)throw new RangeError(`Invalid change range ${f} to ${c} (in doc of length ${t})`);let g=d?typeof d=="string"?zt.of(d.split(i||Qv)):d:zt.empty,w=g.length;if(f==c&&w==0)return;f<o&&a(),f>o&&pr(n,f-o,-1),pr(n,c-f,w),wh(s,n,g),o=c}}return h(e),a(!l),l}static empty(e){return new un(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let n=0;n<e.length;n++){let s=e[n];if(typeof s=="number")t.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)t.push(s[0],0);else{for(;i.length<n;)i.push(zt.empty);i[n]=zt.of(s.slice(1)),t.push(s[0],i[n].length)}}}return new un(t,i)}static createSet(e,t){return new un(e,t)}}function pr(r,e,t,i=!1){if(e==0&&t<=0)return;let n=r.length-2;n>=0&&t<=0&&t==r[n+1]?r[n]+=e:e==0&&r[n]==0?r[n+1]+=t:i?(r[n]+=e,r[n+1]+=t):r.push(e,t)}function wh(r,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<r.length)r[r.length-1]=r[r.length-1].append(t);else{for(;r.length<i;)r.push(zt.empty);r.push(t)}}function Dv(r,e,t){let i=r.inserted;for(let n=0,s=0,o=0;o<r.sections.length;){let l=r.sections[o++],a=r.sections[o++];if(a<0)n+=l,s+=l;else{let h=n,u=s,f=zt.empty;for(;h+=l,u+=a,a&&i&&(f=f.append(i[o-2>>1])),!(t||o==r.sections.length||r.sections[o+1]<0);)l=r.sections[o++],a=r.sections[o++];e(n,h,s,u,f),n=h,s=u}}}function Ev(r,e,t,i=!1){let n=[],s=i?[]:null,o=new Ed(r),l=new Ed(e);for(let a=0,h=0;;)if(o.ins==-1)a+=o.len,o.next();else if(l.ins==-1&&h<a){let u=Math.min(l.len,a-h);l.forward(u),pr(n,u,-1),h+=u}else if(l.ins>=0&&(o.done||h<a||h==a&&(l.len<o.len||l.len==o.len&&!t))){for(pr(n,l.ins,-1);a>h&&!o.done&&a+o.len<h+l.len;)a+=o.len,o.next();h+=l.len,l.next()}else if(o.ins>=0){let u=0,f=a+o.len;for(;;)if(l.ins>=0&&h>a&&h+l.len<f)u+=l.ins,h+=l.len,l.next();else if(l.ins==-1&&h<f){let c=Math.min(l.len,f-h);u+=c,l.forward(c),h+=c}else break;pr(n,u,o.ins),s&&wh(s,n,o.text),a=f,o.next()}else{if(o.done&&l.done)return s?un.createSet(n,s):kl.create(n);throw new Error("Mismatched change set lengths")}}function eE(r,e,t=!1){let i=[],n=t?[]:null,s=new Ed(r),o=new Ed(e);for(let l=!1;;){if(s.done&&o.done)return n?un.createSet(i,n):kl.create(i);if(s.ins==0)pr(i,s.len,0,l),s.next();else if(o.len==0&&!o.done)pr(i,0,o.ins,l),n&&wh(n,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(s.len2,o.len),h=i.length;if(s.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;pr(i,a,u,l),n&&u&&wh(n,i,o.text)}else o.ins==-1?(pr(i,s.off?0:s.len,a,l),n&&wh(n,i,s.textBit(a))):(pr(i,s.off?0:s.len,o.off?0:o.ins,l),n&&!o.off&&wh(n,i,o.text));l=(s.ins>a||o.ins>=0&&o.len>a)&&(l||i.length>h),s.forward2(a),o.forward(a)}}}}class Ed{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?zt.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?zt.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class yh{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,t=-1){let i,n;return this.empty?i=n=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),n=e.mapPos(this.to,-1)),i==this.from&&n==this.to?this:new yh(i,n,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return Ye.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return Ye.range(this.anchor,i)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Ye.range(e.anchor,e.head)}static create(e,t,i){return new yh(e,t,i)}}class Ye{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:Ye.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new Ye([this.main],0)}addRange(e,t=!0){return Ye.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,Ye.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Ye(e.ranges.map(t=>yh.fromJSON(t)),e.main)}static single(e,t=e){return new Ye([Ye.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,n=0;n<e.length;n++){let s=e[n];if(s.empty?s.from<=i:s.from<i)return Ye.normalized(e.slice(),t);i=s.to}return new Ye(e,t)}static cursor(e,t=0,i,n){return yh.create(e,e,(t==0?0:t<0?4:8)|(i==null?3:Math.min(2,i))|(n!=null?n:33554431)<<5)}static range(e,t,i){let n=(i!=null?i:33554431)<<5;return t<e?yh.create(t,e,16|n|8):yh.create(e,t,n|(t>e?4:0))}static normalized(e,t=0){let i=e[t];e.sort((n,s)=>n.from-s.from),t=e.indexOf(i);for(let n=1;n<e.length;n++){let s=e[n],o=e[n-1];if(s.empty?s.from<=o.to:s.from<o.to){let l=o.from,a=Math.max(s.to,o.to);n<=t&&t--,e.splice(--n,2,s.anchor>s.head?Ye.range(a,l):Ye.range(l,a))}}return new Ye(e,t)}}function tE(r,e){for(let t of r.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let xS=0;class gt{constructor(e,t,i,n,s){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=n,this.extensions=s,this.id=xS++,this.default=e([])}static define(e={}){return new gt(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:CS),!!e.static,e.enables)}of(e){return new Nm([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Nm(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Nm(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function CS(r,e){return r==e||r.length==e.length&&r.every((t,i)=>t===e[i])}class Nm{constructor(e,t,i,n){this.dependencies=e,this.facet=t,this.type=i,this.value=n,this.id=xS++}dynamicSlot(e){var t;let i=this.value,n=this.facet.compareInput,s=this.id,o=e[s]>>1,l=this.type==2,a=!1,h=!1,u=[];for(let f of this.dependencies)f=="doc"?a=!0:f=="selection"?h=!0:(((t=e[f.id])!==null&&t!==void 0?t:1)&1)==0&&u.push(e[f.id]);return{create(f){return f.values[o]=i(f),1},update(f,c){if(a&&c.docChanged||h&&(c.docChanged||c.selection)||Bv(f,u)){let d=i(f);if(l?!zT(d,f.values[o],n):!n(d,f.values[o]))return f.values[o]=d,1}return 0},reconfigure:(f,c)=>{let d=i(f),g=c.config.address[s];if(g!=null){let w=Y0(c,g);if(this.dependencies.every(S=>S instanceof gt?c.facet(S)===f.facet(S):S instanceof Ga?c.field(S,!1)==f.field(S,!1):!0)||(l?zT(d,w,n):n(d,w)))return f.values[o]=w,0}return f.values[o]=d,1}}}}function zT(r,e,t){if(r.length!=e.length)return!1;for(let i=0;i<r.length;i++)if(!t(r[i],e[i]))return!1;return!0}function Bv(r,e){let t=!1;for(let i of e)ld(r,i)&1&&(t=!0);return t}function qF(r,e,t){let i=t.map(a=>r[a.id]),n=t.map(a=>a.type),s=i.filter(a=>!(a&1)),o=r[e.id]>>1;function l(a){let h=[];for(let u=0;u<i.length;u++){let f=Y0(a,i[u]);if(n[u]==2)for(let c of f)h.push(c);else h.push(f)}return e.combine(h)}return{create(a){for(let h of i)ld(a,h);return a.values[o]=l(a),1},update(a,h){if(!Bv(a,s))return 0;let u=l(a);return e.compare(u,a.values[o])?0:(a.values[o]=u,1)},reconfigure(a,h){let u=Bv(a,i),f=h.config.facets[e.id],c=h.facet(e);if(f&&!u&&CS(t,f))return a.values[o]=c,0;let d=l(a);return e.compare(d,c)?(a.values[o]=c,0):(a.values[o]=d,1)}}}const WT=gt.define({static:!0});class Ga{constructor(e,t,i,n,s){this.id=e,this.createF=t,this.updateF=i,this.compareF=n,this.spec=s,this.provides=void 0}static define(e){let t=new Ga(xS++,e.create,e.update,e.compare||((i,n)=>i===n),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(WT).find(i=>i.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,n)=>{let s=i.values[t],o=this.updateF(s,n);return this.compareF(s,o)?0:(i.values[t]=o,1)},reconfigure:(i,n)=>n.config.address[this.id]!=null?(i.values[t]=n.field(this),0):(i.values[t]=this.create(i),1)}}init(e){return[this,WT.of({field:this,create:e})]}get extension(){return this}}const xu={lowest:4,low:3,default:2,high:1,highest:0};function oc(r){return e=>new iE(e,r)}const XF={highest:oc(xu.highest),high:oc(xu.high),default:oc(xu.default),low:oc(xu.low),lowest:oc(xu.lowest)};class iE{constructor(e,t){this.inner=e,this.prec=t}}class Hb{of(e){return new Nv(this,e)}reconfigure(e){return Hb.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Nv{constructor(e,t){this.compartment=e,this.inner=t}}class U0{constructor(e,t,i,n,s,o){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=n,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let n=[],s=Object.create(null),o=new Map;for(let c of ZF(e,t,o))c instanceof Ga?n.push(c):(s[c.facet.id]||(s[c.facet.id]=[])).push(c);let l=Object.create(null),a=[],h=[];for(let c of n)l[c.id]=h.length<<1,h.push(d=>c.slot(d));let u=i==null?void 0:i.config.facets;for(let c in s){let d=s[c],g=d[0].facet,w=u&&u[c]||[];if(d.every(S=>S.type==0))if(l[g.id]=a.length<<1|1,CS(w,d))a.push(i.facet(g));else{let S=g.combine(d.map(x=>x.value));a.push(i&&g.compare(S,i.facet(g))?i.facet(g):S)}else{for(let S of d)S.type==0?(l[S.id]=a.length<<1|1,a.push(S.value)):(l[S.id]=h.length<<1,h.push(x=>S.dynamicSlot(x)));l[g.id]=h.length<<1,h.push(S=>qF(S,g,d))}}let f=h.map(c=>c(l));return new U0(e,o,f,l,a,s)}}function ZF(r,e,t){let i=[[],[],[],[],[]],n=new Map;function s(o,l){let a=n.get(o);if(a!=null){if(a<=l)return;let h=i[a].indexOf(o);h>-1&&i[a].splice(h,1),o instanceof Nv&&t.delete(o.compartment)}if(n.set(o,l),Array.isArray(o))for(let h of o)s(h,l);else if(o instanceof Nv){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let h=e.get(o.compartment)||o.inner;t.set(o.compartment,h),s(h,l)}else if(o instanceof iE)s(o.inner,o.prec);else if(o instanceof Ga)i[l].push(o),o.provides&&s(o.provides,l);else if(o instanceof Nm)i[l].push(o),o.facet.extensions&&s(o.facet.extensions,l);else{let h=o.extension;if(!h)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(h,l)}}return s(r,xu.default),i.reduce((o,l)=>o.concat(l))}function ld(r,e){if(e&1)return 2;let t=e>>1,i=r.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;r.status[t]=4;let n=r.computeSlot(r,r.config.dynamicSlots[t]);return r.status[t]=2|n}function Y0(r,e){return e&1?r.config.staticValues[e>>1]:r.values[e>>1]}const nE=gt.define(),rE=gt.define({combine:r=>r.some(e=>e),static:!0}),sE=gt.define({combine:r=>r.length?r[0]:void 0,static:!0}),oE=gt.define(),lE=gt.define(),aE=gt.define(),hE=gt.define({combine:r=>r.length?r[0]:!1});class bp{constructor(e,t){this.type=e,this.value=t}static define(){return new GF}}class GF{of(e){return new bp(this,e)}}class UF{constructor(e){this.map=e}of(e){return new Ti(this,e)}}class Ti{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new Ti(this.type,t)}is(e){return this.type==e}static define(e={}){return new UF(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let n of e){let s=n.map(t);s&&i.push(s)}return i}}Ti.reconfigure=Ti.define();Ti.appendConfig=Ti.define();class Jn{constructor(e,t,i,n,s,o){this.startState=e,this.changes=t,this.selection=i,this.effects=n,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&tE(i,t.newLength),s.some(l=>l.type==Jn.time)||(this.annotations=s.concat(Jn.time.of(Date.now())))}static create(e,t,i,n,s,o){return new Jn(e,t,i,n,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Jn.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Jn.time=bp.define();Jn.userEvent=bp.define();Jn.addToHistory=bp.define();Jn.remote=bp.define();function YF(r,e){let t=[];for(let i=0,n=0;;){let s,o;if(i<r.length&&(n==e.length||e[n]>=r[i]))s=r[i++],o=r[i++];else if(n<e.length)s=e[n++],o=e[n++];else return t;!t.length||t[t.length-1]<s?t.push(s,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function uE(r,e,t){var i;let n,s,o;return t?(n=e.changes,s=un.empty(e.changes.length),o=r.changes.compose(e.changes)):(n=e.changes.map(r.changes),s=r.changes.mapDesc(e.changes,!0),o=r.changes.compose(n)),{changes:o,selection:e.selection?e.selection.map(s):(i=r.selection)===null||i===void 0?void 0:i.map(n),effects:Ti.mapEffects(r.effects,n).concat(Ti.mapEffects(e.effects,s)),annotations:r.annotations.length?r.annotations.concat(e.annotations):e.annotations,scrollIntoView:r.scrollIntoView||e.scrollIntoView}}function Iv(r,e,t){let i=e.selection,n=Hu(e.annotations);return e.userEvent&&(n=n.concat(Jn.userEvent.of(e.userEvent))),{changes:e.changes instanceof un?e.changes:un.of(e.changes||[],t,r.facet(sE)),selection:i&&(i instanceof Ye?i:Ye.single(i.anchor,i.head)),effects:Hu(e.effects),annotations:n,scrollIntoView:!!e.scrollIntoView}}function fE(r,e,t){let i=Iv(r,e.length?e[0]:{},r.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(t=!1);let o=!!e[s].sequential;i=uE(i,Iv(r,e[s],o?i.changes.newLength:r.doc.length),o)}let n=Jn.create(r,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return JF(t?KF(n):n)}function KF(r){let e=r.startState,t=!0;for(let n of e.facet(oE)){let s=n(r);if(s===!1){t=!1;break}Array.isArray(s)&&(t=t===!0?s:YF(t,s))}if(t!==!0){let n,s;if(t===!1)s=r.changes.invertedDesc,n=un.empty(e.doc.length);else{let o=r.changes.filter(t);n=o.changes,s=o.filtered.invertedDesc}r=Jn.create(e,n,r.selection&&r.selection.map(s),Ti.mapEffects(r.effects,s),r.annotations,r.scrollIntoView)}let i=e.facet(lE);for(let n=i.length-1;n>=0;n--){let s=i[n](r);s instanceof Jn?r=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Jn?r=s[0]:r=fE(e,Hu(s),!1)}return r}function JF(r){let e=r.startState,t=e.facet(aE),i=r;for(let n=t.length-1;n>=0;n--){let s=t[n](r);s&&Object.keys(s).length&&(i=uE(r,Iv(e,s,r.changes.newLength),!0))}return i==r?r:Jn.create(e,r.changes,r.selection,i.effects,i.annotations,i.scrollIntoView)}const eH=[];function Hu(r){return r==null?eH:Array.isArray(r)?r:[r]}var hl=function(r){return r[r.Word=0]="Word",r[r.Space=1]="Space",r[r.Other=2]="Other",r}(hl||(hl={}));const tH=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Lv;try{Lv=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function iH(r){if(Lv)return Lv.test(r);for(let e=0;e<r.length;e++){let t=r[e];if(/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||tH.test(t)))return!0}return!1}function nH(r){return e=>{if(!/\S/.test(e))return hl.Space;if(iH(e))return hl.Word;for(let t=0;t<r.length;t++)if(e.indexOf(r[t])>-1)return hl.Word;return hl.Other}}class li{constructor(e,t,i,n,s,o){this.config=e,this.doc=t,this.selection=i,this.values=n,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)ld(this,l<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return ld(this,i),Y0(this,i)}update(...e){return fE(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:n}=t;for(let o of e.effects)o.is(Hb.reconfigure)?(t&&(n=new Map,t.compartments.forEach((l,a)=>n.set(a,l)),t=null),n.set(o.value.compartment,o.value.extension)):o.is(Ti.reconfigure)?(t=null,i=o.value):o.is(Ti.appendConfig)&&(t=null,i=Hu(i).concat(o.value));let s;t?s=e.startState.values.slice():(t=U0.resolve(i,n,this),s=new li(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(l,a)=>a.reconfigure(l,this),null).values),new li(t,e.newDoc,e.newSelection,s,(o,l)=>l.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:Ye.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),n=this.changes(i.changes),s=[i.range],o=Hu(i.effects);for(let l=1;l<t.ranges.length;l++){let a=e(t.ranges[l]),h=this.changes(a.changes),u=h.map(n);for(let c=0;c<l;c++)s[c]=s[c].map(u);let f=n.mapDesc(h,!0);s.push(a.range.map(f)),n=n.compose(u),o=Ti.mapEffects(o,u).concat(Ti.mapEffects(Hu(a.effects),f))}return{changes:n,selection:Ye.create(s,t.mainIndex),effects:o}}changes(e=[]){return e instanceof un?e:un.of(e,this.doc.length,this.facet(li.lineSeparator))}toText(e){return zt.of(e.split(this.facet(li.lineSeparator)||Qv))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(ld(this,t),Y0(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let n=e[i];n instanceof Ga&&(t[i]=n.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let n=[];if(i)for(let s in i){let o=i[s],l=e[s];n.push(o.init(a=>o.spec.fromJSON(l,a)))}return li.create({doc:e.doc,selection:Ye.fromJSON(e.selection),extensions:t.extensions?n.concat([t.extensions]):n})}static create(e={}){let t=U0.resolve(e.extensions||[],new Map),i=e.doc instanceof zt?e.doc:zt.of((e.doc||"").split(t.staticFacet(li.lineSeparator)||Qv)),n=e.selection?e.selection instanceof Ye?e.selection:Ye.single(e.selection.anchor,e.selection.head):Ye.single(0);return tE(n,i.length),t.staticFacet(rE)||(n=n.asSingle()),new li(t,i,n,t.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(li.tabSize)}get lineBreak(){return this.facet(li.lineSeparator)||`
`}get readOnly(){return this.facet(hE)}phrase(e,...t){for(let i of this.facet(li.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,n)=>{if(n=="$")return"$";let s=+(n||1);return s>t.length?i:t[s-1]})),e}languageDataAt(e,t,i=-1){let n=[];for(let s of this.facet(nE))for(let o of s(this,t,i))Object.prototype.hasOwnProperty.call(o,e)&&n.push(o[e]);return n}charCategorizer(e){return nH(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:n}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,l=e-i;for(;o>0;){let a=wa(t,o,!1);if(s(t.slice(a,o))!=hl.Word)break;o=a}for(;l<n;){let a=wa(t,l);if(s(t.slice(l,a))!=hl.Word)break;l=a}return o==l?null:Ye.range(o+i,l+i)}}li.allowMultipleSelections=rE;li.tabSize=gt.define({combine:r=>r.length?r[0]:4});li.lineSeparator=sE;li.readOnly=hE;li.phrases=gt.define({compare(r,e){let t=Object.keys(r),i=Object.keys(e);return t.length==i.length&&t.every(n=>r[n]==e[n])}});li.languageData=nE;li.changeFilter=oE;li.transactionFilter=lE;li.transactionExtender=aE;Hb.reconfigure=Ti.define();function rH(r,e,t={}){let i={};for(let n of r)for(let s of Object.keys(n)){let o=n[s],l=i[s];if(l===void 0)i[s]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(t,s))i[s]=t[s](l,o);else throw new Error("Config merge conflict for field "+s)}for(let n in e)i[n]===void 0&&(i[n]=e[n]);return i}class mf{eq(e){return this==e}range(e,t=e){return Bd.create(e,t,this)}}mf.prototype.startSide=mf.prototype.endSide=0;mf.prototype.point=!1;mf.prototype.mapMode=Pr.TrackDel;class Bd{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new Bd(e,t,i)}}function zv(r,e){return r.from-e.from||r.value.startSide-e.value.startSide}class AS{constructor(e,t,i,n){this.from=e,this.to=t,this.value=i,this.maxPoint=n}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,n=0){let s=i?this.to:this.from;for(let o=n,l=s.length;;){if(o==l)return o;let a=o+l>>1,h=s[a]-e||(i?this.value[a].endSide:this.value[a].startSide)-t;if(a==o)return h>=0?o:l;h>=0?l=a:o=a+1}}between(e,t,i,n){for(let s=this.findIndex(t,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(n(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,t){let i=[],n=[],s=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let h=this.value[a],u=this.from[a]+e,f=this.to[a]+e,c,d;if(u==f){let g=t.mapPos(u,h.startSide,h.mapMode);if(g==null||(c=d=g,h.startSide!=h.endSide&&(d=t.mapPos(u,h.endSide),d<c)))continue}else if(c=t.mapPos(u,h.startSide),d=t.mapPos(f,h.endSide),c>d||c==d&&h.startSide>0&&h.endSide<=0)continue;(d-c||h.endSide-h.startSide)<0||(o<0&&(o=c),h.point&&(l=Math.max(l,d-c)),i.push(h),n.push(c-o),s.push(d-o))}return{mapped:i.length?new AS(n,s,i,l):null,pos:o}}}class Zi{constructor(e,t,i,n){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=n}static create(e,t,i,n){return new Zi(e,t,i,n)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:n=0,filterTo:s=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(i&&(t=t.slice().sort(zv)),this.isEmpty)return t.length?Zi.of(t):this;let l=new cE(this,null,-1).goto(0),a=0,h=[],u=new K0;for(;l.value||a<t.length;)if(a<t.length&&(l.from-t[a].from||l.startSide-t[a].value.startSide)>=0){let f=t[a++];u.addInner(f.from,f.to,f.value)||h.push(f)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(l.chunkIndex)<t[a].from)&&(!o||n>this.chunkEnd(l.chunkIndex)||s<this.chunkPos[l.chunkIndex])&&u.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||n>l.to||s<l.from||o(l.from,l.to,l.value))&&(u.addInner(l.from,l.to,l.value)||h.push(Bd.create(l.from,l.to,l.value))),l.next());return u.finishInner(this.nextLayer.isEmpty&&!h.length?Zi.empty:this.nextLayer.update({add:h,filter:o,filterFrom:n,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],n=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],h=e.touchesRange(l,l+a.length);if(h===!1)n=Math.max(n,a.maxPoint),t.push(a),i.push(e.mapPos(l));else if(h===!0){let{mapped:u,pos:f}=a.map(l,e);u&&(n=Math.max(n,u.maxPoint),t.push(u),i.push(f))}}let s=this.nextLayer.map(e);return t.length==0?s:new Zi(i,t,s||Zi.empty,n)}between(e,t,i){if(!this.isEmpty){for(let n=0;n<this.chunk.length;n++){let s=this.chunkPos[n],o=this.chunk[n];if(t>=s&&e<=s+o.length&&o.between(s,e-s,t-s,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return Nd.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Nd.from(e).goto(t)}static compare(e,t,i,n,s=-1){let o=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=s),l=t.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=s),a=VT(o,l,i),h=new lc(o,a,s),u=new lc(l,a,s);i.iterGaps((f,c,d)=>jT(h,f,u,c,d,n)),i.empty&&i.length==0&&jT(h,0,u,0,0,n)}static eq(e,t,i=0,n){n==null&&(n=1e9);let s=e.filter(u=>!u.isEmpty&&t.indexOf(u)<0),o=t.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let l=VT(s,o),a=new lc(s,l,0).goto(i),h=new lc(o,l,0).goto(i);for(;;){if(a.to!=h.to||!Wv(a.active,h.active)||a.point&&(!h.point||!a.point.eq(h.point)))return!1;if(a.to>n)return!0;a.next(),h.next()}}static spans(e,t,i,n,s=-1){let o=new lc(e,null,s).goto(t),l=t,a=o.openStart;for(;;){let h=Math.min(o.to,i);if(o.point?(n.point(l,h,o.point,o.activeForPoint(o.to),a,o.pointRank),a=o.openEnd(h)+(o.to>h?1:0)):h>l&&(n.span(l,h,o.active,a),a=o.openEnd(h)),o.to>i)break;l=o.to,o.next()}return a}static of(e,t=!1){let i=new K0;for(let n of e instanceof Bd?[e]:t?sH(e):e)i.add(n.from,n.to,n.value);return i.finish()}}Zi.empty=new Zi([],[],null,-1);function sH(r){if(r.length>1)for(let e=r[0],t=1;t<r.length;t++){let i=r[t];if(zv(e,i)>0)return r.slice().sort(zv);e=i}return r}Zi.empty.nextLayer=Zi.empty;class K0{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new AS(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new K0)).add(e,t,i)}addInner(e,t,i){let n=e-this.lastTo||i.startSide-this.last.endSide;if(n<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return n<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(Zi.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Zi.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function VT(r,e,t){let i=new Map;for(let s of r)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let n=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let l=i.get(s.chunk[o]);l!=null&&(t?t.mapPos(l):l)==s.chunkPos[o]&&!(t!=null&&t.touchesRange(l,l+s.chunk[o].length))&&n.add(s.chunk[o])}return n}class cE{constructor(e,t,i,n=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=n}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let n=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(n)||this.layer.chunkEnd(this.chunkIndex)<e||n.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let n=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<n)&&this.setRangeIndex(n)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Nd{constructor(e){this.heap=e}static from(e,t=null,i=-1){let n=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&n.push(new cE(o,t,i,s));return n.length==1?n[0]:new Nd(n)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)ak(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)ak(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),ak(this.heap,0)}}}function ak(r,e){for(let t=r[e];;){let i=(e<<1)+1;if(i>=r.length)break;let n=r[i];if(i+1<r.length&&n.compare(r[i+1])>=0&&(n=r[i+1],i++),t.compare(n)<0)break;r[i]=t,r[e]=n,e=i}}class lc{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Nd.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){kg(this.active,e),kg(this.activeTo,e),kg(this.activeRank,e),this.minActive=FT(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:n,rank:s}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=s;)t++;wg(this.active,t,i),wg(this.activeTo,t,n),wg(this.activeRank,t,s),e&&wg(e,t,this.cursor.from),this.minActive=FT(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null,n=0;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),i&&kg(i,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.from<e&&(n=1),this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){let s=0;for(;s<i.length&&i[s]<e;)s++;this.openStart=s+n}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function jT(r,e,t,i,n,s){r.goto(e),t.goto(i);let o=i+n,l=i,a=i-e;for(;;){let h=r.to+a-t.to||r.endSide-t.endSide,u=h<0?r.to+a:t.to,f=Math.min(u,o);if(r.point||t.point?r.point&&t.point&&(r.point==t.point||r.point.eq(t.point))&&Wv(r.activeForPoint(r.to+a),t.activeForPoint(t.to))||s.comparePoint(l,f,r.point,t.point):f>l&&!Wv(r.active,t.active)&&s.compareRange(l,f,r.active,t.active),u>o)break;l=u,h<=0&&r.next(),h>=0&&t.next()}}function Wv(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!=e[t]&&!r[t].eq(e[t]))return!1;return!0}function kg(r,e){for(let t=e,i=r.length-1;t<i;t++)r[t]=r[t+1];r.pop()}function wg(r,e,t){for(let i=r.length-1;i>=e;i--)r[i+1]=r[i];r[e]=t}function FT(r,e){let t=-1,i=1e9;for(let n=0;n<e.length;n++)(e[n]-i||r[n].endSide-r[t].endSide)<0&&(t=n,i=e[n]);return t}function oH(r,e,t,i){for(let n=0,s=0;;){if(s>=e)return n;if(n==r.length)break;s+=r.charCodeAt(n)==9?t-s%t:1,n=wa(r,n)}return i===!0?-1:r.length}function J0(r){let e;return r.nodeType==11?e=r.getSelection?r:r.ownerDocument:e=r,e.getSelection()}function bf(r,e){return e?r==e||r.contains(e.nodeType!=1?e.parentNode:e):!1}function lH(){let r=document.activeElement;for(;r&&r.shadowRoot;)r=r.shadowRoot.activeElement;return r}function Vv(r,e){if(!e.anchorNode)return!1;try{return bf(r,e.anchorNode)}catch{return!1}}function Id(r){return r.nodeType==3?Ld(r,0,r.nodeValue.length).getClientRects():r.nodeType==1?r.getClientRects():[]}function e1(r,e,t,i){return t?HT(r,e,t,i,-1)||HT(r,e,t,i,1):!1}function jv(r){for(var e=0;;e++)if(r=r.previousSibling,!r)return e}function HT(r,e,t,i,n){for(;;){if(r==t&&e==i)return!0;if(e==(n<0?0:t1(r))){if(r.nodeName=="DIV")return!1;let s=r.parentNode;if(!s||s.nodeType!=1)return!1;e=jv(r)+(n<0?0:1),r=s}else if(r.nodeType==1){if(r=r.childNodes[e+(n<0?-1:0)],r.nodeType==1&&r.contentEditable=="false")return!1;e=n<0?t1(r):0}else return!1}}function t1(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}const dE={left:0,right:0,top:0,bottom:0};function qb(r,e){let t=e?r.left:r.right;return{left:t,right:t,top:r.top,bottom:r.bottom}}function aH(r){return{left:0,right:r.innerWidth,top:0,bottom:r.innerHeight}}function hH(r,e,t,i,n,s,o,l){let a=r.ownerDocument,h=a.defaultView;for(let u=r;u;)if(u.nodeType==1){let f,c=u==a.body;if(c)f=aH(h);else{if(u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.parentNode;continue}let w=u.getBoundingClientRect();f={left:w.left,right:w.left+u.clientWidth,top:w.top,bottom:w.top+u.clientHeight}}let d=0,g=0;if(n=="nearest")e.top<f.top?(g=-(f.top-e.top+o),t>0&&e.bottom>f.bottom+g&&(g=e.bottom-f.bottom+g+o)):e.bottom>f.bottom&&(g=e.bottom-f.bottom+o,t<0&&e.top-g<f.top&&(g=-(f.top+g-e.top+o)));else{let w=e.bottom-e.top,S=f.bottom-f.top;g=(n=="center"&&w<=S?e.top+w/2-S/2:n=="start"||n=="center"&&t<0?e.top-o:e.bottom-S+o)-f.top}if(i=="nearest"?e.left<f.left?(d=-(f.left-e.left+s),t>0&&e.right>f.right+d&&(d=e.right-f.right+d+s)):e.right>f.right&&(d=e.right-f.right+s,t<0&&e.left<f.left+d&&(d=-(f.left+d-e.left+s))):d=(i=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:i=="start"==l?e.left-s:e.right-(f.right-f.left)+s)-f.left,d||g)if(c)h.scrollBy(d,g);else{if(g){let w=u.scrollTop;u.scrollTop+=g,g=u.scrollTop-w}if(d){let w=u.scrollLeft;u.scrollLeft+=d,d=u.scrollLeft-w}e={left:e.left-d,top:e.top-g,right:e.right-d,bottom:e.bottom-g}}if(c)break;u=u.assignedSlot||u.parentNode,i=n="nearest"}else if(u.nodeType==11)u=u.host;else break}class uH{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,t,i,n){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=n}}let Ou=null;function pE(r){if(r.setActive)return r.setActive();if(Ou)return r.focus(Ou);let e=[];for(let t=r;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(r.focus(Ou==null?{get preventScroll(){return Ou={preventScroll:!0},!0}}:void 0),!Ou){Ou=!1;for(let t=0;t<e.length;){let i=e[t++],n=e[t++],s=e[t++];i.scrollTop!=n&&(i.scrollTop=n),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let qT;function Ld(r,e,t=e){let i=qT||(qT=document.createRange());return i.setEnd(r,t),i.setStart(r,e),i}function ad(r,e,t){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0},n=new KeyboardEvent("keydown",i);n.synthetic=!0,r.dispatchEvent(n);let s=new KeyboardEvent("keyup",i);return s.synthetic=!0,r.dispatchEvent(s),n.defaultPrevented||s.defaultPrevented}function fH(r){for(;r;){if(r&&(r.nodeType==9||r.nodeType==11&&r.host))return r;r=r.assignedSlot||r.parentNode}return null}function gE(r){for(;r.attributes.length;)r.removeAttributeNode(r.attributes[0])}class Qn{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new Qn(e.parentNode,jv(e),t)}static after(e,t){return new Qn(e.parentNode,jv(e)+1,t)}}const TS=[];class Ei{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e){if(this.dirty&2){let t=this.dom,i=null,n;for(let s of this.children){if(s.dirty){if(!s.dom&&(n=i?i.nextSibling:t.firstChild)){let o=Ei.get(n);(!o||!o.parent&&o.constructor==s.constructor)&&s.reuseDOM(n)}s.sync(e),s.dirty=0}if(n=i?i.nextSibling:t.firstChild,e&&!e.written&&e.node==t&&n!=s.dom&&(e.written=!0),s.dom.parentNode==t)for(;n&&n!=s.dom;)n=XT(n);else t.insertBefore(s.dom,n);i=s.dom}for(n=i?i.nextSibling:t.firstChild,n&&e&&e.node==t&&(e.written=!0);n;)n=XT(n)}else if(this.dirty&1)for(let t of this.children)t.dirty&&(t.sync(e),t.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let n=t1(e)==0?0:t==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;n==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?n=-1:n=1),e=s}n<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Ei.get(i);)i=i.nextSibling;if(!i)return this.length;for(let n=0,s=0;;n++){let o=this.children[n];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,t,i=0){let n=-1,s=-1,o=-1,l=-1;for(let a=0,h=i,u=i;a<this.children.length;a++){let f=this.children[a],c=h+f.length;if(h<e&&c>t)return f.domBoundsAround(e,t,h);if(c>=e&&n==-1&&(n=a,s=h),h>t&&f.dom.parentNode==this.dom){o=a,l=u;break}u=c,h=c+f.breakAfter}return{from:s,to:l<0?i+this.length:l,startDOM:(n?this.children[n-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),t.dirty&1)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=TS){this.markDirty();for(let n=e;n<t;n++){let s=this.children[n];s.parent==this&&s.destroy()}this.children.splice(e,t-e,...i);for(let n=0;n<i.length;n++)i[n].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new mE(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}merge(e,t,i,n,s,o){return!1}become(e){return!1}getSide(){return 0}destroy(){this.parent=null}}Ei.prototype.breakAfter=0;function XT(r){let e=r.nextSibling;return r.parentNode.removeChild(r),e}class mE{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function bE(r,e,t,i,n,s,o,l,a){let{children:h}=r,u=h.length?h[e]:null,f=s.length?s[s.length-1]:null,c=f?f.breakAfter:o;if(!(e==i&&u&&!o&&!c&&s.length<2&&u.merge(t,n,s.length?f:null,t==0,l,a))){if(i<h.length){let d=h[i];d&&n<d.length?(e==i&&(d=d.split(n),n=0),!c&&f&&d.merge(0,n,f,!0,0,a)?s[s.length-1]=d:(n&&d.merge(0,n,null,!1,0,a),s.push(d))):d!=null&&d.breakAfter&&(f?f.breakAfter=1:o=1),i++}for(u&&(u.breakAfter=o,t>0&&(!o&&s.length&&u.merge(t,u.length,s[0],!1,l,0)?u.breakAfter=s.shift().breakAfter:(t<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(t,u.length,null,!1,l,0),e++));e<i&&s.length;)if(h[i-1].become(s[s.length-1]))i--,s.pop(),a=s.length?0:l;else if(h[e].become(s[0]))e++,s.shift(),l=s.length?0:a;else break;!s.length&&e&&i<h.length&&!h[e-1].breakAfter&&h[i].merge(0,0,h[e-1],!1,l,a)&&e--,(e<i||s.length)&&r.replaceChildren(e,i,s)}}function OE(r,e,t,i,n,s){let o=r.childCursor(),{i:l,off:a}=o.findPos(t,1),{i:h,off:u}=o.findPos(e,-1),f=e-t;for(let c of i)f+=c.length;r.length+=f,bE(r,h,u,l,a,i,0,n,s)}let Yr=typeof navigator!="undefined"?navigator:{userAgent:"",vendor:"",platform:""},Fv=typeof document!="undefined"?document:{documentElement:{style:{}}};const Hv=/Edge\/(\d+)/.exec(Yr.userAgent),kE=/MSIE \d/.test(Yr.userAgent),qv=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Yr.userAgent),Xb=!!(kE||qv||Hv),ZT=!Xb&&/gecko\/(\d+)/i.test(Yr.userAgent),hk=!Xb&&/Chrome\/(\d+)/.exec(Yr.userAgent),GT="webkitFontSmoothing"in Fv.documentElement.style,wE=!Xb&&/Apple Computer/.test(Yr.vendor),UT=wE&&(/Mobile\/\w+/.test(Yr.userAgent)||Yr.maxTouchPoints>2);var Ve={mac:UT||/Mac/.test(Yr.platform),windows:/Win/.test(Yr.platform),linux:/Linux|X11/.test(Yr.platform),ie:Xb,ie_version:kE?Fv.documentMode||6:qv?+qv[1]:Hv?+Hv[1]:0,gecko:ZT,gecko_version:ZT?+(/Firefox\/(\d+)/.exec(Yr.userAgent)||[0,0])[1]:0,chrome:!!hk,chrome_version:hk?+hk[1]:0,ios:UT,android:/Android\b/.test(Yr.userAgent),webkit:GT,safari:wE,webkit_version:GT?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:Fv.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const cH=256;class Fa extends Ei{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return i&&(!(i instanceof Fa)||this.length-(t-e)+i.length>cH)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Fa(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new Qn(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return Xv(this.dom,e,t)}}class Yo extends Ei{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let n of t)n.setParent(this)}setAttrs(e){if(gE(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e)}merge(e,t,i,n,s,o){return i&&(!(i instanceof Yo&&i.mark.eq(this.mark))||e&&s<=0||t<this.length&&o<=0)?!1:(OE(this,e,t,i?i.children:[],s-1,o-1),this.markDirty(),!0)}split(e){let t=[],i=0,n=-1,s=0;for(let l of this.children){let a=i+l.length;a>e&&t.push(i<e?l.split(e-i):l),n<0&&i>=e&&(n=s),i=a,s++}let o=this.length-e;return this.length=e,n>-1&&(this.children.length=n,this.markDirty()),new Yo(this.mark,t,o)}domAtPos(e){return SE(this.dom,this.children,e)}coordsAt(e,t){return CE(this,e,t)}}function Xv(r,e,t){let i=r.nodeValue.length;e>i&&(e=i);let n=e,s=e,o=0;e==0&&t<0||e==i&&t>=0?Ve.chrome||Ve.gecko||(e?(n--,o=1):s<i&&(s++,o=-1)):t<0?n--:s<i&&s++;let l=Ld(r,n,s).getClientRects();if(!l.length)return dE;let a=l[(o?o<0:t>=0)?0:l.length-1];return Ve.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,h=>h.width)||a),o?qb(a,o<0):a||null}class ya extends Ei{constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}static create(e,t,i){return new(e.customView||ya)(e,t,i)}split(e){let t=ya.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,i,n,s,o){return i&&(!(i instanceof ya)||!this.widget.compare(i.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e.length==this.length&&e instanceof ya&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return zt.empty;let e=this;for(;e.parent;)e=e.parent;let t=e.editorView,i=t&&t.state.doc,n=this.posAtStart;return i?i.slice(n,n+this.length):zt.empty}domAtPos(e){return e==0?Qn.before(this.dom):Qn.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.dom.getClientRects(),n=null;if(!i.length)return dE;for(let s=e>0?i.length-1:0;n=i[s],!(e>0?s==0:s==i.length-1||n.top<n.bottom);s+=e>0?-1:1);return e==0&&t>0||e==this.length&&t<=0?n:qb(n,e==0)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class yE extends ya{domAtPos(e){let{topView:t,text:i}=this.widget;return t?Zv(e,0,t,i,(n,s)=>n.domAtPos(s),n=>new Qn(i,Math.min(n,i.nodeValue.length))):new Qn(i,Math.min(e,i.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:i,text:n}=this.widget;return i?vE(e,t,i,n):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:i,text:n}=this.widget;return i?Zv(e,t,i,n,(s,o,l)=>s.coordsAt(o,l),(s,o)=>Xv(n,s,o)):Xv(n,e,t)}destroy(){var e;super.destroy(),(e=this.widget.topView)===null||e===void 0||e.destroy()}get isEditable(){return!0}}function Zv(r,e,t,i,n,s){if(t instanceof Yo){for(let o of t.children){let l=bf(o.dom,i),a=l?i.nodeValue.length:o.length;if(r<a||r==a&&o.getSide()<=0)return l?Zv(r,e,o,i,n,s):n(o,r,e);r-=a}return n(t,t.length,-1)}else return t.dom==i?s(r,e):n(t,r,e)}function vE(r,e,t,i){if(t instanceof Yo)for(let n of t.children){let s=0,o=bf(n.dom,i);if(bf(n.dom,r))return s+(o?vE(r,e,n,i):n.localPosFromDOM(r,e));s+=o?i.nodeValue.length:n.length}else if(t.dom==i)return Math.min(e,i.nodeValue.length);return t.localPosFromDOM(r,e)}class Of extends Ei{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Of&&e.side==this.side}split(){return new Of(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return Qn.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let t=this.dom.getBoundingClientRect(),i=dH(this,this.side>0?-1:1);return i&&i.top<t.bottom&&i.bottom>t.top?{left:t.left,right:t.right,top:i.top,bottom:i.bottom}:t}get overrideDOMText(){return zt.empty}}Fa.prototype.children=ya.prototype.children=Of.prototype.children=TS;function dH(r,e){let t=r.parent,i=t?t.children.indexOf(r):-1;for(;t&&i>=0;)if(e<0?i>0:i<t.children.length){let n=t.children[i+e];if(n instanceof Fa){let s=n.coordsAt(e<0?n.length:0,e);if(s)return s}i+=e}else if(t instanceof Yo&&t.parent)i=t.parent.children.indexOf(t)+(e<0?0:1),t=t.parent;else{let n=t.dom.lastChild;if(n&&n.nodeName=="BR")return n.getClientRects()[0];break}}function SE(r,e,t){let i=0;for(let n=0;i<e.length;i++){let s=e[i],o=n+s.length;if(!(o==n&&s.getSide()<=0)){if(t>n&&t<o&&s.dom.parentNode==r)return s.domAtPos(t-n);if(t<=n)break;n=o}}for(;i>0;i--){let n=e[i-1].dom;if(n.parentNode==r)return Qn.after(n)}return new Qn(r,0)}function xE(r,e,t){let i,{children:n}=r;t>0&&e instanceof Yo&&n.length&&(i=n[n.length-1])instanceof Yo&&i.mark.eq(e.mark)?xE(i,e.children[0],t-1):(n.push(e),e.setParent(r)),r.length+=e.length}function CE(r,e,t){for(let s=0,o=0;o<r.children.length;o++){let l=r.children[o],a=s+l.length,h;if((t<=0||a==r.length||l.getSide()>0?a>=e:a>e)&&(e<a||o+1==r.children.length||(h=r.children[o+1]).length||h.getSide()>0)){let u=0;if(a==s){if(l.getSide()<=0)continue;u=t=-l.getSide()}let f=l.coordsAt(Math.max(0,e-s),t);return u&&f?qb(f,t<0):f}s=a}let i=r.dom.lastChild;if(!i)return r.dom.getBoundingClientRect();let n=Id(i);return n[n.length-1]||null}function Gv(r,e){for(let t in r)t=="class"&&e.class?e.class+=" "+r.class:t=="style"&&e.style?e.style+=";"+r.style:e[t]=r[t];return e}function PS(r,e){if(r==e)return!0;if(!r||!e)return!1;let t=Object.keys(r),i=Object.keys(e);if(t.length!=i.length)return!1;for(let n of t)if(i.indexOf(n)==-1||r[n]!==e[n])return!1;return!0}function Uv(r,e,t){let i=null;if(e)for(let n in e)t&&n in t||r.removeAttribute(i=n);if(t)for(let n in t)e&&e[n]==t[n]||r.setAttribute(i=n,t[n]);return!!i}class Op{eq(e){return!1}updateDOM(e){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}destroy(e){}}var nn=function(r){return r[r.Text=0]="Text",r[r.WidgetBefore=1]="WidgetBefore",r[r.WidgetAfter=2]="WidgetAfter",r[r.WidgetRange=3]="WidgetRange",r}(nn||(nn={}));class mi extends mf{constructor(e,t,i,n){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=n}get heightRelevant(){return!1}static mark(e){return new Zb(e)}static widget(e){let t=e.side||0,i=!!e.block;return t+=i?t>0?3e8:-4e8:t>0?1e8:-1e8,new Vh(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,n;if(e.isBlockGap)i=-5e8,n=4e8;else{let{start:s,end:o}=AE(e,t);i=(s?t?-3e8:-1:5e8)-1,n=(o?t?2e8:1:-6e8)+1}return new Vh(e,i,n,t,e.widget||null,!0)}static line(e){return new kp(e)}static set(e,t=!1){return Zi.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}mi.none=Zi.empty;class Zb extends mi{constructor(e){let{start:t,end:i}=AE(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof Zb&&this.tagName==e.tagName&&this.class==e.class&&PS(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Zb.prototype.point=!1;class kp extends mi{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof kp&&PS(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}kp.prototype.mapMode=Pr.TrackBefore;kp.prototype.point=!0;class Vh extends mi{constructor(e,t,i,n,s,o){super(t,i,s,e),this.block=n,this.isReplace=o,this.mapMode=n?t<=0?Pr.TrackBefore:Pr.TrackAfter:Pr.TrackDel}get type(){return this.startSide<this.endSide?nn.WidgetRange:this.startSide<=0?nn.WidgetBefore:nn.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof Vh&&pH(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Vh.prototype.point=!0;function AE(r,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=r;return t==null&&(t=r.inclusive),i==null&&(i=r.inclusive),{start:t!=null?t:e,end:i!=null?i:e}}function pH(r,e){return r==e||!!(r&&e&&r.compare(e))}function Yv(r,e,t,i=0){let n=t.length-1;n>=0&&t[n]+i>=r?t[n]=Math.max(t[n],e):t.push(r,e)}class yr extends Ei{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,n,s,o){if(i){if(!(i instanceof yr))return!1;this.dom||i.transferDOM(this)}return n&&this.setDeco(i?i.attrs:null),OE(this,e,t,i?i.children:[],s,o),!0}split(e){let t=new yr;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:n}=this.childPos(e);n&&(t.append(this.children[i].split(n),0),this.children[i].merge(n,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)t.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){!this.dom||(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){PS(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){xE(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=Gv(t,this.attrs||{})),i&&(this.attrs=Gv({class:i},this.attrs||{}))}domAtPos(e){return SE(this.dom,this.children,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.dirty|=6)}sync(e){var t;this.dom?this.dirty&4&&(gE(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Uv(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e);let i=this.dom.lastChild;for(;i&&Ei.get(i)instanceof Yo;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((t=Ei.get(i))===null||t===void 0?void 0:t.isEditable)==!1&&(!Ve.ios||!this.children.some(n=>n instanceof Fa))){let n=document.createElement("BR");n.cmIgnore=!0,this.dom.appendChild(n)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0;for(let t of this.children){if(!(t instanceof Fa))return null;let i=Id(t.dom);if(i.length!=1)return null;e+=i[0].width}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}}coordsAt(e,t){return CE(this,e,t)}become(e){return!1}get type(){return nn.Text}static find(e,t){for(let i=0,n=0;i<e.children.length;i++){let s=e.children[i],o=n+s.length;if(o>=t){if(s instanceof yr)return s;if(o>t)break}n=o+s.breakAfter}return null}}class Ph extends Ei{constructor(e,t,i){super(),this.widget=e,this.length=t,this.type=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,n,s,o){return i&&(!(i instanceof Ph)||!this.widget.compare(i.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?Qn.before(this.dom):Qn.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new Ph(this.widget,t,this.type);return i.breakAfter=this.breakAfter,i}get children(){return TS}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):zt.empty}domBoundsAround(){return null}become(e){return e instanceof Ph&&e.type==this.type&&e.widget.constructor==this.widget.constructor?(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class _S{constructor(e,t,i,n){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=n,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof Ph&&e.type==nn.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new yr),this.atCursorPos=!0),this.curLine}flushBuffer(e){this.pendingBuffer&&(this.curLine.append(yg(new Of(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer([]),this.curLine=null,this.content.push(e)}finish(e){e?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,e--;continue}else this.text=s,this.textOff=0}let n=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(0,i)),this.getLine().append(yg(new Fa(this.text.slice(this.textOff,this.textOff+n)),t),i),this.atCursorPos=!0,this.textOff+=n,e-=n,i=0}}span(e,t,i,n){this.buildText(t-e,i,n),this.pos=t,this.openStart<0&&(this.openStart=n)}point(e,t,i,n,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof Vh){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=t-e;if(i instanceof Vh)if(i.block){let{type:a}=i;a==nn.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Ph(i.widget||new YT("div"),l,a))}else{let a=ya.create(i.widget||new YT("span"),l,i.startSide),h=this.atCursorPos&&!a.isEditable&&s<=n.length&&(e<t||i.startSide>0),u=!a.isEditable&&(e<t||i.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!h&&(this.pendingBuffer=0),this.flushBuffer(n),h&&(f.append(yg(new Of(1),n),s),s=n.length+Math.max(0,s-n.length)),f.append(yg(a,n),s),this.atCursorPos=u,this.pendingBuffer=u?e<t?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=s)}static build(e,t,i,n,s){let o=new _S(e,t,i,s);return o.openEnd=Zi.spans(n,t,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function yg(r,e){for(let t of e)r=new Yo(t,[r],r.length);return r}class YT extends Op{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}}const TE=gt.define(),PE=gt.define(),_E=gt.define(),$E=gt.define(),Kv=gt.define(),ME=gt.define(),RE=gt.define({combine:r=>r.some(e=>e)});class i1{constructor(e,t="nearest",i="nearest",n=5,s=5){this.range=e,this.y=t,this.x=i,this.yMargin=n,this.xMargin=s}map(e){return e.empty?this:new i1(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const KT=Ti.define({map:(r,e)=>r.map(e)});function wl(r,e,t){let i=r.facet($E);i.length?i[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const wp=gt.define({combine:r=>r.length?r[0]:!0});let gH=0;const Vc=gt.define();class Ha{constructor(e,t,i,n){this.id=e,this.create=t,this.domEventHandlers=i,this.extension=n(this)}static define(e,t){const{eventHandlers:i,provide:n,decorations:s}=t||{};return new Ha(gH++,e,i,o=>{let l=[Vc.of(o)];return s&&l.push(zd.of(a=>{let h=a.plugin(o);return h?s(h):mi.none})),n&&l.push(n(o)),l})}static fromClass(e,t){return Ha.define(i=>new e(i),t)}}class uk{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(wl(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){wl(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){wl(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const QE=gt.define(),DE=gt.define(),zd=gt.define(),EE=gt.define(),BE=gt.define(),jc=gt.define();class yl{constructor(e,t,i,n){this.fromA=e,this.toA=t,this.fromB=i,this.toB=n}join(e){return new yl(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let n=e[t-1];if(!(n.fromA>i.toA)){if(n.toA<i.fromA)break;i=i.join(n),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let n=0,s=0,o=0,l=0;;n++){let a=n==e.length?null:e[n],h=o-l,u=a?a.fromB:1e9;for(;s<t.length&&t[s]<u;){let f=t[s],c=t[s+1],d=Math.max(l,f),g=Math.min(u,c);if(d<=g&&new yl(d+h,g+h,d,g).addToSet(i),c>u)break;s+=2}if(!a)return i;new yl(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),o=a.toA,l=a.toB}}}class n1{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=un.empty(this.startState.doc.length);for(let o of i)this.changes=this.changes.compose(o.changes);let n=[];this.changes.iterChangedRanges((o,l,a,h)=>n.push(new yl(o,l,a,h))),this.changedRanges=n;let s=e.hasFocus;s!=e.inputState.notifiedFocused&&(e.inputState.notifiedFocused=s,this.flags|=1)}static create(e,t,i){return new n1(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var Dn=function(r){return r[r.LTR=0]="LTR",r[r.RTL=1]="RTL",r}(Dn||(Dn={}));const Jv=Dn.LTR,mH=Dn.RTL;function NE(r){let e=[];for(let t=0;t<r.length;t++)e.push(1<<+r[t]);return e}const bH=NE("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),OH=NE("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),e2=Object.create(null),Hs=[];for(let r of["()","[]","{}"]){let e=r.charCodeAt(0),t=r.charCodeAt(1);e2[e]=t,e2[t]=-e}function kH(r){return r<=247?bH[r]:1424<=r&&r<=1524?2:1536<=r&&r<=1785?OH[r-1536]:1774<=r&&r<=2220?4:8192<=r&&r<=8203||r==8204?256:1}const wH=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;class qu{constructor(e,t,i){this.from=e,this.to=t,this.level=i}get dir(){return this.level%2?mH:Jv}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,i,n){let s=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=t&&l.to>=t){if(l.level==i)return o;(s<0||(n!=0?n<0?l.from<t:l.to>t:e[s].level>l.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}const xi=[];function yH(r,e){let t=r.length,i=e==Jv?1:2,n=e==Jv?2:1;if(!r||i==1&&!wH.test(r))return IE(t);for(let o=0,l=i,a=i;o<t;o++){let h=kH(r.charCodeAt(o));h==512?h=l:h==8&&a==4&&(h=16),xi[o]=h==4?2:h,h&7&&(a=h),l=h}for(let o=0,l=i,a=i;o<t;o++){let h=xi[o];if(h==128)o<t-1&&l==xi[o+1]&&l&24?h=xi[o]=l:xi[o]=256;else if(h==64){let u=o+1;for(;u<t&&xi[u]==64;)u++;let f=o&&l==8||u<t&&xi[u]==8?a==1?1:8:256;for(let c=o;c<u;c++)xi[c]=f;o=u-1}else h==8&&a==1&&(xi[o]=1);l=h,h&7&&(a=h)}for(let o=0,l=0,a=0,h,u,f;o<t;o++)if(u=e2[h=r.charCodeAt(o)])if(u<0){for(let c=l-3;c>=0;c-=3)if(Hs[c+1]==-u){let d=Hs[c+2],g=d&2?i:d&4?d&1?n:i:0;g&&(xi[o]=xi[Hs[c]]=g),l=c;break}}else{if(Hs.length==189)break;Hs[l++]=o,Hs[l++]=h,Hs[l++]=a}else if((f=xi[o])==2||f==1){let c=f==i;a=c?0:1;for(let d=l-3;d>=0;d-=3){let g=Hs[d+2];if(g&2)break;if(c)Hs[d+2]|=2;else{if(g&4)break;Hs[d+2]|=4}}}for(let o=0;o<t;o++)if(xi[o]==256){let l=o+1;for(;l<t&&xi[l]==256;)l++;let a=(o?xi[o-1]:i)==1,h=(l<t?xi[l]:i)==1,u=a==h?a?1:2:i;for(let f=o;f<l;f++)xi[f]=u;o=l-1}let s=[];if(i==1)for(let o=0;o<t;){let l=o,a=xi[o++]!=1;for(;o<t&&a==(xi[o]!=1);)o++;if(a)for(let h=o;h>l;){let u=h,f=xi[--h]!=2;for(;h>l&&f==(xi[h-1]!=2);)h--;s.push(new qu(h,u,f?2:1))}else s.push(new qu(l,o,0))}else for(let o=0;o<t;){let l=o,a=xi[o++]==2;for(;o<t&&a==(xi[o]==2);)o++;s.push(new qu(l,o,a?1:2))}return s}function IE(r){return[new qu(0,r,0)]}let LE="";function vH(r,e,t,i,n){var s;let o=i.head-r.from,l=-1;if(o==0){if(!n||!r.length)return null;e[0].level!=t&&(o=e[0].side(!1,t),l=0)}else if(o==r.length){if(n)return null;let c=e[e.length-1];c.level!=t&&(o=c.side(!0,t),l=e.length-1)}l<0&&(l=qu.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc));let a=e[l];o==a.side(n,t)&&(a=e[l+=n?1:-1],o=a.side(!n,t));let h=n==(a.dir==t),u=wa(r.text,o,h);if(LE=r.text.slice(Math.min(o,u),Math.max(o,u)),u!=a.side(n,t))return Ye.cursor(u+r.from,h?-1:1,a.level);let f=l==(n?e.length-1:0)?null:e[l+(n?1:-1)];return!f&&a.level!=t?Ye.cursor(n?r.to:r.from,n?-1:1,t):f&&f.level<a.level?Ye.cursor(f.side(!n,t)+r.from,n?1:-1,f.level):Ye.cursor(u+r.from,n?-1:1,a.level)}const va="\uFFFF";class zE{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(li.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=va}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let n=e;;){this.findPointBefore(i,n),this.readNode(n);let s=n.nextSibling;if(s==t)break;let o=Ei.get(n),l=Ei.get(s);(o&&l?o.breakAfter:(o?o.breakAfter:JT(n))||JT(s)&&(n.nodeName!="BR"||n.cmIgnore))&&this.lineBreak(),n=s}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,n=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,l;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(l=n.exec(t))&&(s=l.index,o=l[0].length),this.append(t.slice(i,s<0?t.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let t=Ei.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let n=i.iter();!n.next().done;)n.lineBreak?this.lineBreak():this.append(n.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+Math.min(t,i.offset))}}function JT(r){return r.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(r.nodeName)}class eP{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class tP extends Ei{constructor(e){super(),this.view=e,this.compositionDeco=mi.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new yr],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new yl(0,0,0,e.state.doc.length)],0)}get root(){return this.view.root}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every(({fromA:o,toA:l})=>l<this.minWidthFrom||o>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=mi.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=xH(this.view,e.changes)),(Ve.ie||Ve.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let i=this.decorations,n=this.updateDeco(),s=PH(i,n,e.changes);return t=yl.extendWithRanges(t,s),this.dirty==0&&t.length==0?!1:(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=Ve.chrome||Ve.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(s),this.dirty=0,s&&(s.written||i.selectionRange.focusNode!=s.node)&&(this.forceSelection=!0),this.dom.style.height=""});let n=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.children)s instanceof Ph&&s.widget instanceof iP&&n.push(s.dom);i.updateGaps(n)}updateChildren(e,t){let i=this.childCursor(t);for(let n=e.length-1;;n--){let s=n>=0?e[n]:null;if(!s)break;let{fromA:o,toA:l,fromB:a,toB:h}=s,{content:u,breakAtStart:f,openStart:c,openEnd:d}=_S.build(this.view.state.doc,a,h,this.decorations,this.dynamicDecorationMap),{i:g,off:w}=i.findPos(l,1),{i:S,off:x}=i.findPos(o,-1);bE(this,S,x,g,w,u,f,c,d)}}updateSelection(e=!1,t=!1){if(e&&this.view.observer.readSelectionRange(),!(t||this.mayControlSelection())||Ve.ios&&this.view.inputState.rapidCompositionStart)return;let i=this.forceSelection;this.forceSelection=!1;let n=this.view.state.selection.main,s=this.domAtPos(n.anchor),o=n.empty?s:this.domAtPos(n.head);if(Ve.gecko&&n.empty&&SH(s)){let a=document.createTextNode("");this.view.observer.ignore(()=>s.node.insertBefore(a,s.node.childNodes[s.offset]||null)),s=o=new Qn(a,0),i=!0}let l=this.view.observer.selectionRange;(i||!l.focusNode||!e1(s.node,s.offset,l.anchorNode,l.anchorOffset)||!e1(o.node,o.offset,l.focusNode,l.focusOffset))&&(this.view.observer.ignore(()=>{Ve.android&&Ve.chrome&&this.dom.contains(l.focusNode)&&_H(l.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let a=J0(this.root);if(n.empty){if(Ve.gecko){let h=AH(s.node,s.offset);if(h&&h!=3){let u=VE(s.node,s.offset,h==1?1:-1);u&&(s=new Qn(u,h==1?0:u.nodeValue.length))}}a.collapse(s.node,s.offset),n.bidiLevel!=null&&l.cursorBidiLevel!=null&&(l.cursorBidiLevel=n.bidiLevel)}else if(a.extend)a.collapse(s.node,s.offset),a.extend(o.node,o.offset);else{let h=document.createRange();n.anchor>n.head&&([s,o]=[o,s]),h.setEnd(o.node,o.offset),h.setStart(s.node,s.offset),a.removeAllRanges(),a.addRange(h)}}),this.view.observer.setSelectionRange(s,o)),this.impreciseAnchor=s.precise?null:new Qn(l.anchorNode,l.anchorOffset),this.impreciseHead=o.precise?null:new Qn(l.focusNode,l.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let e=this.view.state.selection.main,t=J0(this.root);if(!e.empty||!e.assoc||!t.modify)return;let i=yr.find(this,e.head);if(!i)return;let n=i.posAtStart;if(e.head==n||e.head==n+i.length)return;let s=this.coordsAt(e.head,-1),o=this.coordsAt(e.head,1);if(!s||!o||s.bottom>o.top)return;let l=this.domAtPos(e.head+e.assoc);t.collapse(l.node,l.offset),t.modify("move",e.assoc<0?"forward":"backward","lineboundary")}mayControlSelection(){return this.view.state.facet(wp)?this.root.activeElement==this.dom:Vv(this.dom,this.view.observer.selectionRange)}nearest(e){for(let t=e;t;){let i=Ei.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let n=this.children[t];if(i<n.length||n instanceof yr)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){for(let i=this.length,n=this.children.length-1;;n--){let s=this.children[n],o=i-s.breakAfter-s.length;if(e>o||e==o&&s.type!=nn.WidgetBefore&&s.type!=nn.WidgetAfter&&(!n||t==2||this.children[n-1].breakAfter||this.children[n-1].type==nn.WidgetBefore&&t>-2))return s.coordsAt(e-o,t);i=o}}measureVisibleLineHeights(e){let t=[],{from:i,to:n}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==Dn.LTR;for(let h=0,u=0;u<this.children.length;u++){let f=this.children[u],c=h+f.length;if(c>n)break;if(h>=i){let d=f.dom.getBoundingClientRect();if(t.push(d.height),o){let g=f.dom.lastChild,w=g?Id(g):[];if(w.length){let S=w[w.length-1],x=a?S.right-d.left:d.right-S.left;x>l&&(l=x,this.minWidth=s,this.minWidthFrom=h,this.minWidthTo=c)}}}h=c+f.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?Dn.RTL:Dn.LTR}measureTextSize(){for(let n of this.children)if(n instanceof yr){let s=n.measureTextSize();if(s)return s}let e=document.createElement("div"),t,i;return e.className="cm-line",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let n=Id(e.firstChild)[0];t=e.getBoundingClientRect().height,i=n?n.width/27:7,e.remove()}),{lineHeight:t,charWidth:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new mE(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,n=0;;n++){let s=n==t.viewports.length?null:t.viewports[n],o=s?s.from-1:this.length;if(o>i){let l=t.lineBlockAt(o).bottom-t.lineBlockAt(i).top;e.push(mi.replace({widget:new iP(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return mi.set(e)}updateDeco(){let e=this.view.state.facet(zd).map((t,i)=>(this.dynamicDecorationMap[i]=typeof t=="function")?t(this.view):t);for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),n;if(!i)return;!t.empty&&(n=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,n.left),top:Math.min(i.top,n.top),right:Math.max(i.right,n.right),bottom:Math.max(i.bottom,n.bottom)});let s=0,o=0,l=0,a=0;for(let u of this.view.state.facet(BE).map(f=>f(this.view)))if(u){let{left:f,right:c,top:d,bottom:g}=u;f!=null&&(s=Math.max(s,f)),c!=null&&(o=Math.max(o,c)),d!=null&&(l=Math.max(l,d)),g!=null&&(a=Math.max(a,g))}let h={left:i.left-s,top:i.top-l,right:i.right+o,bottom:i.bottom+a};hH(this.view.scrollDOM,h,t.head<t.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==Dn.LTR)}}function SH(r){return r.node.nodeType==1&&r.node.firstChild&&(r.offset==0||r.node.childNodes[r.offset-1].contentEditable=="false")&&(r.offset==r.node.childNodes.length||r.node.childNodes[r.offset].contentEditable=="false")}class iP extends Op{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function WE(r){let e=r.observer.selectionRange,t=e.focusNode&&VE(e.focusNode,e.focusOffset,0);if(!t)return null;let i=r.docView.nearest(t);if(!i)return null;if(i instanceof yr){let n=t;for(;n.parentNode!=i.dom;)n=n.parentNode;let s=n.previousSibling;for(;s&&!Ei.get(s);)s=s.previousSibling;let o=s?Ei.get(s).posAtEnd:i.posAtStart;return{from:o,to:o,node:n,text:t}}else{for(;;){let{parent:s}=i;if(!s)return null;if(s instanceof yr)break;i=s}let n=i.posAtStart;return{from:n,to:n+i.length,node:i.dom,text:t}}}function xH(r,e){let t=WE(r);if(!t)return mi.none;let{from:i,to:n,node:s,text:o}=t,l=e.mapPos(i,1),a=Math.max(l,e.mapPos(n,-1)),{state:h}=r,u=s.nodeType==3?s.nodeValue:new zE([],h).readRange(s.firstChild,null).text;if(a-l<u.length)if(h.doc.sliceString(l,Math.min(h.doc.length,l+u.length),va)==u)a=l+u.length;else if(h.doc.sliceString(Math.max(0,a-u.length),a,va)==u)l=a-u.length;else return mi.none;else if(h.doc.sliceString(l,a,va)!=u)return mi.none;let f=Ei.get(s);return f instanceof yE?f=f.widget.topView:f&&(f.parent=null),mi.set(mi.replace({widget:new CH(s,o,f),inclusive:!0}).range(l,a))}class CH extends Op{constructor(e,t,i){super(),this.top=e,this.text=t,this.topView=i}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return yE}}function VE(r,e,t){for(;;){if(r.nodeType==3)return r;if(r.nodeType==1&&e>0&&t<=0)r=r.childNodes[e-1],e=t1(r);else if(r.nodeType==1&&e<r.childNodes.length&&t>=0)r=r.childNodes[e],e=0;else return null}}function AH(r,e){return r.nodeType!=1?0:(e&&r.childNodes[e-1].contentEditable=="false"?1:0)|(e<r.childNodes.length&&r.childNodes[e].contentEditable=="false"?2:0)}class TH{constructor(){this.changes=[]}compareRange(e,t){Yv(e,t,this.changes)}comparePoint(e,t){Yv(e,t,this.changes)}}function PH(r,e,t){let i=new TH;return Zi.compare(r,e,t,i),i.changes}function _H(r,e){for(let t=r;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function $H(r,e,t=1){let i=r.charCategorizer(e),n=r.doc.lineAt(e),s=e-n.from;if(n.length==0)return Ye.cursor(e);s==0?t=1:s==n.length&&(t=-1);let o=s,l=s;t<0?o=wa(n.text,s,!1):l=wa(n.text,s);let a=i(n.text.slice(o,l));for(;o>0;){let h=wa(n.text,o,!1);if(i(n.text.slice(h,o))!=a)break;o=h}for(;l<n.length;){let h=wa(n.text,l);if(i(n.text.slice(l,h))!=a)break;l=h}return Ye.range(o+n.from,l+n.from)}function MH(r,e){return e.left>r?e.left-r:Math.max(0,r-e.right)}function RH(r,e){return e.top>r?e.top-r:Math.max(0,r-e.bottom)}function fk(r,e){return r.top<e.bottom-1&&r.bottom>e.top+1}function nP(r,e){return e<r.top?{top:e,left:r.left,right:r.right,bottom:r.bottom}:r}function rP(r,e){return e>r.bottom?{top:r.top,left:r.left,right:r.right,bottom:e}:r}function t2(r,e,t){let i,n,s,o,l,a,h,u;for(let d=r.firstChild;d;d=d.nextSibling){let g=Id(d);for(let w=0;w<g.length;w++){let S=g[w];n&&fk(n,S)&&(S=nP(rP(S,n.bottom),n.top));let x=MH(e,S),Q=RH(t,S);if(x==0&&Q==0)return d.nodeType==3?sP(d,e,t):t2(d,e,t);(!i||o>Q||o==Q&&s>x)&&(i=d,n=S,s=x,o=Q),x==0?t>S.bottom&&(!h||h.bottom<S.bottom)?(l=d,h=S):t<S.top&&(!u||u.top>S.top)&&(a=d,u=S):h&&fk(h,S)?h=rP(h,S.bottom):u&&fk(u,S)&&(u=nP(u,S.top))}}if(h&&h.bottom>=t?(i=l,n=h):u&&u.top<=t&&(i=a,n=u),!i)return{node:r,offset:0};let f=Math.max(n.left,Math.min(n.right,e));if(i.nodeType==3)return sP(i,f,t);if(!s&&i.contentEditable=="true")return t2(i,f,t);let c=Array.prototype.indexOf.call(r.childNodes,i)+(e>=(n.left+n.right)/2?1:0);return{node:r,offset:c}}function sP(r,e,t){let i=r.nodeValue.length,n=-1,s=1e9,o=0;for(let l=0;l<i;l++){let a=Ld(r,l,l+1).getClientRects();for(let h=0;h<a.length;h++){let u=a[h];if(u.top==u.bottom)continue;o||(o=e-u.left);let f=(u.top>t?u.top-t:t-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&f<s){let c=e>=(u.left+u.right)/2,d=c;if((Ve.chrome||Ve.gecko)&&Ld(r,l).getBoundingClientRect().left==u.right&&(d=!c),f<=0)return{node:r,offset:l+(d?1:0)};n=l+(d?1:0),s=f}}}return{node:r,offset:n>-1?n:o>0?r.nodeValue.length:0}}function jE(r,{x:e,y:t},i,n=-1){var s;let o=r.contentDOM.getBoundingClientRect(),l=o.top+r.viewState.paddingTop,a,{docHeight:h}=r.viewState,u=t-l;if(u<0)return 0;if(u>h)return r.state.doc.length;for(let x=r.defaultLineHeight/2,Q=!1;a=r.elementAtHeight(u),a.type!=nn.Text;)for(;u=n>0?a.bottom+x:a.top-x,!(u>=0&&u<=h);){if(Q)return i?null:0;Q=!0,n=-n}t=l+u;let f=a.from;if(f<r.viewport.from)return r.viewport.from==0?0:i?null:oP(r,o,a,e,t);if(f>r.viewport.to)return r.viewport.to==r.state.doc.length?r.state.doc.length:i?null:oP(r,o,a,e,t);let c=r.dom.ownerDocument,d=r.root.elementFromPoint?r.root:c,g=d.elementFromPoint(e,t);g&&!r.contentDOM.contains(g)&&(g=null),g||(e=Math.max(o.left+1,Math.min(o.right-1,e)),g=d.elementFromPoint(e,t),g&&!r.contentDOM.contains(g)&&(g=null));let w,S=-1;if(g&&((s=r.docView.nearest(g))===null||s===void 0?void 0:s.isEditable)!=!1){if(c.caretPositionFromPoint){let x=c.caretPositionFromPoint(e,t);x&&({offsetNode:w,offset:S}=x)}else if(c.caretRangeFromPoint){let x=c.caretRangeFromPoint(e,t);x&&({startContainer:w,startOffset:S}=x,Ve.safari&&QH(w,S,e)&&(w=void 0))}}if(!w||!r.docView.dom.contains(w)){let x=yr.find(r.docView,f);if(!x)return u>a.top+a.height/2?a.to:a.from;({node:w,offset:S}=t2(x.dom,e,t))}return r.docView.posFromDOM(w,S)}function oP(r,e,t,i,n){let s=Math.round((i-e.left)*r.defaultCharacterWidth);r.lineWrapping&&t.height>r.defaultLineHeight*1.5&&(s+=Math.floor((n-t.top)/r.defaultLineHeight)*r.viewState.heightOracle.lineLength);let o=r.state.sliceDoc(t.from,t.to);return t.from+oH(o,s,r.state.tabSize)}function QH(r,e,t){let i;if(r.nodeType!=3||e!=(i=r.nodeValue.length))return!1;for(let n=r.nextSibling;n;n=n.nextSibling)if(n.nodeType!=1||n.nodeName!="BR")return!1;return Ld(r,i-1,i).getBoundingClientRect().left>t}function DH(r,e,t,i){let n=r.state.doc.lineAt(e.head),s=!i||!r.lineWrapping?null:r.coordsAtPos(e.assoc<0&&e.head>n.from?e.head-1:e.head);if(s){let a=r.dom.getBoundingClientRect(),h=r.textDirectionAt(n.from),u=r.posAtCoords({x:t==(h==Dn.LTR)?a.right-1:a.left+1,y:(s.top+s.bottom)/2});if(u!=null)return Ye.cursor(u,t?-1:1)}let o=yr.find(r.docView,e.head),l=o?t?o.posAtEnd:o.posAtStart:t?n.to:n.from;return Ye.cursor(l,t?-1:1)}function lP(r,e,t,i){let n=r.state.doc.lineAt(e.head),s=r.bidiSpans(n),o=r.textDirectionAt(n.from);for(let l=e,a=null;;){let h=vH(n,s,o,l,t),u=LE;if(!h){if(n.number==(t?r.state.doc.lines:1))return l;u=`
`,n=r.state.doc.line(n.number+(t?1:-1)),s=r.bidiSpans(n),h=Ye.cursor(t?n.from:n.to)}if(a){if(!a(u))return l}else{if(!i)return h;a=i(u)}l=h}}function EH(r,e,t){let i=r.state.charCategorizer(e),n=i(t);return s=>{let o=i(s);return n==hl.Space&&(n=o),n==o}}function BH(r,e,t,i){let n=e.head,s=t?1:-1;if(n==(t?r.state.doc.length:0))return Ye.cursor(n,e.assoc);let o=e.goalColumn,l,a=r.contentDOM.getBoundingClientRect(),h=r.coordsAtPos(n),u=r.documentTop;if(h)o==null&&(o=h.left-a.left),l=s<0?h.top:h.bottom;else{let d=r.viewState.lineBlockAt(n);o==null&&(o=Math.min(a.right-a.left,r.defaultCharacterWidth*(n-d.from))),l=(s<0?d.top:d.bottom)+u}let f=a.left+o,c=i!=null?i:r.defaultLineHeight>>1;for(let d=0;;d+=10){let g=l+(c+d)*s,w=jE(r,{x:f,y:g},!1,s);if(g<a.top||g>a.bottom||(s<0?w<n:w>n))return Ye.cursor(w,e.assoc,void 0,o)}}function ck(r,e,t){let i=r.state.facet(EE).map(n=>n(r));for(;;){let n=!1;for(let s of i)s.between(t.from-1,t.from+1,(o,l,a)=>{t.from>o&&t.from<l&&(t=e.from>t.from?Ye.cursor(o,1):Ye.cursor(l,-1),n=!0)});if(!n)return t}}class NH{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.rapidCompositionStart=!1,this.mouseSelection=null;for(let t in mn){let i=mn[t];e.contentDOM.addEventListener(t,n=>{!aP(e,n)||this.ignoreDuringComposition(n)||t=="keydown"&&this.keydown(e,n)||(this.mustFlushObserver(n)&&e.observer.forceFlush(),this.runCustomHandlers(t,e,n)?n.preventDefault():i(e,n))}),this.registeredEvents.push(t)}Ve.chrome&&Ve.chrome_version>=102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,Ve.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var i;let n;this.customHandlers=[];for(let s of t)if(n=(i=s.update(e).spec)===null||i===void 0?void 0:i.domEventHandlers){this.customHandlers.push({plugin:s.value,handlers:n});for(let o in n)this.registeredEvents.indexOf(o)<0&&o!="scroll"&&(this.registeredEvents.push(o),e.contentDOM.addEventListener(o,l=>{!aP(e,l)||this.runCustomHandlers(o,e,l)&&l.preventDefault()}))}}runCustomHandlers(e,t,i){for(let n of this.customHandlers){let s=n.handlers[e];if(s)try{if(s.call(n.plugin,i,t)||i.defaultPrevented)return!0}catch(o){wl(t.state,o)}}return!1}runScrollHandlers(e,t){for(let i of this.customHandlers){let n=i.handlers.scroll;if(n)try{n.call(i.plugin,t,e)}catch(s){wl(e.state,s)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(Ve.android&&Ve.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let i;return Ve.ios&&(i=FE.find(n=>n.keyCode==t.keyCode))&&!(t.ctrlKey||t.altKey||t.metaKey)&&!t.synthetic?(this.pendingIOSKey=i,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let t=this.pendingIOSKey;return t?(this.pendingIOSKey=void 0,ad(e.contentDOM,t.key,t.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Ve.safari&&Date.now()-this.compositionEndedAt<100?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229||e.type=="compositionend"&&!Ve.ios}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const FE=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],IH=[16,17,18,20,91,92,224,225];class LH{constructor(e,t,i,n){this.view=e,this.style=i,this.mustSelect=n,this.lastEvent=t;let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(li.allowMultipleSelections)&&zH(e,t),this.dragMove=WH(e,t),this.dragging=VH(e,t)&&$S(t)==1?null:!1,this.dragging===!1&&(t.preventDefault(),this.select(t))}move(e){if(e.buttons==0)return this.destroy();this.dragging===!1&&this.select(this.lastEvent=e)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(e){let t=this.style.get(e,this.extend,this.multiple);(this.mustSelect||!t.eq(this.view.state.selection)||t.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:t,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function zH(r,e){let t=r.state.facet(TE);return t.length?t[0](e):Ve.mac?e.metaKey:e.ctrlKey}function WH(r,e){let t=r.state.facet(PE);return t.length?t[0](e):Ve.mac?!e.altKey:!e.ctrlKey}function VH(r,e){let{main:t}=r.state.selection;if(t.empty)return!1;let i=J0(r.root);if(i.rangeCount==0)return!0;let n=i.getRangeAt(0).getClientRects();for(let s=0;s<n.length;s++){let o=n[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function aP(r,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=r.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=Ei.get(t))&&i.ignoreEvent(e))return!1;return!0}const mn=Object.create(null),HE=Ve.ie&&Ve.ie_version<15||Ve.ios&&Ve.webkit_version<604;function jH(r){let e=r.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{r.focus(),t.remove(),qE(r,t.value)},50)}function qE(r,e){let{state:t}=r,i,n=1,s=t.toText(e),o=s.lines==t.selection.ranges.length;if(i2!=null&&t.selection.ranges.every(a=>a.empty)&&i2==s.toString()){let a=-1;i=t.changeByRange(h=>{let u=t.doc.lineAt(h.from);if(u.from==a)return{range:h};a=u.from;let f=t.toText((o?s.line(n++).text:e)+t.lineBreak);return{changes:{from:u.from,insert:f},range:Ye.cursor(h.from+f.length)}})}else o?i=t.changeByRange(a=>{let h=s.line(n++);return{changes:{from:a.from,to:a.to,insert:h.text},range:Ye.cursor(a.from+h.length)}}):i=t.replaceSelection(s);r.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}mn.keydown=(r,e)=>{r.inputState.setSelectionOrigin("select"),e.keyCode==27?r.inputState.lastEscPress=Date.now():IH.indexOf(e.keyCode)<0&&(r.inputState.lastEscPress=0)};let XE=0;mn.touchstart=(r,e)=>{XE=Date.now(),r.inputState.setSelectionOrigin("select.pointer")};mn.touchmove=r=>{r.inputState.setSelectionOrigin("select.pointer")};mn.mousedown=(r,e)=>{if(r.observer.flush(),XE>Date.now()-2e3&&$S(e)==1)return;let t=null;for(let i of r.state.facet(_E))if(t=i(r,e),t)break;if(!t&&e.button==0&&(t=qH(r,e)),t){let i=r.root.activeElement!=r.contentDOM;i&&r.observer.ignore(()=>pE(r.contentDOM)),r.inputState.startMouseSelection(new LH(r,e,t,i))}};function hP(r,e,t,i){if(i==1)return Ye.cursor(e,t);if(i==2)return $H(r.state,e,t);{let n=yr.find(r.docView,e),s=r.state.doc.lineAt(n?n.posAtEnd:e),o=n?n.posAtStart:s.from,l=n?n.posAtEnd:s.to;return l<r.state.doc.length&&l==s.to&&l++,Ye.range(o,l)}}let ZE=(r,e)=>r>=e.top&&r<=e.bottom,uP=(r,e,t)=>ZE(e,t)&&r>=t.left&&r<=t.right;function FH(r,e,t,i){let n=yr.find(r.docView,e);if(!n)return 1;let s=e-n.posAtStart;if(s==0)return 1;if(s==n.length)return-1;let o=n.coordsAt(s,-1);if(o&&uP(t,i,o))return-1;let l=n.coordsAt(s,1);return l&&uP(t,i,l)?1:o&&ZE(i,o)?-1:1}function fP(r,e){let t=r.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:FH(r,t,e.clientX,e.clientY)}}const HH=Ve.ie&&Ve.ie_version<=11;let cP=null,dP=0,pP=0;function $S(r){if(!HH)return r.detail;let e=cP,t=pP;return cP=r,pP=Date.now(),dP=!e||t>Date.now()-400&&Math.abs(e.clientX-r.clientX)<2&&Math.abs(e.clientY-r.clientY)<2?(dP+1)%3:1}function qH(r,e){let t=fP(r,e),i=$S(e),n=r.state.selection,s=t,o=e;return{update(l){l.docChanged&&(t&&(t.pos=l.changes.mapPos(t.pos)),n=n.map(l.changes),o=null)},get(l,a,h){let u;if(o&&l.clientX==o.clientX&&l.clientY==o.clientY?u=s:(u=s=fP(r,l),o=l),!u||!t)return n;let f=hP(r,u.pos,u.bias,i);if(t.pos!=u.pos&&!a){let c=hP(r,t.pos,t.bias,i),d=Math.min(c.from,f.from),g=Math.max(c.to,f.to);f=d<f.from?Ye.range(d,g):Ye.range(g,d)}return a?n.replaceRange(n.main.extend(f.from,f.to)):h?n.addRange(f):Ye.create([f])}}}mn.dragstart=(r,e)=>{let{selection:{main:t}}=r.state,{mouseSelection:i}=r.inputState;i&&(i.dragging=t),e.dataTransfer&&(e.dataTransfer.setData("Text",r.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove")};function gP(r,e,t,i){if(!t)return;let n=r.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:s}=r.inputState,o=i&&s&&s.dragging&&s.dragMove?{from:s.dragging.from,to:s.dragging.to}:null,l={from:n,insert:t},a=r.state.changes(o?[o,l]:l);r.focus(),r.dispatch({changes:a,selection:{anchor:a.mapPos(n,-1),head:a.mapPos(n,1)},userEvent:o?"move.drop":"input.drop"})}mn.drop=(r,e)=>{if(!e.dataTransfer)return;if(r.state.readOnly)return e.preventDefault();let t=e.dataTransfer.files;if(t&&t.length){e.preventDefault();let i=Array(t.length),n=0,s=()=>{++n==t.length&&gP(r,e,i.filter(o=>o!=null).join(r.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let l=new FileReader;l.onerror=s,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[o]=l.result),s()},l.readAsText(t[o])}}else gP(r,e,e.dataTransfer.getData("Text"),!0)};mn.paste=(r,e)=>{if(r.state.readOnly)return e.preventDefault();r.observer.flush();let t=HE?null:e.clipboardData;t?(qE(r,t.getData("text/plain")),e.preventDefault()):jH(r)};function XH(r,e){let t=r.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),r.focus()},50)}function ZH(r){let e=[],t=[],i=!1;for(let n of r.selection.ranges)n.empty||(e.push(r.sliceDoc(n.from,n.to)),t.push(n));if(!e.length){let n=-1;for(let{from:s}of r.selection.ranges){let o=r.doc.lineAt(s);o.number>n&&(e.push(o.text),t.push({from:o.from,to:Math.min(r.doc.length,o.to+1)})),n=o.number}i=!0}return{text:e.join(r.lineBreak),ranges:t,linewise:i}}let i2=null;mn.copy=mn.cut=(r,e)=>{let{text:t,ranges:i,linewise:n}=ZH(r.state);if(!t&&!n)return;i2=n?t:null;let s=HE?null:e.clipboardData;s?(e.preventDefault(),s.clearData(),s.setData("text/plain",t)):XH(r,t),e.type=="cut"&&!r.state.readOnly&&r.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"})};function GE(r){setTimeout(()=>{r.hasFocus!=r.inputState.notifiedFocused&&r.update([])},10)}mn.focus=GE;mn.blur=r=>{r.observer.clearSelectionRange(),GE(r)};function UE(r,e){if(r.docView.compositionDeco.size){r.inputState.rapidCompositionStart=e;try{r.update([])}finally{r.inputState.rapidCompositionStart=!1}}}mn.compositionstart=mn.compositionupdate=r=>{r.inputState.compositionFirstChange==null&&(r.inputState.compositionFirstChange=!0),r.inputState.composing<0&&(r.inputState.composing=0,r.docView.compositionDeco.size&&(r.observer.flush(),UE(r,!0)))};mn.compositionend=r=>{r.inputState.composing=-1,r.inputState.compositionEndedAt=Date.now(),r.inputState.compositionFirstChange=null,setTimeout(()=>{r.inputState.composing<0&&UE(r,!1)},50)};mn.contextmenu=r=>{r.inputState.lastContextMenu=Date.now()};mn.beforeinput=(r,e)=>{var t;let i;if(Ve.chrome&&Ve.android&&(i=FE.find(n=>n.inputType==e.inputType))&&(r.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let n=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>n+10&&r.hasFocus&&(r.contentDOM.blur(),r.focus())},100)}};const mP=["pre-wrap","normal","pre-line","break-spaces"];class GH{constructor(){this.doc=zt.empty,this.lineWrapping=!1,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength)),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return mP.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let n=e[i];n<0?i++:this.heightSamples[Math.floor(n*10)]||(t=!0,this.heightSamples[Math.floor(n*10)]=!0)}return t}refresh(e,t,i,n,s){let o=mP.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=t,this.charWidth=i,this.lineLength=n,l){this.heightSamples={};for(let a=0;a<s.length;a++){let h=s[a];h<0?a++:this.heightSamples[Math.floor(h*10)]=!0}}return l}}class UH{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Sa{constructor(e,t,i,n,s){this.from=e,this.length=t,this.top=i,this.height=n,this.type=s}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new Sa(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var ri=function(r){return r[r.ByPos=0]="ByPos",r[r.ByHeight=1]="ByHeight",r[r.ByPosNoHeight=2]="ByPosNoHeight",r}(ri||(ri={}));const Im=.001;class Dr{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>Im&&(e.heightChanged=!0),this.height=t)}replace(e,t,i){return Dr.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,n){let s=this;for(let o=n.length-1;o>=0;o--){let{fromA:l,toA:a,fromB:h,toB:u}=n[o],f=s.lineAt(l,ri.ByPosNoHeight,t,0,0),c=f.to>=a?f:s.lineAt(a,ri.ByPosNoHeight,t,0,0);for(u+=c.to-a,a=c.to;o>0&&f.from<=n[o-1].toA;)l=n[o-1].fromA,h=n[o-1].fromB,o--,l<f.from&&(f=s.lineAt(l,ri.ByPosNoHeight,t,0,0));h+=f.from-l,l=f.from;let d=MS.build(i,e,h,u);s=s.replace(l,a,d)}return s.updateHeight(i,0)}static empty(){return new Fr(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,n=0,s=0;for(;;)if(t==i)if(n>s*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),i+=1+l.break,n-=l.size}else if(s>n*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,s-=l.size}else break;else if(n<s){let l=e[t++];l&&(n+=l.size)}else{let l=e[--i];l&&(s+=l.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,i++),new YH(Dr.of(e.slice(0,t)),o,Dr.of(e.slice(i)))}}Dr.prototype.size=1;class YE extends Dr{constructor(e,t,i){super(e,t),this.type=i}blockAt(e,t,i,n){return new Sa(n,this.length,i,this.height,this.type)}lineAt(e,t,i,n,s){return this.blockAt(0,i,n,s)}forEachLine(e,t,i,n,s,o){e<=s+this.length&&t>=s&&o(this.blockAt(0,i,n,s))}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more&&this.setHeight(e,n.heights[n.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Fr extends YE{constructor(e,t){super(e,t,nn.Text),this.collapsed=0,this.widgetHeight=0}replace(e,t,i){let n=i[0];return i.length==1&&(n instanceof Fr||n instanceof vn&&n.flags&4)&&Math.abs(this.length-n.length)<10?(n instanceof vn?n=new Fr(n.length,this.height):n.height=this.height,this.outdated||(n.outdated=!1),n):Dr.of(i)}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more?this.setHeight(e,n.heights[n.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class vn extends Dr{constructor(e){super(e,0)}lines(e,t){let i=e.lineAt(t).number,n=e.lineAt(t+this.length).number;return{firstLine:i,lastLine:n,lineHeight:this.height/(n-i+1)}}blockAt(e,t,i,n){let{firstLine:s,lastLine:o,lineHeight:l}=this.lines(t,n),a=Math.max(0,Math.min(o-s,Math.floor((e-i)/l))),{from:h,length:u}=t.line(s+a);return new Sa(h,u,i+l*a,l,nn.Text)}lineAt(e,t,i,n,s){if(t==ri.ByHeight)return this.blockAt(e,i,n,s);if(t==ri.ByPosNoHeight){let{from:f,to:c}=i.lineAt(e);return new Sa(f,c-f,0,0,nn.Text)}let{firstLine:o,lineHeight:l}=this.lines(i,s),{from:a,length:h,number:u}=i.lineAt(e);return new Sa(a,h,n+l*(u-o),l,nn.Text)}forEachLine(e,t,i,n,s,o){let{firstLine:l,lineHeight:a}=this.lines(i,s);for(let h=Math.max(e,s),u=Math.min(s+this.length,t);h<=u;){let f=i.lineAt(h);h==e&&(n+=a*(f.number-l)),o(new Sa(f.from,f.length,n,a,nn.Text)),n+=a,h=f.to+1}}replace(e,t,i){let n=this.length-t;if(n>0){let s=i[i.length-1];s instanceof vn?i[i.length-1]=new vn(s.length+n):i.push(null,new vn(n-1))}if(e>0){let s=i[0];s instanceof vn?i[0]=new vn(e+s.length):i.unshift(new vn(e-1),null)}return Dr.of(i)}decomposeLeft(e,t){t.push(new vn(e-1),null)}decomposeRight(e,t){t.push(null,new vn(this.length-e-1))}updateHeight(e,t=0,i=!1,n){let s=t+this.length;if(n&&n.from<=t+this.length&&n.more){let o=[],l=Math.max(t,n.from),a=-1,h=e.heightChanged;for(n.from>t&&o.push(new vn(n.from-t-1).updateHeight(e,t));l<=s&&n.more;){let f=e.doc.lineAt(l).length;o.length&&o.push(null);let c=n.heights[n.index++];a==-1?a=c:Math.abs(c-a)>=Im&&(a=-2);let d=new Fr(f,c);d.outdated=!1,o.push(d),l+=f+1}l<=s&&o.push(null,new vn(s-l).updateHeight(e,l));let u=Dr.of(o);return e.heightChanged=h||a<0||Math.abs(u.height-this.height)>=Im||Math.abs(a-this.lines(e.doc,t).lineHeight)>=Im,u}else(i||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class YH extends Dr{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,n){let s=i+this.left.height;return e<s?this.left.blockAt(e,t,i,n):this.right.blockAt(e,t,s,n+this.left.length+this.break)}lineAt(e,t,i,n,s){let o=n+this.left.height,l=s+this.left.length+this.break,a=t==ri.ByHeight?e<o:e<l,h=a?this.left.lineAt(e,t,i,n,s):this.right.lineAt(e,t,i,o,l);if(this.break||(a?h.to<l:h.from>l))return h;let u=t==ri.ByPosNoHeight?ri.ByPosNoHeight:ri.ByPos;return a?h.join(this.right.lineAt(l,u,i,o,l)):this.left.lineAt(l,u,i,n,s).join(h)}forEachLine(e,t,i,n,s,o){let l=n+this.left.height,a=s+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,i,n,s,o),t>=a&&this.right.forEachLine(e,t,i,l,a,o);else{let h=this.lineAt(a,ri.ByPos,i,n,s);e<h.from&&this.left.forEachLine(e,h.from-1,i,n,s,o),h.to>=e&&h.from<=t&&o(h),t>h.to&&this.right.forEachLine(h.to+1,t,i,l,a,o)}}replace(e,t,i){let n=this.left.length+this.break;if(t<n)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-n,t-n,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let l of i)s.push(l);if(e>0&&bP(s,o-1),t<this.length){let l=s.length;this.decomposeRight(t,s),bP(s,l)}return Dr.of(s)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,n=i+this.break;if(e>=n)return this.right.decomposeRight(e-n,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<n&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Dr.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,n){let{left:s,right:o}=this,l=t+s.length+this.break,a=null;return n&&n.from<=t+s.length&&n.more?a=s=s.updateHeight(e,t,i,n):s.updateHeight(e,t,i),n&&n.from<=l+o.length&&n.more?a=o=o.updateHeight(e,l,i,n):o.updateHeight(e,l,i),a?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function bP(r,e){let t,i;r[e]==null&&(t=r[e-1])instanceof vn&&(i=r[e+1])instanceof vn&&r.splice(e-1,3,new vn(t.length+1+i.length))}const KH=5;class MS{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof Fr?n.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Fr(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let n=i.widget?i.widget.estimatedHeight:0;n<0&&(n=this.oracle.lineHeight);let s=t-e;i.block?this.addBlock(new YE(s,n,i.type)):(s||n>=KH)&&this.addLineDeco(n,s)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Fr(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new vn(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Fr)return e;let t=new Fr(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type==nn.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=nn.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let i=this.ensureLine();i.length+=t,i.collapsed+=t,i.widgetHeight=Math.max(i.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Fr)&&!this.isCovered?this.nodes.push(new Fr(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let n of this.nodes)n instanceof Fr&&n.updateHeight(this.oracle,i),i+=n?n.length:1;return this.nodes}static build(e,t,i,n){let s=new MS(i,e);return Zi.spans(t,i,n,s,0),s.finish(i)}}function JH(r,e,t){let i=new eq;return Zi.compare(r,e,t,i,0),i.changes}class eq{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,n){(e<t||i&&i.heightRelevant||n&&n.heightRelevant)&&Yv(e,t,this.changes,5)}}function tq(r,e){let t=r.getBoundingClientRect(),i=Math.max(0,t.left),n=Math.min(innerWidth,t.right),s=Math.max(0,t.top),o=Math.min(innerHeight,t.bottom),l=r.ownerDocument.body;for(let a=r.parentNode;a&&a!=l;)if(a.nodeType==1){let h=a,u=window.getComputedStyle(h);if((h.scrollHeight>h.clientHeight||h.scrollWidth>h.clientWidth)&&u.overflow!="visible"){let f=h.getBoundingClientRect();i=Math.max(i,f.left),n=Math.min(n,f.right),s=Math.max(s,f.top),o=Math.min(o,f.bottom)}a=u.position=="absolute"||u.position=="fixed"?h.offsetParent:h.parentNode}else if(a.nodeType==11)a=a.host;else break;return{left:i-t.left,right:Math.max(i,n)-t.left,top:s-(t.top+e),bottom:Math.max(s,o)-(t.top+e)}}function iq(r,e){let t=r.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class dk{constructor(e,t,i){this.from=e,this.to=t,this.size=i}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let n=e[i],s=t[i];if(n.from!=s.from||n.to!=s.to||n.size!=s.size)return!1}return!0}draw(e){return mi.replace({widget:new nq(this.size,e)}).range(this.from,this.to)}}class nq extends Op{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class OP{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.heightOracle=new GH,this.scaler=yP,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Dn.RTL,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.stateDeco=e.facet(zd).filter(t=>typeof t!="function"),this.heightMap=Dr.empty().applyChanges(this.stateDeco,zt.empty,this.heightOracle.setDoc(e.doc),[new yl(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=mi.set(this.lineGaps.map(t=>t.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let n=i?t.head:t.anchor;if(!e.some(({from:s,to:o})=>n>=s&&n<=o)){let{from:s,to:o}=this.lineBlockAt(n);e.push(new vg(s,o))}}this.viewports=e.sort((i,n)=>i.from-n.from),this.scaler=this.heightMap.height<=7e6?yP:new oq(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:Fc(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(zd).filter(h=>typeof h!="function");let n=e.changedRanges,s=yl.extendWithRanges(n,JH(i,this.stateDeco,e?e.changes:un.empty(this.state.doc.length))),o=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=o&&(e.flags|=2);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let a=!e.changes.empty||e.flags&2||l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,this.updateForViewport(),a&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),n=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Dn.RTL:Dn.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),l=o||this.mustMeasureContent||this.contentDOMHeight!=t.clientHeight;this.contentDOMHeight=t.clientHeight,this.mustMeasureContent=!1;let a=0,h=0,u=parseInt(i.paddingTop)||0,f=parseInt(i.paddingBottom)||0;(this.paddingTop!=u||this.paddingBottom!=f)&&(this.paddingTop=u,this.paddingBottom=f,a|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(n.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,a|=8);let c=(this.printing?iq:tq)(t,this.paddingTop),d=c.top-this.pixelViewport.top,g=c.bottom-this.pixelViewport.bottom;this.pixelViewport=c;let w=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(w!=this.inView&&(this.inView=w,w&&(l=!0)),!this.inView)return 0;let S=t.clientWidth;if((this.contentDOMWidth!=S||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=S,this.editorHeight=e.scrollDOM.clientHeight,a|=8),l){let Q=e.docView.measureVisibleLineHeights(this.viewport);if(n.mustRefreshForHeights(Q)&&(o=!0),o||n.lineWrapping&&Math.abs(S-this.contentDOMWidth)>n.charWidth){let{lineHeight:M,charWidth:p}=e.docView.measureTextSize();o=n.refresh(s,M,p,S/p,Q),o&&(e.docView.minWidth=0,a|=8)}d>0&&g>0?h=Math.max(d,g):d<0&&g<0&&(h=Math.min(d,g)),n.heightChanged=!1;for(let M of this.viewports){let p=M.from==this.viewport.from?Q:e.docView.measureVisibleLineHeights(M);this.heightMap=this.heightMap.updateHeight(n,0,o,new UH(M.from,p))}n.heightChanged&&(a|=2)}let x=!this.viewportIsAppropriate(this.viewport,h)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return x&&(this.viewport=this.getViewport(h,this.scrollTarget)),this.updateForViewport(),(a&2||x)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps)),a|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),a}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),n=this.heightMap,s=this.state.doc,{visibleTop:o,visibleBottom:l}=this,a=new vg(n.lineAt(o-i*1e3,ri.ByHeight,s,0,0).from,n.lineAt(l+(1-i)*1e3,ri.ByHeight,s,0,0).to);if(t){let{head:h}=t.range;if(h<a.from||h>a.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=n.lineAt(h,ri.ByPos,s,0,0),c;t.y=="center"?c=(f.top+f.bottom)/2-u/2:t.y=="start"||t.y=="nearest"&&h<a.from?c=f.top:c=f.bottom-u,a=new vg(n.lineAt(c-1e3/2,ri.ByHeight,s,0,0).from,n.lineAt(c+u+1e3/2,ri.ByHeight,s,0,0).to)}}return a}mapViewport(e,t){let i=t.mapPos(e.from,-1),n=t.mapPos(e.to,1);return new vg(this.heightMap.lineAt(i,ri.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(n,ri.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:n}=this.heightMap.lineAt(e,ri.ByPos,this.state.doc,0,0),{bottom:s}=this.heightMap.lineAt(t,ri.ByPos,this.state.doc,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||n<=o-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||s>=l+Math.max(10,Math.min(i,250)))&&n>o-2*1e3&&s<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let n of e)t.touchesRange(n.from,n.to)||i.push(new dk(t.mapPos(n.from),t.mapPos(n.to),n.size));return i}ensureLineGaps(e){let t=[];if(this.defaultTextDirection!=Dn.LTR)return t;for(let i of this.viewportLines){if(i.length<4e3)continue;let n=rq(i.from,i.to,this.stateDeco);if(n.total<4e3)continue;let s,o;if(this.heightOracle.lineWrapping){let h=2e3/this.heightOracle.lineLength*this.heightOracle.lineHeight;s=Sg(n,(this.visibleTop-i.top-h)/i.height),o=Sg(n,(this.visibleBottom-i.top+h)/i.height)}else{let h=n.total*this.heightOracle.charWidth,u=2e3*this.heightOracle.charWidth;s=Sg(n,(this.pixelViewport.left-u)/h),o=Sg(n,(this.pixelViewport.right+u)/h)}let l=[];s>i.from&&l.push({from:i.from,to:s}),o<i.to&&l.push({from:o,to:i.to});let a=this.state.selection.main;a.from>=i.from&&a.from<=i.to&&wP(l,a.from-10,a.from+10),!a.empty&&a.to>=i.from&&a.to<=i.to&&wP(l,a.to-10,a.to+10);for(let{from:h,to:u}of l)u-h>1e3&&t.push(sq(e,f=>f.from>=i.from&&f.to<=i.to&&Math.abs(f.from-h)<1e3&&Math.abs(f.to-u)<1e3)||new dk(h,u,this.gapSize(i,h,u,n)))}return t}gapSize(e,t,i,n){let s=kP(n,i)-kP(n,t);return this.heightOracle.lineWrapping?e.height*s:n.total*this.heightOracle.charWidth*s}updateLineGaps(e){dk.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=mi.set(e.map(t=>t.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];Zi.spans(e,this.viewport.from,this.viewport.to,{span(n,s){t.push({from:n,to:s})},point(){}},20);let i=t.length!=this.visibleRanges.length||this.visibleRanges.some((n,s)=>n.from!=t[s].from||n.to!=t[s].to);return this.visibleRanges=t,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Fc(this.heightMap.lineAt(e,ri.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(e){return Fc(this.heightMap.lineAt(this.scaler.fromDOM(e),ri.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(e){return Fc(this.heightMap.blockAt(this.scaler.fromDOM(e),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class vg{constructor(e,t){this.from=e,this.to=t}}function rq(r,e,t){let i=[],n=r,s=0;return Zi.spans(t,r,e,{span(){},point(o,l){o>n&&(i.push({from:n,to:o}),s+=o-n),n=l}},20),n<e&&(i.push({from:n,to:e}),s+=e-n),{total:s,ranges:i}}function Sg({total:r,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(r*t);for(let n=0;;n++){let{from:s,to:o}=e[n],l=o-s;if(i<=l)return s+i;i-=l}}function kP(r,e){let t=0;for(let{from:i,to:n}of r.ranges){if(e<=n){t+=e-i;break}t+=n-i}return t/r.total}function wP(r,e,t){for(let i=0;i<r.length;i++){let n=r[i];if(n.from<t&&n.to>e){let s=[];n.from<e&&s.push({from:n.from,to:e}),n.to>t&&s.push({from:t,to:n.to}),r.splice(i,1,...s),i+=s.length-1}}}function sq(r,e){for(let t of r)if(e(t))return t}const yP={toDOM(r){return r},fromDOM(r){return r},scale:1};class oq{constructor(e,t,i){let n=0,s=0,o=0;this.viewports=i.map(({from:l,to:a})=>{let h=t.lineAt(l,ri.ByPos,e,0,0).top,u=t.lineAt(a,ri.ByPos,e,0,0).bottom;return n+=u-h,{from:l,to:a,top:h,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-n)/(t.height-n);for(let l of this.viewports)l.domTop=o+(l.top-s)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),s=l.bottom}toDOM(e){for(let t=0,i=0,n=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return n+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,n=s.domBottom}}fromDOM(e){for(let t=0,i=0,n=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return i+(e-n)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,n=s.domBottom}}}function Fc(r,e){if(e.scale==1)return r;let t=e.toDOM(r.top),i=e.toDOM(r.bottom);return new Sa(r.from,r.length,t,i-t,Array.isArray(r.type)?r.type.map(n=>Fc(n,e)):r.type)}const xg=gt.define({combine:r=>r.join(" ")}),n2=gt.define({combine:r=>r.indexOf(!0)>-1}),r2=Ct.newName(),KE=Ct.newName(),JE=Ct.newName(),eB={"&light":"."+KE,"&dark":"."+JE};function s2(r,e,t){return new Ct(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,n=>{if(n=="&")return r;if(!t||!t[n])throw new RangeError(`Unsupported selector: ${n}`);return t[n]}):r+" "+i}})}const lq=s2("."+r2,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere"},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#f3f9ff"},"&dark .cm-activeLine":{backgroundColor:"#223039"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},eB),aq={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},pk=Ve.ie&&Ve.ie_version<=11;class hq{constructor(e,t,i){this.view=e,this.onChange=t,this.onScrollChanged=i,this.active=!1,this.selectionRange=new uH,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let s of n)this.queue.push(s);(Ve.ie&&Ve.ie_version<=11||Ve.ios&&e.composing)&&n.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),pk&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),window.addEventListener("resize",this.onResize=this.onResize.bind(this)),typeof ResizeObserver=="function"&&(this.resize=new ResizeObserver(()=>{this.view.docView.lastUpdate<Date.now()-75&&this.onResize()}),this.resize.observe(e.scrollDOM)),window.addEventListener("beforeprint",this.onPrint=this.onPrint.bind(this)),this.start(),window.addEventListener("scroll",this.onScroll=this.onScroll.bind(this)),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange(),this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:t}=this,i=this.selectionRange;if(t.state.facet(wp)?t.root.activeElement!=this.dom:!Vv(t.dom,i))return;let n=i.anchorNode&&t.docView.nearest(i.anchorNode);n&&n.ignoreEvent(e)||((Ve.ie&&Ve.ie_version<=11||Ve.android&&Ve.chrome)&&!t.state.selection.main.empty&&i.focusNode&&e1(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1))}readSelectionRange(){let{root:e}=this.view,t=J0(e),i=Ve.safari&&e.nodeType==11&&lH()==this.view.contentDOM&&uq(this.view)||t;return this.selectionRange.eq(i)?!1:(this.selectionRange.setRange(i),this.selectionChanged=!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,aq),pk&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){!this.active||(this.active=!1,this.observer.disconnect(),pk&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){this.delayedAndroidKey||requestAnimationFrame(()=>{let i=this.delayedAndroidKey;this.delayedAndroidKey=null,this.delayedFlush=-1,this.flush()||ad(this.view.contentDOM,i.key,i.keyCode)}),(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t})}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=window.setTimeout(()=>{this.delayedFlush=-1,this.flush()},20))}forceFlush(){this.delayedFlush>=0&&(window.clearTimeout(this.delayedFlush),this.delayedFlush=-1,this.flush())}processRecords(){let e=this.queue;for(let s of this.observer.takeRecords())e.push(s);e.length&&(this.queue=[]);let t=-1,i=-1,n=!1;for(let s of e){let o=this.readMutation(s);!o||(o.typeOver&&(n=!0),t==-1?{from:t,to:i}=o:(t=Math.min(o.from,t),i=Math.max(o.to,i)))}return{from:t,to:i,typeOver:n}}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return;e&&this.readSelectionRange();let{from:t,to:i,typeOver:n}=this.processRecords(),s=this.selectionChanged&&Vv(this.dom,this.selectionRange);if(t<0&&!s)return;this.selectionChanged=!1;let o=this.view.state,l=this.onChange(t,i,n);return this.view.state==o&&this.view.update([]),l}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.dirty|=4),e.type=="childList"){let i=vP(t,e.previousSibling||e.target.previousSibling,-1),n=vP(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:n?t.posBefore(n):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resize)===null||i===void 0||i.disconnect();for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResize),window.removeEventListener("beforeprint",this.onPrint),this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout)}}function vP(r,e,t){for(;e;){let i=Ei.get(e);if(i&&i.parent==r)return i;let n=e.parentNode;e=n!=r.dom?n:t>0?e.nextSibling:e.previousSibling}return null}function uq(r){let e=null;function t(a){a.preventDefault(),a.stopImmediatePropagation(),e=a.getTargetRanges()[0]}if(r.contentDOM.addEventListener("beforeinput",t,!0),document.execCommand("indent"),r.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let i=e.startContainer,n=e.startOffset,s=e.endContainer,o=e.endOffset,l=r.docView.domAtPos(r.state.selection.main.anchor);return e1(l.node,l.offset,s,o)&&([i,n,s,o]=[s,o,i,n]),{anchorNode:i,anchorOffset:n,focusNode:s,focusOffset:o}}function fq(r,e,t,i){let n,s,o=r.state.selection.main;if(e>-1){let l=r.docView.domBoundsAround(e,t,0);if(!l||r.state.readOnly)return!1;let{from:a,to:h}=l,u=r.docView.impreciseHead||r.docView.impreciseAnchor?[]:dq(r),f=new zE(u,r.state);f.readRange(l.startDOM,l.endDOM);let c=o.from,d=null;(r.inputState.lastKeyCode===8&&r.inputState.lastKeyTime>Date.now()-100||Ve.android&&f.text.length<h-a)&&(c=o.to,d="end");let g=cq(r.state.doc.sliceString(a,h,va),f.text,c-a,d);g&&(Ve.chrome&&r.inputState.lastKeyCode==13&&g.toB==g.from+2&&f.text.slice(g.from,g.toB)==va+va&&g.toB--,n={from:a+g.from,to:a+g.toA,insert:zt.of(f.text.slice(g.from,g.toB).split(va))}),s=pq(u,a)}else if(r.hasFocus||!r.state.facet(wp)){let l=r.observer.selectionRange,{impreciseHead:a,impreciseAnchor:h}=r.docView,u=a&&a.node==l.focusNode&&a.offset==l.focusOffset||!bf(r.contentDOM,l.focusNode)?r.state.selection.main.head:r.docView.posFromDOM(l.focusNode,l.focusOffset),f=h&&h.node==l.anchorNode&&h.offset==l.anchorOffset||!bf(r.contentDOM,l.anchorNode)?r.state.selection.main.anchor:r.docView.posFromDOM(l.anchorNode,l.anchorOffset);(u!=o.head||f!=o.anchor)&&(s=Ye.single(f,u))}if(!n&&!s)return!1;if(!n&&i&&!o.empty&&s&&s.main.empty?n={from:o.from,to:o.to,insert:r.state.doc.slice(o.from,o.to)}:n&&n.from>=o.from&&n.to<=o.to&&(n.from!=o.from||n.to!=o.to)&&o.to-o.from-(n.to-n.from)<=4?n={from:o.from,to:o.to,insert:r.state.doc.slice(o.from,n.from).append(n.insert).append(r.state.doc.slice(n.to,o.to))}:(Ve.mac||Ve.android)&&n&&n.from==n.to&&n.from==o.head-1&&n.insert.toString()=="."&&(n={from:o.from,to:o.to,insert:zt.of([" "])}),n){let l=r.state;if(Ve.ios&&r.inputState.flushIOSKey(r)||Ve.android&&(n.from==o.from&&n.to==o.to&&n.insert.length==1&&n.insert.lines==2&&ad(r.contentDOM,"Enter",13)||n.from==o.from-1&&n.to==o.to&&n.insert.length==0&&ad(r.contentDOM,"Backspace",8)||n.from==o.from&&n.to==o.to+1&&n.insert.length==0&&ad(r.contentDOM,"Delete",46)))return!0;let a=n.insert.toString();if(r.state.facet(ME).some(f=>f(r,n.from,n.to,a)))return!0;r.inputState.composing>=0&&r.inputState.composing++;let h;if(n.from>=o.from&&n.to<=o.to&&n.to-n.from>=(o.to-o.from)/3&&(!s||s.main.empty&&s.main.from==n.from+n.insert.length)&&r.inputState.composing<0){let f=o.from<n.from?l.sliceDoc(o.from,n.from):"",c=o.to>n.to?l.sliceDoc(n.to,o.to):"";h=l.replaceSelection(r.state.toText(f+n.insert.sliceString(0,void 0,r.state.lineBreak)+c))}else{let f=l.changes(n),c=s&&!l.selection.main.eq(s.main)&&s.main.to<=f.newLength?s.main:void 0;if(l.selection.ranges.length>1&&r.inputState.composing>=0&&n.to<=o.to&&n.to>=o.to-10){let d=r.state.sliceDoc(n.from,n.to),g=WE(r)||r.state.doc.lineAt(o.head),w=o.to-n.to,S=o.to-o.from;h=l.changeByRange(x=>{if(x.from==o.from&&x.to==o.to)return{changes:f,range:c||x.map(f)};let Q=x.to-w,M=Q-d.length;if(x.to-x.from!=S||r.state.sliceDoc(M,Q)!=d||g&&x.to>=g.from&&x.from<=g.to)return{range:x};let p=l.changes({from:M,to:Q,insert:n.insert}),b=x.to-o.to;return{changes:p,range:c?Ye.range(Math.max(0,c.anchor+b),Math.max(0,c.head+b)):x.map(p)}})}else h={changes:f,selection:c&&l.selection.replaceRange(c)}}let u="input.type";return r.composing&&(u+=".compose",r.inputState.compositionFirstChange&&(u+=".start",r.inputState.compositionFirstChange=!1)),r.dispatch(h,{scrollIntoView:!0,userEvent:u}),!0}else if(s&&!s.main.eq(o)){let l=!1,a="select";return r.inputState.lastSelectionTime>Date.now()-50&&(r.inputState.lastSelectionOrigin=="select"&&(l=!0),a=r.inputState.lastSelectionOrigin),r.dispatch({selection:s,scrollIntoView:l,userEvent:a}),!0}else return!1}function cq(r,e,t,i){let n=Math.min(r.length,e.length),s=0;for(;s<n&&r.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==n&&r.length==e.length)return null;let o=r.length,l=e.length;for(;o>0&&l>0&&r.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(i=="end"){let a=Math.max(0,s-Math.min(o,l));t-=o+a-s}return o<s&&r.length<e.length?(s-=t<=s&&t>=o?s-t:0,l=s+(l-o),o=s):l<s&&(s-=t<=s&&t>=l?s-t:0,o=s+(o-l),l=s),{from:s,toA:o,toB:l}}function dq(r){let e=[];if(r.root.activeElement!=r.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:n,focusOffset:s}=r.observer.selectionRange;return t&&(e.push(new eP(t,i)),(n!=t||s!=i)&&e.push(new eP(n,s))),e}function pq(r,e){if(r.length==0)return null;let t=r[0].pos,i=r.length==2?r[1].pos:t;return t>-1&&i>-1?Ye.single(t+e,i+e):null}class di{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(t=>this.update([t])),this.dispatch=this.dispatch.bind(this),this.root=e.root||fH(e.parent)||document,this.viewState=new OP(e.state||li.create()),this.plugins=this.state.facet(Vc).map(t=>new uk(t));for(let t of this.plugins)t.update(this);this.observer=new hq(this,(t,i,n)=>fq(this,t,i,n),t=>{this.inputState.runScrollHandlers(this,t),this.observer.intersecting&&this.measure()}),this.inputState=new NH(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new tP(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}dispatch(...e){this._dispatch(e.length==1&&e[0]instanceof Jn?e[0]:this.state.update(...e))}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,n,s=this.state;for(let l of e){if(l.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=l.state}if(this.destroyed){this.viewState.state=s;return}if(this.observer.clear(),s.facet(li.phrases)!=this.state.facet(li.phrases))return this.setState(s);n=n1.create(this,s,e);let o=this.viewState.scrollTarget;try{this.updateState=2;for(let l of e){if(o&&(o=o.map(l.changes)),l.scrollIntoView){let{main:a}=l.state.selection;o=new i1(a.empty?a:Ye.cursor(a.head,a.head>a.anchor?-1:1))}for(let a of l.effects)a.is(KT)&&(o=a.value)}this.viewState.update(n,o),this.bidiCache=r1.update(this.bidiCache,n.changes),n.empty||(this.updatePlugins(n),this.inputState.update(n)),t=this.docView.update(n),this.state.facet(jc)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(l=>l.isUserEvent("select.pointer")))}finally{this.updateState=0}if(n.startState.facet(xg)!=n.state.facet(xg)&&(this.viewState.mustMeasureContent=!0),(t||i||o||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!n.empty)for(let l of this.state.facet(Kv))l(n)}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new OP(e),this.plugins=e.facet(Vc).map(i=>new uk(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView=new tP(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Vc),i=e.state.facet(Vc);if(t!=i){let n=[];for(let s of i){let o=t.indexOf(s);if(o<0)n.push(new uk(s));else{let l=this.plugins[o];l.mustUpdate=e,n.push(l)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=n,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let n of this.plugins)n.mustUpdate=e;for(let n=0;n<this.plugins.length;n++)this.plugins[n].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.flush();let t=null;try{for(let i=0;;i++){this.updateState=1;let n=this.viewport,s=this.viewState.measure(this);if(!s&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(i>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let o=[];s&4||([this.measureRequests,o]=[o,this.measureRequests]);let l=o.map(f=>{try{return f.read(this)}catch(c){return wl(this.state,c),SP}}),a=n1.create(this,this.state,[]),h=!1,u=!1;a.flags|=s,t?t.flags|=s:t=a,this.updateState=2,a.empty||(this.updatePlugins(a),this.inputState.update(a),this.updateAttrs(),h=this.docView.update(a));for(let f=0;f<o.length;f++)if(l[f]!=SP)try{let c=o[f];c.write&&c.write(l[f],this)}catch(c){wl(this.state,c)}if(this.viewState.scrollTarget&&(this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,u=!0),h&&this.docView.updateSelection(!0),this.viewport.from==n.from&&this.viewport.to==n.to&&!u&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let i of this.state.facet(Kv))i(t)}get themeClasses(){return r2+" "+(this.state.facet(n2)?JE:KE)+" "+this.state.facet(xg)}updateAttrs(){let e=xP(this,QE,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(wp)?"true":"false",class:"cm-content",style:`${Ve.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),xP(this,DE,t);let i=this.observer.ignore(()=>{let n=Uv(this.contentDOM,this.contentAttrs,t),s=Uv(this.dom,this.editorAttrs,e);return n||s});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let n of i.effects)if(n.is(di.announce)){t&&(this.announceDOM.textContent=""),t=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=n.value}}mountStyles(){this.styleModules=this.state.facet(jc),Ct.mount(this.root,this.styleModules.concat(lq).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=requestAnimationFrame(()=>this.measure())),e){if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return ck(this,e,lP(this,e,t,i))}moveByGroup(e,t){return ck(this,e,lP(this,e,t,i=>EH(this,e.head,i)))}moveToLineBoundary(e,t,i=!0){return DH(this,e,t,i)}moveVertically(e,t,i){return ck(this,e,BH(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),jE(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let n=this.state.doc.lineAt(e),s=this.bidiSpans(n),o=s[qu.find(s,e-n.from,-1,t)];return qb(i,o.dir==Dn.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(RE)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>gq)return IE(e.length);let t=this.textDirectionAt(e.from);for(let n of this.bidiCache)if(n.from==e.from&&n.dir==t)return n.order;let i=yH(e.text,t);return this.bidiCache.push(new r1(e.from,e.to,t,i)),i}get hasFocus(){var e;return(document.hasFocus()||Ve.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{pE(this.contentDOM),this.docView.updateSelection()})}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return KT.of(new i1(typeof e=="number"?Ye.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return Ha.define(()=>({}),{eventHandlers:e})}static theme(e,t){let i=Ct.newName(),n=[xg.of(i),jc.of(s2(`.${i}`,e))];return t&&t.dark&&n.push(n2.of(!0)),n}static baseTheme(e){return XF.lowest(jc.of(s2("."+r2,e,eB)))}}di.styleModule=jc;di.inputHandler=ME;di.perLineTextDirection=RE;di.exceptionSink=$E;di.updateListener=Kv;di.editable=wp;di.mouseSelectionStyle=_E;di.dragMovesSelection=PE;di.clickAddsSelectionRange=TE;di.decorations=zd;di.atomicRanges=EE;di.scrollMargins=BE;di.darkTheme=n2;di.contentAttributes=DE;di.editorAttributes=QE;di.lineWrapping=di.contentAttributes.of({class:"cm-lineWrapping"});di.announce=Ti.define();const gq=4096,SP={};class r1{constructor(e,t,i,n){this.from=e,this.to=t,this.dir=i,this.order=n}static update(e,t){if(t.empty)return e;let i=[],n=e.length?e[e.length-1].dir:Dn.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==n&&!t.touchesRange(o.from,o.to)&&i.push(new r1(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.order))}return i}}function xP(r,e,t){for(let i=r.state.facet(e),n=i.length-1;n>=0;n--){let s=i[n],o=typeof s=="function"?s(r):s;o&&Gv(o,t)}return t}const mq=!Ve.ios,bq={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};mq&&(bq[".cm-line"].caretColor="transparent !important");const gk="-10000px";class tB{constructor(e,t,i){this.facet=t,this.createTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter(n=>n),this.tooltipViews=this.tooltips.map(i)}update(e){let t=e.state.facet(this.facet),i=t.filter(s=>s);if(t===this.input){for(let s of this.tooltipViews)s.update&&s.update(e);return!1}let n=[];for(let s=0;s<i.length;s++){let o=i[s],l=-1;if(!!o){for(let a=0;a<this.tooltips.length;a++){let h=this.tooltips[a];h&&h.create==o.create&&(l=a)}if(l<0)n[s]=this.createTooltipView(o);else{let a=n[s]=this.tooltipViews[l];a.update&&a.update(e)}}}for(let s of this.tooltipViews)n.indexOf(s)<0&&s.dom.remove();return this.input=t,this.tooltips=i,this.tooltipViews=n,!0}}function Oq(){return{top:0,left:0,bottom:innerHeight,right:innerWidth}}const mk=gt.define({combine:r=>{var e,t,i;return{position:Ve.ios?"absolute":((e=r.find(n=>n.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=r.find(n=>n.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=r.find(n=>n.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||Oq}}}),kq=Ha.fromClass(class{constructor(r){var e;this.view=r,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let t=r.state.facet(mk);this.position=t.position,this.parent=t.parent,this.classes=r.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new tB(r,iB,i=>this.createTooltip(i)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(i=>{Date.now()>this.lastTransaction-50&&i.length>0&&i[i.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),(e=r.dom.ownerDocument.defaultView)===null||e===void 0||e.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let r of this.manager.tooltipViews)this.intersectionObserver.observe(r.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(r){r.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(r);e&&this.observeIntersection();let t=e||r.geometryChanged,i=r.state.facet(mk);if(i.position!=this.position){this.position=i.position;for(let n of this.manager.tooltipViews)n.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let n of this.manager.tooltipViews)this.container.appendChild(n.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(r){let e=r.create(this.view);if(e.dom.classList.add("cm-tooltip"),r.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let t=document.createElement("div");t.className="cm-tooltip-arrow",e.dom.appendChild(t)}return e.dom.style.position=this.position,e.dom.style.top=gk,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var r,e;(r=this.view.dom.ownerDocument.defaultView)===null||r===void 0||r.removeEventListener("resize",this.measureSoon);for(let{dom:t}of this.manager.tooltipViews)t.remove();(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let r=this.view.dom.getBoundingClientRect();return{editor:r,parent:this.parent?this.container.getBoundingClientRect():r,pos:this.manager.tooltips.map((e,t)=>{let i=this.manager.tooltipViews[t];return i.getCoords?i.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(mk).tooltipSpace(this.view)}}writeMeasure(r){let{editor:e,space:t}=r,i=[];for(let n=0;n<this.manager.tooltips.length;n++){let s=this.manager.tooltips[n],o=this.manager.tooltipViews[n],{dom:l}=o,a=r.pos[n],h=r.size[n];if(!a||a.bottom<=Math.max(e.top,t.top)||a.top>=Math.min(e.bottom,t.bottom)||a.right<Math.max(e.left,t.left)-.1||a.left>Math.min(e.right,t.right)+.1){l.style.top=gk;continue}let u=s.arrow?o.dom.querySelector(".cm-tooltip-arrow"):null,f=u?7:0,c=h.right-h.left,d=h.bottom-h.top,g=o.offset||yq,w=this.view.textDirection==Dn.LTR,S=h.width>t.right-t.left?w?t.left:t.right-h.width:w?Math.min(a.left-(u?14:0)+g.x,t.right-c):Math.max(t.left,a.left-c+(u?14:0)-g.x),x=!!s.above;!s.strictSide&&(x?a.top-(h.bottom-h.top)-g.y<t.top:a.bottom+(h.bottom-h.top)+g.y>t.bottom)&&x==t.bottom-a.bottom>a.top-t.top&&(x=!x);let Q=x?a.top-d-f-g.y:a.bottom+f+g.y,M=S+c;if(o.overlap!==!0)for(let p of i)p.left<M&&p.right>S&&p.top<Q+d&&p.bottom>Q&&(Q=x?p.top-d-2-f:p.bottom+f+2);this.position=="absolute"?(l.style.top=Q-r.parent.top+"px",l.style.left=S-r.parent.left+"px"):(l.style.top=Q+"px",l.style.left=S+"px"),u&&(u.style.left=`${a.left+(w?g.x:-g.x)-(S+14-7)}px`),o.overlap!==!0&&i.push({left:S,top:Q,right:M,bottom:Q+d}),l.classList.toggle("cm-tooltip-above",x),l.classList.toggle("cm-tooltip-below",!x),o.positioned&&o.positioned()}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let r of this.manager.tooltipViews)r.dom.style.top=gk}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),wq=di.baseTheme({".cm-tooltip":{zIndex:100},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:`${7}px`,width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:`${7}px solid transparent`,borderRight:`${7}px solid transparent`},".cm-tooltip-above &":{bottom:`-${7}px`,"&:before":{borderTop:`${7}px solid #bbb`},"&:after":{borderTop:`${7}px solid #f5f5f5`,bottom:"1px"}},".cm-tooltip-below &":{top:`-${7}px`,"&:before":{borderBottom:`${7}px solid #bbb`},"&:after":{borderBottom:`${7}px solid #f5f5f5`,top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),yq={x:0,y:0},iB=gt.define({enables:[kq,wq]}),s1=gt.define();class RS{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new tB(e,s1,t=>this.createHostedView(t))}static create(e){return new RS(e)}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(){for(let e of this.manager.tooltipViews)e.positioned&&e.positioned()}update(e){this.manager.update(e)}}const vq=iB.compute([s1],r=>{let e=r.facet(s1).filter(t=>t);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.filter(t=>t.end!=null).map(t=>t.end)),create:RS.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class Sq{constructor(e,t,i,n,s){this.view=e,this.source=t,this.field=i,this.setHover=n,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,t=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(t==null)return;let i=this.view.coordsAtPos(t);if(i==null||e.y<i.top||e.y>i.bottom||e.x<i.left-this.view.defaultCharacterWidth||e.x>i.right+this.view.defaultCharacterWidth)return;let n=this.view.bidiSpans(this.view.state.doc.lineAt(t)).find(l=>l.from<=t&&l.to>=t),s=n&&n.dir==Dn.RTL?-1:1,o=this.source(this.view,t,e.x<i.left?-s:s);if(o!=null&&o.then){let l=this.pending={pos:t};o.then(a=>{this.pending==l&&(this.pending=null,a&&this.view.dispatch({effects:this.setHover.of(a)}))},a=>wl(this.view.state,a,"hover tooltip"))}else o&&this.view.dispatch({effects:this.setHover.of(o)})}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let i=this.active;if(i&&!xq(this.lastMove.target)||this.pending){let{pos:n}=i||this.pending,s=(t=i==null?void 0:i.end)!==null&&t!==void 0?t:n;(n==s?this.view.posAtCoords(this.lastMove)!=n:!Cq(this.view,n,s,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function xq(r){for(let e=r;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function Cq(r,e,t,i,n,s){let o=document.createRange(),l=r.domAtPos(e),a=r.domAtPos(t);o.setEnd(a.node,a.offset),o.setStart(l.node,l.offset);let h=o.getClientRects();o.detach();for(let u=0;u<h.length;u++){let f=h[u];if(Math.max(f.top-n,n-f.bottom,f.left-i,i-f.right)<=s)return!0}return!1}function Aq(r,e={}){let t=Ti.define(),i=Ga.define({create(){return null},update(n,s){if(n&&(e.hideOnChange&&(s.docChanged||s.selection)||e.hideOn&&e.hideOn(s,n)))return null;if(n&&s.docChanged){let o=s.changes.mapPos(n.pos,-1,Pr.TrackDel);if(o==null)return null;let l=Object.assign(Object.create(null),n);l.pos=o,n.end!=null&&(l.end=s.changes.mapPos(n.end)),n=l}for(let o of s.effects)o.is(t)&&(n=o.value),o.is(Tq)&&(n=null);return n},provide:n=>s1.from(n)});return[i,Ha.define(n=>new Sq(n,r,i,t,e.hoverTime||300)),vq]}const Tq=Ti.define(),CP=gt.define({combine(r){let e,t;for(let i of r)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function Pq(r,e){let t=r.plugin(nB),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}const nB=Ha.fromClass(class{constructor(r){this.input=r.state.facet(o2),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(r));let e=r.state.facet(CP);this.top=new Cg(r,!0,e.topContainer),this.bottom=new Cg(r,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(r){let e=r.state.facet(CP);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Cg(r.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Cg(r.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=r.state.facet(o2);if(t!=this.input){let i=t.filter(a=>a),n=[],s=[],o=[],l=[];for(let a of i){let h=this.specs.indexOf(a),u;h<0?(u=a(r.view),l.push(u)):(u=this.panels[h],u.update&&u.update(r)),n.push(u),(u.top?s:o).push(u)}this.specs=i,this.panels=n,this.top.sync(s),this.bottom.sync(o);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let i of this.panels)i.update&&i.update(r)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:r=>di.scrollMargins.of(e=>{let t=e.plugin(r);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Cg{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=AP(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=AP(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function AP(r){let e=r.nextSibling;return r.remove(),e}const o2=gt.define({enables:nB});class kf extends mf{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}kf.prototype.elementClass="";kf.prototype.toDOM=void 0;kf.prototype.mapMode=Pr.TrackBefore;kf.prototype.startSide=kf.prototype.endSide=-1;kf.prototype.point=!0;class _q{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class uh{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let n=e,s=i.facet(_u).markerFilter;s&&(n=s(n));let o=mi.set(n.map(l=>l.from==l.to||l.from==l.to-1&&i.doc.lineAt(l.from).to==l.from?mi.widget({widget:new Lq(l),diagnostic:l}).range(l.from):mi.mark({attributes:{class:"cm-lintRange cm-lintRange-"+l.severity},diagnostic:l}).range(l.from,l.to)),!0);return new uh(o,t,wf(o))}}function wf(r,e=null,t=0){let i=null;return r.between(t,1e9,(n,s,{spec:o})=>{if(!(e&&o.diagnostic!=e))return i=new _q(n,s,o.diagnostic),!1}),i}function $q(r,e){return!!(r.effects.some(t=>t.is(QS))||r.changes.touchesRange(e.pos))}function rB(r,e){return r.field(es,!1)?e:e.concat(Ti.appendConfig.of([es,di.decorations.compute([es],t=>{let{selected:i,panel:n}=t.field(es);return!i||!n||i.from==i.to?mi.none:mi.set([Rq.range(i.from,i.to)])}),Aq(Qq,{hideOn:$q}),Wq]))}function Mq(r,e){return{effects:rB(r,[QS.of(e)])}}const QS=Ti.define(),DS=Ti.define(),sB=Ti.define(),es=Ga.define({create(){return new uh(mi.none,null,null)},update(r,e){if(e.docChanged){let t=r.diagnostics.map(e.changes),i=null;if(r.selected){let n=e.changes.mapPos(r.selected.from,1);i=wf(t,r.selected.diagnostic,n)||wf(t,null,n)}r=new uh(t,r.panel,i)}for(let t of e.effects)t.is(QS)?r=uh.init(t.value,r.panel,e.state):t.is(DS)?r=new uh(r.diagnostics,t.value?Gb.open:null,r.selected):t.is(sB)&&(r=new uh(r.diagnostics,r.panel,t.value));return r},provide:r=>[o2.from(r,e=>e.panel),di.decorations.from(r,e=>e.diagnostics)]}),Rq=mi.mark({class:"cm-lintRange cm-lintRange-active"});function Qq(r,e,t){let{diagnostics:i}=r.state.field(es),n=[],s=2e8,o=0;i.between(e-(t<0?1:0),e+(t>0?1:0),(a,h,{spec:u})=>{e>=a&&e<=h&&(a==h||(e>a||t>0)&&(e<h||t<0))&&(n.push(u.diagnostic),s=Math.min(a,s),o=Math.max(h,o))});let l=r.state.facet(_u).tooltipFilter;return l&&(n=l(n)),n.length?{pos:s,end:o,above:r.state.doc.lineAt(s).to<o,create(){return{dom:Dq(r,n)}}}:null}function Dq(r,e){return gi("ul",{class:"cm-tooltip-lint"},e.map(t=>lB(r,t,!1)))}const Eq=r=>{let e=r.state.field(es,!1);(!e||!e.panel)&&r.dispatch({effects:rB(r.state,[DS.of(!0)])});let t=Pq(r,Gb.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},TP=r=>{let e=r.state.field(es,!1);return!e||!e.panel?!1:(r.dispatch({effects:DS.of(!1)}),!0)},Bq=r=>{let e=r.state.field(es,!1);if(!e)return!1;let t=r.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(r.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},Nq=[{key:"Mod-Shift-m",run:Eq},{key:"F8",run:Bq}],Iq=Ha.fromClass(class{constructor(r){this.view=r,this.timeout=-1,this.set=!0;let{delay:e}=r.state.facet(_u);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let r=Date.now();if(r<this.lintTime-10)setTimeout(this.run,this.lintTime-r);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(_u);Promise.all(t.map(i=>Promise.resolve(i(this.view)))).then(i=>{let n=i.reduce((s,o)=>s.concat(o));this.view.state.doc==e.doc&&this.view.dispatch(Mq(this.view.state,n))},i=>{wl(this.view.state,i)})}}update(r){let e=r.state.facet(_u);(r.docChanged||e!=r.startState.facet(_u))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),_u=gt.define({combine(r){return Object.assign({sources:r.map(e=>e.source)},rH(r.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null}))},enables:Iq});function oB(r){let e=[];if(r)e:for(let{name:t}of r){for(let i=0;i<t.length;i++){let n=t[i];if(/[a-zA-Z]/.test(n)&&!e.some(s=>s.toLowerCase()==n.toLowerCase())){e.push(n);continue e}}e.push("")}return e}function lB(r,e,t){var i;let n=t?oB(e.actions):[];return gi("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},gi("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(i=e.actions)===null||i===void 0?void 0:i.map((s,o)=>{let l=f=>{f.preventDefault();let c=wf(r.state.field(es).diagnostics,e);c&&s.apply(r,c.from,c.to)},{name:a}=s,h=n[o]?a.indexOf(n[o]):-1,u=h<0?a:[a.slice(0,h),gi("u",a.slice(h,h+1)),a.slice(h+1)];return gi("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${a}${h<0?"":` (access key "${n[o]})"`}.`},u)}),e.source&&gi("div",{class:"cm-diagnosticSource"},e.source))}class Lq extends Op{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return gi("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class PP{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=lB(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Gb{constructor(e){this.view=e,this.items=[];let t=n=>{if(n.keyCode==27)TP(this.view),this.view.focus();else if(n.keyCode==38||n.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(n.keyCode==40||n.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(n.keyCode==36)this.moveSelection(0);else if(n.keyCode==35)this.moveSelection(this.items.length-1);else if(n.keyCode==13)this.view.focus();else if(n.keyCode>=65&&n.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=oB(s.actions);for(let l=0;l<o.length;l++)if(o[l].toUpperCase().charCodeAt(0)==n.keyCode){let a=wf(this.view.state.field(es).diagnostics,s);a&&s.actions[l].apply(e,a.from,a.to)}}else return;n.preventDefault()},i=n=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(n.target)&&this.moveSelection(s)};this.list=gi("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=gi("div",{class:"cm-panel-lint"},this.list,gi("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>TP(this.view)},"\xD7")),this.update()}get selectedIndex(){let e=this.view.state.field(es).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(es),i=0,n=!1,s=null;for(e.between(0,this.view.state.doc.length,(o,l,{spec:a})=>{let h=-1,u;for(let f=i;f<this.items.length;f++)if(this.items[f].diagnostic==a.diagnostic){h=f;break}h<0?(u=new PP(this.view,a.diagnostic),this.items.splice(i,0,u),n=!0):(u=this.items[h],h>i&&(this.items.splice(i,h-i),n=!0)),t&&u.diagnostic==t.diagnostic?u.dom.hasAttribute("aria-selected")||(u.dom.setAttribute("aria-selected","true"),s=u):u.dom.hasAttribute("aria-selected")&&u.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)n=!0,this.items.pop();this.items.length==0&&(this.items.push(new PP(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),n=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:l})=>{o.top<l.top?this.list.scrollTop-=l.top-o.top:o.bottom>l.bottom&&(this.list.scrollTop+=o.bottom-l.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),n&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(es),i=wf(t.diagnostics,this.items[e].diagnostic);!i||this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:sB.of(i)})}static open(e){return new Gb(e)}}function zq(r,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(r)}</svg>')`}function bk(r){return zq(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${r}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const Wq=di.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:bk("#d11")},".cm-lintRange-warning":{backgroundImage:bk("orange")},".cm-lintRange-info":{backgroundImage:bk("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});const Vq=1024;let jq=0;class Ok{constructor(e,t){this.from=e,this.to=t}}class Tt{constructor(e={}){this.id=jq++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=fs.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}Tt.closedBy=new Tt({deserialize:r=>r.split(" ")});Tt.openedBy=new Tt({deserialize:r=>r.split(" ")});Tt.group=new Tt({deserialize:r=>r.split(" ")});Tt.contextHash=new Tt({perNode:!0});Tt.lookAhead=new Tt({perNode:!0});Tt.mounted=new Tt({perNode:!0});const Fq=Object.create(null);class fs{constructor(e,t,i,n=0){this.name=e,this.props=t,this.id=i,this.flags=n}static define(e){let t=e.props&&e.props.length?Object.create(null):Fq,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),n=new fs(e.name||"",t,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(n)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return n}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Tt.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let n of i.split(" "))t[n]=e[i];return i=>{for(let n=i.prop(Tt.group),s=-1;s<(n?n.length:0);s++){let o=t[s<0?i.name:n[s]];if(o)return o}}}}fs.none=new fs("",Object.create(null),0,8);const Ag=new WeakMap,_P=new WeakMap;var Vn;(function(r){r[r.ExcludeBuffers=1]="ExcludeBuffers",r[r.IncludeAnonymous=2]="IncludeAnonymous",r[r.IgnoreMounts=4]="IgnoreMounts",r[r.IgnoreOverlays=8]="IgnoreOverlays"})(Vn||(Vn={}));class er{constructor(e,t,i,n,s){if(this.type=e,this.children=t,this.positions=i,this.length=n,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,l]of s)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=this.prop(Tt.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let n=i.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new a1(this.topNode,e)}cursorAt(e,t=0,i=0){let n=Ag.get(this)||this.topNode,s=new a1(n);return s.moveTo(e,t),Ag.set(this,s._tree),s}get topNode(){return new vl(this,0,0,null)}resolve(e,t=0){let i=yf(Ag.get(this)||this.topNode,e,t,!1);return Ag.set(this,i),i}resolveInner(e,t=0){let i=yf(_P.get(this)||this.topNode,e,t,!0);return _P.set(this,i),i}iterate(e){let{enter:t,leave:i,from:n=0,to:s=this.length}=e;for(let o=this.cursor((e.mode||0)|Vn.IncludeAnonymous);;){let l=!1;if(o.from<=s&&o.to>=n&&(o.type.isAnonymous||t(o)!==!1)){if(o.firstChild())continue;l=!0}for(;l&&i&&!o.type.isAnonymous&&i(o),!o.nextSibling();){if(!o.parent())return;l=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:NS(fs.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,n)=>new er(this.type,t,i,n,this.propValues),e.makeTree||((t,i,n)=>new er(fs.none,t,i,n)))}static build(e){return qq(e)}}er.empty=new er(fs.none,[],[],0);class ES{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new ES(this.buffer,this.index)}}class Xh{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return fs.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],n=this.set.types[t],s=n.name;if(/\W/.test(s)&&!n.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,t,i,n,s){let{buffer:o}=this,l=-1;for(let a=e;a!=t&&!(aB(s,n,o[a+1],o[a+2])&&(l=a,i>0));a=o[a+3]);return l}slice(e,t,i,n){let s=this.buffer,o=new Uint16Array(t-e);for(let l=e,a=0;l<t;)o[a++]=s[l++],o[a++]=s[l++]-i,o[a++]=s[l++]-i,o[a++]=s[l++]-e;return new Xh(o,n-i,this.set)}}function aB(r,e,t,i){switch(r){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function hB(r,e){let t=r.childBefore(e);for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(r=t,t=i.prevSibling):t=i}return r}function yf(r,e,t,i){for(var n;r.from==r.to||(t<1?r.from>=e:r.from>e)||(t>-1?r.to<=e:r.to<e);){let o=!i&&r instanceof vl&&r.index<0?null:r.parent;if(!o)return r;r=o}let s=i?0:Vn.IgnoreOverlays;if(i)for(let o=r,l=o.parent;l;o=l,l=o.parent)o instanceof vl&&o.index<0&&((n=l.enter(e,t,s))===null||n===void 0?void 0:n.from)!=o.from&&(r=l);for(;;){let o=r.enter(e,t,s);if(!o)return r;r=o}}class vl{constructor(e,t,i,n){this._tree=e,this.from=t,this.index=i,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,n,s=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,h=t>0?l.length:-1;e!=h;e+=t){let u=l[e],f=a[e]+o.from;if(!!aB(n,i,f,f+u.length)){if(u instanceof Xh){if(s&Vn.ExcludeBuffers)continue;let c=u.findChild(0,u.buffer.length,t,i-f,n);if(c>-1)return new xa(new Hq(o,u,e,f),null,c)}else if(s&Vn.IncludeAnonymous||!u.type.isAnonymous||BS(u)){let c;if(!(s&Vn.IgnoreMounts)&&u.props&&(c=u.prop(Tt.mounted))&&!c.overlay)return new vl(c.tree,f,e,o);let d=new vl(u,f,e,o);return s&Vn.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(t<0?u.children.length-1:0,t,i,n)}}}if(s&Vn.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let n;if(!(i&Vn.IgnoreOverlays)&&(n=this._tree.prop(Tt.mounted))&&n.overlay){let s=e-this.from;for(let{from:o,to:l}of n.overlay)if((t>0?o<=s:o<s)&&(t<0?l>=s:l>s))return new vl(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new a1(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return yf(this,e,t,!1)}resolveInner(e,t=0){return yf(this,e,t,!0)}enterUnfinishedNodesBefore(e){return hB(this,e)}getChild(e,t=null,i=null){let n=o1(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return o1(this,e,t,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return l1(this,e)}}function o1(r,e,t,i){let n=r.cursor(),s=[];if(!n.firstChild())return s;if(t!=null){for(;!n.type.is(t);)if(!n.nextSibling())return s}for(;;){if(i!=null&&n.type.is(i))return s;if(n.type.is(e)&&s.push(n.node),!n.nextSibling())return i==null?s:[]}}function l1(r,e,t=e.length-1){for(let i=r.parent;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class Hq{constructor(e,t,i,n){this.parent=e,this.buffer=t,this.index=i,this.start=n}}class xa{constructor(e,t,i){this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,i){let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.context.start,i);return s<0?null:new xa(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&Vn.ExcludeBuffers)return null;let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new xa(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new xa(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new xa(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new a1(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,n=this.index+4,s=i.buffer[this.index+3];if(s>n){let o=i.buffer[this.index+1],l=i.buffer[this.index+2];e.push(i.slice(n,s,o,l)),t.push(0)}return new er(this.type,e,t,this.to-this.from)}resolve(e,t=0){return yf(this,e,t,!1)}resolveInner(e,t=0){return yf(this,e,t,!0)}enterUnfinishedNodesBefore(e){return hB(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,i=null){let n=o1(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return o1(this,e,t,i)}get node(){return this}matchContext(e){return l1(this,e)}}class a1{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof vl)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=i+n.buffer[e+1],this.to=i+n.buffer[e+2],!0}yield(e){return e?e instanceof vl?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:n}=this.buffer,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&Vn.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Vn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Vn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let n=i<0?0:this.stack[i]+4;if(this.index!=n)return this.yieldBuf(t.findChild(n,this.index,-1,0,4))}else{let n=t.buffer[this.index+3];if(n<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(n)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(n.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:i}=n)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let s=t+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let l=i._tree.children[s];if(this.mode&Vn.IncludeAnonymous||l instanceof Xh||!l.type.isAnonymous||BS(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer){e:for(let n=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==n){if(n==this.index)return o;t=o,i=s+1;break e}n=this.stack[--s]}}for(let n=i;n<this.stack.length;n++)t=new xa(this.buffer,t,this.stack[n]);return this.bufferNode=new xa(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let n=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(n=!0)}for(;n&&t&&t(this),n=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,n=!0}}}matchContext(e){if(!this.buffer)return l1(this.node,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let n=e.length-1,s=this.stack.length-1;n>=0;s--){if(s<0)return l1(this.node,e,n);let o=i[t.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[n]&&e[n]!=o.name)return!1;n--}}return!0}}function BS(r){return r.children.some(e=>e instanceof Xh||!e.type.isAnonymous||BS(e))}function qq(r){var e;let{buffer:t,nodeSet:i,maxBufferLength:n=Vq,reused:s=[],minRepeatType:o=i.types.length}=r,l=Array.isArray(t)?new ES(t,t.length):t,a=i.types,h=0,u=0;function f(p,b,m,k,C){let{id:v,start:y,end:T,size:E}=l,$=u;for(;E<0;)if(l.next(),E==-1){let L=s[v];m.push(L),k.push(y-p);return}else if(E==-3){h=v;return}else if(E==-4){u=v;return}else throw new RangeError(`Unrecognized record size: ${E}`);let R=a[v],N,_,W=y-p;if(T-y<=n&&(_=w(l.pos-b,C))){let L=new Uint16Array(_.size-_.skip),I=l.pos-_.size,j=L.length;for(;l.pos>I;)j=S(_.start,L,j);N=new Xh(L,T-_.start,i),W=_.start-p}else{let L=l.pos-E;l.next();let I=[],j=[],X=v>=o?v:-1,Z=0,ie=T;for(;l.pos>L;)X>=0&&l.id==X&&l.size>=0?(l.end<=ie-n&&(d(I,j,y,Z,l.end,ie,X,$),Z=I.length,ie=l.end),l.next()):f(y,L,I,j,X);if(X>=0&&Z>0&&Z<I.length&&d(I,j,y,Z,y,ie,X,$),I.reverse(),j.reverse(),X>-1&&Z>0){let G=c(R);N=NS(R,I,j,0,I.length,0,T-y,G,G)}else N=g(R,I,j,T-y,$-T)}m.push(N),k.push(W)}function c(p){return(b,m,k)=>{let C=0,v=b.length-1,y,T;if(v>=0&&(y=b[v])instanceof er){if(!v&&y.type==p&&y.length==k)return y;(T=y.prop(Tt.lookAhead))&&(C=m[v]+y.length+T)}return g(p,b,m,k,C)}}function d(p,b,m,k,C,v,y,T){let E=[],$=[];for(;p.length>k;)E.push(p.pop()),$.push(b.pop()+m-C);p.push(g(i.types[y],E,$,v-C,T-v)),b.push(C-m)}function g(p,b,m,k,C=0,v){if(h){let y=[Tt.contextHash,h];v=v?[y].concat(v):[y]}if(C>25){let y=[Tt.lookAhead,C];v=v?[y].concat(v):[y]}return new er(p,b,m,k,v)}function w(p,b){let m=l.fork(),k=0,C=0,v=0,y=m.end-n,T={size:0,start:0,skip:0};e:for(let E=m.pos-p;m.pos>E;){let $=m.size;if(m.id==b&&$>=0){T.size=k,T.start=C,T.skip=v,v+=4,k+=4,m.next();continue}let R=m.pos-$;if($<0||R<E||m.start<y)break;let N=m.id>=o?4:0,_=m.start;for(m.next();m.pos>R;){if(m.size<0)if(m.size==-3)N+=4;else break e;else m.id>=o&&(N+=4);m.next()}C=_,k+=$,v+=N}return(b<0||k==p)&&(T.size=k,T.start=C,T.skip=v),T.size>4?T:void 0}function S(p,b,m){let{id:k,start:C,end:v,size:y}=l;if(l.next(),y>=0&&k<o){let T=m;if(y>4){let E=l.pos-(y-4);for(;l.pos>E;)m=S(p,b,m)}b[--m]=T,b[--m]=v-p,b[--m]=C-p,b[--m]=k}else y==-3?h=k:y==-4&&(u=k);return m}let x=[],Q=[];for(;l.pos>0;)f(r.start||0,r.bufferStart||0,x,Q,-1);let M=(e=r.length)!==null&&e!==void 0?e:x.length?Q[0]+x[0].length:0;return new er(a[r.topID],x.reverse(),Q.reverse(),M)}const $P=new WeakMap;function Lm(r,e){if(!r.isAnonymous||e instanceof Xh||e.type!=r)return 1;let t=$P.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=r||!(i instanceof er)){t=1;break}t+=Lm(r,i)}$P.set(e,t)}return t}function NS(r,e,t,i,n,s,o,l,a){let h=0;for(let g=i;g<n;g++)h+=Lm(r,e[g]);let u=Math.ceil(h*1.5/8),f=[],c=[];function d(g,w,S,x,Q){for(let M=S;M<x;){let p=M,b=w[M],m=Lm(r,g[M]);for(M++;M<x;M++){let k=Lm(r,g[M]);if(m+k>=u)break;m+=k}if(M==p+1){if(m>u){let k=g[p];d(k.children,k.positions,0,k.children.length,w[p]+Q);continue}f.push(g[p])}else{let k=w[M-1]+g[M-1].length-b;f.push(NS(r,g,w,p,M,b,k,null,a))}c.push(b+Q-s)}}return d(e,t,i,n,0),(l||a)(f,c,o)}class _h{constructor(e,t,i,n,s=!1,o=!1){this.from=e,this.to=t,this.tree=i,this.offset=n,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let n=[new _h(0,e.length,e,0,!1,i)];for(let s of t)s.to>e.length&&n.push(s);return n}static applyChanges(e,t,i=128){if(!t.length)return e;let n=[],s=1,o=e.length?e[0]:null;for(let l=0,a=0,h=0;;l++){let u=l<t.length?t[l]:null,f=u?u.fromA:1e9;if(f-a>=i)for(;o&&o.from<f;){let c=o;if(a>=c.from||f<=c.to||h){let d=Math.max(c.from,a)-h,g=Math.min(c.to,f)-h;c=d>=g?null:new _h(d,g,c.tree,c.offset+h,l>0,!!u)}if(c&&n.push(c),o.to>f)break;o=s<e.length?e[s++]:null}if(!u)break;a=u.toA,h=u.toA-u.toB}return n}}class Xq{startParse(e,t,i){return typeof e=="string"&&(e=new Zq(e)),i=i?i.length?i.map(n=>new Ok(n.from,n.to)):[new Ok(0,0)]:[new Ok(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let n=this.startParse(e,t,i);for(;;){let s=n.advance();if(s)return s}}}class Zq{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Tt({perNode:!0});let Gq=0;class So{constructor(e,t,i){this.set=e,this.base=t,this.modified=i,this.id=Gq++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let t=new So([],null,[]);if(t.set.push(t),e)for(let i of e.set)t.set.push(i);return t}static defineModifier(){let e=new h1;return t=>t.modified.indexOf(e)>-1?t:h1.get(t.base||t,t.modified.concat(e).sort((i,n)=>i.id-n.id))}}let Uq=0;class h1{constructor(){this.instances=[],this.id=Uq++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(l=>l.base==e&&Yq(t,l.modified));if(i)return i;let n=[],s=new So(n,e,t);for(let l of t)l.instances.push(s);let o=uB(t);for(let l of e.set)for(let a of o)n.push(h1.get(l,a));return s}}function Yq(r,e){return r.length==e.length&&r.every((t,i)=>t==e[i])}function uB(r){let e=[r];for(let t=0;t<r.length;t++)for(let i of uB(r.slice(0,t).concat(r.slice(t+1))))e.push(i);return e}function Kq(r){let e=Object.create(null);for(let t in r){let i=r[t];Array.isArray(i)||(i=[i]);for(let n of t.split(" "))if(n){let s=[],o=2,l=n;for(let f=0;;){if(l=="..."&&f>0&&f+3==n.length){o=1;break}let c=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!c)throw new RangeError("Invalid path: "+n);if(s.push(c[0]=="*"?"":c[0][0]=='"'?JSON.parse(c[0]):c[0]),f+=c[0].length,f==n.length)break;let d=n[f++];if(f==n.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+n);l=n.slice(f)}let a=s.length-1,h=s[a];if(!h)throw new RangeError("Invalid path: "+n);let u=new eX(i,o,a>0?s.slice(0,a):null);e[h]=u.sort(e[h])}}return Jq.add(e)}const Jq=new Tt;class eX{constructor(e,t,i,n){this.tags=e,this.mode=t,this.context=i,this.next=n}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function tX(r,e){let t=Object.create(null);for(let s of r)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let o of s.tag)t[o.id]=s.class;let{scope:i,all:n=null}=e||{};return{style:s=>{let o=n;for(let l of s)for(let a of l.set){let h=t[a.id];if(h){o=o?o+" "+h:h;break}}return o},scope:i}}const de=So.define,Tg=de(),Il=de(),MP=de(Il),RP=de(Il),Ll=de(),Pg=de(Ll),kk=de(Ll),co=de(),Ja=de(co),qs=de(),Xs=de(),l2=de(),ac=de(l2),_g=de(),ht={comment:Tg,lineComment:de(Tg),blockComment:de(Tg),docComment:de(Tg),name:Il,variableName:de(Il),typeName:MP,tagName:de(MP),propertyName:RP,attributeName:de(RP),className:de(Il),labelName:de(Il),namespace:de(Il),macroName:de(Il),literal:Ll,string:Pg,docString:de(Pg),character:de(Pg),attributeValue:de(Pg),number:kk,integer:de(kk),float:de(kk),bool:de(Ll),regexp:de(Ll),escape:de(Ll),color:de(Ll),url:de(Ll),keyword:qs,self:de(qs),null:de(qs),atom:de(qs),unit:de(qs),modifier:de(qs),operatorKeyword:de(qs),controlKeyword:de(qs),definitionKeyword:de(qs),moduleKeyword:de(qs),operator:Xs,derefOperator:de(Xs),arithmeticOperator:de(Xs),logicOperator:de(Xs),bitwiseOperator:de(Xs),compareOperator:de(Xs),updateOperator:de(Xs),definitionOperator:de(Xs),typeOperator:de(Xs),controlOperator:de(Xs),punctuation:l2,separator:de(l2),bracket:ac,angleBracket:de(ac),squareBracket:de(ac),paren:de(ac),brace:de(ac),content:co,heading:Ja,heading1:de(Ja),heading2:de(Ja),heading3:de(Ja),heading4:de(Ja),heading5:de(Ja),heading6:de(Ja),contentSeparator:de(co),list:de(co),quote:de(co),emphasis:de(co),strong:de(co),link:de(co),monospace:de(co),strikethrough:de(co),inserted:de(),deleted:de(),changed:de(),invalid:de(),meta:_g,documentMeta:de(_g),annotation:de(_g),processingInstruction:de(_g),definition:So.defineModifier(),constant:So.defineModifier(),function:So.defineModifier(),standard:So.defineModifier(),local:So.defineModifier(),special:So.defineModifier()};tX([{tag:ht.link,class:"tok-link"},{tag:ht.heading,class:"tok-heading"},{tag:ht.emphasis,class:"tok-emphasis"},{tag:ht.strong,class:"tok-strong"},{tag:ht.keyword,class:"tok-keyword"},{tag:ht.atom,class:"tok-atom"},{tag:ht.bool,class:"tok-bool"},{tag:ht.url,class:"tok-url"},{tag:ht.labelName,class:"tok-labelName"},{tag:ht.inserted,class:"tok-inserted"},{tag:ht.deleted,class:"tok-deleted"},{tag:ht.literal,class:"tok-literal"},{tag:ht.string,class:"tok-string"},{tag:ht.number,class:"tok-number"},{tag:[ht.regexp,ht.escape,ht.special(ht.string)],class:"tok-string2"},{tag:ht.variableName,class:"tok-variableName"},{tag:ht.local(ht.variableName),class:"tok-variableName tok-local"},{tag:ht.definition(ht.variableName),class:"tok-variableName tok-definition"},{tag:ht.special(ht.variableName),class:"tok-variableName2"},{tag:ht.definition(ht.propertyName),class:"tok-propertyName tok-definition"},{tag:ht.typeName,class:"tok-typeName"},{tag:ht.namespace,class:"tok-namespace"},{tag:ht.className,class:"tok-className"},{tag:ht.macroName,class:"tok-macroName"},{tag:ht.propertyName,class:"tok-propertyName"},{tag:ht.operator,class:"tok-operator"},{tag:ht.comment,class:"tok-comment"},{tag:ht.meta,class:"tok-meta"},{tag:ht.invalid,class:"tok-invalid"},{tag:ht.punctuation,class:"tok-punctuation"}]);var wk;const a2=new Tt;class ul{constructor(e,t,i=[]){this.data=e,it.prototype.hasOwnProperty("tree")||Object.defineProperty(it.prototype,"tree",{get(){return qa(this)}}),this.parser=t,this.extension=[Sf.of(this),it.languageData.of((n,s,o)=>n.facet(QP(n,s,o)))].concat(i)}isActiveAt(e,t,i=-1){return QP(e,t,i)==this.data}findRegions(e){let t=e.facet(Sf);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],n=(s,o)=>{if(s.prop(a2)==this.data){i.push({from:o,to:o+s.length});return}let l=s.prop(Tt.mounted);if(l){if(l.tree.prop(a2)==this.data){if(l.overlay)for(let a of l.overlay)i.push({from:a.from+o,to:a.to+o});else i.push({from:o,to:o+s.length});return}else if(l.overlay){let a=i.length;if(n(l.tree,l.overlay[0].from+o),i.length>a)return}}for(let a=0;a<s.children.length;a++){let h=s.children[a];h instanceof er&&n(h,s.positions[a]+o)}};return n(qa(e),0),i}get allowsNesting(){return!0}}ul.setState=xt.define();function QP(r,e,t){let i=r.facet(Sf);if(!i)return null;let n=i.data;if(i.allowsNesting)for(let s=qa(r).topNode;s;s=s.enter(e,t,Vn.ExcludeBuffers))n=s.type.prop(a2)||n;return n}function qa(r){let e=r.field(ul.state,!1);return e?e.tree:er.empty}class iX{constructor(e,t=e.length){this.doc=e,this.length=t,this.cursorPos=0,this.string="",this.cursor=e.iter()}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let hc=null;class u1{constructor(e,t,i=[],n,s,o,l,a){this.parser=e,this.state=t,this.fragments=i,this.tree=n,this.treeLen=s,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new u1(e,t,[],er.empty,0,i,[],null)}startParse(){return this.parser.startParse(new iX(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=er.empty&&this.isDone(t!=null?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let n=Date.now()+e;e=()=>Date.now()>n}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let n=this.parse.advance();if(n)if(this.fragments=this.withoutTempSkipped(_h.addTree(n,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=n,this.parse=null,this.treeLen<(t!=null?t:this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(_h.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=hc;hc=this;try{return e()}finally{hc=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=DP(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:n,treeLen:s,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((h,u,f,c)=>a.push({fromA:h,toA:u,fromB:f,toB:c})),i=_h.applyChanges(i,a),n=er.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let h of this.skipped){let u=e.mapPos(h.from,1),f=e.mapPos(h.to,-1);u<f&&l.push({from:u,to:f})}}}return new u1(this.parser,t,i,n,s,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:n,to:s}=this.skipped[i];n<e.to&&s>e.from&&(this.fragments=DP(this.fragments,n,s),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Xq{createParse(t,i,n){let s=n[0].from,o=n[n.length-1].to;return{parsedPos:s,advance(){let a=hc;if(a){for(let h of n)a.tempSkipped.push(h);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new er(fs.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return hc}}function DP(r,e,t){return _h.applyChanges(r,[{fromA:e,toA:t,fromB:e,toB:t}])}class vf{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new vf(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=u1.create(e.facet(Sf).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new vf(i)}}ul.state=or.define({create:vf.init,update(r,e){for(let t of e.effects)if(t.is(ul.setState))return t.value;return e.startState.facet(Sf)!=e.state.facet(Sf)?vf.init(e.state):r.apply(e)}});let fB=r=>{let e=setTimeout(()=>r(),500);return()=>clearTimeout(e)};typeof requestIdleCallback!="undefined"&&(fB=r=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(r,{timeout:500-100})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const yk=typeof navigator!="undefined"&&((wk=navigator.scheduling)===null||wk===void 0?void 0:wk.isInputPending)?()=>navigator.scheduling.isInputPending():null,nX=fn.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(ul.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(ul.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=fB(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:n}}=this.view,s=i.field(ul.state);if(s.tree==s.context.tree&&s.context.isDone(n+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!yk?Math.max(25,e.timeRemaining()-5):1e9),l=s.context.treeLen<n&&i.doc.length>n+1e3,a=s.context.work(()=>yk&&yk()||Date.now()>o,n+(l?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:ul.setState.of(new vf(s.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>hs(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Sf=Ie.define({combine(r){return r.length?r[0]:null},enables:[ul.state,nX]}),rX=Ie.define(),IS=Ie.define({combine:r=>{if(!r.length)return"  ";if(!/^(?: +|\t+)$/.test(r[0]))throw new Error("Invalid indent unit: "+JSON.stringify(r[0]));return r[0]}});function f1(r){let e=r.facet(IS);return e.charCodeAt(0)==9?r.tabSize*e.length:e.length}function c1(r,e){let t="",i=r.tabSize;if(r.facet(IS).charCodeAt(0)==9)for(;e>=i;)t+="	",e-=i;for(let n=0;n<e;n++)t+=" ";return t}function cB(r,e){r instanceof it&&(r=new Ub(r));for(let i of r.state.facet(rX)){let n=i(r,e);if(n!=null)return n}let t=qa(r.state);return t?oX(r,t,e):null}class Ub{constructor(e,t={}){this.state=e,this.options=t,this.unit=f1(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:n,simulateDoubleBreak:s}=this.options;return n!=null&&n>=i.from&&n<=i.to?s&&n==e?{text:"",from:e}:(t<0?n<e:n<=e)?{text:i.text.slice(n-i.from),from:n}:{text:i.text.slice(0,n-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:n}=this.lineAt(e,t);return i.slice(e-n,Math.min(i.length,e+100-n))}column(e,t=1){let{text:i,from:n}=this.lineAt(e,t),s=this.countColumn(i,e-n),o=this.options.overrideIndentation?this.options.overrideIndentation(n):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,t=e.length){return rp(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:n}=this.lineAt(e,t),s=this.options.overrideIndentation;if(s){let o=s(n);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const sX=new Tt;function oX(r,e,t){return dB(e.resolveInner(t).enterUnfinishedNodesBefore(t),t,r)}function lX(r){return r.pos==r.options.simulateBreak&&r.options.simulateDoubleBreak}function aX(r){let e=r.type.prop(sX);if(e)return e;let t=r.firstChild,i;if(t&&(i=t.type.prop(Tt.closedBy))){let n=r.lastChild,s=n&&i.indexOf(n.name)>-1;return o=>cX(o,!0,1,void 0,s&&!lX(o)?n.from:void 0)}return r.parent==null?hX:null}function dB(r,e,t){for(;r;r=r.parent){let i=aX(r);if(i)return i(LS.create(t,e,r))}return null}function hX(){return 0}class LS extends Ub{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.node=i}static create(e,t,i){return new LS(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if(uX(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?dB(e,this.pos,this.base):0}}function uX(r,e){for(let t=e;t;t=t.parent)if(r==t)return!0;return!1}function fX(r){let e=r.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let n=r.options.simulateBreak,s=r.state.doc.lineAt(t.from),o=n==null||n<=s.from?s.to:Math.min(s.to,n);for(let l=t.to;;){let a=e.childAfter(l);if(!a||a==i)return null;if(!a.type.isSkipped)return a.from<o?t:null;l=a.to}}function cX(r,e,t,i,n){let s=r.textAfter,o=s.match(/^\s*/)[0].length,l=i&&s.slice(o,o+i.length)==i||n==r.pos+o,a=e?fX(r):null;return a?l?r.column(a.from):r.column(a.to):r.baseIndent+(l?0:r.unit*t)}const dX=1e4,pX="()[]{}";function h2(r,e,t){let i=r.prop(e<0?Tt.openedBy:Tt.closedBy);if(i)return i;if(r.name.length==1){let n=t.indexOf(r.name);if(n>-1&&n%2==(e<0?1:0))return[t[n+e]]}return null}function $u(r,e,t,i={}){let n=i.maxScanDistance||dX,s=i.brackets||pX,o=qa(r),l=o.resolveInner(e,t);for(let a=l;a;a=a.parent){let h=h2(a.type,t,s);if(h&&a.from<a.to)return gX(r,e,t,a,h,s)}return mX(r,e,t,o,l.type,n,s)}function gX(r,e,t,i,n,s){let o=i.parent,l={from:i.from,to:i.to},a=0,h=o==null?void 0:o.cursor();if(h&&(t<0?h.childBefore(i.from):h.childAfter(i.to)))do if(t<0?h.to<=i.from:h.from>=i.to){if(a==0&&n.indexOf(h.type.name)>-1&&h.from<h.to)return{start:l,end:{from:h.from,to:h.to},matched:!0};if(h2(h.type,t,s))a++;else if(h2(h.type,-t,s)&&(a--,a==0))return{start:l,end:h.from==h.to?void 0:{from:h.from,to:h.to},matched:!1}}while(t<0?h.prevSibling():h.nextSibling());return{start:l,matched:!1}}function mX(r,e,t,i,n,s,o){let l=t<0?r.sliceDoc(e-1,e):r.sliceDoc(e,e+1),a=o.indexOf(l);if(a<0||a%2==0!=t>0)return null;let h={from:t<0?e-1:e,to:t>0?e+1:e},u=r.doc.iterRange(e,t>0?r.doc.length:0),f=0;for(let c=0;!u.next().done&&c<=s;){let d=u.value;t<0&&(c+=d.length);let g=e+c*t;for(let w=t>0?0:d.length-1,S=t>0?d.length:-1;w!=S;w+=t){let x=o.indexOf(d[w]);if(!(x<0||i.resolveInner(g+w,1).type!=n))if(x%2==0==t>0)f++;else{if(f==1)return{start:h,end:{from:g+w,to:g+w+1},matched:x>>1==a>>1};f--}}t>0&&(c+=d.length)}return u.done?{start:h,matched:!1}:null}const bX=Object.create(null),EP=[fs.none],BP=[],OX=Object.create(null);for(let[r,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])OX[r]=kX(bX,e);function vk(r,e){BP.indexOf(r)>-1||(BP.push(r),console.warn(e))}function kX(r,e){let t=null;for(let s of e.split(".")){let o=r[s]||ht[s];o?typeof o=="function"?t?t=o(t):vk(s,`Modifier ${s} used at start of tag`):t?vk(s,`Tag ${s} used as modifier`):t=o:vk(s,`Unknown highlighting tag ${s}`)}if(!t)return 0;let i=e.replace(/ /g,"_"),n=fs.define({id:EP.length,name:i,props:[Kq({[i]:t})]});return EP.push(n),n.id}const wX=r=>{let e=WS(r.state);return e.line?yX(r):e.block?SX(r):!1};function zS(r,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let n=r(e,t);return n?(i(t.update(n)),!0):!1}}const yX=zS(AX,0),vX=zS(pB,0),SX=zS((r,e)=>pB(r,e,CX(e)),0);function WS(r,e=r.selection.main.head){let t=r.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const uc=50;function xX(r,{open:e,close:t},i,n){let s=r.sliceDoc(i-uc,i),o=r.sliceDoc(n,n+uc),l=/\s*$/.exec(s)[0].length,a=/^\s*/.exec(o)[0].length,h=s.length-l;if(s.slice(h-e.length,h)==e&&o.slice(a,a+t.length)==t)return{open:{pos:i-l,margin:l&&1},close:{pos:n+a,margin:a&&1}};let u,f;n-i<=2*uc?u=f=r.sliceDoc(i,n):(u=r.sliceDoc(i,i+uc),f=r.sliceDoc(n-uc,n));let c=/^\s*/.exec(u)[0].length,d=/\s*$/.exec(f)[0].length,g=f.length-d-t.length;return u.slice(c,c+e.length)==e&&f.slice(g,g+t.length)==t?{open:{pos:i+c+e.length,margin:/\s/.test(u.charAt(c+e.length))?1:0},close:{pos:n-d-t.length,margin:/\s/.test(f.charAt(g-1))?1:0}}:null}function CX(r){let e=[];for(let t of r.selection.ranges){let i=r.doc.lineAt(t.from),n=t.to<=i.to?i:r.doc.lineAt(t.to),s=e.length-1;s>=0&&e[s].to>i.from?e[s].to=n.to:e.push({from:i.from,to:n.to})}return e}function pB(r,e,t=e.selection.ranges){let i=t.map(s=>WS(e,s.from).block);if(!i.every(s=>s))return null;let n=t.map((s,o)=>xX(e,i[o],s.from,s.to));if(r!=2&&!n.every(s=>s))return{changes:e.changes(t.map((s,o)=>n[o]?[]:[{from:s.from,insert:i[o].open+" "},{from:s.to,insert:" "+i[o].close}]))};if(r!=1&&n.some(s=>s)){let s=[];for(let o=0,l;o<n.length;o++)if(l=n[o]){let a=i[o],{open:h,close:u}=l;s.push({from:h.pos-a.open.length,to:h.pos+h.margin},{from:u.pos-u.margin,to:u.pos+a.close.length})}return{changes:s}}return null}function AX(r,e,t=e.selection.ranges){let i=[],n=-1;for(let{from:s,to:o}of t){let l=i.length,a=1e9;for(let h=s;h<=o;){let u=e.doc.lineAt(h);if(u.from>n&&(s==o||o>u.from)){n=u.from;let f=WS(e,h).line;if(!f)continue;let c=/^\s*/.exec(u.text)[0].length,d=c==u.length,g=u.text.slice(c,c+f.length)==f?c:-1;c<u.text.length&&c<a&&(a=c),i.push({line:u,comment:g,token:f,indent:c,empty:d,single:!1})}h=u.to+1}if(a<1e9)for(let h=l;h<i.length;h++)i[h].indent<i[h].line.text.length&&(i[h].indent=a);i.length==l+1&&(i[l].single=!0)}if(r!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:l,token:a,indent:h,empty:u,single:f}of i)(f||!u)&&s.push({from:l.from+h,insert:a+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(r!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:l,token:a}of i)if(l>=0){let h=o.from+l,u=h+a.length;o.text[u-o.from]==" "&&u++,s.push({from:h,to:u})}return{changes:s}}return null}const u2=Fh.define(),TX=Fh.define(),PX=Ie.define(),gB=Ie.define({combine(r){return np(r,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}});function _X(r){let e=0;return r.iterChangedRanges((t,i)=>e=i),e}const mB=or.define({create(){return No.empty},update(r,e){let t=e.state.facet(gB),i=e.annotation(u2);if(i){let a=e.docChanged?se.single(_X(e.changes)):void 0,h=_r.fromTransaction(e,a),u=i.side,f=u==0?r.undone:r.done;return h?f=d1(f,f.length,t.minDepth,h):f=kB(f,e.startState.selection),new No(u==0?i.rest:f,u==0?f:i.rest)}let n=e.annotation(TX);if((n=="full"||n=="before")&&(r=r.isolate()),e.annotation(Ji.addToHistory)===!1)return e.changes.empty?r:r.addMapping(e.changes.desc);let s=_r.fromTransaction(e),o=e.annotation(Ji.time),l=e.annotation(Ji.userEvent);return s?r=r.addChanges(s,o,l,t.newGroupDelay,t.minDepth):e.selection&&(r=r.addSelection(e.startState.selection,o,l,t.newGroupDelay)),(n=="full"||n=="after")&&(r=r.isolate()),r},toJSON(r){return{done:r.done.map(e=>e.toJSON()),undone:r.undone.map(e=>e.toJSON())}},fromJSON(r){return new No(r.done.map(_r.fromJSON),r.undone.map(_r.fromJSON))}});function $X(r={}){return[mB,gB.of(r),nt.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?bB:e.inputType=="historyRedo"?f2:null;return i?(e.preventDefault(),i(t)):!1}})]}function Yb(r,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let n=t.field(mB,!1);if(!n)return!1;let s=n.pop(r,t,e);return s?(i(s),!0):!1}}const bB=Yb(0,!1),f2=Yb(1,!1),MX=Yb(0,!0),RX=Yb(1,!0);class _r{constructor(e,t,i,n,s){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=n,this.selectionsAfter=s}setSelAfter(e){return new _r(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(n=>n.toJSON())}}static fromJSON(e){return new _r(e.changes&&Ki.fromJSON(e.changes),[],e.mapped&&jo.fromJSON(e.mapped),e.startSelection&&se.fromJSON(e.startSelection),e.selectionsAfter.map(se.fromJSON))}static fromTransaction(e,t){let i=os;for(let n of e.startState.facet(PX)){let s=n(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new _r(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,os)}static selection(e){return new _r(void 0,os,void 0,void 0,e)}}function d1(r,e,t,i){let n=e+1>t+20?e-t-1:0,s=r.slice(n,e);return s.push(i),s}function QX(r,e){let t=[],i=!1;return r.iterChangedRanges((n,s)=>t.push(n,s)),e.iterChangedRanges((n,s,o,l)=>{for(let a=0;a<t.length;){let h=t[a++],u=t[a++];l>=h&&o<=u&&(i=!0)}}),i}function DX(r,e){return r.ranges.length==e.ranges.length&&r.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function OB(r,e){return r.length?e.length?r.concat(e):r:e}const os=[],EX=200;function kB(r,e){if(r.length){let t=r[r.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-EX));return i.length&&i[i.length-1].eq(e)?r:(i.push(e),d1(r,r.length-1,1e9,t.setSelAfter(i)))}else return[_r.selection([e])]}function BX(r){let e=r[r.length-1],t=r.slice();return t[r.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function Sk(r,e){if(!r.length)return r;let t=r.length,i=os;for(;t;){let n=NX(r[t-1],e,i);if(n.changes&&!n.changes.empty||n.effects.length){let s=r.slice(0,t);return s[t-1]=n,s}else e=n.mapped,t--,i=n.selectionsAfter}return i.length?[_r.selection(i)]:os}function NX(r,e,t){let i=OB(r.selectionsAfter.length?r.selectionsAfter.map(l=>l.map(e)):os,t);if(!r.changes)return _r.selection(i);let n=r.changes.map(e),s=e.mapDesc(r.changes,!0),o=r.mapped?r.mapped.composeDesc(s):s;return new _r(n,xt.mapEffects(r.effects,e),o,r.startSelection.map(s),i)}const IX=/^(input\.type|delete)($|\.)/;class No{constructor(e,t,i=0,n=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=n}isolate(){return this.prevTime?new No(this.done,this.undone):this}addChanges(e,t,i,n,s){let o=this.done,l=o[o.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!i||IX.test(i))&&(!l.selectionsAfter.length&&t-this.prevTime<n&&QX(l.changes,e.changes)||i=="input.type.compose")?o=d1(o,o.length-1,s,new _r(e.changes.compose(l.changes),OB(e.effects,l.effects),l.mapped,l.startSelection,os)):o=d1(o,o.length,s,e),new No(o,os,t,i)}addSelection(e,t,i,n){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:os;return s.length>0&&t-this.prevTime<n&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&DX(s[s.length-1],e)?this:new No(kB(this.done,e),this.undone,t,i)}addMapping(e){return new No(Sk(this.done,e),Sk(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let n=e==0?this.done:this.undone;if(n.length==0)return null;let s=n[n.length-1];if(i&&s.selectionsAfter.length)return t.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:u2.of({side:e,rest:BX(n)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let o=n.length==1?os:n.slice(0,n.length-1);return s.mapped&&(o=Sk(o,s.mapped)),t.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:u2.of({side:e,rest:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}No.empty=new No(os,os);const LX=[{key:"Mod-z",run:bB,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:f2,preventDefault:!0},{linux:"Ctrl-Shift-z",run:f2,preventDefault:!0},{key:"Mod-u",run:MX,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:RX,preventDefault:!0}];function qf(r,e){return se.create(r.ranges.map(e),r.mainIndex)}function Ko(r,e){return r.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function $l({state:r,dispatch:e},t){let i=qf(r.selection,t);return i.eq(r.selection)?!1:(e(Ko(r,i)),!0)}function Kb(r,e){return se.cursor(e?r.to:r.from)}function wB(r,e){return $l(r,t=>t.empty?r.moveByChar(t,e):Kb(t,e))}function bs(r){return r.textDirectionAt(r.state.selection.main.head)==Gi.LTR}const yB=r=>wB(r,!bs(r)),vB=r=>wB(r,bs(r));function SB(r,e){return $l(r,t=>t.empty?r.moveByGroup(t,e):Kb(t,e))}const zX=r=>SB(r,!bs(r)),WX=r=>SB(r,bs(r));function VX(r,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(r.sliceDoc(e.from,e.to)))||e.firstChild}function Jb(r,e,t){let i=qa(r).resolveInner(e.head),n=t?Tt.closedBy:Tt.openedBy;for(let a=e.head;;){let h=t?i.childAfter(a):i.childBefore(a);if(!h)break;VX(r,h,n)?i=h:a=t?h.to:h.from}let s=i.type.prop(n),o,l;return s&&(o=t?$u(r,i.from,1):$u(r,i.to,-1))&&o.matched?l=t?o.end.to:o.end.from:l=t?i.to:i.from,se.cursor(l,t?-1:1)}const jX=r=>$l(r,e=>Jb(r.state,e,!bs(r))),FX=r=>$l(r,e=>Jb(r.state,e,bs(r)));function xB(r,e){return $l(r,t=>{if(!t.empty)return Kb(t,e);let i=r.moveVertically(t,e);return i.head!=t.head?i:r.moveToLineBoundary(t,e)})}const CB=r=>xB(r,!1),AB=r=>xB(r,!0);function TB(r){return Math.max(r.defaultLineHeight,Math.min(r.dom.clientHeight,innerHeight)-5)}function PB(r,e){let{state:t}=r,i=qf(t.selection,l=>l.empty?r.moveVertically(l,e,TB(r)):Kb(l,e));if(i.eq(t.selection))return!1;let n=r.coordsAtPos(t.selection.main.head),s=r.scrollDOM.getBoundingClientRect(),o;return n&&n.top>s.top&&n.bottom<s.bottom&&n.top-s.top<=r.scrollDOM.scrollHeight-r.scrollDOM.scrollTop-r.scrollDOM.clientHeight&&(o=nt.scrollIntoView(i.main.head,{y:"start",yMargin:n.top-s.top})),r.dispatch(Ko(t,i),{effects:o}),!0}const NP=r=>PB(r,!1),c2=r=>PB(r,!0);function eO(r,e,t){let i=r.lineBlockAt(e.head),n=r.moveToLineBoundary(e,t);if(n.head==e.head&&n.head!=(t?i.to:i.from)&&(n=r.moveToLineBoundary(e,t,!1)),!t&&n.head==i.from&&i.length){let s=/^\s*/.exec(r.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(n=se.cursor(i.from+s))}return n}const IP=r=>$l(r,e=>eO(r,e,!0)),LP=r=>$l(r,e=>eO(r,e,!1)),HX=r=>$l(r,e=>se.cursor(r.lineBlockAt(e.head).from,1)),qX=r=>$l(r,e=>se.cursor(r.lineBlockAt(e.head).to,-1));function XX(r,e,t){let i=!1,n=qf(r.selection,s=>{let o=$u(r,s.head,-1)||$u(r,s.head,1)||s.head>0&&$u(r,s.head-1,1)||s.head<r.doc.length&&$u(r,s.head+1,-1);if(!o||!o.end)return s;i=!0;let l=o.start.from==s.head?o.end.to:o.end.from;return t?se.range(s.anchor,l):se.cursor(l)});return i?(e(Ko(r,n)),!0):!1}const ZX=({state:r,dispatch:e})=>XX(r,e,!1);function Jo(r,e){let t=qf(r.state.selection,i=>{let n=e(i);return se.range(i.anchor,n.head,n.goalColumn)});return t.eq(r.state.selection)?!1:(r.dispatch(Ko(r.state,t)),!0)}function _B(r,e){return Jo(r,t=>r.moveByChar(t,e))}const $B=r=>_B(r,!bs(r)),MB=r=>_B(r,bs(r));function RB(r,e){return Jo(r,t=>r.moveByGroup(t,e))}const GX=r=>RB(r,!bs(r)),UX=r=>RB(r,bs(r)),YX=r=>Jo(r,e=>Jb(r.state,e,!bs(r))),KX=r=>Jo(r,e=>Jb(r.state,e,bs(r)));function QB(r,e){return Jo(r,t=>r.moveVertically(t,e))}const DB=r=>QB(r,!1),EB=r=>QB(r,!0);function BB(r,e){return Jo(r,t=>r.moveVertically(t,e,TB(r)))}const zP=r=>BB(r,!1),WP=r=>BB(r,!0),VP=r=>Jo(r,e=>eO(r,e,!0)),jP=r=>Jo(r,e=>eO(r,e,!1)),JX=r=>Jo(r,e=>se.cursor(r.lineBlockAt(e.head).from)),eZ=r=>Jo(r,e=>se.cursor(r.lineBlockAt(e.head).to)),FP=({state:r,dispatch:e})=>(e(Ko(r,{anchor:0})),!0),HP=({state:r,dispatch:e})=>(e(Ko(r,{anchor:r.doc.length})),!0),qP=({state:r,dispatch:e})=>(e(Ko(r,{anchor:r.selection.main.anchor,head:0})),!0),XP=({state:r,dispatch:e})=>(e(Ko(r,{anchor:r.selection.main.anchor,head:r.doc.length})),!0),tZ=({state:r,dispatch:e})=>(e(r.update({selection:{anchor:0,head:r.doc.length},userEvent:"select"})),!0),iZ=({state:r,dispatch:e})=>{let t=nO(r).map(({from:i,to:n})=>se.range(i,Math.min(n+1,r.doc.length)));return e(r.update({selection:se.create(t),userEvent:"select"})),!0},nZ=({state:r,dispatch:e})=>{let t=qf(r.selection,i=>{var n;let s=qa(r).resolveInner(i.head,1);for(;!(s.from<i.from&&s.to>=i.to||s.to>i.to&&s.from<=i.from||!(!((n=s.parent)===null||n===void 0)&&n.parent));)s=s.parent;return se.range(s.to,s.from)});return e(Ko(r,t)),!0},rZ=({state:r,dispatch:e})=>{let t=r.selection,i=null;return t.ranges.length>1?i=se.create([t.main]):t.main.empty||(i=se.create([se.cursor(t.main.head)])),i?(e(Ko(r,i)),!0):!1};function tO({state:r,dispatch:e},t){if(r.readOnly)return!1;let i="delete.selection",n=r.changeByRange(s=>{let{from:o,to:l}=s;if(o==l){let a=t(o);a<o?i="delete.backward":a>o&&(i="delete.forward"),o=Math.min(o,a),l=Math.max(l,a)}return o==l?{range:s}:{changes:{from:o,to:l},range:se.cursor(o)}});return n.changes.empty?!1:(e(r.update(n,{scrollIntoView:!0,userEvent:i,effects:i=="delete.selection"?nt.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function iO(r,e,t){if(r instanceof nt)for(let i of r.state.facet(nt.atomicRanges).map(n=>n(r)))i.between(e,e,(n,s)=>{n<e&&s>e&&(e=t?s:n)});return e}const NB=(r,e)=>tO(r,t=>{let{state:i}=r,n=i.doc.lineAt(t),s,o;if(!e&&t>n.from&&t<n.from+200&&!/[^ \t]/.test(s=n.text.slice(0,t-n.from))){if(s[s.length-1]=="	")return t-1;let l=rp(s,i.tabSize),a=l%f1(i)||f1(i);for(let h=0;h<a&&s[s.length-1-h]==" ";h++)t--;o=t}else o=Kr(n.text,t-n.from,e,e)+n.from,o==t&&n.number!=(e?i.doc.lines:1)&&(o+=e?1:-1);return iO(r,o,e)}),d2=r=>NB(r,!1),IB=r=>NB(r,!0),LB=(r,e)=>tO(r,t=>{let i=t,{state:n}=r,s=n.doc.lineAt(i),o=n.charCategorizer(i);for(let l=null;;){if(i==(e?s.to:s.from)){i==t&&s.number!=(e?n.doc.lines:1)&&(i+=e?1:-1);break}let a=Kr(s.text,i-s.from,e)+s.from,h=s.text.slice(Math.min(i,a)-s.from,Math.max(i,a)-s.from),u=o(h);if(l!=null&&u!=l)break;(h!=" "||i!=t)&&(l=u),i=a}return iO(r,i,e)}),zB=r=>LB(r,!1),sZ=r=>LB(r,!0),WB=r=>tO(r,e=>{let t=r.lineBlockAt(e).to;return iO(r,e<t?t:Math.min(r.state.doc.length,e+1),!0)}),oZ=r=>tO(r,e=>{let t=r.lineBlockAt(e).from;return iO(r,e>t?t:Math.max(0,e-1),!1)}),lZ=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=r.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:_t.of(["",""])},range:se.cursor(i.from)}));return e(r.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},aZ=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=r.changeByRange(i=>{if(!i.empty||i.from==0||i.from==r.doc.length)return{range:i};let n=i.from,s=r.doc.lineAt(n),o=n==s.from?n-1:Kr(s.text,n-s.from,!1)+s.from,l=n==s.to?n+1:Kr(s.text,n-s.from,!0)+s.from;return{changes:{from:o,to:l,insert:r.doc.slice(n,l).append(r.doc.slice(o,n))},range:se.cursor(l)}});return t.changes.empty?!1:(e(r.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function nO(r){let e=[],t=-1;for(let i of r.selection.ranges){let n=r.doc.lineAt(i.from),s=r.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=r.doc.lineAt(i.to-1)),t>=n.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(i)}else e.push({from:n.from,to:s.to,ranges:[i]});t=s.number+1}return e}function VB(r,e,t){if(r.readOnly)return!1;let i=[],n=[];for(let s of nO(r)){if(t?s.to==r.doc.length:s.from==0)continue;let o=r.doc.lineAt(t?s.to+1:s.from-1),l=o.length+1;if(t){i.push({from:s.to,to:o.to},{from:s.from,insert:o.text+r.lineBreak});for(let a of s.ranges)n.push(se.range(Math.min(r.doc.length,a.anchor+l),Math.min(r.doc.length,a.head+l)))}else{i.push({from:o.from,to:s.from},{from:s.to,insert:r.lineBreak+o.text});for(let a of s.ranges)n.push(se.range(a.anchor-l,a.head-l))}}return i.length?(e(r.update({changes:i,scrollIntoView:!0,selection:se.create(n,r.selection.mainIndex),userEvent:"move.line"})),!0):!1}const hZ=({state:r,dispatch:e})=>VB(r,e,!1),uZ=({state:r,dispatch:e})=>VB(r,e,!0);function jB(r,e,t){if(r.readOnly)return!1;let i=[];for(let n of nO(r))t?i.push({from:n.from,insert:r.doc.slice(n.from,n.to)+r.lineBreak}):i.push({from:n.to,insert:r.lineBreak+r.doc.slice(n.from,n.to)});return e(r.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const fZ=({state:r,dispatch:e})=>jB(r,e,!1),cZ=({state:r,dispatch:e})=>jB(r,e,!0),dZ=r=>{if(r.state.readOnly)return!1;let{state:e}=r,t=e.changes(nO(e).map(({from:n,to:s})=>(n>0?n--:s<e.doc.length&&s++,{from:n,to:s}))),i=qf(e.selection,n=>r.moveVertically(n,!0)).map(t);return r.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function pZ(r,e){if(/\(\)|\[\]|\{\}/.test(r.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=qa(r).resolveInner(e),i=t.childBefore(e),n=t.childAfter(e),s;return i&&n&&i.to<=e&&n.from>=e&&(s=i.type.prop(Tt.closedBy))&&s.indexOf(n.name)>-1&&r.doc.lineAt(i.to).from==r.doc.lineAt(n.from).from?{from:i.to,to:n.from}:null}const gZ=FB(!1),mZ=FB(!0);function FB(r){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(n=>{let{from:s,to:o}=n,l=e.doc.lineAt(s),a=!r&&s==o&&pZ(e,s);r&&(s=o=(o<=l.to?l:e.doc.lineAt(o)).to);let h=new Ub(e,{simulateBreak:s,simulateDoubleBreak:!!a}),u=cB(h,s);for(u==null&&(u=/^\s*/.exec(e.doc.lineAt(s).text)[0].length);o<l.to&&/\s/.test(l.text[o-l.from]);)o++;a?{from:s,to:o}=a:s>l.from&&s<l.from+100&&!/\S/.test(l.text.slice(0,s))&&(s=l.from);let f=["",c1(e,u)];return a&&f.push(c1(e,h.lineIndent(l.from,-1))),{changes:{from:s,to:o,insert:_t.of(f)},range:se.cursor(s+1+f[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function VS(r,e){let t=-1;return r.changeByRange(i=>{let n=[];for(let o=i.from;o<=i.to;){let l=r.doc.lineAt(o);l.number>t&&(i.empty||i.to>l.from)&&(e(l,n,i),t=l.number),o=l.to+1}let s=r.changes(n);return{changes:n,range:se.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}const bZ=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=Object.create(null),i=new Ub(r,{overrideIndentation:s=>{let o=t[s];return o==null?-1:o}}),n=VS(r,(s,o,l)=>{let a=cB(i,s.from);if(a==null)return;/\S/.test(s.text)||(a=0);let h=/^\s*/.exec(s.text)[0],u=c1(r,a);(h!=u||l.from<s.from+h.length)&&(t[s.from]=a,o.push({from:s.from,to:s.from+h.length,insert:u}))});return n.changes.empty||e(r.update(n,{userEvent:"indent"})),!0},OZ=({state:r,dispatch:e})=>r.readOnly?!1:(e(r.update(VS(r,(t,i)=>{i.push({from:t.from,insert:r.facet(IS)})}),{userEvent:"input.indent"})),!0),kZ=({state:r,dispatch:e})=>r.readOnly?!1:(e(r.update(VS(r,(t,i)=>{let n=/^\s*/.exec(t.text)[0];if(!n)return;let s=rp(n,r.tabSize),o=0,l=c1(r,Math.max(0,s-f1(r)));for(;o<n.length&&o<l.length&&n.charCodeAt(o)==l.charCodeAt(o);)o++;i.push({from:t.from+o,to:t.from+n.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0),wZ=[{key:"Ctrl-b",run:yB,shift:$B,preventDefault:!0},{key:"Ctrl-f",run:vB,shift:MB},{key:"Ctrl-p",run:CB,shift:DB},{key:"Ctrl-n",run:AB,shift:EB},{key:"Ctrl-a",run:HX,shift:JX},{key:"Ctrl-e",run:qX,shift:eZ},{key:"Ctrl-d",run:IB},{key:"Ctrl-h",run:d2},{key:"Ctrl-k",run:WB},{key:"Ctrl-Alt-h",run:zB},{key:"Ctrl-o",run:lZ},{key:"Ctrl-t",run:aZ},{key:"Ctrl-v",run:c2}],yZ=[{key:"ArrowLeft",run:yB,shift:$B,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:zX,shift:GX},{mac:"Cmd-ArrowLeft",run:LP,shift:jP},{key:"ArrowRight",run:vB,shift:MB,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:WX,shift:UX},{mac:"Cmd-ArrowRight",run:IP,shift:VP},{key:"ArrowUp",run:CB,shift:DB,preventDefault:!0},{mac:"Cmd-ArrowUp",run:FP,shift:qP},{mac:"Ctrl-ArrowUp",run:NP,shift:zP},{key:"ArrowDown",run:AB,shift:EB,preventDefault:!0},{mac:"Cmd-ArrowDown",run:HP,shift:XP},{mac:"Ctrl-ArrowDown",run:c2,shift:WP},{key:"PageUp",run:NP,shift:zP},{key:"PageDown",run:c2,shift:WP},{key:"Home",run:LP,shift:jP,preventDefault:!0},{key:"Mod-Home",run:FP,shift:qP},{key:"End",run:IP,shift:VP,preventDefault:!0},{key:"Mod-End",run:HP,shift:XP},{key:"Enter",run:gZ},{key:"Mod-a",run:tZ},{key:"Backspace",run:d2,shift:d2},{key:"Delete",run:IB},{key:"Mod-Backspace",mac:"Alt-Backspace",run:zB},{key:"Mod-Delete",mac:"Alt-Delete",run:sZ},{mac:"Mod-Backspace",run:oZ},{mac:"Mod-Delete",run:WB}].concat(wZ.map(r=>({mac:r.key,run:r.run,shift:r.shift}))),vZ=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:jX,shift:YX},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:FX,shift:KX},{key:"Alt-ArrowUp",run:hZ},{key:"Shift-Alt-ArrowUp",run:fZ},{key:"Alt-ArrowDown",run:uZ},{key:"Shift-Alt-ArrowDown",run:cZ},{key:"Escape",run:rZ},{key:"Mod-Enter",run:mZ},{key:"Alt-l",mac:"Ctrl-l",run:iZ},{key:"Mod-i",run:nZ,preventDefault:!0},{key:"Mod-[",run:kZ},{key:"Mod-]",run:OZ},{key:"Mod-Alt-\\",run:bZ},{key:"Shift-Mod-k",run:dZ},{key:"Shift-Mod-\\",run:ZX},{key:"Mod-/",run:wX},{key:"Alt-A",run:vX}].concat(yZ),ZP=typeof String.prototype.normalize=="function"?r=>r.normalize("NFKD"):r=>r;class xf{constructor(e,t,i=0,n=e.length,s){this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,n),this.bufferStart=i,this.normalize=s?o=>s(ZP(o)):ZP,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Ru(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=II(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=t0(e);let n=this.normalize(t);for(let s=0,o=i;;s++){let l=n.charCodeAt(s),a=this.match(l,o);if(a)return this.value=a,this;if(s==n.length-1)break;o==i&&s<t.length&&t.charCodeAt(s)==l&&o++}}}match(e,t){let i=null;for(let n=0;n<this.matches.length;n+=2){let s=this.matches[n],o=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?i={from:this.matches[n+1],to:t+1}:(this.matches[n]++,o=!0)),o||(this.matches.splice(n,2),n-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:t,to:t+1}:this.matches.push(1,t)),i}}typeof Symbol!="undefined"&&(xf.prototype[Symbol.iterator]=function(){return this});const HB={from:-1,to:-1,match:/.*/.exec("")},jS="gm"+(/x/.unicode==null?"":"u");class qB{constructor(e,t,i,n=0,s=e.length){if(this.to=s,this.curLine="",this.done=!1,this.value=HB,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new XB(e,t,i,n,s);this.re=new RegExp(t,jS+(i!=null&&i.ignoreCase?"i":"")),this.iter=e.iter();let o=e.lineAt(n);this.curLineStart=o.from,this.matchPos=n,this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,n=i+t[0].length;if(this.matchPos=n+(i==n?1:0),i==this.curLine.length&&this.nextLine(),i<n||i>this.value.to)return this.value={from:i,to:n,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const xk=new WeakMap;class Xu{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let n=xk.get(e);if(!n||n.from>=i||n.to<=t){let l=new Xu(t,e.sliceString(t,i));return xk.set(e,l),l}if(n.from==t&&n.to==i)return n;let{text:s,from:o}=n;return o>t&&(s=e.sliceString(t,o)+s,o=t),n.to<i&&(s+=e.sliceString(n.to,i)),xk.set(e,new Xu(o,s)),new Xu(t,s.slice(t-o,i-o))}}class XB{constructor(e,t,i,n,s){this.text=e,this.to=s,this.done=!1,this.value=HB,this.matchPos=n,this.re=new RegExp(t,jS+(i!=null&&i.ignoreCase?"i":"")),this.flat=Xu.get(e,n,this.chunkEnd(n+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t&&this.flat.to<this.to&&t.index+t[0].length>this.flat.text.length-10&&(t=null),t){let i=this.flat.from+t.index,n=i+t[0].length;return this.value={from:i,to:n,match:t},this.matchPos=n+(i==n?1:0),this}else{if(this.flat.to==this.to)return this.done=!0,this;this.flat=Xu.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}}typeof Symbol!="undefined"&&(qB.prototype[Symbol.iterator]=XB.prototype[Symbol.iterator]=function(){return this});function SZ(r){try{return new RegExp(r,jS),!0}catch{return!1}}function p2(r){let e=gi("input",{class:"cm-textfield",name:"line"}),t=gi("form",{class:"cm-gotoLine",onkeydown:n=>{n.keyCode==27?(n.preventDefault(),r.dispatch({effects:p1.of(!1)}),r.focus()):n.keyCode==13&&(n.preventDefault(),i())},onsubmit:n=>{n.preventDefault(),i()}},gi("label",r.state.phrase("Go to line"),": ",e)," ",gi("button",{class:"cm-button",type:"submit"},r.state.phrase("go")));function i(){let n=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!n)return;let{state:s}=r,o=s.doc.lineAt(s.selection.main.head),[,l,a,h,u]=n,f=h?+h.slice(1):0,c=a?+a:o.number;if(a&&u){let g=c/100;l&&(g=g*(l=="-"?-1:1)+o.number/s.doc.lines),c=Math.round(s.doc.lines*g)}else a&&l&&(c=c*(l=="-"?-1:1)+o.number);let d=s.doc.line(Math.max(1,Math.min(s.doc.lines,c)));r.dispatch({effects:p1.of(!1),selection:se.cursor(d.from+Math.max(0,Math.min(f,d.length))),scrollIntoView:!0}),r.focus()}return{dom:t}}const p1=xt.define(),GP=or.define({create(){return!0},update(r,e){for(let t of e.effects)t.is(p1)&&(r=t.value);return r},provide:r=>f0.from(r,e=>e?p2:null)}),xZ=r=>{let e=u0(r,p2);if(!e){let t=[p1.of(!0)];r.state.field(GP,!1)==null&&t.push(xt.appendConfig.of([GP,CZ])),r.dispatch({effects:t}),e=u0(r,p2)}return e&&e.dom.querySelector("input").focus(),!0},CZ=nt.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),AZ={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},ZB=Ie.define({combine(r){return np(r,AZ,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function TZ(r){let e=[RZ,MZ];return r&&e.push(ZB.of(r)),e}const PZ=ot.mark({class:"cm-selectionMatch"}),_Z=ot.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function UP(r,e,t,i){return(t==0||r(e.sliceDoc(t-1,t))!=Jr.Word)&&(i==e.doc.length||r(e.sliceDoc(i,i+1))!=Jr.Word)}function $Z(r,e,t,i){return r(e.sliceDoc(t,t+1))==Jr.Word&&r(e.sliceDoc(i-1,i))==Jr.Word}const MZ=fn.fromClass(class{constructor(r){this.decorations=this.getDeco(r)}update(r){(r.selectionSet||r.docChanged||r.viewportChanged)&&(this.decorations=this.getDeco(r.view))}getDeco(r){let e=r.state.facet(ZB),{state:t}=r,i=t.selection;if(i.ranges.length>1)return ot.none;let n=i.main,s,o=null;if(n.empty){if(!e.highlightWordAroundCursor)return ot.none;let a=t.wordAt(n.head);if(!a)return ot.none;o=t.charCategorizer(n.head),s=t.sliceDoc(a.from,a.to)}else{let a=n.to-n.from;if(a<e.minSelectionLength||a>200)return ot.none;if(e.wholeWords){if(s=t.sliceDoc(n.from,n.to),o=t.charCategorizer(n.head),!(UP(o,t,n.from,n.to)&&$Z(o,t,n.from,n.to)))return ot.none}else if(s=t.sliceDoc(n.from,n.to).trim(),!s)return ot.none}let l=[];for(let a of r.visibleRanges){let h=new xf(t.doc,s,a.from,a.to);for(;!h.next().done;){let{from:u,to:f}=h.value;if((!o||UP(o,t,u,f))&&(n.empty&&u<=n.from&&f>=n.to?l.push(_Z.range(u,f)):(u>=n.to||f<=n.from)&&l.push(PZ.range(u,f)),l.length>e.maxMatches))return ot.none}}return ot.set(l)}},{decorations:r=>r.decorations}),RZ=nt.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),QZ=({state:r,dispatch:e})=>{let{selection:t}=r,i=se.create(t.ranges.map(n=>r.wordAt(n.head)||se.cursor(n.head)),t.mainIndex);return i.eq(t)?!1:(e(r.update({selection:i})),!0)};function DZ(r,e){let{main:t,ranges:i}=r.selection,n=r.wordAt(t.head),s=n&&n.from==t.from&&n.to==t.to;for(let o=!1,l=new xf(r.doc,e,i[i.length-1].to);;)if(l.next(),l.done){if(o)return null;l=new xf(r.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(a=>a.from==l.value.from))continue;if(s){let a=r.wordAt(l.value.from);if(!a||a.from!=l.value.from||a.to!=l.value.to)continue}return l.value}}const EZ=({state:r,dispatch:e})=>{let{ranges:t}=r.selection;if(t.some(s=>s.from===s.to))return QZ({state:r,dispatch:e});let i=r.sliceDoc(t[0].from,t[0].to);if(r.selection.ranges.some(s=>r.sliceDoc(s.from,s.to)!=i))return!1;let n=DZ(r,i);return n?(e(r.update({selection:r.selection.addRange(se.range(n.from,n.to),!1),effects:nt.scrollIntoView(n.to)})),!0):!1},FS=Ie.define({combine(r){var e;return{top:r.reduce((t,i)=>t!=null?t:i.top,void 0)||!1,caseSensitive:r.reduce((t,i)=>t!=null?t:i.caseSensitive,void 0)||!1,createPanel:((e=r.find(t=>t.createPanel))===null||e===void 0?void 0:e.createPanel)||(t=>new HZ(t))}}});class GB{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||SZ(this.search)),this.unquoted=e.literal?this.search:this.search.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp}create(){return this.regexp?new NZ(this):new BZ(this)}getCursor(e,t=0,i=e.length){return this.regexp?Au(this,e,t,i):Cu(this,e,t,i)}}class UB{constructor(e){this.spec=e}}function Cu(r,e,t,i){return new xf(e,r.unquoted,t,i,r.caseSensitive?void 0:n=>n.toLowerCase())}class BZ extends UB{constructor(e){super(e)}nextMatch(e,t,i){let n=Cu(this.spec,e,i,e.length).nextOverlapping();return n.done&&(n=Cu(this.spec,e,0,t).nextOverlapping()),n.done?null:n.value}prevMatchInRange(e,t,i){for(let n=i;;){let s=Math.max(t,n-1e4-this.spec.unquoted.length),o=Cu(this.spec,e,s,n),l=null;for(;!o.nextOverlapping().done;)l=o.value;if(l)return l;if(s==t)return null;n-=1e4}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.length)}getReplacement(e){return this.spec.replace}matchAll(e,t){let i=Cu(this.spec,e,0,e.length),n=[];for(;!i.next().done;){if(n.length>=t)return null;n.push(i.value)}return n}highlight(e,t,i,n){let s=Cu(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.length));for(;!s.next().done;)n(s.value.from,s.value.to)}}function Au(r,e,t,i){return new qB(e,r.search,r.caseSensitive?void 0:{ignoreCase:!0},t,i)}class NZ extends UB{nextMatch(e,t,i){let n=Au(this.spec,e,i,e.length).next();return n.done&&(n=Au(this.spec,e,0,t).next()),n.done?null:n.value}prevMatchInRange(e,t,i){for(let n=1;;n++){let s=Math.max(t,i-n*1e4),o=Au(this.spec,e,s,i),l=null;for(;!o.next().done;)l=o.value;if(l&&(s==t||l.from>s+10))return l;if(s==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.length)}getReplacement(e){return this.spec.replace.replace(/\$([$&\d+])/g,(t,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:t)}matchAll(e,t){let i=Au(this.spec,e,0,e.length),n=[];for(;!i.next().done;){if(n.length>=t)return null;n.push(i.value)}return n}highlight(e,t,i,n){let s=Au(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.length));for(;!s.next().done;)n(s.value.from,s.value.to)}}const Wd=xt.define(),HS=xt.define(),Da=or.define({create(r){return new Ck(g2(r).create(),null)},update(r,e){for(let t of e.effects)t.is(Wd)?r=new Ck(t.value.create(),r.panel):t.is(HS)&&(r=new Ck(r.query,t.value?qS:null));return r},provide:r=>f0.from(r,e=>e.panel)});class Ck{constructor(e,t){this.query=e,this.panel=t}}const IZ=ot.mark({class:"cm-searchMatch"}),LZ=ot.mark({class:"cm-searchMatch cm-searchMatch-selected"}),zZ=fn.fromClass(class{constructor(r){this.view=r,this.decorations=this.highlight(r.state.field(Da))}update(r){let e=r.state.field(Da);(e!=r.startState.field(Da)||r.docChanged||r.selectionSet||r.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:r,panel:e}){if(!e||!r.spec.valid)return ot.none;let{view:t}=this,i=new Uu;for(let n=0,s=t.visibleRanges,o=s.length;n<o;n++){let{from:l,to:a}=s[n];for(;n<o-1&&a>s[n+1].from-2*250;)a=s[++n].to;r.highlight(t.state.doc,l,a,(h,u)=>{let f=t.state.selection.ranges.some(c=>c.from==h&&c.to==u);i.add(h,u,f?LZ:IZ)})}return i.finish()}},{decorations:r=>r.decorations});function yp(r){return e=>{let t=e.state.field(Da,!1);return t&&t.query.spec.valid?r(e,t):YB(e)}}const g1=yp((r,{query:e})=>{let{from:t,to:i}=r.state.selection.main,n=e.nextMatch(r.state.doc,t,i);return!n||n.from==t&&n.to==i?!1:(r.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0,effects:XS(r,n),userEvent:"select.search"}),!0)}),m1=yp((r,{query:e})=>{let{state:t}=r,{from:i,to:n}=t.selection.main,s=e.prevMatch(t.doc,i,n);return s?(r.dispatch({selection:{anchor:s.from,head:s.to},scrollIntoView:!0,effects:XS(r,s),userEvent:"select.search"}),!0):!1}),WZ=yp((r,{query:e})=>{let t=e.matchAll(r.state.doc,1e3);return!t||!t.length?!1:(r.dispatch({selection:se.create(t.map(i=>se.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),VZ=({state:r,dispatch:e})=>{let t=r.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:n}=t.main,s=[],o=0;for(let l=new xf(r.doc,r.sliceDoc(i,n));!l.next().done;){if(s.length>1e3)return!1;l.value.from==i&&(o=s.length),s.push(se.range(l.value.from,l.value.to))}return e(r.update({selection:se.create(s,o),userEvent:"select.search.matches"})),!0},YP=yp((r,{query:e})=>{let{state:t}=r,{from:i,to:n}=t.selection.main;if(t.readOnly)return!1;let s=e.nextMatch(t.doc,i,i);if(!s)return!1;let o=[],l,a,h=[];if(s.from==i&&s.to==n&&(a=t.toText(e.getReplacement(s)),o.push({from:s.from,to:s.to,insert:a}),s=e.nextMatch(t.doc,s.from,s.to),h.push(nt.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(i).number)+"."))),s){let u=o.length==0||o[0].from>=s.to?0:s.to-s.from-a.length;l={anchor:s.from-u,head:s.to-u},h.push(XS(r,s))}return r.dispatch({changes:o,selection:l,scrollIntoView:!!l,effects:h,userEvent:"input.replace"}),!0}),jZ=yp((r,{query:e})=>{if(r.state.readOnly)return!1;let t=e.matchAll(r.state.doc,1e9).map(n=>{let{from:s,to:o}=n;return{from:s,to:o,insert:e.getReplacement(n)}});if(!t.length)return!1;let i=r.state.phrase("replaced $ matches",t.length)+".";return r.dispatch({changes:t,effects:nt.announce.of(i),userEvent:"input.replace.all"}),!0});function qS(r){return r.state.facet(FS).createPanel(r)}function g2(r,e){var t;let i=r.selection.main,n=i.empty||i.to>i.from+100?"":r.sliceDoc(i.from,i.to),s=(t=e==null?void 0:e.caseSensitive)!==null&&t!==void 0?t:r.facet(FS).caseSensitive;return e&&!n?e:new GB({search:n.replace(/\n/g,"\\n"),caseSensitive:s})}const YB=r=>{let e=r.state.field(Da,!1);if(e&&e.panel){let t=u0(r,qS);if(!t)return!1;let i=t.dom.querySelector("[main-field]");if(i&&i!=r.root.activeElement){let n=g2(r.state,e.query.spec);n.valid&&r.dispatch({effects:Wd.of(n)}),i.focus(),i.select()}}else r.dispatch({effects:[HS.of(!0),e?Wd.of(g2(r.state,e.query.spec)):xt.appendConfig.of(XZ)]});return!0},KB=r=>{let e=r.state.field(Da,!1);if(!e||!e.panel)return!1;let t=u0(r,qS);return t&&t.dom.contains(r.root.activeElement)&&r.focus(),r.dispatch({effects:HS.of(!1)}),!0},FZ=[{key:"Mod-f",run:YB,scope:"editor search-panel"},{key:"F3",run:g1,shift:m1,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:g1,shift:m1,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:KB,scope:"editor search-panel"},{key:"Mod-Shift-l",run:VZ},{key:"Alt-g",run:xZ},{key:"Mod-d",run:EZ,preventDefault:!0}];class HZ{constructor(e){this.view=e;let t=this.query=e.state.field(Da).query.spec;this.commit=this.commit.bind(this),this.searchField=gi("input",{value:t.search,placeholder:rs(e,"Find"),"aria-label":rs(e,"Find"),class:"cm-textfield",name:"search","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=gi("input",{value:t.replace,placeholder:rs(e,"Replace"),"aria-label":rs(e,"Replace"),class:"cm-textfield",name:"replace",onchange:this.commit,onkeyup:this.commit}),this.caseField=gi("input",{type:"checkbox",name:"case",checked:t.caseSensitive,onchange:this.commit}),this.reField=gi("input",{type:"checkbox",name:"re",checked:t.regexp,onchange:this.commit});function i(n,s,o){return gi("button",{class:"cm-button",name:n,onclick:s,type:"button"},o)}this.dom=gi("div",{onkeydown:n=>this.keydown(n),class:"cm-search"},[this.searchField,i("next",()=>g1(e),[rs(e,"next")]),i("prev",()=>m1(e),[rs(e,"previous")]),i("select",()=>WZ(e),[rs(e,"all")]),gi("label",null,[this.caseField,rs(e,"match case")]),gi("label",null,[this.reField,rs(e,"regexp")]),...e.state.readOnly?[]:[gi("br"),this.replaceField,i("replace",()=>YP(e),[rs(e,"replace")]),i("replaceAll",()=>jZ(e),[rs(e,"replace all")]),gi("button",{name:"close",onclick:()=>KB(e),"aria-label":rs(e,"close"),type:"button"},["\xD7"])]])}commit(){let e=new GB({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Wd.of(e)}))}keydown(e){g6(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?m1:g1)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),YP(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(Wd)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(FS).top}}function rs(r,e){return r.state.phrase(e)}const $g=30,Mg=/[\s\.,:;?!]/;function XS(r,{from:e,to:t}){let i=r.state.doc.lineAt(e),n=r.state.doc.lineAt(t).to,s=Math.max(i.from,e-$g),o=Math.min(n,t+$g),l=r.state.sliceDoc(s,o);if(s!=i.from){for(let a=0;a<$g;a++)if(!Mg.test(l[a+1])&&Mg.test(l[a])){l=l.slice(a);break}}if(o!=n){for(let a=l.length-1;a>l.length-$g;a--)if(!Mg.test(l[a-1])&&Mg.test(l[a])){l=l.slice(0,a);break}}return nt.announce.of(`${r.state.phrase("current match")}. ${l} ${r.state.phrase("on line")} ${i.number}.`)}const qZ=nt.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),XZ=[Da,Ff.lowest(zZ),qZ],ZZ=1024;let GZ=0;class Ak{constructor(e,t){this.from=e,this.to=t}}class Zt{constructor(e={}){this.id=GZ++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=cs.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}Zt.closedBy=new Zt({deserialize:r=>r.split(" ")});Zt.openedBy=new Zt({deserialize:r=>r.split(" ")});Zt.group=new Zt({deserialize:r=>r.split(" ")});Zt.contextHash=new Zt({perNode:!0});Zt.lookAhead=new Zt({perNode:!0});Zt.mounted=new Zt({perNode:!0});const UZ=Object.create(null);class cs{constructor(e,t,i,n=0){this.name=e,this.props=t,this.id=i,this.flags=n}static define(e){let t=e.props&&e.props.length?Object.create(null):UZ,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),n=new cs(e.name||"",t,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(n)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return n}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Zt.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let n of i.split(" "))t[n]=e[i];return i=>{for(let n=i.prop(Zt.group),s=-1;s<(n?n.length:0);s++){let o=t[s<0?i.name:n[s]];if(o)return o}}}}cs.none=new cs("",Object.create(null),0,8);const Rg=new WeakMap,KP=new WeakMap;var jn;(function(r){r[r.ExcludeBuffers=1]="ExcludeBuffers",r[r.IncludeAnonymous=2]="IncludeAnonymous",r[r.IgnoreMounts=4]="IgnoreMounts",r[r.IgnoreOverlays=8]="IgnoreOverlays"})(jn||(jn={}));class tr{constructor(e,t,i,n,s){if(this.type=e,this.children=t,this.positions=i,this.length=n,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,l]of s)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=this.prop(Zt.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let n=i.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new k1(this.topNode,e)}cursorAt(e,t=0,i=0){let n=Rg.get(this)||this.topNode,s=new k1(n);return s.moveTo(e,t),Rg.set(this,s._tree),s}get topNode(){return new Sl(this,0,0,null)}resolve(e,t=0){let i=Cf(Rg.get(this)||this.topNode,e,t,!1);return Rg.set(this,i),i}resolveInner(e,t=0){let i=Cf(KP.get(this)||this.topNode,e,t,!0);return KP.set(this,i),i}iterate(e){let{enter:t,leave:i,from:n=0,to:s=this.length}=e;for(let o=this.cursor((e.mode||0)|jn.IncludeAnonymous);;){let l=!1;if(o.from<=s&&o.to>=n&&(o.type.isAnonymous||t(o)!==!1)){if(o.firstChild())continue;l=!0}for(;l&&i&&!o.type.isAnonymous&&i(o),!o.nextSibling();){if(!o.parent())return;l=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:US(cs.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,n)=>new tr(this.type,t,i,n,this.propValues),e.makeTree||((t,i,n)=>new tr(cs.none,t,i,n)))}static build(e){return KZ(e)}}tr.empty=new tr(cs.none,[],[],0);class ZS{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new ZS(this.buffer,this.index)}}class Zh{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return cs.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],n=this.set.types[t],s=n.name;if(/\W/.test(s)&&!n.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,t,i,n,s){let{buffer:o}=this,l=-1;for(let a=e;a!=t&&!(JB(s,n,o[a+1],o[a+2])&&(l=a,i>0));a=o[a+3]);return l}slice(e,t,i,n){let s=this.buffer,o=new Uint16Array(t-e);for(let l=e,a=0;l<t;)o[a++]=s[l++],o[a++]=s[l++]-i,o[a++]=s[l++]-i,o[a++]=s[l++]-e;return new Zh(o,n-i,this.set)}}function JB(r,e,t,i){switch(r){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function eN(r,e){let t=r.childBefore(e);for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(r=t,t=i.prevSibling):t=i}return r}function Cf(r,e,t,i){for(var n;r.from==r.to||(t<1?r.from>=e:r.from>e)||(t>-1?r.to<=e:r.to<e);){let o=!i&&r instanceof Sl&&r.index<0?null:r.parent;if(!o)return r;r=o}let s=i?0:jn.IgnoreOverlays;if(i)for(let o=r,l=o.parent;l;o=l,l=o.parent)o instanceof Sl&&o.index<0&&((n=l.enter(e,t,s))===null||n===void 0?void 0:n.from)!=o.from&&(r=l);for(;;){let o=r.enter(e,t,s);if(!o)return r;r=o}}class Sl{constructor(e,t,i,n){this._tree=e,this.from=t,this.index=i,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,n,s=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,h=t>0?l.length:-1;e!=h;e+=t){let u=l[e],f=a[e]+o.from;if(!!JB(n,i,f,f+u.length)){if(u instanceof Zh){if(s&jn.ExcludeBuffers)continue;let c=u.findChild(0,u.buffer.length,t,i-f,n);if(c>-1)return new Ca(new YZ(o,u,e,f),null,c)}else if(s&jn.IncludeAnonymous||!u.type.isAnonymous||GS(u)){let c;if(!(s&jn.IgnoreMounts)&&u.props&&(c=u.prop(Zt.mounted))&&!c.overlay)return new Sl(c.tree,f,e,o);let d=new Sl(u,f,e,o);return s&jn.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(t<0?u.children.length-1:0,t,i,n)}}}if(s&jn.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let n;if(!(i&jn.IgnoreOverlays)&&(n=this._tree.prop(Zt.mounted))&&n.overlay){let s=e-this.from;for(let{from:o,to:l}of n.overlay)if((t>0?o<=s:o<s)&&(t<0?l>=s:l>s))return new Sl(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new k1(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return Cf(this,e,t,!1)}resolveInner(e,t=0){return Cf(this,e,t,!0)}enterUnfinishedNodesBefore(e){return eN(this,e)}getChild(e,t=null,i=null){let n=b1(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return b1(this,e,t,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return O1(this,e)}}function b1(r,e,t,i){let n=r.cursor(),s=[];if(!n.firstChild())return s;if(t!=null){for(;!n.type.is(t);)if(!n.nextSibling())return s}for(;;){if(i!=null&&n.type.is(i))return s;if(n.type.is(e)&&s.push(n.node),!n.nextSibling())return i==null?s:[]}}function O1(r,e,t=e.length-1){for(let i=r.parent;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class YZ{constructor(e,t,i,n){this.parent=e,this.buffer=t,this.index=i,this.start=n}}class Ca{constructor(e,t,i){this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,i){let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.context.start,i);return s<0?null:new Ca(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&jn.ExcludeBuffers)return null;let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new Ca(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Ca(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Ca(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new k1(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,n=this.index+4,s=i.buffer[this.index+3];if(s>n){let o=i.buffer[this.index+1],l=i.buffer[this.index+2];e.push(i.slice(n,s,o,l)),t.push(0)}return new tr(this.type,e,t,this.to-this.from)}resolve(e,t=0){return Cf(this,e,t,!1)}resolveInner(e,t=0){return Cf(this,e,t,!0)}enterUnfinishedNodesBefore(e){return eN(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,i=null){let n=b1(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return b1(this,e,t,i)}get node(){return this}matchContext(e){return O1(this,e)}}class k1{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Sl)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=i+n.buffer[e+1],this.to=i+n.buffer[e+2],!0}yield(e){return e?e instanceof Sl?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:n}=this.buffer,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&jn.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&jn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&jn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let n=i<0?0:this.stack[i]+4;if(this.index!=n)return this.yieldBuf(t.findChild(n,this.index,-1,0,4))}else{let n=t.buffer[this.index+3];if(n<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(n)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(n.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:i}=n)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let s=t+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let l=i._tree.children[s];if(this.mode&jn.IncludeAnonymous||l instanceof Zh||!l.type.isAnonymous||GS(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer){e:for(let n=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==n){if(n==this.index)return o;t=o,i=s+1;break e}n=this.stack[--s]}}for(let n=i;n<this.stack.length;n++)t=new Ca(this.buffer,t,this.stack[n]);return this.bufferNode=new Ca(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let n=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(n=!0)}for(;n&&t&&t(this),n=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,n=!0}}}matchContext(e){if(!this.buffer)return O1(this.node,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let n=e.length-1,s=this.stack.length-1;n>=0;s--){if(s<0)return O1(this.node,e,n);let o=i[t.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[n]&&e[n]!=o.name)return!1;n--}}return!0}}function GS(r){return r.children.some(e=>e instanceof Zh||!e.type.isAnonymous||GS(e))}function KZ(r){var e;let{buffer:t,nodeSet:i,maxBufferLength:n=ZZ,reused:s=[],minRepeatType:o=i.types.length}=r,l=Array.isArray(t)?new ZS(t,t.length):t,a=i.types,h=0,u=0;function f(p,b,m,k,C){let{id:v,start:y,end:T,size:E}=l,$=u;for(;E<0;)if(l.next(),E==-1){let L=s[v];m.push(L),k.push(y-p);return}else if(E==-3){h=v;return}else if(E==-4){u=v;return}else throw new RangeError(`Unrecognized record size: ${E}`);let R=a[v],N,_,W=y-p;if(T-y<=n&&(_=w(l.pos-b,C))){let L=new Uint16Array(_.size-_.skip),I=l.pos-_.size,j=L.length;for(;l.pos>I;)j=S(_.start,L,j);N=new Zh(L,T-_.start,i),W=_.start-p}else{let L=l.pos-E;l.next();let I=[],j=[],X=v>=o?v:-1,Z=0,ie=T;for(;l.pos>L;)X>=0&&l.id==X&&l.size>=0?(l.end<=ie-n&&(d(I,j,y,Z,l.end,ie,X,$),Z=I.length,ie=l.end),l.next()):f(y,L,I,j,X);if(X>=0&&Z>0&&Z<I.length&&d(I,j,y,Z,y,ie,X,$),I.reverse(),j.reverse(),X>-1&&Z>0){let G=c(R);N=US(R,I,j,0,I.length,0,T-y,G,G)}else N=g(R,I,j,T-y,$-T)}m.push(N),k.push(W)}function c(p){return(b,m,k)=>{let C=0,v=b.length-1,y,T;if(v>=0&&(y=b[v])instanceof tr){if(!v&&y.type==p&&y.length==k)return y;(T=y.prop(Zt.lookAhead))&&(C=m[v]+y.length+T)}return g(p,b,m,k,C)}}function d(p,b,m,k,C,v,y,T){let E=[],$=[];for(;p.length>k;)E.push(p.pop()),$.push(b.pop()+m-C);p.push(g(i.types[y],E,$,v-C,T-v)),b.push(C-m)}function g(p,b,m,k,C=0,v){if(h){let y=[Zt.contextHash,h];v=v?[y].concat(v):[y]}if(C>25){let y=[Zt.lookAhead,C];v=v?[y].concat(v):[y]}return new tr(p,b,m,k,v)}function w(p,b){let m=l.fork(),k=0,C=0,v=0,y=m.end-n,T={size:0,start:0,skip:0};e:for(let E=m.pos-p;m.pos>E;){let $=m.size;if(m.id==b&&$>=0){T.size=k,T.start=C,T.skip=v,v+=4,k+=4,m.next();continue}let R=m.pos-$;if($<0||R<E||m.start<y)break;let N=m.id>=o?4:0,_=m.start;for(m.next();m.pos>R;){if(m.size<0)if(m.size==-3)N+=4;else break e;else m.id>=o&&(N+=4);m.next()}C=_,k+=$,v+=N}return(b<0||k==p)&&(T.size=k,T.start=C,T.skip=v),T.size>4?T:void 0}function S(p,b,m){let{id:k,start:C,end:v,size:y}=l;if(l.next(),y>=0&&k<o){let T=m;if(y>4){let E=l.pos-(y-4);for(;l.pos>E;)m=S(p,b,m)}b[--m]=T,b[--m]=v-p,b[--m]=C-p,b[--m]=k}else y==-3?h=k:y==-4&&(u=k);return m}let x=[],Q=[];for(;l.pos>0;)f(r.start||0,r.bufferStart||0,x,Q,-1);let M=(e=r.length)!==null&&e!==void 0?e:x.length?Q[0]+x[0].length:0;return new tr(a[r.topID],x.reverse(),Q.reverse(),M)}const JP=new WeakMap;function zm(r,e){if(!r.isAnonymous||e instanceof Zh||e.type!=r)return 1;let t=JP.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=r||!(i instanceof tr)){t=1;break}t+=zm(r,i)}JP.set(e,t)}return t}function US(r,e,t,i,n,s,o,l,a){let h=0;for(let g=i;g<n;g++)h+=zm(r,e[g]);let u=Math.ceil(h*1.5/8),f=[],c=[];function d(g,w,S,x,Q){for(let M=S;M<x;){let p=M,b=w[M],m=zm(r,g[M]);for(M++;M<x;M++){let k=zm(r,g[M]);if(m+k>=u)break;m+=k}if(M==p+1){if(m>u){let k=g[p];d(k.children,k.positions,0,k.children.length,w[p]+Q);continue}f.push(g[p])}else{let k=w[M-1]+g[M-1].length-b;f.push(US(r,g,w,p,M,b,k,null,a))}c.push(b+Q-s)}}return d(e,t,i,n,0),(l||a)(f,c,o)}class $h{constructor(e,t,i,n,s=!1,o=!1){this.from=e,this.to=t,this.tree=i,this.offset=n,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let n=[new $h(0,e.length,e,0,!1,i)];for(let s of t)s.to>e.length&&n.push(s);return n}static applyChanges(e,t,i=128){if(!t.length)return e;let n=[],s=1,o=e.length?e[0]:null;for(let l=0,a=0,h=0;;l++){let u=l<t.length?t[l]:null,f=u?u.fromA:1e9;if(f-a>=i)for(;o&&o.from<f;){let c=o;if(a>=c.from||f<=c.to||h){let d=Math.max(c.from,a)-h,g=Math.min(c.to,f)-h;c=d>=g?null:new $h(d,g,c.tree,c.offset+h,l>0,!!u)}if(c&&n.push(c),o.to>f)break;o=s<e.length?e[s++]:null}if(!u)break;a=u.toA,h=u.toA-u.toB}return n}}class JZ{startParse(e,t,i){return typeof e=="string"&&(e=new eG(e)),i=i?i.length?i.map(n=>new Ak(n.from,n.to)):[new Ak(0,0)]:[new Ak(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let n=this.startParse(e,t,i);for(;;){let s=n.advance();if(s)return s}}}class eG{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Zt({perNode:!0});let tG=0;class xo{constructor(e,t,i){this.set=e,this.base=t,this.modified=i,this.id=tG++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let t=new xo([],null,[]);if(t.set.push(t),e)for(let i of e.set)t.set.push(i);return t}static defineModifier(){let e=new w1;return t=>t.modified.indexOf(e)>-1?t:w1.get(t.base||t,t.modified.concat(e).sort((i,n)=>i.id-n.id))}}let iG=0;class w1{constructor(){this.instances=[],this.id=iG++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(l=>l.base==e&&nG(t,l.modified));if(i)return i;let n=[],s=new xo(n,e,t);for(let l of t)l.instances.push(s);let o=tN(t);for(let l of e.set)for(let a of o)n.push(w1.get(l,a));return s}}function nG(r,e){return r.length==e.length&&r.every((t,i)=>t==e[i])}function tN(r){let e=[r];for(let t=0;t<r.length;t++)for(let i of tN(r.slice(0,t).concat(r.slice(t+1))))e.push(i);return e}function rG(r){let e=Object.create(null);for(let t in r){let i=r[t];Array.isArray(i)||(i=[i]);for(let n of t.split(" "))if(n){let s=[],o=2,l=n;for(let f=0;;){if(l=="..."&&f>0&&f+3==n.length){o=1;break}let c=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!c)throw new RangeError("Invalid path: "+n);if(s.push(c[0]=="*"?"":c[0][0]=='"'?JSON.parse(c[0]):c[0]),f+=c[0].length,f==n.length)break;let d=n[f++];if(f==n.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+n);l=n.slice(f)}let a=s.length-1,h=s[a];if(!h)throw new RangeError("Invalid path: "+n);let u=new oG(i,o,a>0?s.slice(0,a):null);e[h]=u.sort(e[h])}}return sG.add(e)}const sG=new Zt;class oG{constructor(e,t,i,n){this.tags=e,this.mode=t,this.context=i,this.next=n}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function lG(r,e){let t=Object.create(null);for(let s of r)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let o of s.tag)t[o.id]=s.class;let{scope:i,all:n=null}=e||{};return{style:s=>{let o=n;for(let l of s)for(let a of l.set){let h=t[a.id];if(h){o=o?o+" "+h:h;break}}return o},scope:i}}const pe=xo.define,Qg=pe(),zl=pe(),e8=pe(zl),t8=pe(zl),Wl=pe(),Dg=pe(Wl),Tk=pe(Wl),po=pe(),eh=pe(po),Zs=pe(),Gs=pe(),m2=pe(),fc=pe(m2),Eg=pe(),ut={comment:Qg,lineComment:pe(Qg),blockComment:pe(Qg),docComment:pe(Qg),name:zl,variableName:pe(zl),typeName:e8,tagName:pe(e8),propertyName:t8,attributeName:pe(t8),className:pe(zl),labelName:pe(zl),namespace:pe(zl),macroName:pe(zl),literal:Wl,string:Dg,docString:pe(Dg),character:pe(Dg),attributeValue:pe(Dg),number:Tk,integer:pe(Tk),float:pe(Tk),bool:pe(Wl),regexp:pe(Wl),escape:pe(Wl),color:pe(Wl),url:pe(Wl),keyword:Zs,self:pe(Zs),null:pe(Zs),atom:pe(Zs),unit:pe(Zs),modifier:pe(Zs),operatorKeyword:pe(Zs),controlKeyword:pe(Zs),definitionKeyword:pe(Zs),moduleKeyword:pe(Zs),operator:Gs,derefOperator:pe(Gs),arithmeticOperator:pe(Gs),logicOperator:pe(Gs),bitwiseOperator:pe(Gs),compareOperator:pe(Gs),updateOperator:pe(Gs),definitionOperator:pe(Gs),typeOperator:pe(Gs),controlOperator:pe(Gs),punctuation:m2,separator:pe(m2),bracket:fc,angleBracket:pe(fc),squareBracket:pe(fc),paren:pe(fc),brace:pe(fc),content:po,heading:eh,heading1:pe(eh),heading2:pe(eh),heading3:pe(eh),heading4:pe(eh),heading5:pe(eh),heading6:pe(eh),contentSeparator:pe(po),list:pe(po),quote:pe(po),emphasis:pe(po),strong:pe(po),link:pe(po),monospace:pe(po),strikethrough:pe(po),inserted:pe(),deleted:pe(),changed:pe(),invalid:pe(),meta:Eg,documentMeta:pe(Eg),annotation:pe(Eg),processingInstruction:pe(Eg),definition:xo.defineModifier(),constant:xo.defineModifier(),function:xo.defineModifier(),standard:xo.defineModifier(),local:xo.defineModifier(),special:xo.defineModifier()};lG([{tag:ut.link,class:"tok-link"},{tag:ut.heading,class:"tok-heading"},{tag:ut.emphasis,class:"tok-emphasis"},{tag:ut.strong,class:"tok-strong"},{tag:ut.keyword,class:"tok-keyword"},{tag:ut.atom,class:"tok-atom"},{tag:ut.bool,class:"tok-bool"},{tag:ut.url,class:"tok-url"},{tag:ut.labelName,class:"tok-labelName"},{tag:ut.inserted,class:"tok-inserted"},{tag:ut.deleted,class:"tok-deleted"},{tag:ut.literal,class:"tok-literal"},{tag:ut.string,class:"tok-string"},{tag:ut.number,class:"tok-number"},{tag:[ut.regexp,ut.escape,ut.special(ut.string)],class:"tok-string2"},{tag:ut.variableName,class:"tok-variableName"},{tag:ut.local(ut.variableName),class:"tok-variableName tok-local"},{tag:ut.definition(ut.variableName),class:"tok-variableName tok-definition"},{tag:ut.special(ut.variableName),class:"tok-variableName2"},{tag:ut.definition(ut.propertyName),class:"tok-propertyName tok-definition"},{tag:ut.typeName,class:"tok-typeName"},{tag:ut.namespace,class:"tok-namespace"},{tag:ut.className,class:"tok-className"},{tag:ut.macroName,class:"tok-macroName"},{tag:ut.propertyName,class:"tok-propertyName"},{tag:ut.operator,class:"tok-operator"},{tag:ut.comment,class:"tok-comment"},{tag:ut.meta,class:"tok-meta"},{tag:ut.invalid,class:"tok-invalid"},{tag:ut.punctuation,class:"tok-punctuation"}]);var Pk;const y1=new Zt;function aG(r){return Ie.define({combine:r?e=>e.concat(r):void 0})}class Io{constructor(e,t,i=[]){this.data=e,it.prototype.hasOwnProperty("tree")||Object.defineProperty(it.prototype,"tree",{get(){return Vd(this)}}),this.parser=t,this.extension=[Tf.of(this),it.languageData.of((n,s,o)=>n.facet(i8(n,s,o)))].concat(i)}isActiveAt(e,t,i=-1){return i8(e,t,i)==this.data}findRegions(e){let t=e.facet(Tf);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],n=(s,o)=>{if(s.prop(y1)==this.data){i.push({from:o,to:o+s.length});return}let l=s.prop(Zt.mounted);if(l){if(l.tree.prop(y1)==this.data){if(l.overlay)for(let a of l.overlay)i.push({from:a.from+o,to:a.to+o});else i.push({from:o,to:o+s.length});return}else if(l.overlay){let a=i.length;if(n(l.tree,l.overlay[0].from+o),i.length>a)return}}for(let a=0;a<s.children.length;a++){let h=s.children[a];h instanceof tr&&n(h,s.positions[a]+o)}};return n(Vd(e),0),i}get allowsNesting(){return!0}}Io.setState=xt.define();function i8(r,e,t){let i=r.facet(Tf);if(!i)return null;let n=i.data;if(i.allowsNesting)for(let s=Vd(r).topNode;s;s=s.enter(e,t,jn.ExcludeBuffers))n=s.type.prop(y1)||n;return n}function Vd(r){let e=r.field(Io.state,!1);return e?e.tree:tr.empty}class hG{constructor(e,t=e.length){this.doc=e,this.length=t,this.cursorPos=0,this.string="",this.cursor=e.iter()}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let cc=null;class jd{constructor(e,t,i=[],n,s,o,l,a){this.parser=e,this.state=t,this.fragments=i,this.tree=n,this.treeLen=s,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new jd(e,t,[],tr.empty,0,i,[],null)}startParse(){return this.parser.startParse(new hG(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=tr.empty&&this.isDone(t!=null?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let n=Date.now()+e;e=()=>Date.now()>n}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let n=this.parse.advance();if(n)if(this.fragments=this.withoutTempSkipped($h.addTree(n,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=n,this.parse=null,this.treeLen<(t!=null?t:this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped($h.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=cc;cc=this;try{return e()}finally{cc=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=n8(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:n,treeLen:s,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((h,u,f,c)=>a.push({fromA:h,toA:u,fromB:f,toB:c})),i=$h.applyChanges(i,a),n=tr.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let h of this.skipped){let u=e.mapPos(h.from,1),f=e.mapPos(h.to,-1);u<f&&l.push({from:u,to:f})}}}return new jd(this.parser,t,i,n,s,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:n,to:s}=this.skipped[i];n<e.to&&s>e.from&&(this.fragments=n8(this.fragments,n,s),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends JZ{createParse(t,i,n){let s=n[0].from,o=n[n.length-1].to;return{parsedPos:s,advance(){let a=cc;if(a){for(let h of n)a.tempSkipped.push(h);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new tr(cs.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return cc}}function n8(r,e,t){return $h.applyChanges(r,[{fromA:e,toA:t,fromB:e,toB:t}])}class Af{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new Af(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=jd.create(e.facet(Tf).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new Af(i)}}Io.state=or.define({create:Af.init,update(r,e){for(let t of e.effects)if(t.is(Io.setState))return t.value;return e.startState.facet(Tf)!=e.state.facet(Tf)?Af.init(e.state):r.apply(e)}});let iN=r=>{let e=setTimeout(()=>r(),500);return()=>clearTimeout(e)};typeof requestIdleCallback!="undefined"&&(iN=r=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(r,{timeout:500-100})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const _k=typeof navigator!="undefined"&&((Pk=navigator.scheduling)===null||Pk===void 0?void 0:Pk.isInputPending)?()=>navigator.scheduling.isInputPending():null,uG=fn.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Io.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Io.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=iN(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:n}}=this.view,s=i.field(Io.state);if(s.tree==s.context.tree&&s.context.isDone(n+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!_k?Math.max(25,e.timeRemaining()-5):1e9),l=s.context.treeLen<n&&i.doc.length>n+1e3,a=s.context.work(()=>_k&&_k()||Date.now()>o,n+(l?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Io.setState.of(new Af(s.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>hs(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Tf=Ie.define({combine(r){return r.length?r[0]:null},enables:[Io.state,uG]});class r8{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}class v1{constructor(e,t,i,n,s,o=void 0){this.name=e,this.alias=t,this.extensions=i,this.filename=n,this.loadFunc=s,this.support=o,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:t,support:i}=e;if(!t){if(!i)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");t=()=>Promise.resolve(i)}return new v1(e.name,(e.alias||[]).concat(e.name).map(n=>n.toLowerCase()),e.extensions||[],e.filename,t,i)}static matchFilename(e,t){for(let n of e)if(n.filename&&n.filename.test(t))return n;let i=/\.([^.]+)$/.exec(t);if(i){for(let n of e)if(n.extensions.indexOf(i[1])>-1)return n}return null}static matchLanguageName(e,t,i=!0){t=t.toLowerCase();for(let n of e)if(n.alias.some(s=>s==t))return n;if(i)for(let n of e)for(let s of n.alias){let o=t.indexOf(s);if(o>-1&&(s.length>2||!/\w/.test(t[o-1])&&!/\w/.test(t[o+s.length])))return n}return null}}const fG=new Zt,cG=new Zt,dG=Object.create(null),s8=[cs.none],o8=[],pG=Object.create(null);for(let[r,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])pG[r]=gG(dG,e);function $k(r,e){o8.indexOf(r)>-1||(o8.push(r),console.warn(e))}function gG(r,e){let t=null;for(let s of e.split(".")){let o=r[s]||ut[s];o?typeof o=="function"?t?t=o(t):$k(s,`Modifier ${s} used at start of tag`):t?$k(s,`Tag ${s} used as modifier`):t=o:$k(s,`Unknown highlighting tag ${s}`)}if(!t)return 0;let i=e.replace(/ /g,"_"),n=cs.define({id:s8.length,name:i,props:[rG({[i]:t})]});return s8.push(n),n.id}const mG=1024;let bG=0;class ls{constructor(e,t){this.from=e,this.to=t}}class Qt{constructor(e={}){this.id=bG++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=vr.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}Qt.closedBy=new Qt({deserialize:r=>r.split(" ")});Qt.openedBy=new Qt({deserialize:r=>r.split(" ")});Qt.group=new Qt({deserialize:r=>r.split(" ")});Qt.contextHash=new Qt({perNode:!0});Qt.lookAhead=new Qt({perNode:!0});Qt.mounted=new Qt({perNode:!0});class OG{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}}const kG=Object.create(null);class vr{constructor(e,t,i,n=0){this.name=e,this.props=t,this.id=i,this.flags=n}static define(e){let t=e.props&&e.props.length?Object.create(null):kG,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),n=new vr(e.name||"",t,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(n)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return n}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Qt.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let n of i.split(" "))t[n]=e[i];return i=>{for(let n=i.prop(Qt.group),s=-1;s<(n?n.length:0);s++){let o=t[s<0?i.name:n[s]];if(o)return o}}}}vr.none=new vr("",Object.create(null),0,8);class rO{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let n=null;for(let s of e){let o=s(i);o&&(n||(n=Object.assign({},i.props)),n[o[0].id]=o[1])}t.push(n?new vr(i.name,n,i.id,i.flags):i)}return new rO(t)}}const Bg=new WeakMap,l8=new WeakMap;var Wi;(function(r){r[r.ExcludeBuffers=1]="ExcludeBuffers",r[r.IncludeAnonymous=2]="IncludeAnonymous",r[r.IgnoreMounts=4]="IgnoreMounts",r[r.IgnoreOverlays=8]="IgnoreOverlays"})(Wi||(Wi={}));class rn{constructor(e,t,i,n,s){if(this.type=e,this.children=t,this.positions=i,this.length=n,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,l]of s)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=this.prop(Qt.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let n=i.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Fd(this.topNode,e)}cursorAt(e,t=0,i=0){let n=Bg.get(this)||this.topNode,s=new Fd(n);return s.moveTo(e,t),Bg.set(this,s._tree),s}get topNode(){return new Ho(this,0,0,null)}resolve(e,t=0){let i=Pf(Bg.get(this)||this.topNode,e,t,!1);return Bg.set(this,i),i}resolveInner(e,t=0){let i=Pf(l8.get(this)||this.topNode,e,t,!0);return l8.set(this,i),i}iterate(e){let{enter:t,leave:i,from:n=0,to:s=this.length}=e;for(let o=this.cursor((e.mode||0)|Wi.IncludeAnonymous);;){let l=!1;if(o.from<=s&&o.to>=n&&(o.type.isAnonymous||t(o)!==!1)){if(o.firstChild())continue;l=!0}for(;l&&i&&!o.type.isAnonymous&&i(o),!o.nextSibling();){if(!o.parent())return;l=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:JS(vr.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,n)=>new rn(this.type,t,i,n,this.propValues),e.makeTree||((t,i,n)=>new rn(vr.none,t,i,n)))}static build(e){return yG(e)}}rn.empty=new rn(vr.none,[],[],0);class YS{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new YS(this.buffer,this.index)}}class Gh{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return vr.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],n=this.set.types[t],s=n.name;if(/\W/.test(s)&&!n.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,t,i,n,s){let{buffer:o}=this,l=-1;for(let a=e;a!=t&&!(nN(s,n,o[a+1],o[a+2])&&(l=a,i>0));a=o[a+3]);return l}slice(e,t,i,n){let s=this.buffer,o=new Uint16Array(t-e);for(let l=e,a=0;l<t;)o[a++]=s[l++],o[a++]=s[l++]-i,o[a++]=s[l++]-i,o[a++]=s[l++]-e;return new Gh(o,n-i,this.set)}}function nN(r,e,t,i){switch(r){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function rN(r,e){let t=r.childBefore(e);for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(r=t,t=i.prevSibling):t=i}return r}function Pf(r,e,t,i){for(var n;r.from==r.to||(t<1?r.from>=e:r.from>e)||(t>-1?r.to<=e:r.to<e);){let o=!i&&r instanceof Ho&&r.index<0?null:r.parent;if(!o)return r;r=o}let s=i?0:Wi.IgnoreOverlays;if(i)for(let o=r,l=o.parent;l;o=l,l=o.parent)o instanceof Ho&&o.index<0&&((n=l.enter(e,t,s))===null||n===void 0?void 0:n.from)!=o.from&&(r=l);for(;;){let o=r.enter(e,t,s);if(!o)return r;r=o}}class Ho{constructor(e,t,i,n){this._tree=e,this.from=t,this.index=i,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,n,s=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,h=t>0?l.length:-1;e!=h;e+=t){let u=l[e],f=a[e]+o.from;if(!!nN(n,i,f,f+u.length)){if(u instanceof Gh){if(s&Wi.ExcludeBuffers)continue;let c=u.findChild(0,u.buffer.length,t,i-f,n);if(c>-1)return new Aa(new wG(o,u,e,f),null,c)}else if(s&Wi.IncludeAnonymous||!u.type.isAnonymous||KS(u)){let c;if(!(s&Wi.IgnoreMounts)&&u.props&&(c=u.prop(Qt.mounted))&&!c.overlay)return new Ho(c.tree,f,e,o);let d=new Ho(u,f,e,o);return s&Wi.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(t<0?u.children.length-1:0,t,i,n)}}}if(s&Wi.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let n;if(!(i&Wi.IgnoreOverlays)&&(n=this._tree.prop(Qt.mounted))&&n.overlay){let s=e-this.from;for(let{from:o,to:l}of n.overlay)if((t>0?o<=s:o<s)&&(t<0?l>=s:l>s))return new Ho(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new Fd(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return Pf(this,e,t,!1)}resolveInner(e,t=0){return Pf(this,e,t,!0)}enterUnfinishedNodesBefore(e){return rN(this,e)}getChild(e,t=null,i=null){let n=S1(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return S1(this,e,t,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return x1(this,e)}}function S1(r,e,t,i){let n=r.cursor(),s=[];if(!n.firstChild())return s;if(t!=null){for(;!n.type.is(t);)if(!n.nextSibling())return s}for(;;){if(i!=null&&n.type.is(i))return s;if(n.type.is(e)&&s.push(n.node),!n.nextSibling())return i==null?s:[]}}function x1(r,e,t=e.length-1){for(let i=r.parent;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class wG{constructor(e,t,i,n){this.parent=e,this.buffer=t,this.index=i,this.start=n}}class Aa{constructor(e,t,i){this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,i){let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.context.start,i);return s<0?null:new Aa(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&Wi.ExcludeBuffers)return null;let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new Aa(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Aa(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Aa(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new Fd(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,n=this.index+4,s=i.buffer[this.index+3];if(s>n){let o=i.buffer[this.index+1],l=i.buffer[this.index+2];e.push(i.slice(n,s,o,l)),t.push(0)}return new rn(this.type,e,t,this.to-this.from)}resolve(e,t=0){return Pf(this,e,t,!1)}resolveInner(e,t=0){return Pf(this,e,t,!0)}enterUnfinishedNodesBefore(e){return rN(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,i=null){let n=S1(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return S1(this,e,t,i)}get node(){return this}matchContext(e){return x1(this,e)}}class Fd{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Ho)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=i+n.buffer[e+1],this.to=i+n.buffer[e+2],!0}yield(e){return e?e instanceof Ho?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:n}=this.buffer,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&Wi.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Wi.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Wi.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let n=i<0?0:this.stack[i]+4;if(this.index!=n)return this.yieldBuf(t.findChild(n,this.index,-1,0,4))}else{let n=t.buffer[this.index+3];if(n<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(n)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(n.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:i}=n)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let s=t+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let l=i._tree.children[s];if(this.mode&Wi.IncludeAnonymous||l instanceof Gh||!l.type.isAnonymous||KS(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer){e:for(let n=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==n){if(n==this.index)return o;t=o,i=s+1;break e}n=this.stack[--s]}}for(let n=i;n<this.stack.length;n++)t=new Aa(this.buffer,t,this.stack[n]);return this.bufferNode=new Aa(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let n=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(n=!0)}for(;n&&t&&t(this),n=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,n=!0}}}matchContext(e){if(!this.buffer)return x1(this.node,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let n=e.length-1,s=this.stack.length-1;n>=0;s--){if(s<0)return x1(this.node,e,n);let o=i[t.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[n]&&e[n]!=o.name)return!1;n--}}return!0}}function KS(r){return r.children.some(e=>e instanceof Gh||!e.type.isAnonymous||KS(e))}function yG(r){var e;let{buffer:t,nodeSet:i,maxBufferLength:n=mG,reused:s=[],minRepeatType:o=i.types.length}=r,l=Array.isArray(t)?new YS(t,t.length):t,a=i.types,h=0,u=0;function f(p,b,m,k,C){let{id:v,start:y,end:T,size:E}=l,$=u;for(;E<0;)if(l.next(),E==-1){let L=s[v];m.push(L),k.push(y-p);return}else if(E==-3){h=v;return}else if(E==-4){u=v;return}else throw new RangeError(`Unrecognized record size: ${E}`);let R=a[v],N,_,W=y-p;if(T-y<=n&&(_=w(l.pos-b,C))){let L=new Uint16Array(_.size-_.skip),I=l.pos-_.size,j=L.length;for(;l.pos>I;)j=S(_.start,L,j);N=new Gh(L,T-_.start,i),W=_.start-p}else{let L=l.pos-E;l.next();let I=[],j=[],X=v>=o?v:-1,Z=0,ie=T;for(;l.pos>L;)X>=0&&l.id==X&&l.size>=0?(l.end<=ie-n&&(d(I,j,y,Z,l.end,ie,X,$),Z=I.length,ie=l.end),l.next()):f(y,L,I,j,X);if(X>=0&&Z>0&&Z<I.length&&d(I,j,y,Z,y,ie,X,$),I.reverse(),j.reverse(),X>-1&&Z>0){let G=c(R);N=JS(R,I,j,0,I.length,0,T-y,G,G)}else N=g(R,I,j,T-y,$-T)}m.push(N),k.push(W)}function c(p){return(b,m,k)=>{let C=0,v=b.length-1,y,T;if(v>=0&&(y=b[v])instanceof rn){if(!v&&y.type==p&&y.length==k)return y;(T=y.prop(Qt.lookAhead))&&(C=m[v]+y.length+T)}return g(p,b,m,k,C)}}function d(p,b,m,k,C,v,y,T){let E=[],$=[];for(;p.length>k;)E.push(p.pop()),$.push(b.pop()+m-C);p.push(g(i.types[y],E,$,v-C,T-v)),b.push(C-m)}function g(p,b,m,k,C=0,v){if(h){let y=[Qt.contextHash,h];v=v?[y].concat(v):[y]}if(C>25){let y=[Qt.lookAhead,C];v=v?[y].concat(v):[y]}return new rn(p,b,m,k,v)}function w(p,b){let m=l.fork(),k=0,C=0,v=0,y=m.end-n,T={size:0,start:0,skip:0};e:for(let E=m.pos-p;m.pos>E;){let $=m.size;if(m.id==b&&$>=0){T.size=k,T.start=C,T.skip=v,v+=4,k+=4,m.next();continue}let R=m.pos-$;if($<0||R<E||m.start<y)break;let N=m.id>=o?4:0,_=m.start;for(m.next();m.pos>R;){if(m.size<0)if(m.size==-3)N+=4;else break e;else m.id>=o&&(N+=4);m.next()}C=_,k+=$,v+=N}return(b<0||k==p)&&(T.size=k,T.start=C,T.skip=v),T.size>4?T:void 0}function S(p,b,m){let{id:k,start:C,end:v,size:y}=l;if(l.next(),y>=0&&k<o){let T=m;if(y>4){let E=l.pos-(y-4);for(;l.pos>E;)m=S(p,b,m)}b[--m]=T,b[--m]=v-p,b[--m]=C-p,b[--m]=k}else y==-3?h=k:y==-4&&(u=k);return m}let x=[],Q=[];for(;l.pos>0;)f(r.start||0,r.bufferStart||0,x,Q,-1);let M=(e=r.length)!==null&&e!==void 0?e:x.length?Q[0]+x[0].length:0;return new rn(a[r.topID],x.reverse(),Q.reverse(),M)}const a8=new WeakMap;function Wm(r,e){if(!r.isAnonymous||e instanceof Gh||e.type!=r)return 1;let t=a8.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=r||!(i instanceof rn)){t=1;break}t+=Wm(r,i)}a8.set(e,t)}return t}function JS(r,e,t,i,n,s,o,l,a){let h=0;for(let g=i;g<n;g++)h+=Wm(r,e[g]);let u=Math.ceil(h*1.5/8),f=[],c=[];function d(g,w,S,x,Q){for(let M=S;M<x;){let p=M,b=w[M],m=Wm(r,g[M]);for(M++;M<x;M++){let k=Wm(r,g[M]);if(m+k>=u)break;m+=k}if(M==p+1){if(m>u){let k=g[p];d(k.children,k.positions,0,k.children.length,w[p]+Q);continue}f.push(g[p])}else{let k=w[M-1]+g[M-1].length-b;f.push(JS(r,g,w,p,M,b,k,null,a))}c.push(b+Q-s)}}return d(e,t,i,n,0),(l||a)(f,c,o)}class Hd{constructor(e,t,i,n,s=!1,o=!1){this.from=e,this.to=t,this.tree=i,this.offset=n,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let n=[new Hd(0,e.length,e,0,!1,i)];for(let s of t)s.to>e.length&&n.push(s);return n}static applyChanges(e,t,i=128){if(!t.length)return e;let n=[],s=1,o=e.length?e[0]:null;for(let l=0,a=0,h=0;;l++){let u=l<t.length?t[l]:null,f=u?u.fromA:1e9;if(f-a>=i)for(;o&&o.from<f;){let c=o;if(a>=c.from||f<=c.to||h){let d=Math.max(c.from,a)-h,g=Math.min(c.to,f)-h;c=d>=g?null:new Hd(d,g,c.tree,c.offset+h,l>0,!!u)}if(c&&n.push(c),o.to>f)break;o=s<e.length?e[s++]:null}if(!u)break;a=u.toA,h=u.toA-u.toB}return n}}class vG{startParse(e,t,i){return typeof e=="string"&&(e=new SG(e)),i=i?i.length?i.map(n=>new ls(n.from,n.to)):[new ls(0,0)]:[new ls(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let n=this.startParse(e,t,i);for(;;){let s=n.advance();if(s)return s}}}class SG{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}function xG(r){return(e,t,i,n)=>new AG(e,r,t,i,n)}class h8{constructor(e,t,i,n,s){this.parser=e,this.parse=t,this.overlay=i,this.target=n,this.ranges=s}}class CG{constructor(e,t,i,n,s,o,l){this.parser=e,this.predicate=t,this.mounts=i,this.index=n,this.start=s,this.target=o,this.prev=l,this.depth=0,this.ranges=[]}}const b2=new Qt({perNode:!0});class AG{constructor(e,t,i,n,s){this.nest=t,this.input=i,this.fragments=n,this.ranges=s,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let i=this.baseParse.advance();if(!i)return null;if(this.baseParse=null,this.baseTree=i,this.startInner(),this.stoppedAt!=null)for(let n of this.inner)n.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let i=this.baseTree;return this.stoppedAt!=null&&(i=new rn(i.type,i.children,i.positions,i.length,i.propValues.concat([[b2,this.stoppedAt]]))),i}let e=this.inner[this.innerDone],t=e.parse.advance();if(t){this.innerDone++;let i=Object.assign(Object.create(null),e.target.props);i[Qt.mounted.id]=new OG(t,e.overlay,e.parser),e.target.props=i}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].ranges[0].from<e&&(e=Math.min(e,this.inner[t].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].parse.stopAt(e)}startInner(){let e=new _G(this.fragments),t=null,i=null,n=new Fd(new Ho(this.baseTree,this.ranges[0].from,0,null),Wi.IncludeAnonymous|Wi.IgnoreMounts);e:for(let s,o;this.stoppedAt==null||n.from<this.stoppedAt;){let l=!0,a;if(e.hasNode(n)){if(t){let h=t.mounts.find(u=>u.frag.from<=n.from&&u.frag.to>=n.to&&u.mount.overlay);if(h)for(let u of h.mount.overlay){let f=u.from+h.pos,c=u.to+h.pos;f>=n.from&&c<=n.to&&!t.ranges.some(d=>d.from<c&&d.to>f)&&t.ranges.push({from:f,to:c})}}l=!1}else if(i&&(o=TG(i.ranges,n.from,n.to)))l=o!=2;else if(!n.type.isAnonymous&&n.from<n.to&&(s=this.nest(n,this.input))){n.tree||PG(n);let h=e.findMounts(n.from,s.parser);if(typeof s.overlay=="function")t=new CG(s.parser,s.overlay,h,this.inner.length,n.from,n.tree,t);else{let u=c8(this.ranges,s.overlay||[new ls(n.from,n.to)]);u.length&&this.inner.push(new h8(s.parser,s.parser.startParse(this.input,d8(h,u),u),s.overlay?s.overlay.map(f=>new ls(f.from-n.from,f.to-n.from)):null,n.tree,u)),s.overlay?u.length&&(i={ranges:u,depth:0,prev:i}):l=!1}}else t&&(a=t.predicate(n))&&(a===!0&&(a=new ls(n.from,n.to)),a.from<a.to&&t.ranges.push(a));if(l&&n.firstChild())t&&t.depth++,i&&i.depth++;else for(;!n.nextSibling();){if(!n.parent())break e;if(t&&!--t.depth){let h=c8(this.ranges,t.ranges);h.length&&this.inner.splice(t.index,0,new h8(t.parser,t.parser.startParse(this.input,d8(t.mounts,h),h),t.ranges.map(u=>new ls(u.from-t.start,u.to-t.start)),t.target,h)),t=t.prev}i&&!--i.depth&&(i=i.prev)}}}}function TG(r,e,t){for(let i of r){if(i.from>=t)break;if(i.to>e)return i.from<=e&&i.to>=t?2:1}return 0}function u8(r,e,t,i,n,s){if(e<t){let o=r.buffer[e+1],l=r.buffer[t-2];i.push(r.slice(e,t,o,l)),n.push(o-s)}}function PG(r){let{node:e}=r,t=0;do r.parent(),t++;while(!r.tree);let i=0,n=r.tree,s=0;for(;s=n.positions[i]+r.from,!(s<=e.from&&s+n.children[i].length>=e.to);i++);let o=n.children[i],l=o.buffer;function a(h,u,f,c,d){let g=h;for(;l[g+2]+s<=e.from;)g=l[g+3];let w=[],S=[];u8(o,h,g,w,S,c);let x=l[g+1],Q=l[g+2],M=x+s==e.from&&Q+s==e.to&&l[g]==e.type.id;return w.push(M?e.toTree():a(g+4,l[g+3],o.set.types[l[g]],x,Q-x)),S.push(x-c),u8(o,l[g+3],u,w,S,c),new rn(f,w,S,d)}n.children[i]=a(0,l.length,vr.none,0,o.length);for(let h=0;h<=t;h++)r.childAfter(e.from)}class f8{constructor(e,t){this.offset=t,this.done=!1,this.cursor=e.cursor(Wi.IncludeAnonymous|Wi.IgnoreMounts)}moveTo(e){let{cursor:t}=this,i=e-this.offset;for(;!this.done&&t.from<i;)t.to>=e&&t.enter(i,1,Wi.IgnoreOverlays|Wi.ExcludeBuffers)||t.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let t=this.cursor.tree;;){if(t==e.tree)return!0;if(t.children.length&&t.positions[0]==0&&t.children[0]instanceof rn)t=t.children[0];else break}return!1}}class _G{constructor(e){var t;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let i=this.curFrag=e[0];this.curTo=(t=i.tree.prop(b2))!==null&&t!==void 0?t:i.to,this.inner=new f8(i.tree,-i.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let t=this.curFrag=this.fragments[this.fragI];this.curTo=(e=t.tree.prop(b2))!==null&&e!==void 0?e:t.to,this.inner=new f8(t.tree,-t.offset)}}findMounts(e,t){var i;let n=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let s=this.inner.cursor.node;s;s=s.parent){let o=(i=s.tree)===null||i===void 0?void 0:i.prop(Qt.mounted);if(o&&o.parser==t)for(let l=this.fragI;l<this.fragments.length;l++){let a=this.fragments[l];if(a.from>=s.to)break;a.tree==this.curFrag.tree&&n.push({frag:a,pos:s.from-a.offset,mount:o})}}}return n}}function c8(r,e){let t=null,i=e;for(let n=1,s=0;n<r.length;n++){let o=r[n-1].to,l=r[n].from;for(;s<i.length;s++){let a=i[s];if(a.from>=l)break;a.to<=o||(t||(i=t=e.slice()),a.from<o?(t[s]=new ls(a.from,o),a.to>l&&t.splice(s+1,0,new ls(l,a.to))):a.to>l?t[s--]=new ls(l,a.to):t.splice(s--,1))}}return i}function $G(r,e,t,i){let n=0,s=0,o=!1,l=!1,a=-1e9,h=[];for(;;){let u=n==r.length?1e9:o?r[n].to:r[n].from,f=s==e.length?1e9:l?e[s].to:e[s].from;if(o!=l){let c=Math.max(a,t),d=Math.min(u,f,i);c<d&&h.push(new ls(c,d))}if(a=Math.min(u,f),a==1e9)break;u==a&&(o?(o=!1,n++):o=!0),f==a&&(l?(l=!1,s++):l=!0)}return h}function d8(r,e){let t=[];for(let{pos:i,mount:n,frag:s}of r){let o=i+(n.overlay?n.overlay[0].from:0),l=o+n.tree.length,a=Math.max(s.from,o),h=Math.min(s.to,l);if(n.overlay){let u=n.overlay.map(c=>new ls(c.from+i,c.to+i)),f=$G(e,u,a,h);for(let c=0,d=a;;c++){let g=c==f.length,w=g?h:f[c].from;if(w>d&&t.push(new Hd(d,w,n.tree,-o,s.from>=d,s.to<=w)),g)break;d=f[c].to}}else t.push(new Hd(a,h,n.tree,-o,s.from>=o,s.to<=l))}return t}let MG=0;class _s{constructor(e,t,i){this.set=e,this.base=t,this.modified=i,this.id=MG++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let t=new _s([],null,[]);if(t.set.push(t),e)for(let i of e.set)t.set.push(i);return t}static defineModifier(){let e=new C1;return t=>t.modified.indexOf(e)>-1?t:C1.get(t.base||t,t.modified.concat(e).sort((i,n)=>i.id-n.id))}}let RG=0;class C1{constructor(){this.instances=[],this.id=RG++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(l=>l.base==e&&QG(t,l.modified));if(i)return i;let n=[],s=new _s(n,e,t);for(let l of t)l.instances.push(s);let o=sN(t);for(let l of e.set)for(let a of o)n.push(C1.get(l,a));return s}}function QG(r,e){return r.length==e.length&&r.every((t,i)=>t==e[i])}function sN(r){let e=[r];for(let t=0;t<r.length;t++)for(let i of sN(r.slice(0,t).concat(r.slice(t+1))))e.push(i);return e}function oN(r){let e=Object.create(null);for(let t in r){let i=r[t];Array.isArray(i)||(i=[i]);for(let n of t.split(" "))if(n){let s=[],o=2,l=n;for(let f=0;;){if(l=="..."&&f>0&&f+3==n.length){o=1;break}let c=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!c)throw new RangeError("Invalid path: "+n);if(s.push(c[0]=="*"?"":c[0][0]=='"'?JSON.parse(c[0]):c[0]),f+=c[0].length,f==n.length)break;let d=n[f++];if(f==n.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+n);l=n.slice(f)}let a=s.length-1,h=s[a];if(!h)throw new RangeError("Invalid path: "+n);let u=new EG(i,o,a>0?s.slice(0,a):null);e[h]=u.sort(e[h])}}return DG.add(e)}const DG=new Qt;class EG{constructor(e,t,i,n){this.tags=e,this.mode=t,this.context=i,this.next=n}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function BG(r,e){let t=Object.create(null);for(let s of r)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let o of s.tag)t[o.id]=s.class;let{scope:i,all:n=null}=e||{};return{style:s=>{let o=n;for(let l of s)for(let a of l.set){let h=t[a.id];if(h){o=o?o+" "+h:h;break}}return o},scope:i}}const ge=_s.define,Ng=ge(),Vl=ge(),p8=ge(Vl),g8=ge(Vl),jl=ge(),Ig=ge(jl),Mk=ge(jl),go=ge(),th=ge(go),Us=ge(),Ys=ge(),O2=ge(),dc=ge(O2),Lg=ge(),xe={comment:Ng,lineComment:ge(Ng),blockComment:ge(Ng),docComment:ge(Ng),name:Vl,variableName:ge(Vl),typeName:p8,tagName:ge(p8),propertyName:g8,attributeName:ge(g8),className:ge(Vl),labelName:ge(Vl),namespace:ge(Vl),macroName:ge(Vl),literal:jl,string:Ig,docString:ge(Ig),character:ge(Ig),attributeValue:ge(Ig),number:Mk,integer:ge(Mk),float:ge(Mk),bool:ge(jl),regexp:ge(jl),escape:ge(jl),color:ge(jl),url:ge(jl),keyword:Us,self:ge(Us),null:ge(Us),atom:ge(Us),unit:ge(Us),modifier:ge(Us),operatorKeyword:ge(Us),controlKeyword:ge(Us),definitionKeyword:ge(Us),moduleKeyword:ge(Us),operator:Ys,derefOperator:ge(Ys),arithmeticOperator:ge(Ys),logicOperator:ge(Ys),bitwiseOperator:ge(Ys),compareOperator:ge(Ys),updateOperator:ge(Ys),definitionOperator:ge(Ys),typeOperator:ge(Ys),controlOperator:ge(Ys),punctuation:O2,separator:ge(O2),bracket:dc,angleBracket:ge(dc),squareBracket:ge(dc),paren:ge(dc),brace:ge(dc),content:go,heading:th,heading1:ge(th),heading2:ge(th),heading3:ge(th),heading4:ge(th),heading5:ge(th),heading6:ge(th),contentSeparator:ge(go),list:ge(go),quote:ge(go),emphasis:ge(go),strong:ge(go),link:ge(go),monospace:ge(go),strikethrough:ge(go),inserted:ge(),deleted:ge(),changed:ge(),invalid:ge(),meta:Lg,documentMeta:ge(Lg),annotation:ge(Lg),processingInstruction:ge(Lg),definition:_s.defineModifier(),constant:_s.defineModifier(),function:_s.defineModifier(),standard:_s.defineModifier(),local:_s.defineModifier(),special:_s.defineModifier()};BG([{tag:xe.link,class:"tok-link"},{tag:xe.heading,class:"tok-heading"},{tag:xe.emphasis,class:"tok-emphasis"},{tag:xe.strong,class:"tok-strong"},{tag:xe.keyword,class:"tok-keyword"},{tag:xe.atom,class:"tok-atom"},{tag:xe.bool,class:"tok-bool"},{tag:xe.url,class:"tok-url"},{tag:xe.labelName,class:"tok-labelName"},{tag:xe.inserted,class:"tok-inserted"},{tag:xe.deleted,class:"tok-deleted"},{tag:xe.literal,class:"tok-literal"},{tag:xe.string,class:"tok-string"},{tag:xe.number,class:"tok-number"},{tag:[xe.regexp,xe.escape,xe.special(xe.string)],class:"tok-string2"},{tag:xe.variableName,class:"tok-variableName"},{tag:xe.local(xe.variableName),class:"tok-variableName tok-local"},{tag:xe.definition(xe.variableName),class:"tok-variableName tok-definition"},{tag:xe.special(xe.variableName),class:"tok-variableName2"},{tag:xe.definition(xe.propertyName),class:"tok-propertyName tok-definition"},{tag:xe.typeName,class:"tok-typeName"},{tag:xe.namespace,class:"tok-namespace"},{tag:xe.className,class:"tok-className"},{tag:xe.macroName,class:"tok-macroName"},{tag:xe.propertyName,class:"tok-propertyName"},{tag:xe.operator,class:"tok-operator"},{tag:xe.comment,class:"tok-comment"},{tag:xe.meta,class:"tok-meta"},{tag:xe.invalid,class:"tok-invalid"},{tag:xe.punctuation,class:"tok-punctuation"}]);class A1{constructor(e,t,i,n,s,o,l){this.type=e,this.value=t,this.from=i,this.hash=n,this.end=s,this.children=o,this.positions=l,this.hashProp=[[Qt.contextHash,n]]}static create(e,t,i,n,s){let o=n+(n<<8)+e+(t<<4)|0;return new A1(e,t,i,o,s,[],[])}addChild(e,t){e.prop(Qt.contextHash)!=this.hash&&(e=new rn(e.type,e.children,e.positions,e.length,this.hashProp)),this.children.push(e),this.positions.push(t)}toTree(e,t=this.end){let i=this.children.length-1;return i>=0&&(t=Math.max(t,this.positions[i]+this.children[i].length+this.from)),new rn(e.types[this.type],this.children,this.positions,t-this.from).balance({makeTree:(s,o,l)=>new rn(vr.none,s,o,l,this.hashProp)})}}var he;(function(r){r[r.Document=1]="Document",r[r.CodeBlock=2]="CodeBlock",r[r.FencedCode=3]="FencedCode",r[r.Blockquote=4]="Blockquote",r[r.HorizontalRule=5]="HorizontalRule",r[r.BulletList=6]="BulletList",r[r.OrderedList=7]="OrderedList",r[r.ListItem=8]="ListItem",r[r.ATXHeading1=9]="ATXHeading1",r[r.ATXHeading2=10]="ATXHeading2",r[r.ATXHeading3=11]="ATXHeading3",r[r.ATXHeading4=12]="ATXHeading4",r[r.ATXHeading5=13]="ATXHeading5",r[r.ATXHeading6=14]="ATXHeading6",r[r.SetextHeading1=15]="SetextHeading1",r[r.SetextHeading2=16]="SetextHeading2",r[r.HTMLBlock=17]="HTMLBlock",r[r.LinkReference=18]="LinkReference",r[r.Paragraph=19]="Paragraph",r[r.CommentBlock=20]="CommentBlock",r[r.ProcessingInstructionBlock=21]="ProcessingInstructionBlock",r[r.Escape=22]="Escape",r[r.Entity=23]="Entity",r[r.HardBreak=24]="HardBreak",r[r.Emphasis=25]="Emphasis",r[r.StrongEmphasis=26]="StrongEmphasis",r[r.Link=27]="Link",r[r.Image=28]="Image",r[r.InlineCode=29]="InlineCode",r[r.HTMLTag=30]="HTMLTag",r[r.Comment=31]="Comment",r[r.ProcessingInstruction=32]="ProcessingInstruction",r[r.URL=33]="URL",r[r.HeaderMark=34]="HeaderMark",r[r.QuoteMark=35]="QuoteMark",r[r.ListMark=36]="ListMark",r[r.LinkMark=37]="LinkMark",r[r.EmphasisMark=38]="EmphasisMark",r[r.CodeMark=39]="CodeMark",r[r.CodeText=40]="CodeText",r[r.CodeInfo=41]="CodeInfo",r[r.LinkTitle=42]="LinkTitle",r[r.LinkLabel=43]="LinkLabel"})(he||(he={}));class NG{constructor(e,t){this.start=e,this.content=t,this.marks=[],this.parsers=[]}}class IG{constructor(){this.text="",this.baseIndent=0,this.basePos=0,this.depth=0,this.markers=[],this.pos=0,this.indent=0,this.next=-1}forward(){this.basePos>this.pos&&this.forwardInner()}forwardInner(){let e=this.skipSpace(this.basePos);this.indent=this.countIndent(e,this.pos,this.indent),this.pos=e,this.next=e==this.text.length?-1:this.text.charCodeAt(e)}skipSpace(e){return hd(this.text,e)}reset(e){for(this.text=e,this.baseIndent=this.basePos=this.pos=this.indent=0,this.forwardInner(),this.depth=1;this.markers.length;)this.markers.pop()}moveBase(e){this.basePos=e,this.baseIndent=this.countIndent(e,this.pos,this.indent)}moveBaseColumn(e){this.baseIndent=e,this.basePos=this.findColumn(e)}addMarker(e){this.markers.push(e)}countIndent(e,t=0,i=0){for(let n=t;n<e;n++)i+=this.text.charCodeAt(n)==9?4-i%4:1;return i}findColumn(e){let t=0;for(let i=0;t<this.text.length&&i<e;t++)i+=this.text.charCodeAt(t)==9?4-i%4:1;return t}scrub(){if(!this.baseIndent)return this.text;let e="";for(let t=0;t<this.basePos;t++)e+=" ";return e+this.text.slice(this.basePos)}}function m8(r,e,t){if(t.pos==t.text.length||r!=e.block&&t.indent>=e.stack[t.depth+1].value+t.baseIndent)return!0;if(t.indent>=t.baseIndent+4)return!1;let i=(r.type==he.OrderedList?ix:tx)(t,e,!1);return i>0&&(r.type!=he.BulletList||ex(t,e,!1)<0)&&t.text.charCodeAt(t.pos+i-1)==r.value}const lN={[he.Blockquote](r,e,t){return t.next!=62?!1:(t.markers.push(At(he.QuoteMark,e.lineStart+t.pos,e.lineStart+t.pos+1)),t.moveBase(t.pos+(Os(t.text.charCodeAt(t.pos+1))?2:1)),r.end=e.lineStart+t.text.length,!0)},[he.ListItem](r,e,t){return t.indent<t.baseIndent+r.value&&t.next>-1?!1:(t.moveBaseColumn(t.baseIndent+r.value),!0)},[he.OrderedList]:m8,[he.BulletList]:m8,[he.Document](){return!0}};function Os(r){return r==32||r==9||r==10||r==13}function hd(r,e=0){for(;e<r.length&&Os(r.charCodeAt(e));)e++;return e}function b8(r,e,t){for(;e>t&&Os(r.charCodeAt(e-1));)e--;return e}function aN(r){if(r.next!=96&&r.next!=126)return-1;let e=r.pos+1;for(;e<r.text.length&&r.text.charCodeAt(e)==r.next;)e++;if(e<r.pos+3)return-1;if(r.next==96){for(let t=e;t<r.text.length;t++)if(r.text.charCodeAt(t)==96)return-1}return e}function hN(r){return r.next!=62?-1:r.text.charCodeAt(r.pos+1)==32?2:1}function ex(r,e,t){if(r.next!=42&&r.next!=45&&r.next!=95)return-1;let i=1;for(let n=r.pos+1;n<r.text.length;n++){let s=r.text.charCodeAt(n);if(s==r.next)i++;else if(!Os(s))return-1}return t&&r.next==45&&cN(r)>-1&&r.depth==e.stack.length||i<3?-1:1}function uN(r,e){for(let t=r.stack.length-1;t>=0;t--)if(r.stack[t].type==e)return!0;return!1}function tx(r,e,t){return(r.next==45||r.next==43||r.next==42)&&(r.pos==r.text.length-1||Os(r.text.charCodeAt(r.pos+1)))&&(!t||uN(e,he.BulletList)||r.skipSpace(r.pos+2)<r.text.length)?1:-1}function ix(r,e,t){let i=r.pos,n=r.next;for(;n>=48&&n<=57;){i++;if(i==r.text.length)return-1;n=r.text.charCodeAt(i)}return i==r.pos||i>r.pos+9||n!=46&&n!=41||i<r.text.length-1&&!Os(r.text.charCodeAt(i+1))||t&&!uN(e,he.OrderedList)&&(r.skipSpace(i+1)==r.text.length||i>r.pos+1||r.next!=49)?-1:i+1-r.pos}function fN(r){if(r.next!=35)return-1;let e=r.pos+1;for(;e<r.text.length&&r.text.charCodeAt(e)==35;)e++;if(e<r.text.length&&r.text.charCodeAt(e)!=32)return-1;let t=e-r.pos;return t>6?-1:t}function cN(r){if(r.next!=45&&r.next!=61||r.indent>=r.baseIndent+4)return-1;let e=r.pos+1;for(;e<r.text.length&&r.text.charCodeAt(e)==r.next;)e++;let t=e;for(;e<r.text.length&&Os(r.text.charCodeAt(e));)e++;return e==r.text.length?t:-1}const k2=/^[ \t]*$/,dN=/-->/,pN=/\?>/,w2=[[/^<(?:script|pre|style)(?:\s|>|$)/i,/<\/(?:script|pre|style)>/i],[/^\s*<!--/,dN],[/^\s*<\?/,pN],[/^\s*<![A-Z]/,/>/],[/^\s*<!\[CDATA\[/,/\]\]>/],[/^\s*<\/?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|\/?>|$)/i,k2],[/^\s*(?:<\/[a-z][\w-]*\s*>|<[a-z][\w-]*(\s+[a-z:_][\w-.]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*>)\s*$/i,k2]];function gN(r,e,t){if(r.next!=60)return-1;let i=r.text.slice(r.pos);for(let n=0,s=w2.length-(t?1:0);n<s;n++)if(w2[n][0].test(i))return n;return-1}function O8(r,e){let t=r.countIndent(e,r.pos,r.indent),i=r.countIndent(r.skipSpace(e),e,t);return i>=t+5?t+1:i}function ih(r,e,t){let i=r.length-1;i>=0&&r[i].to==e&&r[i].type==he.CodeText?r[i].to=t:r.push(At(he.CodeText,e,t))}const zg={LinkReference:void 0,IndentedCode(r,e){let t=e.baseIndent+4;if(e.indent<t)return!1;let i=e.findColumn(t),n=r.lineStart+i,s=r.lineStart+e.text.length,o=[],l=[];for(ih(o,n,s);r.nextLine()&&e.depth>=r.stack.length;)if(e.pos==e.text.length){ih(l,r.lineStart-1,r.lineStart);for(let a of e.markers)l.push(a)}else{if(e.indent<t)break;{if(l.length){for(let h of l)h.type==he.CodeText?ih(o,h.from,h.to):o.push(h);l=[]}ih(o,r.lineStart-1,r.lineStart);for(let h of e.markers)o.push(h);s=r.lineStart+e.text.length;let a=r.lineStart+e.findColumn(e.baseIndent+4);a<s&&ih(o,a,s)}}return l.length&&(l=l.filter(a=>a.type!=he.CodeText),l.length&&(e.markers=l.concat(e.markers))),r.addNode(r.buffer.writeElements(o,-n).finish(he.CodeBlock,s-n),n),!0},FencedCode(r,e){let t=aN(e);if(t<0)return!1;let i=r.lineStart+e.pos,n=e.next,s=t-e.pos,o=e.skipSpace(t),l=b8(e.text,e.text.length,o),a=[At(he.CodeMark,i,i+s)];o<l&&a.push(At(he.CodeInfo,r.lineStart+o,r.lineStart+l));for(let h=!0;r.nextLine()&&e.depth>=r.stack.length;h=!1){let u=e.pos;if(e.indent-e.baseIndent<4)for(;u<e.text.length&&e.text.charCodeAt(u)==n;)u++;if(u-e.pos>=s&&e.skipSpace(u)==e.text.length){for(let f of e.markers)a.push(f);a.push(At(he.CodeMark,r.lineStart+e.pos,r.lineStart+u)),r.nextLine();break}else{h||ih(a,r.lineStart-1,r.lineStart);for(let d of e.markers)a.push(d);let f=r.lineStart+e.basePos,c=r.lineStart+e.text.length;f<c&&ih(a,f,c)}}return r.addNode(r.buffer.writeElements(a,-i).finish(he.FencedCode,r.prevLineEnd()-i),i),!0},Blockquote(r,e){let t=hN(e);return t<0?!1:(r.startContext(he.Blockquote,e.pos),r.addNode(he.QuoteMark,r.lineStart+e.pos,r.lineStart+e.pos+1),e.moveBase(e.pos+t),null)},HorizontalRule(r,e){if(ex(e,r,!1)<0)return!1;let t=r.lineStart+e.pos;return r.nextLine(),r.addNode(he.HorizontalRule,t),!0},BulletList(r,e){let t=tx(e,r,!1);if(t<0)return!1;r.block.type!=he.BulletList&&r.startContext(he.BulletList,e.basePos,e.next);let i=O8(e,e.pos+1);return r.startContext(he.ListItem,e.basePos,i-e.baseIndent),r.addNode(he.ListMark,r.lineStart+e.pos,r.lineStart+e.pos+t),e.moveBaseColumn(i),null},OrderedList(r,e){let t=ix(e,r,!1);if(t<0)return!1;r.block.type!=he.OrderedList&&r.startContext(he.OrderedList,e.basePos,e.text.charCodeAt(e.pos+t-1));let i=O8(e,e.pos+t);return r.startContext(he.ListItem,e.basePos,i-e.baseIndent),r.addNode(he.ListMark,r.lineStart+e.pos,r.lineStart+e.pos+t),e.moveBaseColumn(i),null},ATXHeading(r,e){let t=fN(e);if(t<0)return!1;let i=e.pos,n=r.lineStart+i,s=b8(e.text,e.text.length,i),o=s;for(;o>i&&e.text.charCodeAt(o-1)==e.next;)o--;(o==s||o==i||!Os(e.text.charCodeAt(o-1)))&&(o=e.text.length);let l=r.buffer.write(he.HeaderMark,0,t).writeElements(r.parser.parseInline(e.text.slice(i+t+1,o),n+t+1),-n);o<e.text.length&&l.write(he.HeaderMark,o-i,s-i);let a=l.finish(he.ATXHeading1-1+t,e.text.length-i);return r.nextLine(),r.addNode(a,n),!0},HTMLBlock(r,e){let t=gN(e,r,!1);if(t<0)return!1;let i=r.lineStart+e.pos,n=w2[t][1],s=[],o=n!=k2;for(;!n.test(e.text)&&r.nextLine();){if(e.depth<r.stack.length){o=!1;break}for(let h of e.markers)s.push(h)}o&&r.nextLine();let l=n==dN?he.CommentBlock:n==pN?he.ProcessingInstructionBlock:he.HTMLBlock,a=r.prevLineEnd();return r.addNode(r.buffer.writeElements(s,-i).finish(l,a-i),i),!0},SetextHeading:void 0};class LG{constructor(e){this.stage=0,this.elts=[],this.pos=0,this.start=e.start,this.advance(e.content)}nextLine(e,t,i){if(this.stage==-1)return!1;let n=i.content+`
`+t.scrub(),s=this.advance(n);return s>-1&&s<n.length?this.complete(e,i,s):!1}finish(e,t){return(this.stage==2||this.stage==3)&&hd(t.content,this.pos)==t.content.length?this.complete(e,t,t.content.length):!1}complete(e,t,i){return e.addLeafElement(t,At(he.LinkReference,this.start,this.start+i,this.elts)),!0}nextStage(e){return e?(this.pos=e.to-this.start,this.elts.push(e),this.stage++,!0):(e===!1&&(this.stage=-1),!1)}advance(e){for(;;){if(this.stage==-1)return-1;if(this.stage==0){if(!this.nextStage(xN(e,this.pos,this.start,!0)))return-1;if(e.charCodeAt(this.pos)!=58)return this.stage=-1;this.elts.push(At(he.LinkMark,this.pos+this.start,this.pos+this.start+1)),this.pos++}else if(this.stage==1){if(!this.nextStage(vN(e,hd(e,this.pos),this.start)))return-1}else if(this.stage==2){let t=hd(e,this.pos),i=0;if(t>this.pos){let n=SN(e,t,this.start);if(n){let s=Rk(e,n.to-this.start);s>0&&(this.nextStage(n),i=s)}}return i||(i=Rk(e,this.pos)),i>0&&i<e.length?i:-1}else return Rk(e,this.pos)}}}function Rk(r,e){for(;e<r.length;e++){let t=r.charCodeAt(e);if(t==10)break;if(!Os(t))return-1}return e}class zG{nextLine(e,t,i){let n=t.depth<e.stack.length?-1:cN(t),s=t.next;if(n<0)return!1;let o=At(he.HeaderMark,e.lineStart+t.pos,e.lineStart+n);return e.nextLine(),e.addLeafElement(i,At(s==61?he.SetextHeading1:he.SetextHeading2,i.start,e.prevLineEnd(),[...e.parser.parseInline(i.content,i.start),o])),!0}finish(){return!1}}const WG={LinkReference(r,e){return e.content.charCodeAt(0)==91?new LG(e):null},SetextHeading(){return new zG}},VG=[(r,e)=>fN(e)>=0,(r,e)=>aN(e)>=0,(r,e)=>hN(e)>=0,(r,e)=>tx(e,r,!0)>=0,(r,e)=>ix(e,r,!0)>=0,(r,e)=>ex(e,r,!0)>=0,(r,e)=>gN(e,r,!0)>=0],jG={text:"",end:0};class FG{constructor(e,t,i,n){this.parser=e,this.input=t,this.ranges=n,this.line=new IG,this.atEnd=!1,this.dontInject=new Set,this.stoppedAt=null,this.rangeI=0,this.to=n[n.length-1].to,this.lineStart=this.absoluteLineStart=this.absoluteLineEnd=n[0].from,this.block=A1.create(he.Document,0,this.lineStart,0,0),this.stack=[this.block],this.fragments=i.length?new ZG(i,t):null,this.readLine()}get parsedPos(){return this.absoluteLineStart}advance(){if(this.stoppedAt!=null&&this.absoluteLineStart>this.stoppedAt)return this.finish();let{line:e}=this;for(;;){for(;e.depth<this.stack.length;)this.finishContext();for(let i of e.markers)this.addNode(i.type,i.from,i.to);if(e.pos<e.text.length)break;if(!this.nextLine())return this.finish()}if(this.fragments&&this.reuseFragment(e.basePos))return null;e:for(;;){for(let i of this.parser.blockParsers)if(i){let n=i(this,e);if(n!=!1){if(n==!0)return null;e.forward();continue e}}break}let t=new NG(this.lineStart+e.pos,e.text.slice(e.pos));for(let i of this.parser.leafBlockParsers)if(i){let n=i(this,t);n&&t.parsers.push(n)}e:for(;this.nextLine()&&e.pos!=e.text.length;){if(e.indent<e.baseIndent+4){for(let i of this.parser.endLeafBlock)if(i(this,e,t))break e}for(let i of t.parsers)if(i.nextLine(this,e,t))return null;t.content+=`
`+e.scrub();for(let i of e.markers)t.marks.push(i)}return this.finishLeaf(t),null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}reuseFragment(e){if(!this.fragments.moveTo(this.absoluteLineStart+e,this.absoluteLineStart)||!this.fragments.matches(this.block.hash))return!1;let t=this.fragments.takeNodes(this);if(!t)return!1;let i=t,n=this.absoluteLineStart+t;for(let s=1;s<this.ranges.length;s++){let o=this.ranges[s-1].to,l=this.ranges[s].from;o>=this.lineStart&&l<n&&(i-=l-o)}return this.lineStart+=i,this.absoluteLineStart+=t,this.moveRangeI(),this.absoluteLineStart<this.to?(this.lineStart++,this.absoluteLineStart++,this.readLine()):(this.atEnd=!0,this.readLine()),!0}get depth(){return this.stack.length}parentType(e=this.depth-1){return this.parser.nodeSet.types[this.stack[e].type]}nextLine(){return this.lineStart+=this.line.text.length,this.absoluteLineEnd>=this.to?(this.absoluteLineStart=this.absoluteLineEnd,this.atEnd=!0,this.readLine(),!1):(this.lineStart++,this.absoluteLineStart=this.absoluteLineEnd+1,this.moveRangeI(),this.readLine(),!0)}moveRangeI(){for(;this.rangeI<this.ranges.length-1&&this.absoluteLineStart>=this.ranges[this.rangeI].to;)this.rangeI++,this.absoluteLineStart=Math.max(this.absoluteLineStart,this.ranges[this.rangeI].from)}scanLine(e){let t=jG;if(t.end=e,e>=this.to)t.text="";else if(t.text=this.lineChunkAt(e),t.end+=t.text.length,this.ranges.length>1){let i=this.absoluteLineStart,n=this.rangeI;for(;this.ranges[n].to<t.end;){n++;let s=this.ranges[n].from,o=this.lineChunkAt(s);t.end=s+o.length,t.text=t.text.slice(0,this.ranges[n-1].to-i)+o,i=t.end-t.text.length}}return t}readLine(){let{line:e}=this,{text:t,end:i}=this.scanLine(this.absoluteLineStart);for(this.absoluteLineEnd=i,e.reset(t);e.depth<this.stack.length;e.depth++){let n=this.stack[e.depth],s=this.parser.skipContextMarkup[n.type];if(!s)throw new Error("Unhandled block context "+he[n.type]);if(!s(n,this,e))break;e.forward()}}lineChunkAt(e){let t=this.input.chunk(e),i;if(this.input.lineChunks)i=t==`
`?"":t;else{let n=t.indexOf(`
`);i=n<0?t:t.slice(0,n)}return e+i.length>this.to?i.slice(0,this.to-e):i}prevLineEnd(){return this.atEnd?this.lineStart:this.lineStart-1}startContext(e,t,i=0){this.block=A1.create(e,i,this.lineStart+t,this.block.hash,this.lineStart+this.line.text.length),this.stack.push(this.block)}startComposite(e,t,i=0){this.startContext(this.parser.getNodeType(e),t,i)}addNode(e,t,i){typeof e=="number"&&(e=new rn(this.parser.nodeSet.types[e],_f,_f,(i!=null?i:this.prevLineEnd())-t)),this.block.addChild(e,t-this.block.from)}addElement(e){this.block.addChild(e.toTree(this.parser.nodeSet),e.from-this.block.from)}addLeafElement(e,t){this.addNode(this.buffer.writeElements(S2(t.children,e.marks),-t.from).finish(t.type,t.to-t.from),t.from)}finishContext(){let e=this.stack.pop(),t=this.stack[this.stack.length-1];t.addChild(e.toTree(this.parser.nodeSet),e.from-t.from),this.block=t}finish(){for(;this.stack.length>1;)this.finishContext();return this.addGaps(this.block.toTree(this.parser.nodeSet,this.lineStart))}addGaps(e){return this.ranges.length>1?mN(this.ranges,0,e.topNode,this.ranges[0].from,this.dontInject):e}finishLeaf(e){for(let i of e.parsers)if(i.finish(this,e))return;let t=S2(this.parser.parseInline(e.content,e.start),e.marks);this.addNode(this.buffer.writeElements(t,-e.start).finish(he.Paragraph,e.content.length),e.start)}elt(e,t,i,n){return typeof e=="string"?At(this.parser.getNodeType(e),t,i,n):new kN(e,t)}get buffer(){return new ON(this.parser.nodeSet)}}function mN(r,e,t,i,n){if(n.has(t.tree))return t.tree;let s=r[e].to,o=[],l=[],a=t.from+i;function h(u,f){for(;f?u>=s:u>s;){let c=r[e+1].from-s;i+=c,u+=c,e++,s=r[e].to}}for(let u=t.firstChild;u;u=u.nextSibling){h(u.from+i,!0);let f=u.from+i,c;u.to+i>s?(c=mN(r,e,u,i,n),h(u.to+i,!1)):c=u.toTree(),o.push(c),l.push(f-a)}return h(t.to+i,!1),new rn(t.type,o,l,t.to+i-a,t.tree?t.tree.propValues:void 0)}class sO extends vG{constructor(e,t,i,n,s,o,l,a,h){super(),this.nodeSet=e,this.blockParsers=t,this.leafBlockParsers=i,this.blockNames=n,this.endLeafBlock=s,this.skipContextMarkup=o,this.inlineParsers=l,this.inlineNames=a,this.wrappers=h,this.nodeTypes=Object.create(null);for(let u of e.types)this.nodeTypes[u.name]=u.id}createParse(e,t,i){let n=new FG(this,e,t,i);for(let s of this.wrappers)n=s(n,e,t,i);return n}configure(e){let t=y2(e);if(!t)return this;let{nodeSet:i,skipContextMarkup:n}=this,s=this.blockParsers.slice(),o=this.leafBlockParsers.slice(),l=this.blockNames.slice(),a=this.inlineParsers.slice(),h=this.inlineNames.slice(),u=this.endLeafBlock.slice(),f=this.wrappers;if(pc(t.defineNodes)){n=Object.assign({},n);let c=i.types.slice(),d;for(let g of t.defineNodes){let{name:w,block:S,composite:x,style:Q}=typeof g=="string"?{name:g}:g;if(c.some(b=>b.name==w))continue;x&&(n[c.length]=(b,m,k)=>x(m,k,b.value));let M=c.length,p=x?["Block","BlockContext"]:S?M>=he.ATXHeading1&&M<=he.SetextHeading2?["Block","LeafBlock","Heading"]:["Block","LeafBlock"]:void 0;c.push(vr.define({id:M,name:w,props:p&&[[Qt.group,p]]})),Q&&(d||(d={}),Array.isArray(Q)||Q instanceof _s?d[w]=Q:Object.assign(d,Q))}i=new rO(c),d&&(i=i.extend(oN(d)))}if(pc(t.props)&&(i=i.extend(...t.props)),pc(t.remove))for(let c of t.remove){let d=this.blockNames.indexOf(c),g=this.inlineNames.indexOf(c);d>-1&&(s[d]=o[d]=void 0),g>-1&&(a[g]=void 0)}if(pc(t.parseBlock))for(let c of t.parseBlock){let d=l.indexOf(c.name);if(d>-1)s[d]=c.parse,o[d]=c.leaf;else{let g=c.before?Wg(l,c.before):c.after?Wg(l,c.after)+1:l.length-1;s.splice(g,0,c.parse),o.splice(g,0,c.leaf),l.splice(g,0,c.name)}c.endLeaf&&u.push(c.endLeaf)}if(pc(t.parseInline))for(let c of t.parseInline){let d=h.indexOf(c.name);if(d>-1)a[d]=c.parse;else{let g=c.before?Wg(h,c.before):c.after?Wg(h,c.after)+1:h.length-1;a.splice(g,0,c.parse),h.splice(g,0,c.name)}}return t.wrap&&(f=f.concat(t.wrap)),new sO(i,s,o,l,u,n,a,h,f)}getNodeType(e){let t=this.nodeTypes[e];if(t==null)throw new RangeError(`Unknown node type '${e}'`);return t}parseInline(e,t){let i=new qG(this,e,t);e:for(let n=t;n<i.end;){let s=i.char(n);for(let o of this.inlineParsers)if(o){let l=o(i,s,n);if(l>=0){n=l;continue e}}n++}return i.resolveMarkers(0)}}function pc(r){return r!=null&&r.length>0}function y2(r){if(!Array.isArray(r))return r;if(r.length==0)return null;let e=y2(r[0]);if(r.length==1)return e;let t=y2(r.slice(1));if(!t||!e)return e||t;let i=(o,l)=>(o||_f).concat(l||_f),n=e.wrap,s=t.wrap;return{props:i(e.props,t.props),defineNodes:i(e.defineNodes,t.defineNodes),parseBlock:i(e.parseBlock,t.parseBlock),parseInline:i(e.parseInline,t.parseInline),remove:i(e.remove,t.remove),wrap:n?s?(o,l,a,h)=>n(s(o,l,a,h),l,a,h):n:s}}function Wg(r,e){let t=r.indexOf(e);if(t<0)throw new RangeError(`Position specified relative to unknown parser ${e}`);return t}let bN=[vr.none];for(let r=1,e;e=he[r];r++)bN[r]=vr.define({id:r,name:e,props:r>=he.Escape?[]:[[Qt.group,r in lN?["Block","BlockContext"]:["Block","LeafBlock"]]]});const _f=[];class ON{constructor(e){this.nodeSet=e,this.content=[],this.nodes=[]}write(e,t,i,n=0){return this.content.push(e,t,i,4+n*4),this}writeElements(e,t=0){for(let i of e)i.writeTo(this,t);return this}finish(e,t){return rn.build({buffer:this.content,nodeSet:this.nodeSet,reused:this.nodes,topID:e,length:t})}}class qd{constructor(e,t,i,n=_f){this.type=e,this.from=t,this.to=i,this.children=n}writeTo(e,t){let i=e.content.length;e.writeElements(this.children,t),e.content.push(this.type,this.from+t,this.to+t,e.content.length+4-i)}toTree(e){return new ON(e).writeElements(this.children,-this.from).finish(this.type,this.to-this.from)}}class kN{constructor(e,t){this.tree=e,this.from=t}get to(){return this.from+this.tree.length}get type(){return this.tree.type.id}get children(){return _f}writeTo(e,t){e.nodes.push(this.tree),e.content.push(e.nodes.length-1,this.from+t,this.to+t,-1)}toTree(){return this.tree}}function At(r,e,t,i){return new qd(r,e,t,i)}const wN={resolve:"Emphasis",mark:"EmphasisMark"},yN={resolve:"Emphasis",mark:"EmphasisMark"},gc={},k8={};class $s{constructor(e,t,i,n){this.type=e,this.from=t,this.to=i,this.side=n}}const w8="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~";let v2=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\u2010-\u2027]/;try{v2=new RegExp("[\\p{Pc}|\\p{Pd}|\\p{Pe}|\\p{Pf}|\\p{Pi}|\\p{Po}|\\p{Ps}]","u")}catch{}const Qk={Escape(r,e,t){if(e!=92||t==r.end-1)return-1;let i=r.char(t+1);for(let n=0;n<w8.length;n++)if(w8.charCodeAt(n)==i)return r.append(At(he.Escape,t,t+2));return-1},Entity(r,e,t){if(e!=38)return-1;let i=/^(?:#\d+|#x[a-f\d]+|\w+);/i.exec(r.slice(t+1,t+31));return i?r.append(At(he.Entity,t,t+1+i[0].length)):-1},InlineCode(r,e,t){if(e!=96||t&&r.char(t-1)==96)return-1;let i=t+1;for(;i<r.end&&r.char(i)==96;)i++;let n=i-t,s=0;for(;i<r.end;i++)if(r.char(i)==96){if(s++,s==n&&r.char(i+1)!=96)return r.append(At(he.InlineCode,t,i+1,[At(he.CodeMark,t,t+n),At(he.CodeMark,i+1-n,i+1)]))}else s=0;return-1},HTMLTag(r,e,t){if(e!=60||t==r.end-1)return-1;let i=r.slice(t+1,r.end),n=/^(?:[a-z][-\w+.]+:[^\s>]+|[a-z\d.!#$%&'*+/=?^_`{|}~-]+@[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?(?:\.[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?)*)>/i.exec(i);if(n)return r.append(At(he.URL,t,t+1+n[0].length));let s=/^!--[^>](?:-[^-]|[^-])*?-->/i.exec(i);if(s)return r.append(At(he.Comment,t,t+1+s[0].length));let o=/^\?[^]*?\?>/.exec(i);if(o)return r.append(At(he.ProcessingInstruction,t,t+1+o[0].length));let l=/^(?:![A-Z][^]*?>|!\[CDATA\[[^]*?\]\]>|\/\s*[a-zA-Z][\w-]*\s*>|\s*[a-zA-Z][\w-]*(\s+[a-zA-Z:_][\w-.:]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*(\/\s*)?>)/.exec(i);return l?r.append(At(he.HTMLTag,t,t+1+l[0].length)):-1},Emphasis(r,e,t){if(e!=95&&e!=42)return-1;let i=t+1;for(;r.char(i)==e;)i++;let n=r.slice(t-1,t),s=r.slice(i,i+1),o=v2.test(n),l=v2.test(s),a=/\s|^$/.test(n),h=/\s|^$/.test(s),u=!h&&(!l||a||o),f=!a&&(!o||h||l),c=u&&(e==42||!f||o),d=f&&(e==42||!u||l);return r.append(new $s(e==95?wN:yN,t,i,(c?1:0)|(d?2:0)))},HardBreak(r,e,t){if(e==92&&r.char(t+1)==10)return r.append(At(he.HardBreak,t,t+2));if(e==32){let i=t+1;for(;r.char(i)==32;)i++;if(r.char(i)==10&&i>=t+2)return r.append(At(he.HardBreak,t,i+1))}return-1},Link(r,e,t){return e==91?r.append(new $s(gc,t,t+1,1)):-1},Image(r,e,t){return e==33&&r.char(t+1)==91?r.append(new $s(k8,t,t+2,1)):-1},LinkEnd(r,e,t){if(e!=93)return-1;for(let i=r.parts.length-1;i>=0;i--){let n=r.parts[i];if(n instanceof $s&&(n.type==gc||n.type==k8)){if(!n.side||r.skipSpace(n.to)==t&&!/[(\[]/.test(r.slice(t+1,t+2)))return r.parts[i]=null,-1;let s=r.takeContent(i),o=r.parts[i]=HG(r,s,n.type==gc?he.Link:he.Image,n.from,t+1);if(n.type==gc)for(let l=0;l<i;l++){let a=r.parts[l];a instanceof $s&&a.type==gc&&(a.side=0)}return o.to}}return-1}};function HG(r,e,t,i,n){let{text:s}=r,o=r.char(n),l=n;if(e.unshift(At(he.LinkMark,i,i+(t==he.Image?2:1))),e.push(At(he.LinkMark,n-1,n)),o==40){let a=r.skipSpace(n+1),h=vN(s,a-r.offset,r.offset),u;h&&(a=r.skipSpace(h.to),u=SN(s,a-r.offset,r.offset),u&&(a=r.skipSpace(u.to))),r.char(a)==41&&(e.push(At(he.LinkMark,n,n+1)),l=a+1,h&&e.push(h),u&&e.push(u),e.push(At(he.LinkMark,a,l)))}else if(o==91){let a=xN(s,n-r.offset,r.offset,!1);a&&(e.push(a),l=a.to)}return At(t,i,l,e)}function vN(r,e,t){if(r.charCodeAt(e)==60){for(let n=e+1;n<r.length;n++){let s=r.charCodeAt(n);if(s==62)return At(he.URL,e+t,n+1+t);if(s==60||s==10)return!1}return null}else{let n=0,s=e;for(let o=!1;s<r.length;s++){let l=r.charCodeAt(s);if(Os(l))break;if(o)o=!1;else if(l==40)n++;else if(l==41){if(!n)break;n--}else l==92&&(o=!0)}return s>e?At(he.URL,e+t,s+t):s==r.length?null:!1}}function SN(r,e,t){let i=r.charCodeAt(e);if(i!=39&&i!=34&&i!=40)return!1;let n=i==40?41:i;for(let s=e+1,o=!1;s<r.length;s++){let l=r.charCodeAt(s);if(o)o=!1;else{if(l==n)return At(he.LinkTitle,e+t,s+1+t);l==92&&(o=!0)}}return null}function xN(r,e,t,i){for(let n=!1,s=e+1,o=Math.min(r.length,s+999);s<o;s++){let l=r.charCodeAt(s);if(n)n=!1;else{if(l==93)return i?!1:At(he.LinkLabel,e+t,s+1+t);if(i&&!Os(l)&&(i=!1),l==91)return!1;l==92&&(n=!0)}}return null}class qG{constructor(e,t,i){this.parser=e,this.text=t,this.offset=i,this.parts=[]}char(e){return e>=this.end?-1:this.text.charCodeAt(e-this.offset)}get end(){return this.offset+this.text.length}slice(e,t){return this.text.slice(e-this.offset,t-this.offset)}append(e){return this.parts.push(e),e.to}addDelimiter(e,t,i,n,s){return this.append(new $s(e,t,i,(n?1:0)|(s?2:0)))}addElement(e){return this.append(e)}resolveMarkers(e){for(let i=e;i<this.parts.length;i++){let n=this.parts[i];if(!(n instanceof $s&&n.type.resolve&&n.side&2))continue;let s=n.type==wN||n.type==yN,o=n.to-n.from,l,a=i-1;for(;a>=e;a--){let w=this.parts[a];if(!(!(w instanceof $s&&w.side&1&&w.type==n.type)||s&&(n.side&1||w.side&2)&&(w.to-w.from+o)%3==0&&((w.to-w.from)%3||o%3))){l=w;break}}if(!l)continue;let h=n.type.resolve,u=[],f=l.from,c=n.to;if(s){let w=Math.min(2,l.to-l.from,o);f=l.to-w,c=n.from+w,h=w==1?"Emphasis":"StrongEmphasis"}l.type.mark&&u.push(this.elt(l.type.mark,f,l.to));for(let w=a+1;w<i;w++)this.parts[w]instanceof qd&&u.push(this.parts[w]),this.parts[w]=null;n.type.mark&&u.push(this.elt(n.type.mark,n.from,c));let d=this.elt(h,f,c,u);this.parts[a]=s&&l.from!=f?new $s(l.type,l.from,f,l.side):null,(this.parts[i]=s&&n.to!=c?new $s(n.type,c,n.to,n.side):null)?this.parts.splice(i,0,d):this.parts[i]=d}let t=[];for(let i=e;i<this.parts.length;i++){let n=this.parts[i];n instanceof qd&&t.push(n)}return t}findOpeningDelimiter(e){for(let t=this.parts.length-1;t>=0;t--){let i=this.parts[t];if(i instanceof $s&&i.type==e)return t}return null}takeContent(e){let t=this.resolveMarkers(e);return this.parts.length=e,t}skipSpace(e){return hd(this.text,e-this.offset)+this.offset}elt(e,t,i,n){return typeof e=="string"?At(this.parser.getNodeType(e),t,i,n):new kN(e,t)}}function S2(r,e){if(!e.length)return r;if(!r.length)return e;let t=r.slice(),i=0;for(let n of e){for(;i<t.length&&t[i].to<n.to;)i++;if(i<t.length&&t[i].from<n.from){let s=t[i];s instanceof qd&&(t[i]=new qd(s.type,s.from,s.to,S2(s.children,[n])))}else t.splice(i++,0,n)}return t}const XG=[he.CodeBlock,he.ListItem,he.OrderedList,he.BulletList];class ZG{constructor(e,t){this.fragments=e,this.input=t,this.i=0,this.fragment=null,this.fragmentEnd=-1,this.cursor=null,e.length&&(this.fragment=e[this.i++])}nextFragment(){this.fragment=this.i<this.fragments.length?this.fragments[this.i++]:null,this.cursor=null,this.fragmentEnd=-1}moveTo(e,t){for(;this.fragment&&this.fragment.to<=e;)this.nextFragment();if(!this.fragment||this.fragment.from>(e?e-1:0))return!1;if(this.fragmentEnd<0){let s=this.fragment.to;for(;s>0&&this.input.read(s-1,s)!=`
`;)s--;this.fragmentEnd=s?s-1:0}let i=this.cursor;i||(i=this.cursor=this.fragment.tree.cursor(),i.firstChild());let n=e+this.fragment.offset;for(;i.to<=n;)if(!i.parent())return!1;for(;;){if(i.from>=n)return this.fragment.from<=t;if(!i.childAfter(n))return!1}}matches(e){let t=this.cursor.tree;return t&&t.prop(Qt.contextHash)==e}takeNodes(e){let t=this.cursor,i=this.fragment.offset,n=this.fragmentEnd-(this.fragment.openEnd?1:0),s=e.absoluteLineStart,o=s,l=e.block.children.length,a=o,h=l;for(;;){if(t.to-i>n){if(t.type.isAnonymous&&t.firstChild())continue;break}if(e.dontInject.add(t.tree),e.addNode(t.tree,t.from-i),t.type.is("Block")&&(XG.indexOf(t.type.id)<0?(o=t.to-i,l=e.block.children.length):(o=a,l=h,a=t.to-i,h=e.block.children.length)),!t.nextSibling())break}for(;e.block.children.length>l;)e.block.children.pop(),e.block.positions.pop();return o-s}}const GG=oN({"Blockquote/...":xe.quote,HorizontalRule:xe.contentSeparator,"ATXHeading1/... SetextHeading1/...":xe.heading1,"ATXHeading2/... SetextHeading2/...":xe.heading2,"ATXHeading3/...":xe.heading3,"ATXHeading4/...":xe.heading4,"ATXHeading5/...":xe.heading5,"ATXHeading6/...":xe.heading6,"Comment CommentBlock":xe.comment,Escape:xe.escape,Entity:xe.character,"Emphasis/...":xe.emphasis,"StrongEmphasis/...":xe.strong,"Link/... Image/...":xe.link,"OrderedList/... BulletList/...":xe.list,"BlockQuote/...":xe.quote,"InlineCode CodeText":xe.monospace,URL:xe.url,"HeaderMark HardBreak QuoteMark ListMark LinkMark EmphasisMark CodeMark":xe.processingInstruction,"CodeInfo LinkLabel":xe.labelName,LinkTitle:xe.string,Paragraph:xe.content}),UG=new sO(new rO(bN).extend(GG),Object.keys(zg).map(r=>zg[r]),Object.keys(zg).map(r=>WG[r]),Object.keys(zg),VG,lN,Object.keys(Qk).map(r=>Qk[r]),Object.keys(Qk),[]);function YG(r,e,t){let i=[];for(let n=r.firstChild,s=e;;n=n.nextSibling){let o=n?n.from:t;if(o>s&&i.push({from:s,to:o}),!n)break;s=n.to}return i}function KG(r){let{codeParser:e,htmlParser:t}=r;return{wrap:xG((n,s)=>{let o=n.type.id;if(e&&(o==he.CodeBlock||o==he.FencedCode)){let l="";if(o==he.FencedCode){let h=n.node.getChild(he.CodeInfo);h&&(l=s.read(h.from,h.to))}let a=e(l);if(a)return{parser:a,overlay:h=>h.type.id==he.CodeText}}else if(t&&(o==he.HTMLBlock||o==he.HTMLTag))return{parser:t,overlay:YG(n.node,n.from,n.to)};return null})}}const JG={resolve:"Strikethrough",mark:"StrikethroughMark"},eU={defineNodes:[{name:"Strikethrough",style:{"Strikethrough/...":xe.strikethrough}},{name:"StrikethroughMark",style:xe.processingInstruction}],parseInline:[{name:"Strikethrough",parse(r,e,t){return e!=126||r.char(t+1)!=126?-1:r.addDelimiter(JG,t,t+2,!0,!0)},after:"Emphasis"}]};function ud(r,e,t=0,i,n=0){let s=0,o=!0,l=-1,a=-1,h=!1,u=()=>{i.push(r.elt("TableCell",n+l,n+a,r.parser.parseInline(e.slice(l,a),n+l)))};for(let f=t;f<e.length;f++){let c=e.charCodeAt(f);c==124&&!h?((!o||l>-1)&&s++,o=!1,i&&(l>-1&&u(),i.push(r.elt("TableDelimiter",f+n,f+n+1))),l=a=-1):(h||c!=32&&c!=9)&&(l<0&&(l=f),a=f+1),h=!h&&c==92}return l>-1&&(s++,i&&u()),s}function y8(r,e){for(let t=e;t<r.length;t++){let i=r.charCodeAt(t);if(i==124)return!0;i==92&&t++}return!1}const CN=/^\|?(\s*:?-+:?\s*\|)+(\s*:?-+:?\s*)?$/;class v8{constructor(){this.rows=null}nextLine(e,t,i){if(this.rows==null){this.rows=!1;let n;if((t.next==45||t.next==58||t.next==124)&&CN.test(n=t.text.slice(t.pos))){let s=[];ud(e,i.content,0,s,i.start)==ud(e,n,t.pos)&&(this.rows=[e.elt("TableHeader",i.start,i.start+i.content.length,s),e.elt("TableDelimiter",e.lineStart+t.pos,e.lineStart+t.text.length)])}}else if(this.rows){let n=[];ud(e,t.text,t.pos,n,e.lineStart),this.rows.push(e.elt("TableRow",e.lineStart+t.pos,e.lineStart+t.text.length,n))}return!1}finish(e,t){return this.rows?(e.addLeafElement(t,e.elt("Table",t.start,t.start+t.content.length,this.rows)),!0):!1}}const tU={defineNodes:[{name:"Table",block:!0},{name:"TableHeader",style:{"TableHeader/...":xe.heading}},"TableRow",{name:"TableCell",style:xe.content},{name:"TableDelimiter",style:xe.processingInstruction}],parseBlock:[{name:"Table",leaf(r,e){return y8(e.content,0)?new v8:null},endLeaf(r,e,t){if(t.parsers.some(n=>n instanceof v8)||!y8(e.text,e.basePos))return!1;let i=r.scanLine(r.absoluteLineEnd+1).text;return CN.test(i)&&ud(r,e.text,e.basePos)==ud(r,i,e.basePos)},before:"SetextHeading"}]};class iU{nextLine(){return!1}finish(e,t){return e.addLeafElement(t,e.elt("Task",t.start,t.start+t.content.length,[e.elt("TaskMarker",t.start,t.start+3),...e.parser.parseInline(t.content.slice(3),t.start+3)])),!0}}const nU={defineNodes:[{name:"Task",block:!0,style:xe.list},{name:"TaskMarker",style:xe.atom}],parseBlock:[{name:"TaskList",leaf(r,e){return/^\[[ xX]\]/.test(e.content)&&r.parentType().name=="ListItem"?new iU:null},after:"SetextHeading"}]},rU=[tU,nU,eU];function AN(r,e,t){return(i,n,s)=>{if(n!=r||i.char(s+1)==r)return-1;let o=[i.elt(t,s,s+1)];for(let l=s+1;l<i.end;l++){let a=i.char(l);if(a==r)return i.addElement(i.elt(e,s,l+1,o.concat(i.elt(t,l,l+1))));if(a==92&&o.push(i.elt("Escape",l,l+++2)),Os(a))break}return-1}}const sU={defineNodes:[{name:"Superscript",style:xe.special(xe.content)},{name:"SuperscriptMark",style:xe.processingInstruction}],parseInline:[{name:"Superscript",parse:AN(94,"Superscript","SuperscriptMark")}]},oU={defineNodes:[{name:"Subscript",style:xe.special(xe.content)},{name:"SubscriptMark",style:xe.processingInstruction}],parseInline:[{name:"Subscript",parse:AN(126,"Subscript","SubscriptMark")}]},lU={defineNodes:[{name:"Emoji",style:xe.character}],parseInline:[{name:"Emoji",parse(r,e,t){let i;return e!=58||!(i=/^[a-zA-Z_0-9]+:/.exec(r.slice(t+1,r.end)))?-1:r.addElement(r.elt("Emoji",t,t+1+i[0].length))}}]},TN=1024;let aU=0;class as{constructor(e,t){this.from=e,this.to=t}}class Wt{constructor(e={}){this.id=aU++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=ds.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}Wt.closedBy=new Wt({deserialize:r=>r.split(" ")});Wt.openedBy=new Wt({deserialize:r=>r.split(" ")});Wt.group=new Wt({deserialize:r=>r.split(" ")});Wt.contextHash=new Wt({perNode:!0});Wt.lookAhead=new Wt({perNode:!0});Wt.mounted=new Wt({perNode:!0});class hU{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}}const uU=Object.create(null);class ds{constructor(e,t,i,n=0){this.name=e,this.props=t,this.id=i,this.flags=n}static define(e){let t=e.props&&e.props.length?Object.create(null):uU,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),n=new ds(e.name||"",t,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(n)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return n}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Wt.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let n of i.split(" "))t[n]=e[i];return i=>{for(let n=i.prop(Wt.group),s=-1;s<(n?n.length:0);s++){let o=t[s<0?i.name:n[s]];if(o)return o}}}}ds.none=new ds("",Object.create(null),0,8);class nx{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let n=null;for(let s of e){let o=s(i);o&&(n||(n=Object.assign({},i.props)),n[o[0].id]=o[1])}t.push(n?new ds(i.name,n,i.id,i.flags):i)}return new nx(t)}}const Vg=new WeakMap,S8=new WeakMap;var $i;(function(r){r[r.ExcludeBuffers=1]="ExcludeBuffers",r[r.IncludeAnonymous=2]="IncludeAnonymous",r[r.IgnoreMounts=4]="IgnoreMounts",r[r.IgnoreOverlays=8]="IgnoreOverlays"})($i||($i={}));class En{constructor(e,t,i,n,s){if(this.type=e,this.children=t,this.positions=i,this.length=n,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,l]of s)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=this.prop(Wt.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let n=i.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Xd(this.topNode,e)}cursorAt(e,t=0,i=0){let n=Vg.get(this)||this.topNode,s=new Xd(n);return s.moveTo(e,t),Vg.set(this,s._tree),s}get topNode(){return new qo(this,0,0,null)}resolve(e,t=0){let i=$f(Vg.get(this)||this.topNode,e,t,!1);return Vg.set(this,i),i}resolveInner(e,t=0){let i=$f(S8.get(this)||this.topNode,e,t,!0);return S8.set(this,i),i}iterate(e){let{enter:t,leave:i,from:n=0,to:s=this.length}=e;for(let o=this.cursor((e.mode||0)|$i.IncludeAnonymous);;){let l=!1;if(o.from<=s&&o.to>=n&&(o.type.isAnonymous||t(o)!==!1)){if(o.firstChild())continue;l=!0}for(;l&&i&&!o.type.isAnonymous&&i(o),!o.nextSibling();){if(!o.parent())return;l=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:ox(ds.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,n)=>new En(this.type,t,i,n,this.propValues),e.makeTree||((t,i,n)=>new En(ds.none,t,i,n)))}static build(e){return cU(e)}}En.empty=new En(ds.none,[],[],0);class rx{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new rx(this.buffer,this.index)}}class Uh{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return ds.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],n=this.set.types[t],s=n.name;if(/\W/.test(s)&&!n.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,t,i,n,s){let{buffer:o}=this,l=-1;for(let a=e;a!=t&&!(PN(s,n,o[a+1],o[a+2])&&(l=a,i>0));a=o[a+3]);return l}slice(e,t,i,n){let s=this.buffer,o=new Uint16Array(t-e);for(let l=e,a=0;l<t;)o[a++]=s[l++],o[a++]=s[l++]-i,o[a++]=s[l++]-i,o[a++]=s[l++]-e;return new Uh(o,n-i,this.set)}}function PN(r,e,t,i){switch(r){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function _N(r,e){let t=r.childBefore(e);for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(r=t,t=i.prevSibling):t=i}return r}function $f(r,e,t,i){for(var n;r.from==r.to||(t<1?r.from>=e:r.from>e)||(t>-1?r.to<=e:r.to<e);){let o=!i&&r instanceof qo&&r.index<0?null:r.parent;if(!o)return r;r=o}let s=i?0:$i.IgnoreOverlays;if(i)for(let o=r,l=o.parent;l;o=l,l=o.parent)o instanceof qo&&o.index<0&&((n=l.enter(e,t,s))===null||n===void 0?void 0:n.from)!=o.from&&(r=l);for(;;){let o=r.enter(e,t,s);if(!o)return r;r=o}}class qo{constructor(e,t,i,n){this._tree=e,this.from=t,this.index=i,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,n,s=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,h=t>0?l.length:-1;e!=h;e+=t){let u=l[e],f=a[e]+o.from;if(!!PN(n,i,f,f+u.length)){if(u instanceof Uh){if(s&$i.ExcludeBuffers)continue;let c=u.findChild(0,u.buffer.length,t,i-f,n);if(c>-1)return new Ta(new fU(o,u,e,f),null,c)}else if(s&$i.IncludeAnonymous||!u.type.isAnonymous||sx(u)){let c;if(!(s&$i.IgnoreMounts)&&u.props&&(c=u.prop(Wt.mounted))&&!c.overlay)return new qo(c.tree,f,e,o);let d=new qo(u,f,e,o);return s&$i.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(t<0?u.children.length-1:0,t,i,n)}}}if(s&$i.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let n;if(!(i&$i.IgnoreOverlays)&&(n=this._tree.prop(Wt.mounted))&&n.overlay){let s=e-this.from;for(let{from:o,to:l}of n.overlay)if((t>0?o<=s:o<s)&&(t<0?l>=s:l>s))return new qo(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new Xd(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return $f(this,e,t,!1)}resolveInner(e,t=0){return $f(this,e,t,!0)}enterUnfinishedNodesBefore(e){return _N(this,e)}getChild(e,t=null,i=null){let n=T1(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return T1(this,e,t,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return P1(this,e)}}function T1(r,e,t,i){let n=r.cursor(),s=[];if(!n.firstChild())return s;if(t!=null){for(;!n.type.is(t);)if(!n.nextSibling())return s}for(;;){if(i!=null&&n.type.is(i))return s;if(n.type.is(e)&&s.push(n.node),!n.nextSibling())return i==null?s:[]}}function P1(r,e,t=e.length-1){for(let i=r.parent;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class fU{constructor(e,t,i,n){this.parent=e,this.buffer=t,this.index=i,this.start=n}}class Ta{constructor(e,t,i){this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,i){let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.context.start,i);return s<0?null:new Ta(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&$i.ExcludeBuffers)return null;let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new Ta(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Ta(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Ta(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new Xd(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,n=this.index+4,s=i.buffer[this.index+3];if(s>n){let o=i.buffer[this.index+1],l=i.buffer[this.index+2];e.push(i.slice(n,s,o,l)),t.push(0)}return new En(this.type,e,t,this.to-this.from)}resolve(e,t=0){return $f(this,e,t,!1)}resolveInner(e,t=0){return $f(this,e,t,!0)}enterUnfinishedNodesBefore(e){return _N(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,i=null){let n=T1(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return T1(this,e,t,i)}get node(){return this}matchContext(e){return P1(this,e)}}class Xd{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof qo)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=i+n.buffer[e+1],this.to=i+n.buffer[e+2],!0}yield(e){return e?e instanceof qo?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:n}=this.buffer,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&$i.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&$i.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&$i.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let n=i<0?0:this.stack[i]+4;if(this.index!=n)return this.yieldBuf(t.findChild(n,this.index,-1,0,4))}else{let n=t.buffer[this.index+3];if(n<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(n)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(n.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:i}=n)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let s=t+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let l=i._tree.children[s];if(this.mode&$i.IncludeAnonymous||l instanceof Uh||!l.type.isAnonymous||sx(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer){e:for(let n=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==n){if(n==this.index)return o;t=o,i=s+1;break e}n=this.stack[--s]}}for(let n=i;n<this.stack.length;n++)t=new Ta(this.buffer,t,this.stack[n]);return this.bufferNode=new Ta(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let n=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(n=!0)}for(;n&&t&&t(this),n=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,n=!0}}}matchContext(e){if(!this.buffer)return P1(this.node,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let n=e.length-1,s=this.stack.length-1;n>=0;s--){if(s<0)return P1(this.node,e,n);let o=i[t.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[n]&&e[n]!=o.name)return!1;n--}}return!0}}function sx(r){return r.children.some(e=>e instanceof Uh||!e.type.isAnonymous||sx(e))}function cU(r){var e;let{buffer:t,nodeSet:i,maxBufferLength:n=TN,reused:s=[],minRepeatType:o=i.types.length}=r,l=Array.isArray(t)?new rx(t,t.length):t,a=i.types,h=0,u=0;function f(p,b,m,k,C){let{id:v,start:y,end:T,size:E}=l,$=u;for(;E<0;)if(l.next(),E==-1){let L=s[v];m.push(L),k.push(y-p);return}else if(E==-3){h=v;return}else if(E==-4){u=v;return}else throw new RangeError(`Unrecognized record size: ${E}`);let R=a[v],N,_,W=y-p;if(T-y<=n&&(_=w(l.pos-b,C))){let L=new Uint16Array(_.size-_.skip),I=l.pos-_.size,j=L.length;for(;l.pos>I;)j=S(_.start,L,j);N=new Uh(L,T-_.start,i),W=_.start-p}else{let L=l.pos-E;l.next();let I=[],j=[],X=v>=o?v:-1,Z=0,ie=T;for(;l.pos>L;)X>=0&&l.id==X&&l.size>=0?(l.end<=ie-n&&(d(I,j,y,Z,l.end,ie,X,$),Z=I.length,ie=l.end),l.next()):f(y,L,I,j,X);if(X>=0&&Z>0&&Z<I.length&&d(I,j,y,Z,y,ie,X,$),I.reverse(),j.reverse(),X>-1&&Z>0){let G=c(R);N=ox(R,I,j,0,I.length,0,T-y,G,G)}else N=g(R,I,j,T-y,$-T)}m.push(N),k.push(W)}function c(p){return(b,m,k)=>{let C=0,v=b.length-1,y,T;if(v>=0&&(y=b[v])instanceof En){if(!v&&y.type==p&&y.length==k)return y;(T=y.prop(Wt.lookAhead))&&(C=m[v]+y.length+T)}return g(p,b,m,k,C)}}function d(p,b,m,k,C,v,y,T){let E=[],$=[];for(;p.length>k;)E.push(p.pop()),$.push(b.pop()+m-C);p.push(g(i.types[y],E,$,v-C,T-v)),b.push(C-m)}function g(p,b,m,k,C=0,v){if(h){let y=[Wt.contextHash,h];v=v?[y].concat(v):[y]}if(C>25){let y=[Wt.lookAhead,C];v=v?[y].concat(v):[y]}return new En(p,b,m,k,v)}function w(p,b){let m=l.fork(),k=0,C=0,v=0,y=m.end-n,T={size:0,start:0,skip:0};e:for(let E=m.pos-p;m.pos>E;){let $=m.size;if(m.id==b&&$>=0){T.size=k,T.start=C,T.skip=v,v+=4,k+=4,m.next();continue}let R=m.pos-$;if($<0||R<E||m.start<y)break;let N=m.id>=o?4:0,_=m.start;for(m.next();m.pos>R;){if(m.size<0)if(m.size==-3)N+=4;else break e;else m.id>=o&&(N+=4);m.next()}C=_,k+=$,v+=N}return(b<0||k==p)&&(T.size=k,T.start=C,T.skip=v),T.size>4?T:void 0}function S(p,b,m){let{id:k,start:C,end:v,size:y}=l;if(l.next(),y>=0&&k<o){let T=m;if(y>4){let E=l.pos-(y-4);for(;l.pos>E;)m=S(p,b,m)}b[--m]=T,b[--m]=v-p,b[--m]=C-p,b[--m]=k}else y==-3?h=k:y==-4&&(u=k);return m}let x=[],Q=[];for(;l.pos>0;)f(r.start||0,r.bufferStart||0,x,Q,-1);let M=(e=r.length)!==null&&e!==void 0?e:x.length?Q[0]+x[0].length:0;return new En(a[r.topID],x.reverse(),Q.reverse(),M)}const x8=new WeakMap;function Vm(r,e){if(!r.isAnonymous||e instanceof Uh||e.type!=r)return 1;let t=x8.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=r||!(i instanceof En)){t=1;break}t+=Vm(r,i)}x8.set(e,t)}return t}function ox(r,e,t,i,n,s,o,l,a){let h=0;for(let g=i;g<n;g++)h+=Vm(r,e[g]);let u=Math.ceil(h*1.5/8),f=[],c=[];function d(g,w,S,x,Q){for(let M=S;M<x;){let p=M,b=w[M],m=Vm(r,g[M]);for(M++;M<x;M++){let k=Vm(r,g[M]);if(m+k>=u)break;m+=k}if(M==p+1){if(m>u){let k=g[p];d(k.children,k.positions,0,k.children.length,w[p]+Q);continue}f.push(g[p])}else{let k=w[M-1]+g[M-1].length-b;f.push(ox(r,g,w,p,M,b,k,null,a))}c.push(b+Q-s)}}return d(e,t,i,n,0),(l||a)(f,c,o)}class Zd{constructor(e,t,i,n,s=!1,o=!1){this.from=e,this.to=t,this.tree=i,this.offset=n,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let n=[new Zd(0,e.length,e,0,!1,i)];for(let s of t)s.to>e.length&&n.push(s);return n}static applyChanges(e,t,i=128){if(!t.length)return e;let n=[],s=1,o=e.length?e[0]:null;for(let l=0,a=0,h=0;;l++){let u=l<t.length?t[l]:null,f=u?u.fromA:1e9;if(f-a>=i)for(;o&&o.from<f;){let c=o;if(a>=c.from||f<=c.to||h){let d=Math.max(c.from,a)-h,g=Math.min(c.to,f)-h;c=d>=g?null:new Zd(d,g,c.tree,c.offset+h,l>0,!!u)}if(c&&n.push(c),o.to>f)break;o=s<e.length?e[s++]:null}if(!u)break;a=u.toA,h=u.toA-u.toB}return n}}class dU{startParse(e,t,i){return typeof e=="string"&&(e=new pU(e)),i=i?i.length?i.map(n=>new as(n.from,n.to)):[new as(0,0)]:[new as(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let n=this.startParse(e,t,i);for(;;){let s=n.advance();if(s)return s}}}class pU{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}function gU(r){return(e,t,i,n)=>new bU(e,r,t,i,n)}class C8{constructor(e,t,i,n,s){this.parser=e,this.parse=t,this.overlay=i,this.target=n,this.ranges=s}}class mU{constructor(e,t,i,n,s,o,l){this.parser=e,this.predicate=t,this.mounts=i,this.index=n,this.start=s,this.target=o,this.prev=l,this.depth=0,this.ranges=[]}}const x2=new Wt({perNode:!0});class bU{constructor(e,t,i,n,s){this.nest=t,this.input=i,this.fragments=n,this.ranges=s,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let i=this.baseParse.advance();if(!i)return null;if(this.baseParse=null,this.baseTree=i,this.startInner(),this.stoppedAt!=null)for(let n of this.inner)n.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let i=this.baseTree;return this.stoppedAt!=null&&(i=new En(i.type,i.children,i.positions,i.length,i.propValues.concat([[x2,this.stoppedAt]]))),i}let e=this.inner[this.innerDone],t=e.parse.advance();if(t){this.innerDone++;let i=Object.assign(Object.create(null),e.target.props);i[Wt.mounted.id]=new hU(t,e.overlay,e.parser),e.target.props=i}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].ranges[0].from<e&&(e=Math.min(e,this.inner[t].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].parse.stopAt(e)}startInner(){let e=new wU(this.fragments),t=null,i=null,n=new Xd(new qo(this.baseTree,this.ranges[0].from,0,null),$i.IncludeAnonymous|$i.IgnoreMounts);e:for(let s,o;this.stoppedAt==null||n.from<this.stoppedAt;){let l=!0,a;if(e.hasNode(n)){if(t){let h=t.mounts.find(u=>u.frag.from<=n.from&&u.frag.to>=n.to&&u.mount.overlay);if(h)for(let u of h.mount.overlay){let f=u.from+h.pos,c=u.to+h.pos;f>=n.from&&c<=n.to&&!t.ranges.some(d=>d.from<c&&d.to>f)&&t.ranges.push({from:f,to:c})}}l=!1}else if(i&&(o=OU(i.ranges,n.from,n.to)))l=o!=2;else if(!n.type.isAnonymous&&n.from<n.to&&(s=this.nest(n,this.input))){n.tree||kU(n);let h=e.findMounts(n.from,s.parser);if(typeof s.overlay=="function")t=new mU(s.parser,s.overlay,h,this.inner.length,n.from,n.tree,t);else{let u=P8(this.ranges,s.overlay||[new as(n.from,n.to)]);u.length&&this.inner.push(new C8(s.parser,s.parser.startParse(this.input,_8(h,u),u),s.overlay?s.overlay.map(f=>new as(f.from-n.from,f.to-n.from)):null,n.tree,u)),s.overlay?u.length&&(i={ranges:u,depth:0,prev:i}):l=!1}}else t&&(a=t.predicate(n))&&(a===!0&&(a=new as(n.from,n.to)),a.from<a.to&&t.ranges.push(a));if(l&&n.firstChild())t&&t.depth++,i&&i.depth++;else for(;!n.nextSibling();){if(!n.parent())break e;if(t&&!--t.depth){let h=P8(this.ranges,t.ranges);h.length&&this.inner.splice(t.index,0,new C8(t.parser,t.parser.startParse(this.input,_8(t.mounts,h),h),t.ranges.map(u=>new as(u.from-t.start,u.to-t.start)),t.target,h)),t=t.prev}i&&!--i.depth&&(i=i.prev)}}}}function OU(r,e,t){for(let i of r){if(i.from>=t)break;if(i.to>e)return i.from<=e&&i.to>=t?2:1}return 0}function A8(r,e,t,i,n,s){if(e<t){let o=r.buffer[e+1],l=r.buffer[t-2];i.push(r.slice(e,t,o,l)),n.push(o-s)}}function kU(r){let{node:e}=r,t=0;do r.parent(),t++;while(!r.tree);let i=0,n=r.tree,s=0;for(;s=n.positions[i]+r.from,!(s<=e.from&&s+n.children[i].length>=e.to);i++);let o=n.children[i],l=o.buffer;function a(h,u,f,c,d){let g=h;for(;l[g+2]+s<=e.from;)g=l[g+3];let w=[],S=[];A8(o,h,g,w,S,c);let x=l[g+1],Q=l[g+2],M=x+s==e.from&&Q+s==e.to&&l[g]==e.type.id;return w.push(M?e.toTree():a(g+4,l[g+3],o.set.types[l[g]],x,Q-x)),S.push(x-c),A8(o,l[g+3],u,w,S,c),new En(f,w,S,d)}n.children[i]=a(0,l.length,ds.none,0,o.length);for(let h=0;h<=t;h++)r.childAfter(e.from)}class T8{constructor(e,t){this.offset=t,this.done=!1,this.cursor=e.cursor($i.IncludeAnonymous|$i.IgnoreMounts)}moveTo(e){let{cursor:t}=this,i=e-this.offset;for(;!this.done&&t.from<i;)t.to>=e&&t.enter(i,1,$i.IgnoreOverlays|$i.ExcludeBuffers)||t.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let t=this.cursor.tree;;){if(t==e.tree)return!0;if(t.children.length&&t.positions[0]==0&&t.children[0]instanceof En)t=t.children[0];else break}return!1}}class wU{constructor(e){var t;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let i=this.curFrag=e[0];this.curTo=(t=i.tree.prop(x2))!==null&&t!==void 0?t:i.to,this.inner=new T8(i.tree,-i.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let t=this.curFrag=this.fragments[this.fragI];this.curTo=(e=t.tree.prop(x2))!==null&&e!==void 0?e:t.to,this.inner=new T8(t.tree,-t.offset)}}findMounts(e,t){var i;let n=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let s=this.inner.cursor.node;s;s=s.parent){let o=(i=s.tree)===null||i===void 0?void 0:i.prop(Wt.mounted);if(o&&o.parser==t)for(let l=this.fragI;l<this.fragments.length;l++){let a=this.fragments[l];if(a.from>=s.to)break;a.tree==this.curFrag.tree&&n.push({frag:a,pos:s.from-a.offset,mount:o})}}}return n}}function P8(r,e){let t=null,i=e;for(let n=1,s=0;n<r.length;n++){let o=r[n-1].to,l=r[n].from;for(;s<i.length;s++){let a=i[s];if(a.from>=l)break;a.to<=o||(t||(i=t=e.slice()),a.from<o?(t[s]=new as(a.from,o),a.to>l&&t.splice(s+1,0,new as(l,a.to))):a.to>l?t[s--]=new as(l,a.to):t.splice(s--,1))}}return i}function yU(r,e,t,i){let n=0,s=0,o=!1,l=!1,a=-1e9,h=[];for(;;){let u=n==r.length?1e9:o?r[n].to:r[n].from,f=s==e.length?1e9:l?e[s].to:e[s].from;if(o!=l){let c=Math.max(a,t),d=Math.min(u,f,i);c<d&&h.push(new as(c,d))}if(a=Math.min(u,f),a==1e9)break;u==a&&(o?(o=!1,n++):o=!0),f==a&&(l?(l=!1,s++):l=!0)}return h}function _8(r,e){let t=[];for(let{pos:i,mount:n,frag:s}of r){let o=i+(n.overlay?n.overlay[0].from:0),l=o+n.tree.length,a=Math.max(s.from,o),h=Math.min(s.to,l);if(n.overlay){let u=n.overlay.map(c=>new as(c.from+i,c.to+i)),f=yU(e,u,a,h);for(let c=0,d=a;;c++){let g=c==f.length,w=g?h:f[c].from;if(w>d&&t.push(new Zd(d,w,n.tree,-o,s.from>=d,s.to<=w)),g)break;d=f[c].to}}else t.push(new Zd(a,h,n.tree,-o,s.from>=o,s.to<=l))}return t}class _1{constructor(e,t,i,n,s,o,l,a,h,u=0,f){this.p=e,this.stack=t,this.state=i,this.reducePos=n,this.pos=s,this.score=o,this.buffer=l,this.bufferBase=a,this.curContext=h,this.lookAhead=u,this.parent=f}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let n=e.parser.context;return new _1(e,[],t,i,i,0,[],0,n?new $8(n,n.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){let t=e>>19,i=e&65535,{parser:n}=this.p,s=n.dynamicPrecedence(i);if(s&&(this.score+=s),t==0){this.pushState(n.getGoto(this.state,i,!0),this.reducePos),i<n.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,4,!0),this.reduceContext(i,this.reducePos);return}let o=this.stack.length-(t-1)*3-(e&262144?6:0),l=this.stack[o-2],a=this.stack[o-1],h=this.bufferBase+this.buffer.length-a;if(i<n.minRepeatTerm||e&131072){let u=n.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,l,u,h+4,!0)}if(e&262144)this.state=this.stack[o];else{let u=this.stack[o-3];this.state=n.getGoto(u,i,!0)}for(;this.stack.length>o;)this.stack.pop();this.reduceContext(i,l)}storeNode(e,t,i,n=4,s=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,l=this.buffer.length;if(l==0&&o.parent&&(l=o.bufferBase-o.parent.bufferBase,o=o.parent),l>0&&o.buffer[l-4]==0&&o.buffer[l-1]>-1){if(t==i)return;if(o.buffer[l-2]>=t){o.buffer[l-2]=i;return}}}if(!s||this.pos==i)this.buffer.push(e,t,i,n);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0)for(;o>0&&this.buffer[o-2]>i;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,n>4&&(n-=4);this.buffer[o]=e,this.buffer[o+1]=t,this.buffer[o+2]=i,this.buffer[o+3]=n}}shift(e,t,i){let n=this.pos;if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let s=e,{parser:o}=this.p;(i>this.pos||t<=o.maxNode)&&(this.pos=i,o.stateFlag(s,1)||(this.reducePos=i)),this.pushState(s,n),this.shiftContext(t,n),t<=o.maxNode&&this.buffer.push(t,n,i,4)}else this.pos=i,this.shiftContext(t,n),t<=this.p.parser.maxNode&&this.buffer.push(t,n,i,4)}apply(e,t,i){e&65536?this.reduce(e):this.shift(e,t,i)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let n=this.pos;this.reducePos=this.pos=n+e.length,this.pushState(t,n),this.buffer.push(i,n,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),n=e.bufferBase+t;for(;e&&n==e.bufferBase;)e=e.parent;return new _1(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,n,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new vU(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if((i&65536)==0)return!0;if(i==0)return!1;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>4<<1||this.stack.length>=120){let n=[];for(let s=0,o;s<t.length;s+=2)(o=t[s+1])!=this.state&&this.p.parser.hasAction(o,e)&&n.push(t[s],o);if(this.stack.length<120)for(let s=0;n.length<4<<1&&s<t.length;s+=2){let o=t[s+1];n.some((l,a)=>a&1&&l==o)||n.push(t[s],o)}t=n}let i=[];for(let n=0;n<t.length&&i.length<4;n+=2){let s=t[n+1];if(s==this.state)continue;let o=this.split();o.pushState(s,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(t[n],this.pos),o.score-=200,i.push(o)}return i}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if((e&65536)==0)return!1;let{parser:t}=this.p;if(!t.validAction(this.state,e)){let i=e>>19,n=e&65535,s=this.stack.length-i*3;if(s<0||t.getGoto(this.stack[s],n,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new $8(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class $8{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}var M8;(function(r){r[r.Insert=200]="Insert",r[r.Delete=190]="Delete",r[r.Reduce=100]="Reduce",r[r.MaxNext=4]="MaxNext",r[r.MaxInsertStackDepth=300]="MaxInsertStackDepth",r[r.DampenInsertStackDepth=120]="DampenInsertStackDepth"})(M8||(M8={}));class vU{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let n=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=n}}class $1{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new $1(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new $1(this.stack,this.pos,this.index)}}class jm{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const R8=new jm;class SU{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=R8,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,n=this.rangeIndex,s=this.pos+e;for(;s<i.from;){if(!n)return null;let o=this.ranges[--n];s-=i.from-o.to,i=o}for(;t<0?s>i.to:s>=i.to;){if(n==this.ranges.length-1)return null;let o=this.ranges[++n];s+=o.from-i.to,i=o}return s}peek(e){let t=this.chunkOff+e,i,n;if(t>=0&&t<this.chunk.length)i=this.pos+e,n=this.chunk.charCodeAt(t);else{let s=this.resolveOffset(e,1);if(s==null)return-1;if(i=s,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let o=this.rangeIndex,l=this.range;for(;l.to<=i;)l=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-i)),n=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),n}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=R8,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let n of this.ranges){if(n.from>=t)break;n.to>e&&(i+=this.input.read(Math.max(n.from,e),Math.min(n.to,t)))}return i}}class Fm{constructor(e,t){this.data=e,this.id=t}token(e,t){xU(this.data,e,t,this.id)}}Fm.prototype.contextual=Fm.prototype.fallback=Fm.prototype.extend=!1;class lx{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function xU(r,e,t,i){let n=0,s=1<<i,{parser:o}=t.p,{dialect:l}=o;e:for(;(s&r[n])!=0;){let a=r[n+1];for(let c=n+3;c<a;c+=2)if((r[c+1]&s)>0){let d=r[c];if(l.allows(d)&&(e.token.value==-1||e.token.value==d||o.overrides(d,e.token.value))){e.acceptToken(d);break}}let h=e.next,u=0,f=r[n+2];if(e.next<0&&f>u&&r[a+f*3-3]==65535){n=r[a+f*3-1];continue e}for(;u<f;){let c=u+f>>1,d=a+c+(c<<1),g=r[d],w=r[d+1];if(h<g)f=c;else if(h>=w)u=c+1;else{n=r[d+2],e.advance();continue e}}break}}function jg(r,e=Uint16Array){if(typeof r!="string")return r;let t=null;for(let i=0,n=0;i<r.length;){let s=0;for(;;){let o=r.charCodeAt(i++),l=!1;if(o==126){s=65535;break}o>=92&&o--,o>=34&&o--;let a=o-32;if(a>=46&&(a-=46,l=!0),s+=a,l)break;s*=46}t?t[n++]=s:t=new e(s)}return t}const xs=typeof process!="undefined"&&process.env&&/\bparse\b/.test({}.LOG);let Dk=null;var Q8;(function(r){r[r.Margin=25]="Margin"})(Q8||(Q8={}));function D8(r,e,t){let i=r.cursor($i.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(r.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:r.length}}class CU{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?D8(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?D8(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],n=this.index[t];if(n==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=i.children[n],o=this.start[t]+i.positions[n];if(o>e)return this.nextStart=o,null;if(s instanceof En){if(o==e){if(o<this.safeFrom)return null;let l=o+s.length;if(l<=this.safeTo){let a=s.prop(Wt.lookAhead);if(!a||l+a<this.fragment.to)return s}}this.index[t]++,o+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+s.length}}}class AU{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new jm)}getActions(e){let t=0,i=null,{parser:n}=e.p,{tokenizers:s}=n,o=n.stateSlot(e.state,3),l=e.curContext?e.curContext.hash:0,a=0;for(let h=0;h<s.length;h++){if((1<<h&o)==0)continue;let u=s[h],f=this.tokens[h];if(!(i&&!u.fallback)&&((u.contextual||f.start!=e.pos||f.mask!=o||f.context!=l)&&(this.updateCachedToken(f,u,e),f.mask=o,f.context=l),f.lookAhead>f.end+25&&(a=Math.max(f.lookAhead,a)),f.value!=0)){let c=t;if(f.extended>-1&&(t=this.addActions(e,f.extended,f.end,t)),t=this.addActions(e,f.value,f.end,t),!u.extend&&(i=f,t>c))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),!i&&e.pos==this.stream.end&&(i=new jm,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new jm,{pos:i,p:n}=e;return t.start=i,t.end=Math.min(i+1,n.stream.end),t.value=i==n.stream.end?n.parser.eofTerm:0,t}updateCachedToken(e,t,i){if(t.token(this.stream.reset(i.pos,e),i),e.value>-1){let{parser:n}=i.p;for(let s=0;s<n.specialized.length;s++)if(n.specialized[s]==e.value){let o=n.specializers[s](this.stream.read(e.start,e.end),i);if(o>=0&&i.p.parser.dialect.allows(o>>1)){(o&1)==0?e.value=o>>1:e.extended=o>>1;break}}}else e.value=0,e.end=Math.min(i.p.stream.end,i.pos+1)}putAction(e,t,i,n){for(let s=0;s<n;s+=3)if(this.actions[s]==e)return n;return this.actions[n++]=e,this.actions[n++]=t,this.actions[n++]=i,n}addActions(e,t,i,n){let{state:s}=e,{parser:o}=e.p,{data:l}=o;for(let a=0;a<2;a++)for(let h=o.stateSlot(s,a?2:1);;h+=3){if(l[h]==65535)if(l[h+1]==1)h=nl(l,h+2);else{n==0&&l[h+1]==2&&(n=this.putAction(nl(l,h+2),t,i,n));break}l[h]==t&&(n=this.putAction(nl(l,h+1),t,i,n))}return n}}var E8;(function(r){r[r.Distance=5]="Distance",r[r.MaxRemainingPerStep=3]="MaxRemainingPerStep",r[r.MinBufferLengthPrune=500]="MinBufferLengthPrune",r[r.ForceReduceLimit=10]="ForceReduceLimit",r[r.CutDepth=15e3]="CutDepth",r[r.CutTo=9e3]="CutTo"})(E8||(E8={}));class TU{constructor(e,t,i,n){this.parser=e,this.input=t,this.ranges=n,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new SU(t,n),this.tokens=new AU(e,this.stream),this.topTerm=e.top[1];let{from:s}=n[0];this.stacks=[_1.start(this,e.top[0],s)],this.fragments=i.length&&this.stream.end-s>e.bufferLength*4?new CU(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],n,s;for(let o=0;o<e.length;o++){let l=e[o];for(;;){if(this.tokens.mainToken=null,l.pos>t)i.push(l);else{if(this.advanceStack(l,i,e))continue;{n||(n=[],s=[]),n.push(l);let a=this.tokens.getMainToken(l);s.push(a.value,a.end)}}break}}if(!i.length){let o=n&&$U(n);if(o)return this.stackToTree(o);if(this.parser.strict)throw xs&&n&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&n){let o=this.stoppedAt!=null&&n[0].pos>this.stoppedAt?n[0]:this.runRecovery(n,s,i);if(o)return this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(i.length>o)for(i.sort((l,a)=>a.score-l.score);i.length>o;)i.pop();i.some(l=>l.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let o=0;o<i.length-1;o++){let l=i[o];for(let a=o+1;a<i.length;a++){let h=i[a];if(l.sameState(h)||l.buffer.length>500&&h.buffer.length>500)if((l.score-h.score||l.buffer.length-h.buffer.length)>0)i.splice(a--,1);else{i.splice(o--,1);continue e}}}}this.minStackPos=i[0].pos;for(let o=1;o<i.length;o++)i[o].pos<this.minStackPos&&(this.minStackPos=i[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let n=e.pos,{parser:s}=this,o=xs?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&n>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let h=e.curContext&&e.curContext.tracker.strict,u=h?e.curContext.hash:0;for(let f=this.fragments.nodeAt(n);f;){let c=this.parser.nodeSet.types[f.type.id]==f.type?s.getGoto(e.state,f.type.id):-1;if(c>-1&&f.length&&(!h||(f.prop(Wt.contextHash)||0)==u))return e.useNode(f,c),xs&&console.log(o+this.stackID(e)+` (via reuse of ${s.getName(f.type.id)})`),!0;if(!(f instanceof En)||f.children.length==0||f.positions[0]>0)break;let d=f.children[0];if(d instanceof En&&f.positions[0]==0)f=d;else break}}let l=s.stateSlot(e.state,4);if(l>0)return e.reduce(l),xs&&console.log(o+this.stackID(e)+` (via always-reduce ${s.getName(l&65535)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let a=this.tokens.getActions(e);for(let h=0;h<a.length;){let u=a[h++],f=a[h++],c=a[h++],d=h==a.length||!i,g=d?e:e.split();if(g.apply(u,f,c),xs&&console.log(o+this.stackID(g)+` (via ${(u&65536)==0?"shift":`reduce of ${s.getName(u&65535)}`} for ${s.getName(f)} @ ${n}${g==e?"":", split"})`),d)return!0;g.pos>n?t.push(g):i.push(g)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return B8(e,t),!0}}runRecovery(e,t,i){let n=null,s=!1;for(let o=0;o<e.length;o++){let l=e[o],a=t[o<<1],h=t[(o<<1)+1],u=xs?this.stackID(l)+" -> ":"";if(l.deadEnd&&(s||(s=!0,l.restart(),xs&&console.log(u+this.stackID(l)+" (restarted)"),this.advanceFully(l,i))))continue;let f=l.split(),c=u;for(let d=0;f.forceReduce()&&d<10&&(xs&&console.log(c+this.stackID(f)+" (via force-reduce)"),!this.advanceFully(f,i));d++)xs&&(c=this.stackID(f)+" -> ");for(let d of l.recoverByInsert(a))xs&&console.log(u+this.stackID(d)+" (via recover-insert)"),this.advanceFully(d,i);this.stream.end>l.pos?(h==l.pos&&(h++,a=0),l.recoverByDelete(a,h),xs&&console.log(u+this.stackID(l)+` (via recover-delete ${this.parser.getName(a)})`),B8(l,i)):(!n||n.score<l.score)&&(n=l)}return n}stackToTree(e){return e.close(),En.build({buffer:$1.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(Dk||(Dk=new WeakMap)).get(e);return t||Dk.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function B8(r,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==r.pos&&i.sameState(r)){e[t].score<r.score&&(e[t]=r);return}}e.push(r)}class PU{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}const Ek=r=>r;class _U{constructor(e){this.start=e.start,this.shift=e.shift||Ek,this.reduce=e.reduce||Ek,this.reuse=e.reuse||Ek,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class M1 extends dU{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (${14})`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let l=0;l<e.repeatNodeCount;l++)t.push("");let i=Object.keys(e.topRules).map(l=>e.topRules[l][1]),n=[];for(let l=0;l<t.length;l++)n.push([]);function s(l,a,h){n[l].push([a,a.deserialize(String(h))])}if(e.nodeProps)for(let l of e.nodeProps){let a=l[0];typeof a=="string"&&(a=Wt[a]);for(let h=1;h<l.length;){let u=l[h++];if(u>=0)s(u,a,l[h++]);else{let f=l[h+-u];for(let c=-u;c>0;c--)s(l[h++],a,f);h++}}}this.nodeSet=new nx(t.map((l,a)=>ds.define({name:a>=this.minRepeatTerm?void 0:l,id:a,props:n[a],top:i.indexOf(a)>-1,error:a==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(a)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=TN;let o=jg(e.tokenData);if(this.context=e.context,this.specialized=new Uint16Array(e.specialized?e.specialized.length:0),this.specializers=[],e.specialized)for(let l=0;l<e.specialized.length;l++)this.specialized[l]=e.specialized[l].term,this.specializers[l]=e.specialized[l].get;this.states=jg(e.states,Uint32Array),this.data=jg(e.stateData),this.goto=jg(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(l=>typeof l=="number"?new Fm(o,l):l),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let n=new TU(this,e,t,i);for(let s of this.wrappers)n=s(n,e,t,i);return n}getGoto(e,t,i=!1){let n=this.goto;if(t>=n[0])return-1;for(let s=n[t+1];;){let o=n[s++],l=o&1,a=n[s++];if(l&&i)return a;for(let h=s+(o>>1);s<h;s++)if(n[s]==e)return a;if(l)return-1}}hasAction(e,t){let i=this.data;for(let n=0;n<2;n++)for(let s=this.stateSlot(e,n?2:1),o;;s+=3){if((o=i[s])==65535)if(i[s+1]==1)o=i[s=nl(i,s+2)];else{if(i[s+1]==2)return nl(i,s+2);break}if(o==t||o==0)return nl(i,s+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){if(t==this.stateSlot(e,4))return!0;for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=nl(this.data,i+2);else return!1;if(t==nl(this.data,i+1))return!0}}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=nl(this.data,i+2);else break;if((this.data[i+2]&1)==0){let n=this.data[i+1];t.some((s,o)=>o&1&&s==n)||t.push(this.data[i],n)}}return t}overrides(e,t){let i=N8(this.data,this.tokenPrecTable,t);return i<0||N8(this.data,this.tokenPrecTable,e)<i}configure(e){let t=Object.assign(Object.create(M1.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let n=e.tokenizers.find(s=>s.from==i);return n?n.to:i})),e.specializers&&(t.specializers=this.specializers.map(i=>{let n=e.specializers.find(s=>s.from==i);return n?n.to:i})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let s of e.split(" ")){let o=t.indexOf(s);o>=0&&(i[o]=!0)}let n=null;for(let s=0;s<t.length;s++)if(!i[s])for(let o=this.dialects[t[s]],l;(l=this.data[o++])!=65535;)(n||(n=new Uint8Array(this.maxTerm+1)))[l]=1;return new PU(e,i,n)}static deserialize(e){return new M1(e)}}function nl(r,e){return r[e]|r[e+1]<<16}function N8(r,e,t){for(let i=e,n;(n=r[i])!=65535;i++)if(n==t)return i-e;return-1}function $U(r){let e=null;for(let t of r){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}let MU=0;class Co{constructor(e,t,i){this.set=e,this.base=t,this.modified=i,this.id=MU++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let t=new Co([],null,[]);if(t.set.push(t),e)for(let i of e.set)t.set.push(i);return t}static defineModifier(){let e=new R1;return t=>t.modified.indexOf(e)>-1?t:R1.get(t.base||t,t.modified.concat(e).sort((i,n)=>i.id-n.id))}}let RU=0;class R1{constructor(){this.instances=[],this.id=RU++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(l=>l.base==e&&QU(t,l.modified));if(i)return i;let n=[],s=new Co(n,e,t);for(let l of t)l.instances.push(s);let o=$N(t);for(let l of e.set)for(let a of o)n.push(R1.get(l,a));return s}}function QU(r,e){return r.length==e.length&&r.every((t,i)=>t==e[i])}function $N(r){let e=[r];for(let t=0;t<r.length;t++)for(let i of $N(r.slice(0,t).concat(r.slice(t+1))))e.push(i);return e}function DU(r){let e=Object.create(null);for(let t in r){let i=r[t];Array.isArray(i)||(i=[i]);for(let n of t.split(" "))if(n){let s=[],o=2,l=n;for(let f=0;;){if(l=="..."&&f>0&&f+3==n.length){o=1;break}let c=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!c)throw new RangeError("Invalid path: "+n);if(s.push(c[0]=="*"?"":c[0][0]=='"'?JSON.parse(c[0]):c[0]),f+=c[0].length,f==n.length)break;let d=n[f++];if(f==n.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+n);l=n.slice(f)}let a=s.length-1,h=s[a];if(!h)throw new RangeError("Invalid path: "+n);let u=new BU(i,o,a>0?s.slice(0,a):null);e[h]=u.sort(e[h])}}return EU.add(e)}const EU=new Wt;class BU{constructor(e,t,i,n){this.tags=e,this.mode=t,this.context=i,this.next=n}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function NU(r,e){let t=Object.create(null);for(let s of r)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let o of s.tag)t[o.id]=s.class;let{scope:i,all:n=null}=e||{};return{style:s=>{let o=n;for(let l of s)for(let a of l.set){let h=t[a.id];if(h){o=o?o+" "+h:h;break}}return o},scope:i}}const me=Co.define,Fg=me(),Fl=me(),I8=me(Fl),L8=me(Fl),Hl=me(),Hg=me(Hl),Bk=me(Hl),mo=me(),nh=me(mo),Ks=me(),Js=me(),C2=me(),mc=me(C2),qg=me(),Ke={comment:Fg,lineComment:me(Fg),blockComment:me(Fg),docComment:me(Fg),name:Fl,variableName:me(Fl),typeName:I8,tagName:me(I8),propertyName:L8,attributeName:me(L8),className:me(Fl),labelName:me(Fl),namespace:me(Fl),macroName:me(Fl),literal:Hl,string:Hg,docString:me(Hg),character:me(Hg),attributeValue:me(Hg),number:Bk,integer:me(Bk),float:me(Bk),bool:me(Hl),regexp:me(Hl),escape:me(Hl),color:me(Hl),url:me(Hl),keyword:Ks,self:me(Ks),null:me(Ks),atom:me(Ks),unit:me(Ks),modifier:me(Ks),operatorKeyword:me(Ks),controlKeyword:me(Ks),definitionKeyword:me(Ks),moduleKeyword:me(Ks),operator:Js,derefOperator:me(Js),arithmeticOperator:me(Js),logicOperator:me(Js),bitwiseOperator:me(Js),compareOperator:me(Js),updateOperator:me(Js),definitionOperator:me(Js),typeOperator:me(Js),controlOperator:me(Js),punctuation:C2,separator:me(C2),bracket:mc,angleBracket:me(mc),squareBracket:me(mc),paren:me(mc),brace:me(mc),content:mo,heading:nh,heading1:me(nh),heading2:me(nh),heading3:me(nh),heading4:me(nh),heading5:me(nh),heading6:me(nh),contentSeparator:me(mo),list:me(mo),quote:me(mo),emphasis:me(mo),strong:me(mo),link:me(mo),monospace:me(mo),strikethrough:me(mo),inserted:me(),deleted:me(),changed:me(),invalid:me(),meta:qg,documentMeta:me(qg),annotation:me(qg),processingInstruction:me(qg),definition:Co.defineModifier(),constant:Co.defineModifier(),function:Co.defineModifier(),standard:Co.defineModifier(),local:Co.defineModifier(),special:Co.defineModifier()};NU([{tag:Ke.link,class:"tok-link"},{tag:Ke.heading,class:"tok-heading"},{tag:Ke.emphasis,class:"tok-emphasis"},{tag:Ke.strong,class:"tok-strong"},{tag:Ke.keyword,class:"tok-keyword"},{tag:Ke.atom,class:"tok-atom"},{tag:Ke.bool,class:"tok-bool"},{tag:Ke.url,class:"tok-url"},{tag:Ke.labelName,class:"tok-labelName"},{tag:Ke.inserted,class:"tok-inserted"},{tag:Ke.deleted,class:"tok-deleted"},{tag:Ke.literal,class:"tok-literal"},{tag:Ke.string,class:"tok-string"},{tag:Ke.number,class:"tok-number"},{tag:[Ke.regexp,Ke.escape,Ke.special(Ke.string)],class:"tok-string2"},{tag:Ke.variableName,class:"tok-variableName"},{tag:Ke.local(Ke.variableName),class:"tok-variableName tok-local"},{tag:Ke.definition(Ke.variableName),class:"tok-variableName tok-definition"},{tag:Ke.special(Ke.variableName),class:"tok-variableName2"},{tag:Ke.definition(Ke.propertyName),class:"tok-propertyName tok-definition"},{tag:Ke.typeName,class:"tok-typeName"},{tag:Ke.namespace,class:"tok-namespace"},{tag:Ke.className,class:"tok-className"},{tag:Ke.macroName,class:"tok-macroName"},{tag:Ke.propertyName,class:"tok-propertyName"},{tag:Ke.operator,class:"tok-operator"},{tag:Ke.comment,class:"tok-comment"},{tag:Ke.meta,class:"tok-meta"},{tag:Ke.invalid,class:"tok-invalid"},{tag:Ke.punctuation,class:"tok-punctuation"}]);const IU=53,LU=1,zU=54,WU=2,VU=55,jU=3,Q1=4,MN=5,RN=6,QN=7,DN=8,FU=9,HU=10,qU=11,Nk=56,XU=12,z8=57,ZU=18,GU=27,UU=30,YU=33,KU=35,JU=0,eY={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},tY={dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},W8={dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}};function iY(r){return r==45||r==46||r==58||r>=65&&r<=90||r==95||r>=97&&r<=122||r>=161}function EN(r){return r==9||r==10||r==13||r==32}let V8=null,j8=null,F8=0;function A2(r,e){let t=r.pos+e;if(F8==t&&j8==r)return V8;let i=r.peek(e);for(;EN(i);)i=r.peek(++e);let n="";for(;iY(i);)n+=String.fromCharCode(i),i=r.peek(++e);return j8=r,F8=t,V8=n?n.toLowerCase():i==nY||i==rY?void 0:null}const BN=60,NN=62,IN=47,nY=63,rY=33,sY=45;function H8(r,e){this.name=r,this.parent=e,this.hash=e?e.hash:0;for(let t=0;t<r.length;t++)this.hash+=(this.hash<<4)+r.charCodeAt(t)+(r.charCodeAt(t)<<8)}const oY=[Q1,DN,MN,RN,QN],lY=new _U({start:null,shift(r,e,t,i){return oY.indexOf(e)>-1?new H8(A2(i,1)||"",r):r},reduce(r,e){return e==ZU&&r?r.parent:r},reuse(r,e,t,i){let n=e.type.id;return n==Q1||n==KU?new H8(A2(i,1)||"",r):r},hash(r){return r?r.hash:0},strict:!1}),aY=new lx((r,e)=>{if(r.next!=BN){r.next<0&&e.context&&r.acceptToken(Nk);return}r.advance();let t=r.next==IN;t&&r.advance();let i=A2(r,0);if(i===void 0)return;if(!i)return r.acceptToken(t?XU:Q1);let n=e.context?e.context.name:null;if(t){if(i==n)return r.acceptToken(FU);if(n&&tY[n])return r.acceptToken(Nk,-2);if(e.dialectEnabled(JU))return r.acceptToken(HU);for(let s=e.context;s;s=s.parent)if(s.name==i)return;r.acceptToken(qU)}else{if(i=="script")return r.acceptToken(MN);if(i=="style")return r.acceptToken(RN);if(i=="textarea")return r.acceptToken(QN);if(eY.hasOwnProperty(i))return r.acceptToken(DN);n&&W8[n]&&W8[n][i]?r.acceptToken(Nk,-1):r.acceptToken(Q1)}},{contextual:!0}),hY=new lx(r=>{for(let e=0,t=0;;t++){if(r.next<0){t&&r.acceptToken(z8);break}if(r.next==sY)e++;else if(r.next==NN&&e>=2){t>3&&r.acceptToken(z8,-2);break}else e=0;r.advance()}});function ax(r,e,t){let i=2+r.length;return new lx(n=>{for(let s=0,o=0,l=0;;l++){if(n.next<0){l&&n.acceptToken(e);break}if(s==0&&n.next==BN||s==1&&n.next==IN||s>=2&&s<i&&n.next==r.charCodeAt(s-2))s++,o++;else if((s==2||s==i)&&EN(n.next))o++;else if(s==i&&n.next==NN){l>o?n.acceptToken(e,-o):n.acceptToken(t,-(o-2));break}else if((n.next==10||n.next==13)&&l){n.acceptToken(e,1);break}else s=o=0;n.advance()}})}const uY=ax("script",IU,LU),fY=ax("style",zU,WU),cY=ax("textarea",VU,jU),dY=DU({"Text RawText":Ke.content,"StartTag StartCloseTag SelfCloserEndTag EndTag SelfCloseEndTag":Ke.angleBracket,TagName:Ke.tagName,"MismatchedCloseTag/TagName":[Ke.tagName,Ke.invalid],AttributeName:Ke.attributeName,"AttributeValue UnquotedAttributeValue":Ke.attributeValue,Is:Ke.definitionOperator,"EntityReference CharacterReference":Ke.character,Comment:Ke.blockComment,ProcessingInst:Ke.processingInstruction,DoctypeDecl:Ke.documentMeta}),pY=M1.deserialize({version:14,states:",xOVOxOOO!WQ!bO'#CoO!]Q!bO'#CyO!bQ!bO'#C|O!gQ!bO'#DPO!lQ!bO'#DRO!qOXO'#CnO!|OYO'#CnO#XO[O'#CnO$eOxO'#CnOOOW'#Cn'#CnO$lO!rO'#DSO$tQ!bO'#DUO$yQ!bO'#DVOOOW'#Dj'#DjOOOW'#DX'#DXQVOxOOO%OQ#tO,59ZO%WQ#tO,59eO%`Q#tO,59hO%hQ#tO,59kO%pQ#tO,59mOOOX'#D]'#D]O%xOXO'#CwO&TOXO,59YOOOY'#D^'#D^O&]OYO'#CzO&hOYO,59YOOO['#D_'#D_O&pO[O'#C}O&{O[O,59YOOOW'#D`'#D`O'TOxO,59YO'[Q!bO'#DQOOOW,59Y,59YOOO`'#Da'#DaO'aO!rO,59nOOOW,59n,59nO'iQ!bO,59pO'nQ!bO,59qOOOW-E7V-E7VO'sQ#tO'#CqOOQO'#DY'#DYO(OQ#tO1G.uOOOX1G.u1G.uO(WQ#tO1G/POOOY1G/P1G/PO(`Q#tO1G/SOOO[1G/S1G/SO(hQ#tO1G/VOOOW1G/V1G/VO(pQ#tO1G/XOOOW1G/X1G/XOOOX-E7Z-E7ZO(xQ!bO'#CxOOOW1G.t1G.tOOOY-E7[-E7[O(}Q!bO'#C{OOO[-E7]-E7]O)SQ!bO'#DOOOOW-E7^-E7^O)XQ!bO,59lOOO`-E7_-E7_OOOW1G/Y1G/YOOOW1G/[1G/[OOOW1G/]1G/]O)^Q&jO,59]OOQO-E7W-E7WOOOX7+$a7+$aOOOY7+$k7+$kOOO[7+$n7+$nOOOW7+$q7+$qOOOW7+$s7+$sO)iQ!bO,59dO)nQ!bO,59gO)sQ!bO,59jOOOW1G/W1G/WO)xO,UO'#CtO*WO7[O'#CtOOQO1G.w1G.wOOOW1G/O1G/OOOOW1G/R1G/ROOOW1G/U1G/UOOOO'#DZ'#DZO*fO,UO,59`OOQO,59`,59`OOOO'#D['#D[O*tO7[O,59`OOOO-E7X-E7XOOQO1G.z1G.zOOOO-E7Y-E7Y",stateData:"+[~O!]OS~OSSOTPOUQOVROWTOY]OZ[O[^O^^O_^O`^Oa^Ow^Oz_O!cZO~OdaO~OdbO~OdcO~OddO~OdeO~O!VfOPkP!YkP~O!WiOQnP!YnP~O!XlORqP!YqP~OSSOTPOUQOVROWTOXqOY]OZ[O[^O^^O_^O`^Oa^Ow^O!cZO~O!YrO~P#dO!ZsO!duO~OdvO~OdwO~OfyOj|O~OfyOj!OO~OfyOj!QO~OfyOj!SO~OfyOj!UO~O!VfOPkX!YkX~OP!WO!Y!XO~O!WiOQnX!YnX~OQ!ZO!Y!XO~O!XlORqX!YqX~OR!]O!Y!XO~O!Y!XO~P#dOd!_O~O!ZsO!d!aO~Oj!bO~Oj!cO~Og!dOfeXjeX~OfyOj!fO~OfyOj!gO~OfyOj!hO~OfyOj!iO~OfyOj!jO~Od!kO~Od!lO~Od!mO~Oj!nO~Oi!qO!_!oO!a!pO~Oj!rO~Oj!sO~Oj!tO~O_!uO`!uO!_!wO!`!uO~O_!xO`!xO!a!wO!b!xO~O_!uO`!uO!_!{O!`!uO~O_!xO`!xO!a!{O!b!xO~O`_a!cwz!c~",goto:"%o!_PPPPPPPPPPPPPPPPPP!`!fP!lPP!xPP!{#O#R#X#[#_#e#h#k#q#w!`P!`!`P#}$T$k$q$w$}%T%Z%aPPPPPPPP%gX^OX`pXUOX`pezabcde{}!P!R!TR!q!dRhUR!XhXVOX`pRkVR!XkXWOX`pRnWR!XnXXOX`pQrXR!XpXYOX`pQ`ORx`Q{aQ}bQ!PcQ!RdQ!TeZ!e{}!P!R!TQ!v!oR!z!vQ!y!pR!|!yQgUR!VgQjVR!YjQmWR![mQpXR!^pQtZR!`tS_O`ToXp",nodeNames:"\u26A0 StartCloseTag StartCloseTag StartCloseTag StartTag StartTag StartTag StartTag StartTag StartCloseTag StartCloseTag StartCloseTag IncompleteCloseTag Document Text EntityReference CharacterReference InvalidEntity Element OpenTag TagName Attribute AttributeName Is AttributeValue UnquotedAttributeValue EndTag ScriptText CloseTag OpenTag StyleText CloseTag OpenTag TextareaText CloseTag OpenTag CloseTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag CloseTag DoctypeDecl",maxTerm:66,context:lY,nodeProps:[["closedBy",-11,1,2,3,4,5,6,7,8,9,10,11,"EndTag",-4,19,29,32,35,"CloseTag"],["group",-9,12,15,16,17,18,38,39,40,41,"Entity",14,"Entity TextContent",-3,27,30,33,"TextContent Entity"],["openedBy",26,"StartTag StartCloseTag",-4,28,31,34,36,"OpenTag"]],propSources:[dY],skippedNodes:[0],repeatNodeCount:9,tokenData:"!#b!aR!WOX$kXY)sYZ)sZ]$k]^)s^p$kpq)sqr$krs*zsv$kvw+dwx2yx}$k}!O3f!O!P$k!P!Q7_!Q![$k![!]8u!]!^$k!^!_>b!_!`!!p!`!a8T!a!c$k!c!}8u!}#R$k#R#S8u#S#T$k#T#o8u#o$f$k$f$g&R$g%W$k%W%o8u%o%p$k%p&a8u&a&b$k&b1p8u1p4U$k4U4d8u4d4e$k4e$IS8u$IS$I`$k$I`$Ib8u$Ib$Kh$k$Kh%#t8u%#t&/x$k&/x&Et8u&Et&FV$k&FV;'S8u;'S;:j<t;:j?&r$k?&r?Ah8u?Ah?BY$k?BY?Mn8u?Mn~$k!Z$vc^PiW!``!bpOX$kXZ&RZ]$k]^&R^p$kpq&Rqr$krs&qsv$kvw)Rwx'rx!P$k!P!Q&R!Q!^$k!^!_(k!_!a&R!a$f$k$f$g&R$g~$k!R&[V^P!``!bpOr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_~&Rq&xT^P!bpOv&qwx'Xx!^&q!^!_'g!_~&qP'^R^POv'Xw!^'X!_~'Xp'lQ!bpOv'gx~'ga'yU^P!``Or'rrs'Xsv'rw!^'r!^!_(]!_~'r`(bR!``Or(]sv(]w~(]!Q(rT!``!bpOr(krs'gsv(kwx(]x~(kW)WXiWOX)RZ])R^p)Rqr)Rsw)Rx!P)R!Q!^)R!a$f)R$g~)R!a*O^^P!``!bp!]^OX&RXY)sYZ)sZ]&R]^)s^p&Rpq)sqr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_~&R!Z+TT!_h^P!bpOv&qwx'Xx!^&q!^!_'g!_~&q!Z+kbiWaPOX,sXZ.QZ],s]^.Q^p,sqr,srs.Qst/]tw,swx.Qx!P,s!P!Q.Q!Q!],s!]!^)R!^!a.Q!a$f,s$f$g.Q$g~,s!Z,xbiWOX,sXZ.QZ],s]^.Q^p,sqr,srs.Qst)Rtw,swx.Qx!P,s!P!Q.Q!Q!],s!]!^.i!^!a.Q!a$f,s$f$g.Q$g~,s!R.TTOp.Qqs.Qt!].Q!]!^.d!^~.Q!R.iO_!R!Z.pXiW_!ROX)RZ])R^p)Rqr)Rsw)Rx!P)R!Q!^)R!a$f)R$g~)R!Z/baiWOX0gXZ1qZ]0g]^1q^p0gqr0grs1qsw0gwx1qx!P0g!P!Q1q!Q!]0g!]!^)R!^!a1q!a$f0g$f$g1q$g~0g!Z0laiWOX0gXZ1qZ]0g]^1q^p0gqr0grs1qsw0gwx1qx!P0g!P!Q1q!Q!]0g!]!^2V!^!a1q!a$f0g$f$g1q$g~0g!R1tSOp1qq!]1q!]!^2Q!^~1q!R2VO`!R!Z2^XiW`!ROX)RZ])R^p)Rqr)Rsw)Rx!P)R!Q!^)R!a$f)R$g~)R!Z3SU!ax^P!``Or'rrs'Xsv'rw!^'r!^!_(]!_~'r!]3qe^PiW!``!bpOX$kXZ&RZ]$k]^&R^p$kpq&Rqr$krs&qsv$kvw)Rwx'rx}$k}!O5S!O!P$k!P!Q&R!Q!^$k!^!_(k!_!a&R!a$f$k$f$g&R$g~$k!]5_d^PiW!``!bpOX$kXZ&RZ]$k]^&R^p$kpq&Rqr$krs&qsv$kvw)Rwx'rx!P$k!P!Q&R!Q!^$k!^!_(k!_!`&R!`!a6m!a$f$k$f$g&R$g~$k!T6xV^P!``!bp!dQOr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_~&R!X7hX^P!``!bpOr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_!`&R!`!a8T!a~&R!X8`VjU^P!``!bpOr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_~&R!a9U!YfSdQ^PiW!``!bpOX$kXZ&RZ]$k]^&R^p$kpq&Rqr$krs&qsv$kvw)Rwx'rx}$k}!O8u!O!P8u!P!Q&R!Q![8u![!]8u!]!^$k!^!_(k!_!a&R!a!c$k!c!}8u!}#R$k#R#S8u#S#T$k#T#o8u#o$f$k$f$g&R$g$}$k$}%O8u%O%W$k%W%o8u%o%p$k%p&a8u&a&b$k&b1p8u1p4U8u4U4d8u4d4e$k4e$IS8u$IS$I`$k$I`$Ib8u$Ib$Je$k$Je$Jg8u$Jg$Kh$k$Kh%#t8u%#t&/x$k&/x&Et8u&Et&FV$k&FV;'S8u;'S;:j<t;:j?&r$k?&r?Ah8u?Ah?BY$k?BY?Mn8u?Mn~$k!a=Pe^PiW!``!bpOX$kXZ&RZ]$k]^&R^p$kpq&Rqr$krs&qsv$kvw)Rwx'rx!P$k!P!Q&R!Q!^$k!^!_(k!_!a&R!a$f$k$f$g&R$g;=`$k;=`<%l8u<%l~$k!R>iW!``!bpOq(kqr?Rrs'gsv(kwx(]x!a(k!a!bKj!b~(k!R?YZ!``!bpOr(krs'gsv(kwx(]x}(k}!O?{!O!f(k!f!gAR!g#W(k#W#XGz#X~(k!R@SV!``!bpOr(krs'gsv(kwx(]x}(k}!O@i!O~(k!R@rT!``!bp!cPOr(krs'gsv(kwx(]x~(k!RAYV!``!bpOr(krs'gsv(kwx(]x!q(k!q!rAo!r~(k!RAvV!``!bpOr(krs'gsv(kwx(]x!e(k!e!fB]!f~(k!RBdV!``!bpOr(krs'gsv(kwx(]x!v(k!v!wBy!w~(k!RCQV!``!bpOr(krs'gsv(kwx(]x!{(k!{!|Cg!|~(k!RCnV!``!bpOr(krs'gsv(kwx(]x!r(k!r!sDT!s~(k!RD[V!``!bpOr(krs'gsv(kwx(]x!g(k!g!hDq!h~(k!RDxW!``!bpOrDqrsEbsvDqvwEvwxFfx!`Dq!`!aGb!a~DqqEgT!bpOvEbvxEvx!`Eb!`!aFX!a~EbPEyRO!`Ev!`!aFS!a~EvPFXOzPqF`Q!bpzPOv'gx~'gaFkV!``OrFfrsEvsvFfvwEvw!`Ff!`!aGQ!a~FfaGXR!``zPOr(]sv(]w~(]!RGkT!``!bpzPOr(krs'gsv(kwx(]x~(k!RHRV!``!bpOr(krs'gsv(kwx(]x#c(k#c#dHh#d~(k!RHoV!``!bpOr(krs'gsv(kwx(]x#V(k#V#WIU#W~(k!RI]V!``!bpOr(krs'gsv(kwx(]x#h(k#h#iIr#i~(k!RIyV!``!bpOr(krs'gsv(kwx(]x#m(k#m#nJ`#n~(k!RJgV!``!bpOr(krs'gsv(kwx(]x#d(k#d#eJ|#e~(k!RKTV!``!bpOr(krs'gsv(kwx(]x#X(k#X#YDq#Y~(k!RKqW!``!bpOrKjrsLZsvKjvwLowxNPx!aKj!a!b! g!b~KjqL`T!bpOvLZvxLox!aLZ!a!bM^!b~LZPLrRO!aLo!a!bL{!b~LoPMORO!`Lo!`!aMX!a~LoPM^OwPqMcT!bpOvLZvxLox!`LZ!`!aMr!a~LZqMyQ!bpwPOv'gx~'gaNUV!``OrNPrsLosvNPvwLow!aNP!a!bNk!b~NPaNpV!``OrNPrsLosvNPvwLow!`NP!`!a! V!a~NPa! ^R!``wPOr(]sv(]w~(]!R! nW!``!bpOrKjrsLZsvKjvwLowxNPx!`Kj!`!a!!W!a~Kj!R!!aT!``!bpwPOr(krs'gsv(kwx(]x~(k!V!!{VgS^P!``!bpOr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_~&R",tokenizers:[uY,fY,cY,aY,hY,0,1,2,3,4,5],topRules:{Document:[0,13]},dialects:{noMatch:0},tokenPrec:464});function gY(r,e){let t=Object.create(null);for(let i of r.firstChild.getChildren("Attribute")){let n=i.getChild("AttributeName"),s=i.getChild("AttributeValue")||i.getChild("UnquotedAttributeValue");n&&(t[e.read(n.from,n.to)]=s?s.name=="AttributeValue"?e.read(s.from+1,s.to-1):e.read(s.from,s.to):"")}return t}function Ik(r,e,t){let i;for(let n of t)if(!n.attrs||n.attrs(i||(i=gY(r.node.parent,e))))return{parser:n.parser};return null}function mY(r){let e=[],t=[],i=[];for(let n of r){let s=n.tag=="script"?e:n.tag=="style"?t:n.tag=="textarea"?i:null;if(!s)throw new RangeError("Only script, style, and textarea tags can host nested parsers");s.push(n)}return gU((n,s)=>{let o=n.type.id;return o==GU?Ik(n,s,e):o==UU?Ik(n,s,t):o==YU?Ik(n,s,i):null})}const LN=1024;let bY=0;class Lk{constructor(e,t){this.from=e,this.to=t}}class ui{constructor(e={}){this.id=bY++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Qs.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}ui.closedBy=new ui({deserialize:r=>r.split(" ")});ui.openedBy=new ui({deserialize:r=>r.split(" ")});ui.group=new ui({deserialize:r=>r.split(" ")});ui.contextHash=new ui({perNode:!0});ui.lookAhead=new ui({perNode:!0});ui.mounted=new ui({perNode:!0});const OY=Object.create(null);class Qs{constructor(e,t,i,n=0){this.name=e,this.props=t,this.id=i,this.flags=n}static define(e){let t=e.props&&e.props.length?Object.create(null):OY,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),n=new Qs(e.name||"",t,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(n)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return n}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(ui.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let n of i.split(" "))t[n]=e[i];return i=>{for(let n=i.prop(ui.group),s=-1;s<(n?n.length:0);s++){let o=t[s<0?i.name:n[s]];if(o)return o}}}}Qs.none=new Qs("",Object.create(null),0,8);class hx{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let n=null;for(let s of e){let o=s(i);o&&(n||(n=Object.assign({},i.props)),n[o[0].id]=o[1])}t.push(n?new Qs(i.name,n,i.id,i.flags):i)}return new hx(t)}}const Xg=new WeakMap,q8=new WeakMap;var Fn;(function(r){r[r.ExcludeBuffers=1]="ExcludeBuffers",r[r.IncludeAnonymous=2]="IncludeAnonymous",r[r.IgnoreMounts=4]="IgnoreMounts",r[r.IgnoreOverlays=8]="IgnoreOverlays"})(Fn||(Fn={}));class Er{constructor(e,t,i,n,s){if(this.type=e,this.children=t,this.positions=i,this.length=n,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,l]of s)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=this.prop(ui.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let n=i.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new B1(this.topNode,e)}cursorAt(e,t=0,i=0){let n=Xg.get(this)||this.topNode,s=new B1(n);return s.moveTo(e,t),Xg.set(this,s._tree),s}get topNode(){return new xl(this,0,0,null)}resolve(e,t=0){let i=Mf(Xg.get(this)||this.topNode,e,t,!1);return Xg.set(this,i),i}resolveInner(e,t=0){let i=Mf(q8.get(this)||this.topNode,e,t,!0);return q8.set(this,i),i}iterate(e){let{enter:t,leave:i,from:n=0,to:s=this.length}=e;for(let o=this.cursor((e.mode||0)|Fn.IncludeAnonymous);;){let l=!1;if(o.from<=s&&o.to>=n&&(o.type.isAnonymous||t(o)!==!1)){if(o.firstChild())continue;l=!0}for(;l&&i&&!o.type.isAnonymous&&i(o),!o.nextSibling();){if(!o.parent())return;l=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:cx(Qs.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,n)=>new Er(this.type,t,i,n,this.propValues),e.makeTree||((t,i,n)=>new Er(Qs.none,t,i,n)))}static build(e){return wY(e)}}Er.empty=new Er(Qs.none,[],[],0);class ux{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new ux(this.buffer,this.index)}}class Yh{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return Qs.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],n=this.set.types[t],s=n.name;if(/\W/.test(s)&&!n.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,t,i,n,s){let{buffer:o}=this,l=-1;for(let a=e;a!=t&&!(zN(s,n,o[a+1],o[a+2])&&(l=a,i>0));a=o[a+3]);return l}slice(e,t,i,n){let s=this.buffer,o=new Uint16Array(t-e);for(let l=e,a=0;l<t;)o[a++]=s[l++],o[a++]=s[l++]-i,o[a++]=s[l++]-i,o[a++]=s[l++]-e;return new Yh(o,n-i,this.set)}}function zN(r,e,t,i){switch(r){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function WN(r,e){let t=r.childBefore(e);for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(r=t,t=i.prevSibling):t=i}return r}function Mf(r,e,t,i){for(var n;r.from==r.to||(t<1?r.from>=e:r.from>e)||(t>-1?r.to<=e:r.to<e);){let o=!i&&r instanceof xl&&r.index<0?null:r.parent;if(!o)return r;r=o}let s=i?0:Fn.IgnoreOverlays;if(i)for(let o=r,l=o.parent;l;o=l,l=o.parent)o instanceof xl&&o.index<0&&((n=l.enter(e,t,s))===null||n===void 0?void 0:n.from)!=o.from&&(r=l);for(;;){let o=r.enter(e,t,s);if(!o)return r;r=o}}class xl{constructor(e,t,i,n){this._tree=e,this.from=t,this.index=i,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,n,s=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,h=t>0?l.length:-1;e!=h;e+=t){let u=l[e],f=a[e]+o.from;if(!!zN(n,i,f,f+u.length)){if(u instanceof Yh){if(s&Fn.ExcludeBuffers)continue;let c=u.findChild(0,u.buffer.length,t,i-f,n);if(c>-1)return new Pa(new kY(o,u,e,f),null,c)}else if(s&Fn.IncludeAnonymous||!u.type.isAnonymous||fx(u)){let c;if(!(s&Fn.IgnoreMounts)&&u.props&&(c=u.prop(ui.mounted))&&!c.overlay)return new xl(c.tree,f,e,o);let d=new xl(u,f,e,o);return s&Fn.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(t<0?u.children.length-1:0,t,i,n)}}}if(s&Fn.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let n;if(!(i&Fn.IgnoreOverlays)&&(n=this._tree.prop(ui.mounted))&&n.overlay){let s=e-this.from;for(let{from:o,to:l}of n.overlay)if((t>0?o<=s:o<s)&&(t<0?l>=s:l>s))return new xl(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new B1(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return Mf(this,e,t,!1)}resolveInner(e,t=0){return Mf(this,e,t,!0)}enterUnfinishedNodesBefore(e){return WN(this,e)}getChild(e,t=null,i=null){let n=D1(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return D1(this,e,t,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return E1(this,e)}}function D1(r,e,t,i){let n=r.cursor(),s=[];if(!n.firstChild())return s;if(t!=null){for(;!n.type.is(t);)if(!n.nextSibling())return s}for(;;){if(i!=null&&n.type.is(i))return s;if(n.type.is(e)&&s.push(n.node),!n.nextSibling())return i==null?s:[]}}function E1(r,e,t=e.length-1){for(let i=r.parent;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class kY{constructor(e,t,i,n){this.parent=e,this.buffer=t,this.index=i,this.start=n}}class Pa{constructor(e,t,i){this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,i){let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.context.start,i);return s<0?null:new Pa(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&Fn.ExcludeBuffers)return null;let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new Pa(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Pa(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Pa(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new B1(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,n=this.index+4,s=i.buffer[this.index+3];if(s>n){let o=i.buffer[this.index+1],l=i.buffer[this.index+2];e.push(i.slice(n,s,o,l)),t.push(0)}return new Er(this.type,e,t,this.to-this.from)}resolve(e,t=0){return Mf(this,e,t,!1)}resolveInner(e,t=0){return Mf(this,e,t,!0)}enterUnfinishedNodesBefore(e){return WN(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,i=null){let n=D1(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return D1(this,e,t,i)}get node(){return this}matchContext(e){return E1(this,e)}}class B1{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof xl)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=i+n.buffer[e+1],this.to=i+n.buffer[e+2],!0}yield(e){return e?e instanceof xl?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:n}=this.buffer,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&Fn.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Fn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Fn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let n=i<0?0:this.stack[i]+4;if(this.index!=n)return this.yieldBuf(t.findChild(n,this.index,-1,0,4))}else{let n=t.buffer[this.index+3];if(n<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(n)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(n.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:i}=n)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let s=t+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let l=i._tree.children[s];if(this.mode&Fn.IncludeAnonymous||l instanceof Yh||!l.type.isAnonymous||fx(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer){e:for(let n=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==n){if(n==this.index)return o;t=o,i=s+1;break e}n=this.stack[--s]}}for(let n=i;n<this.stack.length;n++)t=new Pa(this.buffer,t,this.stack[n]);return this.bufferNode=new Pa(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let n=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(n=!0)}for(;n&&t&&t(this),n=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,n=!0}}}matchContext(e){if(!this.buffer)return E1(this.node,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let n=e.length-1,s=this.stack.length-1;n>=0;s--){if(s<0)return E1(this.node,e,n);let o=i[t.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[n]&&e[n]!=o.name)return!1;n--}}return!0}}function fx(r){return r.children.some(e=>e instanceof Yh||!e.type.isAnonymous||fx(e))}function wY(r){var e;let{buffer:t,nodeSet:i,maxBufferLength:n=LN,reused:s=[],minRepeatType:o=i.types.length}=r,l=Array.isArray(t)?new ux(t,t.length):t,a=i.types,h=0,u=0;function f(p,b,m,k,C){let{id:v,start:y,end:T,size:E}=l,$=u;for(;E<0;)if(l.next(),E==-1){let L=s[v];m.push(L),k.push(y-p);return}else if(E==-3){h=v;return}else if(E==-4){u=v;return}else throw new RangeError(`Unrecognized record size: ${E}`);let R=a[v],N,_,W=y-p;if(T-y<=n&&(_=w(l.pos-b,C))){let L=new Uint16Array(_.size-_.skip),I=l.pos-_.size,j=L.length;for(;l.pos>I;)j=S(_.start,L,j);N=new Yh(L,T-_.start,i),W=_.start-p}else{let L=l.pos-E;l.next();let I=[],j=[],X=v>=o?v:-1,Z=0,ie=T;for(;l.pos>L;)X>=0&&l.id==X&&l.size>=0?(l.end<=ie-n&&(d(I,j,y,Z,l.end,ie,X,$),Z=I.length,ie=l.end),l.next()):f(y,L,I,j,X);if(X>=0&&Z>0&&Z<I.length&&d(I,j,y,Z,y,ie,X,$),I.reverse(),j.reverse(),X>-1&&Z>0){let G=c(R);N=cx(R,I,j,0,I.length,0,T-y,G,G)}else N=g(R,I,j,T-y,$-T)}m.push(N),k.push(W)}function c(p){return(b,m,k)=>{let C=0,v=b.length-1,y,T;if(v>=0&&(y=b[v])instanceof Er){if(!v&&y.type==p&&y.length==k)return y;(T=y.prop(ui.lookAhead))&&(C=m[v]+y.length+T)}return g(p,b,m,k,C)}}function d(p,b,m,k,C,v,y,T){let E=[],$=[];for(;p.length>k;)E.push(p.pop()),$.push(b.pop()+m-C);p.push(g(i.types[y],E,$,v-C,T-v)),b.push(C-m)}function g(p,b,m,k,C=0,v){if(h){let y=[ui.contextHash,h];v=v?[y].concat(v):[y]}if(C>25){let y=[ui.lookAhead,C];v=v?[y].concat(v):[y]}return new Er(p,b,m,k,v)}function w(p,b){let m=l.fork(),k=0,C=0,v=0,y=m.end-n,T={size:0,start:0,skip:0};e:for(let E=m.pos-p;m.pos>E;){let $=m.size;if(m.id==b&&$>=0){T.size=k,T.start=C,T.skip=v,v+=4,k+=4,m.next();continue}let R=m.pos-$;if($<0||R<E||m.start<y)break;let N=m.id>=o?4:0,_=m.start;for(m.next();m.pos>R;){if(m.size<0)if(m.size==-3)N+=4;else break e;else m.id>=o&&(N+=4);m.next()}C=_,k+=$,v+=N}return(b<0||k==p)&&(T.size=k,T.start=C,T.skip=v),T.size>4?T:void 0}function S(p,b,m){let{id:k,start:C,end:v,size:y}=l;if(l.next(),y>=0&&k<o){let T=m;if(y>4){let E=l.pos-(y-4);for(;l.pos>E;)m=S(p,b,m)}b[--m]=T,b[--m]=v-p,b[--m]=C-p,b[--m]=k}else y==-3?h=k:y==-4&&(u=k);return m}let x=[],Q=[];for(;l.pos>0;)f(r.start||0,r.bufferStart||0,x,Q,-1);let M=(e=r.length)!==null&&e!==void 0?e:x.length?Q[0]+x[0].length:0;return new Er(a[r.topID],x.reverse(),Q.reverse(),M)}const X8=new WeakMap;function Hm(r,e){if(!r.isAnonymous||e instanceof Yh||e.type!=r)return 1;let t=X8.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=r||!(i instanceof Er)){t=1;break}t+=Hm(r,i)}X8.set(e,t)}return t}function cx(r,e,t,i,n,s,o,l,a){let h=0;for(let g=i;g<n;g++)h+=Hm(r,e[g]);let u=Math.ceil(h*1.5/8),f=[],c=[];function d(g,w,S,x,Q){for(let M=S;M<x;){let p=M,b=w[M],m=Hm(r,g[M]);for(M++;M<x;M++){let k=Hm(r,g[M]);if(m+k>=u)break;m+=k}if(M==p+1){if(m>u){let k=g[p];d(k.children,k.positions,0,k.children.length,w[p]+Q);continue}f.push(g[p])}else{let k=w[M-1]+g[M-1].length-b;f.push(cx(r,g,w,p,M,b,k,null,a))}c.push(b+Q-s)}}return d(e,t,i,n,0),(l||a)(f,c,o)}class yY{startParse(e,t,i){return typeof e=="string"&&(e=new vY(e)),i=i?i.length?i.map(n=>new Lk(n.from,n.to)):[new Lk(0,0)]:[new Lk(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let n=this.startParse(e,t,i);for(;;){let s=n.advance();if(s)return s}}}class vY{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new ui({perNode:!0});class N1{constructor(e,t,i,n,s,o,l,a,h,u=0,f){this.p=e,this.stack=t,this.state=i,this.reducePos=n,this.pos=s,this.score=o,this.buffer=l,this.bufferBase=a,this.curContext=h,this.lookAhead=u,this.parent=f}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let n=e.parser.context;return new N1(e,[],t,i,i,0,[],0,n?new Z8(n,n.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){let t=e>>19,i=e&65535,{parser:n}=this.p,s=n.dynamicPrecedence(i);if(s&&(this.score+=s),t==0){this.pushState(n.getGoto(this.state,i,!0),this.reducePos),i<n.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,4,!0),this.reduceContext(i,this.reducePos);return}let o=this.stack.length-(t-1)*3-(e&262144?6:0),l=this.stack[o-2],a=this.stack[o-1],h=this.bufferBase+this.buffer.length-a;if(i<n.minRepeatTerm||e&131072){let u=n.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,l,u,h+4,!0)}if(e&262144)this.state=this.stack[o];else{let u=this.stack[o-3];this.state=n.getGoto(u,i,!0)}for(;this.stack.length>o;)this.stack.pop();this.reduceContext(i,l)}storeNode(e,t,i,n=4,s=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,l=this.buffer.length;if(l==0&&o.parent&&(l=o.bufferBase-o.parent.bufferBase,o=o.parent),l>0&&o.buffer[l-4]==0&&o.buffer[l-1]>-1){if(t==i)return;if(o.buffer[l-2]>=t){o.buffer[l-2]=i;return}}}if(!s||this.pos==i)this.buffer.push(e,t,i,n);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0)for(;o>0&&this.buffer[o-2]>i;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,n>4&&(n-=4);this.buffer[o]=e,this.buffer[o+1]=t,this.buffer[o+2]=i,this.buffer[o+3]=n}}shift(e,t,i){let n=this.pos;if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let s=e,{parser:o}=this.p;(i>this.pos||t<=o.maxNode)&&(this.pos=i,o.stateFlag(s,1)||(this.reducePos=i)),this.pushState(s,n),this.shiftContext(t,n),t<=o.maxNode&&this.buffer.push(t,n,i,4)}else this.pos=i,this.shiftContext(t,n),t<=this.p.parser.maxNode&&this.buffer.push(t,n,i,4)}apply(e,t,i){e&65536?this.reduce(e):this.shift(e,t,i)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let n=this.pos;this.reducePos=this.pos=n+e.length,this.pushState(t,n),this.buffer.push(i,n,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),n=e.bufferBase+t;for(;e&&n==e.bufferBase;)e=e.parent;return new N1(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,n,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new SY(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if((i&65536)==0)return!0;if(i==0)return!1;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>4<<1||this.stack.length>=120){let n=[];for(let s=0,o;s<t.length;s+=2)(o=t[s+1])!=this.state&&this.p.parser.hasAction(o,e)&&n.push(t[s],o);if(this.stack.length<120)for(let s=0;n.length<4<<1&&s<t.length;s+=2){let o=t[s+1];n.some((l,a)=>a&1&&l==o)||n.push(t[s],o)}t=n}let i=[];for(let n=0;n<t.length&&i.length<4;n+=2){let s=t[n+1];if(s==this.state)continue;let o=this.split();o.pushState(s,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(t[n],this.pos),o.score-=200,i.push(o)}return i}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if((e&65536)==0)return!1;let{parser:t}=this.p;if(!t.validAction(this.state,e)){let i=e>>19,n=e&65535,s=this.stack.length-i*3;if(s<0||t.getGoto(this.stack[s],n,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new Z8(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class Z8{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}var G8;(function(r){r[r.Insert=200]="Insert",r[r.Delete=190]="Delete",r[r.Reduce=100]="Reduce",r[r.MaxNext=4]="MaxNext",r[r.MaxInsertStackDepth=300]="MaxInsertStackDepth",r[r.DampenInsertStackDepth=120]="DampenInsertStackDepth"})(G8||(G8={}));class SY{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let n=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=n}}class I1{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new I1(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new I1(this.stack,this.pos,this.index)}}class qm{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const U8=new qm;class xY{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=U8,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,n=this.rangeIndex,s=this.pos+e;for(;s<i.from;){if(!n)return null;let o=this.ranges[--n];s-=i.from-o.to,i=o}for(;t<0?s>i.to:s>=i.to;){if(n==this.ranges.length-1)return null;let o=this.ranges[++n];s+=o.from-i.to,i=o}return s}peek(e){let t=this.chunkOff+e,i,n;if(t>=0&&t<this.chunk.length)i=this.pos+e,n=this.chunk.charCodeAt(t);else{let s=this.resolveOffset(e,1);if(s==null)return-1;if(i=s,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let o=this.rangeIndex,l=this.range;for(;l.to<=i;)l=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-i)),n=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),n}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=U8,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let n of this.ranges){if(n.from>=t)break;n.to>e&&(i+=this.input.read(Math.max(n.from,e),Math.min(n.to,t)))}return i}}class Xm{constructor(e,t){this.data=e,this.id=t}token(e,t){CY(this.data,e,t,this.id)}}Xm.prototype.contextual=Xm.prototype.fallback=Xm.prototype.extend=!1;class dx{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function CY(r,e,t,i){let n=0,s=1<<i,{parser:o}=t.p,{dialect:l}=o;e:for(;(s&r[n])!=0;){let a=r[n+1];for(let c=n+3;c<a;c+=2)if((r[c+1]&s)>0){let d=r[c];if(l.allows(d)&&(e.token.value==-1||e.token.value==d||o.overrides(d,e.token.value))){e.acceptToken(d);break}}let h=e.next,u=0,f=r[n+2];if(e.next<0&&f>u&&r[a+f*3-3]==65535){n=r[a+f*3-1];continue e}for(;u<f;){let c=u+f>>1,d=a+c+(c<<1),g=r[d],w=r[d+1];if(h<g)f=c;else if(h>=w)u=c+1;else{n=r[d+2],e.advance();continue e}}break}}function Zg(r,e=Uint16Array){if(typeof r!="string")return r;let t=null;for(let i=0,n=0;i<r.length;){let s=0;for(;;){let o=r.charCodeAt(i++),l=!1;if(o==126){s=65535;break}o>=92&&o--,o>=34&&o--;let a=o-32;if(a>=46&&(a-=46,l=!0),s+=a,l)break;s*=46}t?t[n++]=s:t=new e(s)}return t}const Cs=typeof process!="undefined"&&process.env&&/\bparse\b/.test({}.LOG);let zk=null;var Y8;(function(r){r[r.Margin=25]="Margin"})(Y8||(Y8={}));function K8(r,e,t){let i=r.cursor(Fn.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(r.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:r.length}}class AY{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?K8(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?K8(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],n=this.index[t];if(n==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=i.children[n],o=this.start[t]+i.positions[n];if(o>e)return this.nextStart=o,null;if(s instanceof Er){if(o==e){if(o<this.safeFrom)return null;let l=o+s.length;if(l<=this.safeTo){let a=s.prop(ui.lookAhead);if(!a||l+a<this.fragment.to)return s}}this.index[t]++,o+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+s.length}}}class TY{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new qm)}getActions(e){let t=0,i=null,{parser:n}=e.p,{tokenizers:s}=n,o=n.stateSlot(e.state,3),l=e.curContext?e.curContext.hash:0,a=0;for(let h=0;h<s.length;h++){if((1<<h&o)==0)continue;let u=s[h],f=this.tokens[h];if(!(i&&!u.fallback)&&((u.contextual||f.start!=e.pos||f.mask!=o||f.context!=l)&&(this.updateCachedToken(f,u,e),f.mask=o,f.context=l),f.lookAhead>f.end+25&&(a=Math.max(f.lookAhead,a)),f.value!=0)){let c=t;if(f.extended>-1&&(t=this.addActions(e,f.extended,f.end,t)),t=this.addActions(e,f.value,f.end,t),!u.extend&&(i=f,t>c))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),!i&&e.pos==this.stream.end&&(i=new qm,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new qm,{pos:i,p:n}=e;return t.start=i,t.end=Math.min(i+1,n.stream.end),t.value=i==n.stream.end?n.parser.eofTerm:0,t}updateCachedToken(e,t,i){if(t.token(this.stream.reset(i.pos,e),i),e.value>-1){let{parser:n}=i.p;for(let s=0;s<n.specialized.length;s++)if(n.specialized[s]==e.value){let o=n.specializers[s](this.stream.read(e.start,e.end),i);if(o>=0&&i.p.parser.dialect.allows(o>>1)){(o&1)==0?e.value=o>>1:e.extended=o>>1;break}}}else e.value=0,e.end=Math.min(i.p.stream.end,i.pos+1)}putAction(e,t,i,n){for(let s=0;s<n;s+=3)if(this.actions[s]==e)return n;return this.actions[n++]=e,this.actions[n++]=t,this.actions[n++]=i,n}addActions(e,t,i,n){let{state:s}=e,{parser:o}=e.p,{data:l}=o;for(let a=0;a<2;a++)for(let h=o.stateSlot(s,a?2:1);;h+=3){if(l[h]==65535)if(l[h+1]==1)h=rl(l,h+2);else{n==0&&l[h+1]==2&&(n=this.putAction(rl(l,h+2),t,i,n));break}l[h]==t&&(n=this.putAction(rl(l,h+1),t,i,n))}return n}}var J8;(function(r){r[r.Distance=5]="Distance",r[r.MaxRemainingPerStep=3]="MaxRemainingPerStep",r[r.MinBufferLengthPrune=500]="MinBufferLengthPrune",r[r.ForceReduceLimit=10]="ForceReduceLimit",r[r.CutDepth=15e3]="CutDepth",r[r.CutTo=9e3]="CutTo"})(J8||(J8={}));class PY{constructor(e,t,i,n){this.parser=e,this.input=t,this.ranges=n,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new xY(t,n),this.tokens=new TY(e,this.stream),this.topTerm=e.top[1];let{from:s}=n[0];this.stacks=[N1.start(this,e.top[0],s)],this.fragments=i.length&&this.stream.end-s>e.bufferLength*4?new AY(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],n,s;for(let o=0;o<e.length;o++){let l=e[o];for(;;){if(this.tokens.mainToken=null,l.pos>t)i.push(l);else{if(this.advanceStack(l,i,e))continue;{n||(n=[],s=[]),n.push(l);let a=this.tokens.getMainToken(l);s.push(a.value,a.end)}}break}}if(!i.length){let o=n&&$Y(n);if(o)return this.stackToTree(o);if(this.parser.strict)throw Cs&&n&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&n){let o=this.stoppedAt!=null&&n[0].pos>this.stoppedAt?n[0]:this.runRecovery(n,s,i);if(o)return this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(i.length>o)for(i.sort((l,a)=>a.score-l.score);i.length>o;)i.pop();i.some(l=>l.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let o=0;o<i.length-1;o++){let l=i[o];for(let a=o+1;a<i.length;a++){let h=i[a];if(l.sameState(h)||l.buffer.length>500&&h.buffer.length>500)if((l.score-h.score||l.buffer.length-h.buffer.length)>0)i.splice(a--,1);else{i.splice(o--,1);continue e}}}}this.minStackPos=i[0].pos;for(let o=1;o<i.length;o++)i[o].pos<this.minStackPos&&(this.minStackPos=i[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let n=e.pos,{parser:s}=this,o=Cs?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&n>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let h=e.curContext&&e.curContext.tracker.strict,u=h?e.curContext.hash:0;for(let f=this.fragments.nodeAt(n);f;){let c=this.parser.nodeSet.types[f.type.id]==f.type?s.getGoto(e.state,f.type.id):-1;if(c>-1&&f.length&&(!h||(f.prop(ui.contextHash)||0)==u))return e.useNode(f,c),Cs&&console.log(o+this.stackID(e)+` (via reuse of ${s.getName(f.type.id)})`),!0;if(!(f instanceof Er)||f.children.length==0||f.positions[0]>0)break;let d=f.children[0];if(d instanceof Er&&f.positions[0]==0)f=d;else break}}let l=s.stateSlot(e.state,4);if(l>0)return e.reduce(l),Cs&&console.log(o+this.stackID(e)+` (via always-reduce ${s.getName(l&65535)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let a=this.tokens.getActions(e);for(let h=0;h<a.length;){let u=a[h++],f=a[h++],c=a[h++],d=h==a.length||!i,g=d?e:e.split();if(g.apply(u,f,c),Cs&&console.log(o+this.stackID(g)+` (via ${(u&65536)==0?"shift":`reduce of ${s.getName(u&65535)}`} for ${s.getName(f)} @ ${n}${g==e?"":", split"})`),d)return!0;g.pos>n?t.push(g):i.push(g)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return e_(e,t),!0}}runRecovery(e,t,i){let n=null,s=!1;for(let o=0;o<e.length;o++){let l=e[o],a=t[o<<1],h=t[(o<<1)+1],u=Cs?this.stackID(l)+" -> ":"";if(l.deadEnd&&(s||(s=!0,l.restart(),Cs&&console.log(u+this.stackID(l)+" (restarted)"),this.advanceFully(l,i))))continue;let f=l.split(),c=u;for(let d=0;f.forceReduce()&&d<10&&(Cs&&console.log(c+this.stackID(f)+" (via force-reduce)"),!this.advanceFully(f,i));d++)Cs&&(c=this.stackID(f)+" -> ");for(let d of l.recoverByInsert(a))Cs&&console.log(u+this.stackID(d)+" (via recover-insert)"),this.advanceFully(d,i);this.stream.end>l.pos?(h==l.pos&&(h++,a=0),l.recoverByDelete(a,h),Cs&&console.log(u+this.stackID(l)+` (via recover-delete ${this.parser.getName(a)})`),e_(l,i)):(!n||n.score<l.score)&&(n=l)}return n}stackToTree(e){return e.close(),Er.build({buffer:I1.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(zk||(zk=new WeakMap)).get(e);return t||zk.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function e_(r,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==r.pos&&i.sameState(r)){e[t].score<r.score&&(e[t]=r);return}}e.push(r)}class _Y{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}class L1 extends yY{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (${14})`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let l=0;l<e.repeatNodeCount;l++)t.push("");let i=Object.keys(e.topRules).map(l=>e.topRules[l][1]),n=[];for(let l=0;l<t.length;l++)n.push([]);function s(l,a,h){n[l].push([a,a.deserialize(String(h))])}if(e.nodeProps)for(let l of e.nodeProps){let a=l[0];typeof a=="string"&&(a=ui[a]);for(let h=1;h<l.length;){let u=l[h++];if(u>=0)s(u,a,l[h++]);else{let f=l[h+-u];for(let c=-u;c>0;c--)s(l[h++],a,f);h++}}}this.nodeSet=new hx(t.map((l,a)=>Qs.define({name:a>=this.minRepeatTerm?void 0:l,id:a,props:n[a],top:i.indexOf(a)>-1,error:a==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(a)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=LN;let o=Zg(e.tokenData);if(this.context=e.context,this.specialized=new Uint16Array(e.specialized?e.specialized.length:0),this.specializers=[],e.specialized)for(let l=0;l<e.specialized.length;l++)this.specialized[l]=e.specialized[l].term,this.specializers[l]=e.specialized[l].get;this.states=Zg(e.states,Uint32Array),this.data=Zg(e.stateData),this.goto=Zg(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(l=>typeof l=="number"?new Xm(o,l):l),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let n=new PY(this,e,t,i);for(let s of this.wrappers)n=s(n,e,t,i);return n}getGoto(e,t,i=!1){let n=this.goto;if(t>=n[0])return-1;for(let s=n[t+1];;){let o=n[s++],l=o&1,a=n[s++];if(l&&i)return a;for(let h=s+(o>>1);s<h;s++)if(n[s]==e)return a;if(l)return-1}}hasAction(e,t){let i=this.data;for(let n=0;n<2;n++)for(let s=this.stateSlot(e,n?2:1),o;;s+=3){if((o=i[s])==65535)if(i[s+1]==1)o=i[s=rl(i,s+2)];else{if(i[s+1]==2)return rl(i,s+2);break}if(o==t||o==0)return rl(i,s+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){if(t==this.stateSlot(e,4))return!0;for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=rl(this.data,i+2);else return!1;if(t==rl(this.data,i+1))return!0}}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=rl(this.data,i+2);else break;if((this.data[i+2]&1)==0){let n=this.data[i+1];t.some((s,o)=>o&1&&s==n)||t.push(this.data[i],n)}}return t}overrides(e,t){let i=t_(this.data,this.tokenPrecTable,t);return i<0||t_(this.data,this.tokenPrecTable,e)<i}configure(e){let t=Object.assign(Object.create(L1.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let n=e.tokenizers.find(s=>s.from==i);return n?n.to:i})),e.specializers&&(t.specializers=this.specializers.map(i=>{let n=e.specializers.find(s=>s.from==i);return n?n.to:i})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let s of e.split(" ")){let o=t.indexOf(s);o>=0&&(i[o]=!0)}let n=null;for(let s=0;s<t.length;s++)if(!i[s])for(let o=this.dialects[t[s]],l;(l=this.data[o++])!=65535;)(n||(n=new Uint8Array(this.maxTerm+1)))[l]=1;return new _Y(e,i,n)}static deserialize(e){return new L1(e)}}function rl(r,e){return r[e]|r[e+1]<<16}function t_(r,e,t){for(let i=e,n;(n=r[i])!=65535;i++)if(n==t)return i-e;return-1}function $Y(r){let e=null;for(let t of r){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}let MY=0;class Ao{constructor(e,t,i){this.set=e,this.base=t,this.modified=i,this.id=MY++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let t=new Ao([],null,[]);if(t.set.push(t),e)for(let i of e.set)t.set.push(i);return t}static defineModifier(){let e=new z1;return t=>t.modified.indexOf(e)>-1?t:z1.get(t.base||t,t.modified.concat(e).sort((i,n)=>i.id-n.id))}}let RY=0;class z1{constructor(){this.instances=[],this.id=RY++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(l=>l.base==e&&QY(t,l.modified));if(i)return i;let n=[],s=new Ao(n,e,t);for(let l of t)l.instances.push(s);let o=VN(t);for(let l of e.set)for(let a of o)n.push(z1.get(l,a));return s}}function QY(r,e){return r.length==e.length&&r.every((t,i)=>t==e[i])}function VN(r){let e=[r];for(let t=0;t<r.length;t++)for(let i of VN(r.slice(0,t).concat(r.slice(t+1))))e.push(i);return e}function DY(r){let e=Object.create(null);for(let t in r){let i=r[t];Array.isArray(i)||(i=[i]);for(let n of t.split(" "))if(n){let s=[],o=2,l=n;for(let f=0;;){if(l=="..."&&f>0&&f+3==n.length){o=1;break}let c=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!c)throw new RangeError("Invalid path: "+n);if(s.push(c[0]=="*"?"":c[0][0]=='"'?JSON.parse(c[0]):c[0]),f+=c[0].length,f==n.length)break;let d=n[f++];if(f==n.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+n);l=n.slice(f)}let a=s.length-1,h=s[a];if(!h)throw new RangeError("Invalid path: "+n);let u=new BY(i,o,a>0?s.slice(0,a):null);e[h]=u.sort(e[h])}}return EY.add(e)}const EY=new ui;class BY{constructor(e,t,i,n){this.tags=e,this.mode=t,this.context=i,this.next=n}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function NY(r,e){let t=Object.create(null);for(let s of r)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let o of s.tag)t[o.id]=s.class;let{scope:i,all:n=null}=e||{};return{style:s=>{let o=n;for(let l of s)for(let a of l.set){let h=t[a.id];if(h){o=o?o+" "+h:h;break}}return o},scope:i}}const be=Ao.define,Gg=be(),ql=be(),i_=be(ql),n_=be(ql),Xl=be(),Ug=be(Xl),Wk=be(Xl),bo=be(),rh=be(bo),eo=be(),to=be(),T2=be(),bc=be(T2),Yg=be(),Ce={comment:Gg,lineComment:be(Gg),blockComment:be(Gg),docComment:be(Gg),name:ql,variableName:be(ql),typeName:i_,tagName:be(i_),propertyName:n_,attributeName:be(n_),className:be(ql),labelName:be(ql),namespace:be(ql),macroName:be(ql),literal:Xl,string:Ug,docString:be(Ug),character:be(Ug),attributeValue:be(Ug),number:Wk,integer:be(Wk),float:be(Wk),bool:be(Xl),regexp:be(Xl),escape:be(Xl),color:be(Xl),url:be(Xl),keyword:eo,self:be(eo),null:be(eo),atom:be(eo),unit:be(eo),modifier:be(eo),operatorKeyword:be(eo),controlKeyword:be(eo),definitionKeyword:be(eo),moduleKeyword:be(eo),operator:to,derefOperator:be(to),arithmeticOperator:be(to),logicOperator:be(to),bitwiseOperator:be(to),compareOperator:be(to),updateOperator:be(to),definitionOperator:be(to),typeOperator:be(to),controlOperator:be(to),punctuation:T2,separator:be(T2),bracket:bc,angleBracket:be(bc),squareBracket:be(bc),paren:be(bc),brace:be(bc),content:bo,heading:rh,heading1:be(rh),heading2:be(rh),heading3:be(rh),heading4:be(rh),heading5:be(rh),heading6:be(rh),contentSeparator:be(bo),list:be(bo),quote:be(bo),emphasis:be(bo),strong:be(bo),link:be(bo),monospace:be(bo),strikethrough:be(bo),inserted:be(),deleted:be(),changed:be(),invalid:be(),meta:Yg,documentMeta:be(Yg),annotation:be(Yg),processingInstruction:be(Yg),definition:Ao.defineModifier(),constant:Ao.defineModifier(),function:Ao.defineModifier(),standard:Ao.defineModifier(),local:Ao.defineModifier(),special:Ao.defineModifier()};NY([{tag:Ce.link,class:"tok-link"},{tag:Ce.heading,class:"tok-heading"},{tag:Ce.emphasis,class:"tok-emphasis"},{tag:Ce.strong,class:"tok-strong"},{tag:Ce.keyword,class:"tok-keyword"},{tag:Ce.atom,class:"tok-atom"},{tag:Ce.bool,class:"tok-bool"},{tag:Ce.url,class:"tok-url"},{tag:Ce.labelName,class:"tok-labelName"},{tag:Ce.inserted,class:"tok-inserted"},{tag:Ce.deleted,class:"tok-deleted"},{tag:Ce.literal,class:"tok-literal"},{tag:Ce.string,class:"tok-string"},{tag:Ce.number,class:"tok-number"},{tag:[Ce.regexp,Ce.escape,Ce.special(Ce.string)],class:"tok-string2"},{tag:Ce.variableName,class:"tok-variableName"},{tag:Ce.local(Ce.variableName),class:"tok-variableName tok-local"},{tag:Ce.definition(Ce.variableName),class:"tok-variableName tok-definition"},{tag:Ce.special(Ce.variableName),class:"tok-variableName2"},{tag:Ce.definition(Ce.propertyName),class:"tok-propertyName tok-definition"},{tag:Ce.typeName,class:"tok-typeName"},{tag:Ce.namespace,class:"tok-namespace"},{tag:Ce.className,class:"tok-className"},{tag:Ce.macroName,class:"tok-macroName"},{tag:Ce.propertyName,class:"tok-propertyName"},{tag:Ce.operator,class:"tok-operator"},{tag:Ce.comment,class:"tok-comment"},{tag:Ce.meta,class:"tok-meta"},{tag:Ce.invalid,class:"tok-invalid"},{tag:Ce.punctuation,class:"tok-punctuation"}]);const IY=93,r_=1,LY=94,zY=95,s_=2,jN=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],WY=58,VY=40,FN=95,jY=91,Zm=45,FY=46,HY=35,qY=37;function W1(r){return r>=65&&r<=90||r>=97&&r<=122||r>=161}function XY(r){return r>=48&&r<=57}const ZY=new dx((r,e)=>{for(let t=!1,i=0,n=0;;n++){let{next:s}=r;if(W1(s)||s==Zm||s==FN||t&&XY(s))!t&&(s!=Zm||n>0)&&(t=!0),i===n&&s==Zm&&i++,r.advance();else{t&&r.acceptToken(s==VY?LY:i==2&&e.canShift(s_)?s_:zY);break}}}),GY=new dx(r=>{if(jN.includes(r.peek(-1))){let{next:e}=r;(W1(e)||e==FN||e==HY||e==FY||e==jY||e==WY||e==Zm)&&r.acceptToken(IY)}}),UY=new dx(r=>{if(!jN.includes(r.peek(-1))){let{next:e}=r;if(e==qY&&(r.advance(),r.acceptToken(r_)),W1(e)){do r.advance();while(W1(r.next));r.acceptToken(r_)}}}),YY=DY({"import charset namespace keyframes":Ce.definitionKeyword,"media supports":Ce.controlKeyword,"from to selector":Ce.keyword,NamespaceName:Ce.namespace,KeyframeName:Ce.labelName,TagName:Ce.tagName,ClassName:Ce.className,PseudoClassName:Ce.constant(Ce.className),IdName:Ce.labelName,"FeatureName PropertyName":Ce.propertyName,AttributeName:Ce.attributeName,NumberLiteral:Ce.number,KeywordQuery:Ce.keyword,UnaryQueryOp:Ce.operatorKeyword,"CallTag ValueName":Ce.atom,VariableName:Ce.variableName,Callee:Ce.operatorKeyword,Unit:Ce.unit,"UniversalSelector NestingSelector":Ce.definitionOperator,AtKeyword:Ce.keyword,MatchOp:Ce.compareOperator,"ChildOp SiblingOp, LogicOp":Ce.logicOperator,BinOp:Ce.arithmeticOperator,Important:Ce.modifier,Comment:Ce.blockComment,ParenthesizedContent:Ce.special(Ce.name),ColorLiteral:Ce.color,StringLiteral:Ce.string,":":Ce.punctuation,"PseudoOp #":Ce.derefOperator,"; ,":Ce.separator,"( )":Ce.paren,"[ ]":Ce.squareBracket,"{ }":Ce.brace}),KY={__proto__:null,lang:32,"nth-child":32,"nth-last-child":32,"nth-of-type":32,dir:32,url:60,"url-prefix":60,domain:60,regexp:60,selector:134},JY={__proto__:null,"@import":114,"@media":138,"@charset":142,"@namespace":146,"@keyframes":152,"@supports":164},eK={__proto__:null,not:128,only:128,from:158,to:160},tK=L1.deserialize({version:14,states:"7WOYQ[OOOOQP'#Cd'#CdOOQP'#Cc'#CcO!ZQ[O'#CfO!}QXO'#CaO#UQ[O'#ChO#aQ[O'#DPO#fQ[O'#DTOOQP'#Ec'#EcO#kQdO'#DeO$VQ[O'#DrO#kQdO'#DtO$hQ[O'#DvO$sQ[O'#DyO$xQ[O'#EPO%WQ[O'#EROOQS'#Eb'#EbOOQS'#ES'#ESQYQ[OOOOQP'#Cg'#CgOOQP,59Q,59QO!ZQ[O,59QO%_Q[O'#EVO%yQWO,58{O&RQ[O,59SO#aQ[O,59kO#fQ[O,59oO%_Q[O,59sO%_Q[O,59uO%_Q[O,59vO'bQ[O'#D`OOQS,58{,58{OOQP'#Ck'#CkOOQO'#C}'#C}OOQP,59S,59SO'iQWO,59SO'nQWO,59SOOQP'#DR'#DROOQP,59k,59kOOQO'#DV'#DVO'sQ`O,59oOOQS'#Cp'#CpO#kQdO'#CqO'{QvO'#CsO)VQtO,5:POOQO'#Cx'#CxO'iQWO'#CwO)kQWO'#CyOOQS'#Ef'#EfOOQO'#Dh'#DhO)pQ[O'#DoO*OQWO'#EiO$xQ[O'#DmO*^QWO'#DpOOQO'#Ej'#EjO%|QWO,5:^O*cQpO,5:`OOQS'#Dx'#DxO*kQWO,5:bO*pQ[O,5:bOOQO'#D{'#D{O*xQWO,5:eO*}QWO,5:kO+VQWO,5:mOOQS-E8Q-E8QOOQP1G.l1G.lO+yQXO,5:qOOQO-E8T-E8TOOQS1G.g1G.gOOQP1G.n1G.nO'iQWO1G.nO'nQWO1G.nOOQP1G/V1G/VO,WQ`O1G/ZO,qQXO1G/_O-XQXO1G/aO-oQXO1G/bO.VQXO'#CdO.zQWO'#DaOOQS,59z,59zO/PQWO,59zO/XQ[O,59zO/`QdO'#CoO/gQ[O'#DOOOQP1G/Z1G/ZO#kQdO1G/ZO/nQpO,59]OOQS,59_,59_O#kQdO,59aO/vQWO1G/kOOQS,59c,59cO/{Q!bO,59eO0TQWO'#DhO0`QWO,5:TO0eQWO,5:ZO$xQ[O,5:VO$xQ[O'#EYO0mQWO,5;TO0xQWO,5:XO%_Q[O,5:[OOQS1G/x1G/xOOQS1G/z1G/zOOQS1G/|1G/|O1ZQWO1G/|O1`QdO'#D|OOQS1G0P1G0POOQS1G0V1G0VOOQS1G0X1G0XOOQP7+$Y7+$YOOQP7+$u7+$uO#kQdO7+$uO#kQdO,59{O1nQ[O'#EXO1xQWO1G/fOOQS1G/f1G/fO1xQWO1G/fO2QQtO'#ETO2uQdO'#EeO3PQWO,59ZO3UQXO'#EhO3]QWO,59jO3bQpO7+$uOOQS1G.w1G.wOOQS1G.{1G.{OOQS7+%V7+%VO3jQWO1G/PO#kQdO1G/oOOQO1G/u1G/uOOQO1G/q1G/qO3oQWO,5:tOOQO-E8W-E8WO3}QXO1G/vOOQS7+%h7+%hO4UQYO'#CsO%|QWO'#EZO4^QdO,5:hOOQS,5:h,5:hO4lQpO<<HaO4tQtO1G/gOOQO,5:s,5:sO5XQ[O,5:sOOQO-E8V-E8VOOQS7+%Q7+%QO5cQWO7+%QOOQS-E8R-E8RO#kQdO'#EUO5kQWO,5;POOQT1G.u1G.uO5sQWO,5;SOOQP1G/U1G/UOOQP<<Ha<<HaOOQS7+$k7+$kO5{QdO7+%ZOOQO7+%b7+%bOOQS,5:u,5:uOOQS-E8X-E8XOOQS1G0S1G0SOOQPAN={AN={O6SQtO'#EWO#kQdO'#EWO6}QdO7+%ROOQO7+%R7+%ROOQO1G0_1G0_OOQS<<Hl<<HlO7_QdO,5:pOOQO-E8S-E8SOOQO<<Hu<<HuO7iQtO,5:rOOQS-E8U-E8UOOQO<<Hm<<Hm",stateData:"8j~O#TOSROS~OUWOXWO]TO^TOtUOxVO!Y_O!ZXO!gYO!iZO!k[O!n]O!t^O#RPO#WRO~O#RcO~O]hO^hOpfOtiOxjO|kO!PmO#PlO#WeO~O!RnO~P!`O`sO#QqO#RpO~O#RuO~O#RwO~OQ!QObzOf!QOh!QOn!PO#Q}O#RyO#Z{O~Ob!SO!b!UO!e!VO#R!RO!R#]P~Oh![On!PO#R!ZO~O#R!^O~Ob!SO!b!UO!e!VO#R!RO~O!W#]P~P$VOUWOXWO]TO^TOtUOxVO#RPO#WRO~OpfO!RnO~O`!hO#QqO#RpO~OQ!pOUWOXWO]TO^TOtUOxVO!Y_O!ZXO!gYO!iZO!k[O!n]O!t^O#R!oO#WRO~O!Q!qO~P&^Ob!tO~Ob!uO~Ov!vOz!wO~OP!yObgXjgX!WgX!bgX!egX#RgXagXQgXfgXhgXngXpgX#QgX#ZgXvgX!QgX!VgX~Ob!SOj!zO!b!UO!e!VO#R!RO!W#]P~Ob!}O~Ob!SO!b!UO!e!VO#R#OO~Op#SO!`#RO!R#]X!W#]X~Ob#VO~Oj!zO!W#XO~O!W#YO~Oh#ZOn!PO~O!R#[O~O!RnO!`#RO~O!RnO!W#_O~O]hO^hOtiOxjO|kO!PmO#PlO#WeO~Op!ya!R!yaa!ya~P+_Ov#aOz#bO~O]hO^hOtiOxjO#WeO~Op{i|{i!P{i!R{i#P{ia{i~P,`Op}i|}i!P}i!R}i#P}ia}i~P,`Op!Oi|!Oi!P!Oi!R!Oi#P!Oia!Oi~P,`O]WX]!UX^WXpWXtWXxWX|WX!PWX!RWX#PWX#WWX~O]#cO~O!Q#fO!W#dO~O!Q#fO~P&^Oa#XP~P#kOa#[P~P%_Oa#nOj!zO~O!W#pO~Oh#qOo#qO~O]!^Xa![X!`![X~O]#rO~Oa#sO!`#RO~Op#SO!R#]a!W#]a~O!`#ROp!aa!R!aa!W!aaa!aa~O!W#xO~O!Q#|O!q#zO!r#zO#Z#yO~O!Q!{X!W!{X~P&^O!Q$SO!W#dO~Oj!zOQ!wXa!wXb!wXf!wXh!wXn!wXp!wX#Q!wX#R!wX#Z!wX~Op$VOa#XX~P#kOa$XO~Oa#[X~P!`Oa$ZO~Oj!zOv$[O~Oa$]O~O!`#ROp!|a!R!|a!W!|a~Oa$_O~P+_OP!yO!RgX~O!Q$bO!q#zO!r#zO#Z#yO~Oj!zOv$cO~Oj!zOp$eO!V$gO!Q!Ti!W!Ti~P#kO!Q!{a!W!{a~P&^O!Q$iO!W#dO~Op$VOa#Xa~OpfOa#[a~Oa$lO~P#kOj!zOQ!zXb!zXf!zXh!zXn!zXp!zX!Q!zX!V!zX!W!zX#Q!zX#R!zX#Z!zX~Op$eO!V$oO!Q!Tq!W!Tq~P#kOa!xap!xa~P#kOj!zOQ!zab!zaf!zah!zan!zap!za!Q!za!V!za!W!za#Q!za#R!za#Z!za~Oo#Zj!Pj~",goto:",O#_PPPPP#`P#h#vP#h$U#hPP$[PPP$b$k$kP$}P$kP$k%e%wPPP&a&g#hP&mP#hP&sP#hP#h#hPPP&y']'iPP#`PP'o'o'y'oP'oP'o'oP#`P#`P#`P'|#`P(P(SPP#`P#`(V(e(s(y)T)Z)e)kPPPPPP)q)yP*e*hP+^+a+j]`Obn!s#d$QiWObfklmn!s!u#V#d$QiQObfklmn!s!u#V#d$QQdRR!ceQrTR!ghQ!gsQ!|!OR#`!hq!QXZz!t!w!z#b#c#i#r$O$V$^$e$f$jp!QXZz!t!w!z#b#c#i#r$O$V$^$e$f$jT#z#[#{q!OXZz!t!w!z#b#c#i#r$O$V$^$e$f$jp!QXZz!t!w!z#b#c#i#r$O$V$^$e$f$jQ![[R#Z!]QtTR!ihQ!gtR#`!iQvUR!jiQxVR!kjQoSQ!fgQ#W!XQ#^!`Q#_!aR$`#zQ!rnQ#g!sQ$P#dR$h$QX!pn!s#d$Qa!WY^_|!S!U#R#SR#P!SR!][R!_]R#]!_QbOU!bb!s$QQ!snR$Q#dQ#i!tU$U#i$^$jQ$^#rR$j$VQ$W#iR$k$WQgSS!eg$YR$Y#kQ$f$OR$n$fQ#e!rS$R#e$TR$T#gQ#T!TR#v#TQ#{#[R$a#{]aObn!s#d$Q[SObn!s#d$QQ!dfQ!lkQ!mlQ!nmQ#k!uR#w#VR#j!tQ|XQ!YZQ!xz[#h!t#i#r$V$^$jQ#m!wQ#o!zQ#}#bQ$O#cS$d$O$fR$m$eR#l!uQ!XYQ!a_R!{|U!TY_|Q!`^Q#Q!SQ#U!UQ#t#RR#u#S",nodeNames:"\u26A0 Unit VariableName Comment StyleSheet RuleSet UniversalSelector TagSelector TagName NestingSelector ClassSelector ClassName PseudoClassSelector : :: PseudoClassName PseudoClassName ) ( ArgList ValueName ParenthesizedValue ColorLiteral NumberLiteral StringLiteral BinaryExpression BinOp CallExpression Callee CallLiteral CallTag ParenthesizedContent , PseudoClassName ArgList IdSelector # IdName ] AttributeSelector [ AttributeName MatchOp ChildSelector ChildOp DescendantSelector SiblingSelector SiblingOp } { Block Declaration PropertyName Important ; ImportStatement AtKeyword import KeywordQuery FeatureQuery FeatureName BinaryQuery LogicOp UnaryQuery UnaryQueryOp ParenthesizedQuery SelectorQuery selector MediaStatement media CharsetStatement charset NamespaceStatement namespace NamespaceName KeyframesStatement keyframes KeyframeName KeyframeList from to SupportsStatement supports AtRule",maxTerm:106,nodeProps:[["openedBy",17,"(",48,"{"],["closedBy",18,")",49,"}"]],propSources:[YY],skippedNodes:[0,3],repeatNodeCount:8,tokenData:"Ay~R![OX$wX^%]^p$wpq%]qr(crs+}st,otu2Uuv$wvw2rwx2}xy3jyz3uz{3z{|4_|}8U}!O8a!O!P8x!P!Q9Z!Q![;e![!]<Y!]!^<x!^!_$w!_!`=T!`!a=`!a!b$w!b!c>O!c!}$w!}#O?[#O#P$w#P#Q?g#Q#R2U#R#T$w#T#U?r#U#c$w#c#d@q#d#o$w#o#pAQ#p#q2U#q#rA]#r#sAh#s#y$w#y#z%]#z$f$w$f$g%]$g#BY$w#BY#BZ%]#BZ$IS$w$IS$I_%]$I_$I|$w$I|$JO%]$JO$JT$w$JT$JU%]$JU$KV$w$KV$KW%]$KW&FU$w&FU&FV%]&FV~$wW$zQOy%Qz~%QW%VQoWOy%Qz~%Q~%bf#T~OX%QX^&v^p%Qpq&vqy%Qz#y%Q#y#z&v#z$f%Q$f$g&v$g#BY%Q#BY#BZ&v#BZ$IS%Q$IS$I_&v$I_$I|%Q$I|$JO&v$JO$JT%Q$JT$JU&v$JU$KV%Q$KV$KW&v$KW&FU%Q&FU&FV&v&FV~%Q~&}f#T~oWOX%QX^&v^p%Qpq&vqy%Qz#y%Q#y#z&v#z$f%Q$f$g&v$g#BY%Q#BY#BZ&v#BZ$IS%Q$IS$I_&v$I_$I|%Q$I|$JO&v$JO$JT%Q$JT$JU&v$JU$KV%Q$KV$KW&v$KW&FU%Q&FU&FV&v&FV~%Q^(fSOy%Qz#]%Q#]#^(r#^~%Q^(wSoWOy%Qz#a%Q#a#b)T#b~%Q^)YSoWOy%Qz#d%Q#d#e)f#e~%Q^)kSoWOy%Qz#c%Q#c#d)w#d~%Q^)|SoWOy%Qz#f%Q#f#g*Y#g~%Q^*_SoWOy%Qz#h%Q#h#i*k#i~%Q^*pSoWOy%Qz#T%Q#T#U*|#U~%Q^+RSoWOy%Qz#b%Q#b#c+_#c~%Q^+dSoWOy%Qz#h%Q#h#i+p#i~%Q^+wQ!VUoWOy%Qz~%Q~,QUOY+}Zr+}rs,ds#O+}#O#P,i#P~+}~,iOh~~,lPO~+}_,tWtPOy%Qz!Q%Q!Q![-^![!c%Q!c!i-^!i#T%Q#T#Z-^#Z~%Q^-cWoWOy%Qz!Q%Q!Q![-{![!c%Q!c!i-{!i#T%Q#T#Z-{#Z~%Q^.QWoWOy%Qz!Q%Q!Q![.j![!c%Q!c!i.j!i#T%Q#T#Z.j#Z~%Q^.qWfUoWOy%Qz!Q%Q!Q![/Z![!c%Q!c!i/Z!i#T%Q#T#Z/Z#Z~%Q^/bWfUoWOy%Qz!Q%Q!Q![/z![!c%Q!c!i/z!i#T%Q#T#Z/z#Z~%Q^0PWoWOy%Qz!Q%Q!Q![0i![!c%Q!c!i0i!i#T%Q#T#Z0i#Z~%Q^0pWfUoWOy%Qz!Q%Q!Q![1Y![!c%Q!c!i1Y!i#T%Q#T#Z1Y#Z~%Q^1_WoWOy%Qz!Q%Q!Q![1w![!c%Q!c!i1w!i#T%Q#T#Z1w#Z~%Q^2OQfUoWOy%Qz~%QY2XSOy%Qz!_%Q!_!`2e!`~%QY2lQzQoWOy%Qz~%QX2wQXPOy%Qz~%Q~3QUOY2}Zw2}wx,dx#O2}#O#P3d#P~2}~3gPO~2}_3oQbVOy%Qz~%Q~3zOa~_4RSUPjSOy%Qz!_%Q!_!`2e!`~%Q_4fUjS!PPOy%Qz!O%Q!O!P4x!P!Q%Q!Q![7_![~%Q^4}SoWOy%Qz!Q%Q!Q![5Z![~%Q^5bWoW#ZUOy%Qz!Q%Q!Q![5Z![!g%Q!g!h5z!h#X%Q#X#Y5z#Y~%Q^6PWoWOy%Qz{%Q{|6i|}%Q}!O6i!O!Q%Q!Q![6z![~%Q^6nSoWOy%Qz!Q%Q!Q![6z![~%Q^7RSoW#ZUOy%Qz!Q%Q!Q![6z![~%Q^7fYoW#ZUOy%Qz!O%Q!O!P5Z!P!Q%Q!Q![7_![!g%Q!g!h5z!h#X%Q#X#Y5z#Y~%Q_8ZQpVOy%Qz~%Q^8fUjSOy%Qz!O%Q!O!P4x!P!Q%Q!Q![7_![~%Q_8}S#WPOy%Qz!Q%Q!Q![5Z![~%Q~9`RjSOy%Qz{9i{~%Q~9nSoWOy9iyz9zz{:o{~9i~9}ROz9zz{:W{~9z~:ZTOz9zz{:W{!P9z!P!Q:j!Q~9z~:oOR~~:tUoWOy9iyz9zz{:o{!P9i!P!Q;W!Q~9i~;_QoWR~Oy%Qz~%Q^;jY#ZUOy%Qz!O%Q!O!P5Z!P!Q%Q!Q![7_![!g%Q!g!h5z!h#X%Q#X#Y5z#Y~%QX<_S]POy%Qz![%Q![!]<k!]~%QX<rQ^PoWOy%Qz~%Q_<}Q!WVOy%Qz~%QY=YQzQOy%Qz~%QX=eS|POy%Qz!`%Q!`!a=q!a~%QX=xQ|PoWOy%Qz~%QX>RUOy%Qz!c%Q!c!}>e!}#T%Q#T#o>e#o~%QX>lY!YPoWOy%Qz}%Q}!O>e!O!Q%Q!Q![>e![!c%Q!c!}>e!}#T%Q#T#o>e#o~%QX?aQxPOy%Qz~%Q^?lQvUOy%Qz~%QX?uSOy%Qz#b%Q#b#c@R#c~%QX@WSoWOy%Qz#W%Q#W#X@d#X~%QX@kQ!`PoWOy%Qz~%QX@tSOy%Qz#f%Q#f#g@d#g~%QXAVQ!RPOy%Qz~%Q_AbQ!QVOy%Qz~%QZAmS!PPOy%Qz!_%Q!_!`2e!`~%Q",tokenizers:[GY,UY,ZY,0,1,2,3],topRules:{StyleSheet:[0,4]},specialized:[{term:94,get:r=>KY[r]||-1},{term:56,get:r=>JY[r]||-1},{term:95,get:r=>eK[r]||-1}],tokenPrec:1078}),iK=1024;let nK=0;class Vk{constructor(e,t){this.from=e,this.to=t}}class Gt{constructor(e={}){this.id=nK++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=ps.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}Gt.closedBy=new Gt({deserialize:r=>r.split(" ")});Gt.openedBy=new Gt({deserialize:r=>r.split(" ")});Gt.group=new Gt({deserialize:r=>r.split(" ")});Gt.contextHash=new Gt({perNode:!0});Gt.lookAhead=new Gt({perNode:!0});Gt.mounted=new Gt({perNode:!0});const rK=Object.create(null);class ps{constructor(e,t,i,n=0){this.name=e,this.props=t,this.id=i,this.flags=n}static define(e){let t=e.props&&e.props.length?Object.create(null):rK,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),n=new ps(e.name||"",t,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(n)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return n}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Gt.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let n of i.split(" "))t[n]=e[i];return i=>{for(let n=i.prop(Gt.group),s=-1;s<(n?n.length:0);s++){let o=t[s<0?i.name:n[s]];if(o)return o}}}}ps.none=new ps("",Object.create(null),0,8);const Kg=new WeakMap,o_=new WeakMap;var Hn;(function(r){r[r.ExcludeBuffers=1]="ExcludeBuffers",r[r.IncludeAnonymous=2]="IncludeAnonymous",r[r.IgnoreMounts=4]="IgnoreMounts",r[r.IgnoreOverlays=8]="IgnoreOverlays"})(Hn||(Hn={}));class ir{constructor(e,t,i,n,s){if(this.type=e,this.children=t,this.positions=i,this.length=n,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,l]of s)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=this.prop(Gt.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let n=i.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new F1(this.topNode,e)}cursorAt(e,t=0,i=0){let n=Kg.get(this)||this.topNode,s=new F1(n);return s.moveTo(e,t),Kg.set(this,s._tree),s}get topNode(){return new Cl(this,0,0,null)}resolve(e,t=0){let i=Rf(Kg.get(this)||this.topNode,e,t,!1);return Kg.set(this,i),i}resolveInner(e,t=0){let i=Rf(o_.get(this)||this.topNode,e,t,!0);return o_.set(this,i),i}iterate(e){let{enter:t,leave:i,from:n=0,to:s=this.length}=e;for(let o=this.cursor((e.mode||0)|Hn.IncludeAnonymous);;){let l=!1;if(o.from<=s&&o.to>=n&&(o.type.isAnonymous||t(o)!==!1)){if(o.firstChild())continue;l=!0}for(;l&&i&&!o.type.isAnonymous&&i(o),!o.nextSibling();){if(!o.parent())return;l=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:mx(ps.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,n)=>new ir(this.type,t,i,n,this.propValues),e.makeTree||((t,i,n)=>new ir(ps.none,t,i,n)))}static build(e){return oK(e)}}ir.empty=new ir(ps.none,[],[],0);class px{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new px(this.buffer,this.index)}}class Kh{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return ps.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],n=this.set.types[t],s=n.name;if(/\W/.test(s)&&!n.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,t,i,n,s){let{buffer:o}=this,l=-1;for(let a=e;a!=t&&!(HN(s,n,o[a+1],o[a+2])&&(l=a,i>0));a=o[a+3]);return l}slice(e,t,i,n){let s=this.buffer,o=new Uint16Array(t-e);for(let l=e,a=0;l<t;)o[a++]=s[l++],o[a++]=s[l++]-i,o[a++]=s[l++]-i,o[a++]=s[l++]-e;return new Kh(o,n-i,this.set)}}function HN(r,e,t,i){switch(r){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function qN(r,e){let t=r.childBefore(e);for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(r=t,t=i.prevSibling):t=i}return r}function Rf(r,e,t,i){for(var n;r.from==r.to||(t<1?r.from>=e:r.from>e)||(t>-1?r.to<=e:r.to<e);){let o=!i&&r instanceof Cl&&r.index<0?null:r.parent;if(!o)return r;r=o}let s=i?0:Hn.IgnoreOverlays;if(i)for(let o=r,l=o.parent;l;o=l,l=o.parent)o instanceof Cl&&o.index<0&&((n=l.enter(e,t,s))===null||n===void 0?void 0:n.from)!=o.from&&(r=l);for(;;){let o=r.enter(e,t,s);if(!o)return r;r=o}}class Cl{constructor(e,t,i,n){this._tree=e,this.from=t,this.index=i,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,n,s=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,h=t>0?l.length:-1;e!=h;e+=t){let u=l[e],f=a[e]+o.from;if(!!HN(n,i,f,f+u.length)){if(u instanceof Kh){if(s&Hn.ExcludeBuffers)continue;let c=u.findChild(0,u.buffer.length,t,i-f,n);if(c>-1)return new _a(new sK(o,u,e,f),null,c)}else if(s&Hn.IncludeAnonymous||!u.type.isAnonymous||gx(u)){let c;if(!(s&Hn.IgnoreMounts)&&u.props&&(c=u.prop(Gt.mounted))&&!c.overlay)return new Cl(c.tree,f,e,o);let d=new Cl(u,f,e,o);return s&Hn.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(t<0?u.children.length-1:0,t,i,n)}}}if(s&Hn.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let n;if(!(i&Hn.IgnoreOverlays)&&(n=this._tree.prop(Gt.mounted))&&n.overlay){let s=e-this.from;for(let{from:o,to:l}of n.overlay)if((t>0?o<=s:o<s)&&(t<0?l>=s:l>s))return new Cl(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new F1(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return Rf(this,e,t,!1)}resolveInner(e,t=0){return Rf(this,e,t,!0)}enterUnfinishedNodesBefore(e){return qN(this,e)}getChild(e,t=null,i=null){let n=V1(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return V1(this,e,t,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return j1(this,e)}}function V1(r,e,t,i){let n=r.cursor(),s=[];if(!n.firstChild())return s;if(t!=null){for(;!n.type.is(t);)if(!n.nextSibling())return s}for(;;){if(i!=null&&n.type.is(i))return s;if(n.type.is(e)&&s.push(n.node),!n.nextSibling())return i==null?s:[]}}function j1(r,e,t=e.length-1){for(let i=r.parent;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class sK{constructor(e,t,i,n){this.parent=e,this.buffer=t,this.index=i,this.start=n}}class _a{constructor(e,t,i){this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,i){let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.context.start,i);return s<0?null:new _a(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&Hn.ExcludeBuffers)return null;let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new _a(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new _a(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new _a(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new F1(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,n=this.index+4,s=i.buffer[this.index+3];if(s>n){let o=i.buffer[this.index+1],l=i.buffer[this.index+2];e.push(i.slice(n,s,o,l)),t.push(0)}return new ir(this.type,e,t,this.to-this.from)}resolve(e,t=0){return Rf(this,e,t,!1)}resolveInner(e,t=0){return Rf(this,e,t,!0)}enterUnfinishedNodesBefore(e){return qN(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,i=null){let n=V1(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return V1(this,e,t,i)}get node(){return this}matchContext(e){return j1(this,e)}}class F1{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Cl)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=i+n.buffer[e+1],this.to=i+n.buffer[e+2],!0}yield(e){return e?e instanceof Cl?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:n}=this.buffer,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&Hn.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Hn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Hn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let n=i<0?0:this.stack[i]+4;if(this.index!=n)return this.yieldBuf(t.findChild(n,this.index,-1,0,4))}else{let n=t.buffer[this.index+3];if(n<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(n)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(n.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:i}=n)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let s=t+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let l=i._tree.children[s];if(this.mode&Hn.IncludeAnonymous||l instanceof Kh||!l.type.isAnonymous||gx(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer){e:for(let n=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==n){if(n==this.index)return o;t=o,i=s+1;break e}n=this.stack[--s]}}for(let n=i;n<this.stack.length;n++)t=new _a(this.buffer,t,this.stack[n]);return this.bufferNode=new _a(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let n=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(n=!0)}for(;n&&t&&t(this),n=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,n=!0}}}matchContext(e){if(!this.buffer)return j1(this.node,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let n=e.length-1,s=this.stack.length-1;n>=0;s--){if(s<0)return j1(this.node,e,n);let o=i[t.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[n]&&e[n]!=o.name)return!1;n--}}return!0}}function gx(r){return r.children.some(e=>e instanceof Kh||!e.type.isAnonymous||gx(e))}function oK(r){var e;let{buffer:t,nodeSet:i,maxBufferLength:n=iK,reused:s=[],minRepeatType:o=i.types.length}=r,l=Array.isArray(t)?new px(t,t.length):t,a=i.types,h=0,u=0;function f(p,b,m,k,C){let{id:v,start:y,end:T,size:E}=l,$=u;for(;E<0;)if(l.next(),E==-1){let L=s[v];m.push(L),k.push(y-p);return}else if(E==-3){h=v;return}else if(E==-4){u=v;return}else throw new RangeError(`Unrecognized record size: ${E}`);let R=a[v],N,_,W=y-p;if(T-y<=n&&(_=w(l.pos-b,C))){let L=new Uint16Array(_.size-_.skip),I=l.pos-_.size,j=L.length;for(;l.pos>I;)j=S(_.start,L,j);N=new Kh(L,T-_.start,i),W=_.start-p}else{let L=l.pos-E;l.next();let I=[],j=[],X=v>=o?v:-1,Z=0,ie=T;for(;l.pos>L;)X>=0&&l.id==X&&l.size>=0?(l.end<=ie-n&&(d(I,j,y,Z,l.end,ie,X,$),Z=I.length,ie=l.end),l.next()):f(y,L,I,j,X);if(X>=0&&Z>0&&Z<I.length&&d(I,j,y,Z,y,ie,X,$),I.reverse(),j.reverse(),X>-1&&Z>0){let G=c(R);N=mx(R,I,j,0,I.length,0,T-y,G,G)}else N=g(R,I,j,T-y,$-T)}m.push(N),k.push(W)}function c(p){return(b,m,k)=>{let C=0,v=b.length-1,y,T;if(v>=0&&(y=b[v])instanceof ir){if(!v&&y.type==p&&y.length==k)return y;(T=y.prop(Gt.lookAhead))&&(C=m[v]+y.length+T)}return g(p,b,m,k,C)}}function d(p,b,m,k,C,v,y,T){let E=[],$=[];for(;p.length>k;)E.push(p.pop()),$.push(b.pop()+m-C);p.push(g(i.types[y],E,$,v-C,T-v)),b.push(C-m)}function g(p,b,m,k,C=0,v){if(h){let y=[Gt.contextHash,h];v=v?[y].concat(v):[y]}if(C>25){let y=[Gt.lookAhead,C];v=v?[y].concat(v):[y]}return new ir(p,b,m,k,v)}function w(p,b){let m=l.fork(),k=0,C=0,v=0,y=m.end-n,T={size:0,start:0,skip:0};e:for(let E=m.pos-p;m.pos>E;){let $=m.size;if(m.id==b&&$>=0){T.size=k,T.start=C,T.skip=v,v+=4,k+=4,m.next();continue}let R=m.pos-$;if($<0||R<E||m.start<y)break;let N=m.id>=o?4:0,_=m.start;for(m.next();m.pos>R;){if(m.size<0)if(m.size==-3)N+=4;else break e;else m.id>=o&&(N+=4);m.next()}C=_,k+=$,v+=N}return(b<0||k==p)&&(T.size=k,T.start=C,T.skip=v),T.size>4?T:void 0}function S(p,b,m){let{id:k,start:C,end:v,size:y}=l;if(l.next(),y>=0&&k<o){let T=m;if(y>4){let E=l.pos-(y-4);for(;l.pos>E;)m=S(p,b,m)}b[--m]=T,b[--m]=v-p,b[--m]=C-p,b[--m]=k}else y==-3?h=k:y==-4&&(u=k);return m}let x=[],Q=[];for(;l.pos>0;)f(r.start||0,r.bufferStart||0,x,Q,-1);let M=(e=r.length)!==null&&e!==void 0?e:x.length?Q[0]+x[0].length:0;return new ir(a[r.topID],x.reverse(),Q.reverse(),M)}const l_=new WeakMap;function Gm(r,e){if(!r.isAnonymous||e instanceof Kh||e.type!=r)return 1;let t=l_.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=r||!(i instanceof ir)){t=1;break}t+=Gm(r,i)}l_.set(e,t)}return t}function mx(r,e,t,i,n,s,o,l,a){let h=0;for(let g=i;g<n;g++)h+=Gm(r,e[g]);let u=Math.ceil(h*1.5/8),f=[],c=[];function d(g,w,S,x,Q){for(let M=S;M<x;){let p=M,b=w[M],m=Gm(r,g[M]);for(M++;M<x;M++){let k=Gm(r,g[M]);if(m+k>=u)break;m+=k}if(M==p+1){if(m>u){let k=g[p];d(k.children,k.positions,0,k.children.length,w[p]+Q);continue}f.push(g[p])}else{let k=w[M-1]+g[M-1].length-b;f.push(mx(r,g,w,p,M,b,k,null,a))}c.push(b+Q-s)}}return d(e,t,i,n,0),(l||a)(f,c,o)}class Mh{constructor(e,t,i,n,s=!1,o=!1){this.from=e,this.to=t,this.tree=i,this.offset=n,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let n=[new Mh(0,e.length,e,0,!1,i)];for(let s of t)s.to>e.length&&n.push(s);return n}static applyChanges(e,t,i=128){if(!t.length)return e;let n=[],s=1,o=e.length?e[0]:null;for(let l=0,a=0,h=0;;l++){let u=l<t.length?t[l]:null,f=u?u.fromA:1e9;if(f-a>=i)for(;o&&o.from<f;){let c=o;if(a>=c.from||f<=c.to||h){let d=Math.max(c.from,a)-h,g=Math.min(c.to,f)-h;c=d>=g?null:new Mh(d,g,c.tree,c.offset+h,l>0,!!u)}if(c&&n.push(c),o.to>f)break;o=s<e.length?e[s++]:null}if(!u)break;a=u.toA,h=u.toA-u.toB}return n}}class lK{startParse(e,t,i){return typeof e=="string"&&(e=new aK(e)),i=i?i.length?i.map(n=>new Vk(n.from,n.to)):[new Vk(0,0)]:[new Vk(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let n=this.startParse(e,t,i);for(;;){let s=n.advance();if(s)return s}}}class aK{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Gt({perNode:!0});let hK=0;class To{constructor(e,t,i){this.set=e,this.base=t,this.modified=i,this.id=hK++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let t=new To([],null,[]);if(t.set.push(t),e)for(let i of e.set)t.set.push(i);return t}static defineModifier(){let e=new H1;return t=>t.modified.indexOf(e)>-1?t:H1.get(t.base||t,t.modified.concat(e).sort((i,n)=>i.id-n.id))}}let uK=0;class H1{constructor(){this.instances=[],this.id=uK++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(l=>l.base==e&&fK(t,l.modified));if(i)return i;let n=[],s=new To(n,e,t);for(let l of t)l.instances.push(s);let o=XN(t);for(let l of e.set)for(let a of o)n.push(H1.get(l,a));return s}}function fK(r,e){return r.length==e.length&&r.every((t,i)=>t==e[i])}function XN(r){let e=[r];for(let t=0;t<r.length;t++)for(let i of XN(r.slice(0,t).concat(r.slice(t+1))))e.push(i);return e}function cK(r){let e=Object.create(null);for(let t in r){let i=r[t];Array.isArray(i)||(i=[i]);for(let n of t.split(" "))if(n){let s=[],o=2,l=n;for(let f=0;;){if(l=="..."&&f>0&&f+3==n.length){o=1;break}let c=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!c)throw new RangeError("Invalid path: "+n);if(s.push(c[0]=="*"?"":c[0][0]=='"'?JSON.parse(c[0]):c[0]),f+=c[0].length,f==n.length)break;let d=n[f++];if(f==n.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+n);l=n.slice(f)}let a=s.length-1,h=s[a];if(!h)throw new RangeError("Invalid path: "+n);let u=new pK(i,o,a>0?s.slice(0,a):null);e[h]=u.sort(e[h])}}return dK.add(e)}const dK=new Gt;class pK{constructor(e,t,i,n){this.tags=e,this.mode=t,this.context=i,this.next=n}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function gK(r,e){let t=Object.create(null);for(let s of r)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let o of s.tag)t[o.id]=s.class;let{scope:i,all:n=null}=e||{};return{style:s=>{let o=n;for(let l of s)for(let a of l.set){let h=t[a.id];if(h){o=o?o+" "+h:h;break}}return o},scope:i}}const Oe=To.define,Jg=Oe(),Zl=Oe(),a_=Oe(Zl),h_=Oe(Zl),Gl=Oe(),em=Oe(Gl),jk=Oe(Gl),Oo=Oe(),sh=Oe(Oo),io=Oe(),no=Oe(),P2=Oe(),Oc=Oe(P2),tm=Oe(),ft={comment:Jg,lineComment:Oe(Jg),blockComment:Oe(Jg),docComment:Oe(Jg),name:Zl,variableName:Oe(Zl),typeName:a_,tagName:Oe(a_),propertyName:h_,attributeName:Oe(h_),className:Oe(Zl),labelName:Oe(Zl),namespace:Oe(Zl),macroName:Oe(Zl),literal:Gl,string:em,docString:Oe(em),character:Oe(em),attributeValue:Oe(em),number:jk,integer:Oe(jk),float:Oe(jk),bool:Oe(Gl),regexp:Oe(Gl),escape:Oe(Gl),color:Oe(Gl),url:Oe(Gl),keyword:io,self:Oe(io),null:Oe(io),atom:Oe(io),unit:Oe(io),modifier:Oe(io),operatorKeyword:Oe(io),controlKeyword:Oe(io),definitionKeyword:Oe(io),moduleKeyword:Oe(io),operator:no,derefOperator:Oe(no),arithmeticOperator:Oe(no),logicOperator:Oe(no),bitwiseOperator:Oe(no),compareOperator:Oe(no),updateOperator:Oe(no),definitionOperator:Oe(no),typeOperator:Oe(no),controlOperator:Oe(no),punctuation:P2,separator:Oe(P2),bracket:Oc,angleBracket:Oe(Oc),squareBracket:Oe(Oc),paren:Oe(Oc),brace:Oe(Oc),content:Oo,heading:sh,heading1:Oe(sh),heading2:Oe(sh),heading3:Oe(sh),heading4:Oe(sh),heading5:Oe(sh),heading6:Oe(sh),contentSeparator:Oe(Oo),list:Oe(Oo),quote:Oe(Oo),emphasis:Oe(Oo),strong:Oe(Oo),link:Oe(Oo),monospace:Oe(Oo),strikethrough:Oe(Oo),inserted:Oe(),deleted:Oe(),changed:Oe(),invalid:Oe(),meta:tm,documentMeta:Oe(tm),annotation:Oe(tm),processingInstruction:Oe(tm),definition:To.defineModifier(),constant:To.defineModifier(),function:To.defineModifier(),standard:To.defineModifier(),local:To.defineModifier(),special:To.defineModifier()};gK([{tag:ft.link,class:"tok-link"},{tag:ft.heading,class:"tok-heading"},{tag:ft.emphasis,class:"tok-emphasis"},{tag:ft.strong,class:"tok-strong"},{tag:ft.keyword,class:"tok-keyword"},{tag:ft.atom,class:"tok-atom"},{tag:ft.bool,class:"tok-bool"},{tag:ft.url,class:"tok-url"},{tag:ft.labelName,class:"tok-labelName"},{tag:ft.inserted,class:"tok-inserted"},{tag:ft.deleted,class:"tok-deleted"},{tag:ft.literal,class:"tok-literal"},{tag:ft.string,class:"tok-string"},{tag:ft.number,class:"tok-number"},{tag:[ft.regexp,ft.escape,ft.special(ft.string)],class:"tok-string2"},{tag:ft.variableName,class:"tok-variableName"},{tag:ft.local(ft.variableName),class:"tok-variableName tok-local"},{tag:ft.definition(ft.variableName),class:"tok-variableName tok-definition"},{tag:ft.special(ft.variableName),class:"tok-variableName2"},{tag:ft.definition(ft.propertyName),class:"tok-propertyName tok-definition"},{tag:ft.typeName,class:"tok-typeName"},{tag:ft.namespace,class:"tok-namespace"},{tag:ft.className,class:"tok-className"},{tag:ft.macroName,class:"tok-macroName"},{tag:ft.propertyName,class:"tok-propertyName"},{tag:ft.operator,class:"tok-operator"},{tag:ft.comment,class:"tok-comment"},{tag:ft.meta,class:"tok-meta"},{tag:ft.invalid,class:"tok-invalid"},{tag:ft.punctuation,class:"tok-punctuation"}]);var Fk;const q1=new Gt;function mK(r){return Ie.define({combine:r?e=>e.concat(r):void 0})}class Lo{constructor(e,t,i=[]){this.data=e,it.prototype.hasOwnProperty("tree")||Object.defineProperty(it.prototype,"tree",{get(){return Z1(this)}}),this.parser=t,this.extension=[Df.of(this),it.languageData.of((n,s,o)=>n.facet(u_(n,s,o)))].concat(i)}isActiveAt(e,t,i=-1){return u_(e,t,i)==this.data}findRegions(e){let t=e.facet(Df);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],n=(s,o)=>{if(s.prop(q1)==this.data){i.push({from:o,to:o+s.length});return}let l=s.prop(Gt.mounted);if(l){if(l.tree.prop(q1)==this.data){if(l.overlay)for(let a of l.overlay)i.push({from:a.from+o,to:a.to+o});else i.push({from:o,to:o+s.length});return}else if(l.overlay){let a=i.length;if(n(l.tree,l.overlay[0].from+o),i.length>a)return}}for(let a=0;a<s.children.length;a++){let h=s.children[a];h instanceof ir&&n(h,s.positions[a]+o)}};return n(Z1(e),0),i}get allowsNesting(){return!0}}Lo.setState=xt.define();function u_(r,e,t){let i=r.facet(Df);if(!i)return null;let n=i.data;if(i.allowsNesting)for(let s=Z1(r).topNode;s;s=s.enter(e,t,Hn.ExcludeBuffers))n=s.type.prop(q1)||n;return n}class X1 extends Lo{constructor(e,t){super(e,t),this.parser=t}static define(e){let t=mK(e.languageData);return new X1(t,e.parser.configure({props:[q1.add(i=>i.isTop?t:void 0)]}))}configure(e){return new X1(this.data,this.parser.configure(e))}get allowsNesting(){return this.parser.hasWrappers()}}function Z1(r){let e=r.field(Lo.state,!1);return e?e.tree:ir.empty}class bK{constructor(e,t=e.length){this.doc=e,this.length=t,this.cursorPos=0,this.string="",this.cursor=e.iter()}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let kc=null;class G1{constructor(e,t,i=[],n,s,o,l,a){this.parser=e,this.state=t,this.fragments=i,this.tree=n,this.treeLen=s,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new G1(e,t,[],ir.empty,0,i,[],null)}startParse(){return this.parser.startParse(new bK(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=ir.empty&&this.isDone(t!=null?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let n=Date.now()+e;e=()=>Date.now()>n}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let n=this.parse.advance();if(n)if(this.fragments=this.withoutTempSkipped(Mh.addTree(n,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=n,this.parse=null,this.treeLen<(t!=null?t:this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Mh.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=kc;kc=this;try{return e()}finally{kc=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=f_(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:n,treeLen:s,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((h,u,f,c)=>a.push({fromA:h,toA:u,fromB:f,toB:c})),i=Mh.applyChanges(i,a),n=ir.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let h of this.skipped){let u=e.mapPos(h.from,1),f=e.mapPos(h.to,-1);u<f&&l.push({from:u,to:f})}}}return new G1(this.parser,t,i,n,s,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:n,to:s}=this.skipped[i];n<e.to&&s>e.from&&(this.fragments=f_(this.fragments,n,s),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends lK{createParse(t,i,n){let s=n[0].from,o=n[n.length-1].to;return{parsedPos:s,advance(){let a=kc;if(a){for(let h of n)a.tempSkipped.push(h);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new ir(ps.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return kc}}function f_(r,e,t){return Mh.applyChanges(r,[{fromA:e,toA:t,fromB:e,toB:t}])}class Qf{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new Qf(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=G1.create(e.facet(Df).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new Qf(i)}}Lo.state=or.define({create:Qf.init,update(r,e){for(let t of e.effects)if(t.is(Lo.setState))return t.value;return e.startState.facet(Df)!=e.state.facet(Df)?Qf.init(e.state):r.apply(e)}});let ZN=r=>{let e=setTimeout(()=>r(),500);return()=>clearTimeout(e)};typeof requestIdleCallback!="undefined"&&(ZN=r=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(r,{timeout:500-100})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Hk=typeof navigator!="undefined"&&((Fk=navigator.scheduling)===null||Fk===void 0?void 0:Fk.isInputPending)?()=>navigator.scheduling.isInputPending():null,OK=fn.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Lo.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Lo.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=ZN(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:n}}=this.view,s=i.field(Lo.state);if(s.tree==s.context.tree&&s.context.isDone(n+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Hk?Math.max(25,e.timeRemaining()-5):1e9),l=s.context.treeLen<n&&i.doc.length>n+1e3,a=s.context.work(()=>Hk&&Hk()||Date.now()>o,n+(l?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Lo.setState.of(new Qf(s.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>hs(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Df=Ie.define({combine(r){return r.length?r[0]:null},enables:[Lo.state,OK]});class kK{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const wK=new Gt;function yK({except:r,units:e=1}={}){return t=>{let i=r&&r.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const vK=new Gt;function SK(r){let e=r.firstChild,t=r.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?r.to:t.from}:null}const xK=Object.create(null),c_=[ps.none],d_=[],CK=Object.create(null);for(let[r,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])CK[r]=AK(xK,e);function qk(r,e){d_.indexOf(r)>-1||(d_.push(r),console.warn(e))}function AK(r,e){let t=null;for(let s of e.split(".")){let o=r[s]||ft[s];o?typeof o=="function"?t?t=o(t):qk(s,`Modifier ${s} used at start of tag`):t?qk(s,`Tag ${s} used as modifier`):t=o:qk(s,`Unknown highlighting tag ${s}`)}if(!t)return 0;let i=e.replace(/ /g,"_"),n=ps.define({id:c_.length,name:i,props:[cK({[i]:t})]});return c_.push(n),n.id}let Xk=null;function Zk(){if(!Xk&&typeof document=="object"&&document.body){let r=[];for(let e in document.body.style)/[A-Z]|^-|^(item|length)$/.test(e)||r.push(e);Xk=r.sort().map(e=>({type:"property",label:e}))}return Xk||[]}const p_=["active","after","before","checked","default","disabled","empty","enabled","first-child","first-letter","first-line","first-of-type","focus","hover","in-range","indeterminate","invalid","lang","last-child","last-of-type","link","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-of-type","only-child","optional","out-of-range","placeholder","read-only","read-write","required","root","selection","target","valid","visited"].map(r=>({type:"class",label:r})),g_=["above","absolute","activeborder","additive","activecaption","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","antialiased","appworkspace","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic-abegede-gez","ethiopic-halehame-aa-er","ethiopic-halehame-gez","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","graytext","grid","groove","hand","hard-light","help","hidden","hide","higher","highlight","highlighttext","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","justify","keep-all","landscape","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-hexadecimal","lower-latin","lower-norwegian","lowercase","ltr","luminosity","manipulation","match","matrix","matrix3d","medium","menu","menutext","message-box","middle","min-intrinsic","mix","monospace","move","multiple","multiple_mask_images","multiply","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","opacity","open-quote","optimizeLegibility","optimizeSpeed","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","text","text-bottom","text-top","textarea","textfield","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","to","top","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-latin","uppercase","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"].map(r=>({type:"keyword",label:r})).concat(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"].map(r=>({type:"constant",label:r}))),TK=["a","abbr","address","article","aside","b","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dialog","div","dl","dt","em","figcaption","figure","footer","form","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","meter","nav","ol","output","p","pre","ruby","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","tr","u","ul"].map(r=>({type:"type",label:r})),El=/^[\w-]*/,PK=r=>{let{state:e,pos:t}=r,i=Z1(e).resolveInner(t,-1);if(i.name=="PropertyName")return{from:i.from,options:Zk(),validFor:El};if(i.name=="ValueName")return{from:i.from,options:g_,validFor:El};if(i.name=="PseudoClassName")return{from:i.from,options:p_,validFor:El};if(i.name=="TagName"){for(let{parent:o}=i;o;o=o.parent)if(o.name=="Block")return{from:i.from,options:Zk(),validFor:El};return{from:i.from,options:TK,validFor:El}}if(!r.explicit)return null;let n=i.resolve(t),s=n.childBefore(t);return s&&s.name==":"&&n.name=="PseudoClassSelector"?{from:t,options:p_,validFor:El}:s&&s.name==":"&&n.name=="Declaration"||n.name=="ArgList"?{from:t,options:g_,validFor:El}:n.name=="Block"?{from:t,options:Zk(),validFor:El}:null},_2=X1.define({parser:tK.configure({props:[wK.add({Declaration:yK()}),vK.add({Block:SK})]}),languageData:{commentTokens:{block:{open:"/*",close:"*/"}},indentOnInput:/^\s*\}$/,wordChars:"-"}});function _K(){return new kK(_2,_2.data.of({autocomplete:PK}))}const GN=1024;let $K=0;class Gk{constructor(e,t){this.from=e,this.to=t}}class fi{constructor(e={}){this.id=$K++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Ds.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}fi.closedBy=new fi({deserialize:r=>r.split(" ")});fi.openedBy=new fi({deserialize:r=>r.split(" ")});fi.group=new fi({deserialize:r=>r.split(" ")});fi.contextHash=new fi({perNode:!0});fi.lookAhead=new fi({perNode:!0});fi.mounted=new fi({perNode:!0});const MK=Object.create(null);class Ds{constructor(e,t,i,n=0){this.name=e,this.props=t,this.id=i,this.flags=n}static define(e){let t=e.props&&e.props.length?Object.create(null):MK,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),n=new Ds(e.name||"",t,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(n)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return n}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(fi.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let n of i.split(" "))t[n]=e[i];return i=>{for(let n=i.prop(fi.group),s=-1;s<(n?n.length:0);s++){let o=t[s<0?i.name:n[s]];if(o)return o}}}}Ds.none=new Ds("",Object.create(null),0,8);class bx{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let n=null;for(let s of e){let o=s(i);o&&(n||(n=Object.assign({},i.props)),n[o[0].id]=o[1])}t.push(n?new Ds(i.name,n,i.id,i.flags):i)}return new bx(t)}}const im=new WeakMap,m_=new WeakMap;var qn;(function(r){r[r.ExcludeBuffers=1]="ExcludeBuffers",r[r.IncludeAnonymous=2]="IncludeAnonymous",r[r.IgnoreMounts=4]="IgnoreMounts",r[r.IgnoreOverlays=8]="IgnoreOverlays"})(qn||(qn={}));class Br{constructor(e,t,i,n,s){if(this.type=e,this.children=t,this.positions=i,this.length=n,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,l]of s)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=this.prop(fi.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let n=i.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new K1(this.topNode,e)}cursorAt(e,t=0,i=0){let n=im.get(this)||this.topNode,s=new K1(n);return s.moveTo(e,t),im.set(this,s._tree),s}get topNode(){return new Al(this,0,0,null)}resolve(e,t=0){let i=Ef(im.get(this)||this.topNode,e,t,!1);return im.set(this,i),i}resolveInner(e,t=0){let i=Ef(m_.get(this)||this.topNode,e,t,!0);return m_.set(this,i),i}iterate(e){let{enter:t,leave:i,from:n=0,to:s=this.length}=e;for(let o=this.cursor((e.mode||0)|qn.IncludeAnonymous);;){let l=!1;if(o.from<=s&&o.to>=n&&(o.type.isAnonymous||t(o)!==!1)){if(o.firstChild())continue;l=!0}for(;l&&i&&!o.type.isAnonymous&&i(o),!o.nextSibling();){if(!o.parent())return;l=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:wx(Ds.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,n)=>new Br(this.type,t,i,n,this.propValues),e.makeTree||((t,i,n)=>new Br(Ds.none,t,i,n)))}static build(e){return QK(e)}}Br.empty=new Br(Ds.none,[],[],0);class Ox{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Ox(this.buffer,this.index)}}class Jh{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return Ds.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],n=this.set.types[t],s=n.name;if(/\W/.test(s)&&!n.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,t,i,n,s){let{buffer:o}=this,l=-1;for(let a=e;a!=t&&!(UN(s,n,o[a+1],o[a+2])&&(l=a,i>0));a=o[a+3]);return l}slice(e,t,i,n){let s=this.buffer,o=new Uint16Array(t-e);for(let l=e,a=0;l<t;)o[a++]=s[l++],o[a++]=s[l++]-i,o[a++]=s[l++]-i,o[a++]=s[l++]-e;return new Jh(o,n-i,this.set)}}function UN(r,e,t,i){switch(r){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function YN(r,e){let t=r.childBefore(e);for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(r=t,t=i.prevSibling):t=i}return r}function Ef(r,e,t,i){for(var n;r.from==r.to||(t<1?r.from>=e:r.from>e)||(t>-1?r.to<=e:r.to<e);){let o=!i&&r instanceof Al&&r.index<0?null:r.parent;if(!o)return r;r=o}let s=i?0:qn.IgnoreOverlays;if(i)for(let o=r,l=o.parent;l;o=l,l=o.parent)o instanceof Al&&o.index<0&&((n=l.enter(e,t,s))===null||n===void 0?void 0:n.from)!=o.from&&(r=l);for(;;){let o=r.enter(e,t,s);if(!o)return r;r=o}}class Al{constructor(e,t,i,n){this._tree=e,this.from=t,this.index=i,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,n,s=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,h=t>0?l.length:-1;e!=h;e+=t){let u=l[e],f=a[e]+o.from;if(!!UN(n,i,f,f+u.length)){if(u instanceof Jh){if(s&qn.ExcludeBuffers)continue;let c=u.findChild(0,u.buffer.length,t,i-f,n);if(c>-1)return new $a(new RK(o,u,e,f),null,c)}else if(s&qn.IncludeAnonymous||!u.type.isAnonymous||kx(u)){let c;if(!(s&qn.IgnoreMounts)&&u.props&&(c=u.prop(fi.mounted))&&!c.overlay)return new Al(c.tree,f,e,o);let d=new Al(u,f,e,o);return s&qn.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(t<0?u.children.length-1:0,t,i,n)}}}if(s&qn.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let n;if(!(i&qn.IgnoreOverlays)&&(n=this._tree.prop(fi.mounted))&&n.overlay){let s=e-this.from;for(let{from:o,to:l}of n.overlay)if((t>0?o<=s:o<s)&&(t<0?l>=s:l>s))return new Al(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new K1(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return Ef(this,e,t,!1)}resolveInner(e,t=0){return Ef(this,e,t,!0)}enterUnfinishedNodesBefore(e){return YN(this,e)}getChild(e,t=null,i=null){let n=U1(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return U1(this,e,t,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return Y1(this,e)}}function U1(r,e,t,i){let n=r.cursor(),s=[];if(!n.firstChild())return s;if(t!=null){for(;!n.type.is(t);)if(!n.nextSibling())return s}for(;;){if(i!=null&&n.type.is(i))return s;if(n.type.is(e)&&s.push(n.node),!n.nextSibling())return i==null?s:[]}}function Y1(r,e,t=e.length-1){for(let i=r.parent;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class RK{constructor(e,t,i,n){this.parent=e,this.buffer=t,this.index=i,this.start=n}}class $a{constructor(e,t,i){this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,i){let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.context.start,i);return s<0?null:new $a(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&qn.ExcludeBuffers)return null;let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new $a(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new $a(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new $a(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new K1(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,n=this.index+4,s=i.buffer[this.index+3];if(s>n){let o=i.buffer[this.index+1],l=i.buffer[this.index+2];e.push(i.slice(n,s,o,l)),t.push(0)}return new Br(this.type,e,t,this.to-this.from)}resolve(e,t=0){return Ef(this,e,t,!1)}resolveInner(e,t=0){return Ef(this,e,t,!0)}enterUnfinishedNodesBefore(e){return YN(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,i=null){let n=U1(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return U1(this,e,t,i)}get node(){return this}matchContext(e){return Y1(this,e)}}class K1{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Al)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=i+n.buffer[e+1],this.to=i+n.buffer[e+2],!0}yield(e){return e?e instanceof Al?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:n}=this.buffer,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&qn.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&qn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&qn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let n=i<0?0:this.stack[i]+4;if(this.index!=n)return this.yieldBuf(t.findChild(n,this.index,-1,0,4))}else{let n=t.buffer[this.index+3];if(n<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(n)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(n.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:i}=n)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let s=t+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let l=i._tree.children[s];if(this.mode&qn.IncludeAnonymous||l instanceof Jh||!l.type.isAnonymous||kx(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer){e:for(let n=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==n){if(n==this.index)return o;t=o,i=s+1;break e}n=this.stack[--s]}}for(let n=i;n<this.stack.length;n++)t=new $a(this.buffer,t,this.stack[n]);return this.bufferNode=new $a(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let n=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(n=!0)}for(;n&&t&&t(this),n=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,n=!0}}}matchContext(e){if(!this.buffer)return Y1(this.node,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let n=e.length-1,s=this.stack.length-1;n>=0;s--){if(s<0)return Y1(this.node,e,n);let o=i[t.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[n]&&e[n]!=o.name)return!1;n--}}return!0}}function kx(r){return r.children.some(e=>e instanceof Jh||!e.type.isAnonymous||kx(e))}function QK(r){var e;let{buffer:t,nodeSet:i,maxBufferLength:n=GN,reused:s=[],minRepeatType:o=i.types.length}=r,l=Array.isArray(t)?new Ox(t,t.length):t,a=i.types,h=0,u=0;function f(p,b,m,k,C){let{id:v,start:y,end:T,size:E}=l,$=u;for(;E<0;)if(l.next(),E==-1){let L=s[v];m.push(L),k.push(y-p);return}else if(E==-3){h=v;return}else if(E==-4){u=v;return}else throw new RangeError(`Unrecognized record size: ${E}`);let R=a[v],N,_,W=y-p;if(T-y<=n&&(_=w(l.pos-b,C))){let L=new Uint16Array(_.size-_.skip),I=l.pos-_.size,j=L.length;for(;l.pos>I;)j=S(_.start,L,j);N=new Jh(L,T-_.start,i),W=_.start-p}else{let L=l.pos-E;l.next();let I=[],j=[],X=v>=o?v:-1,Z=0,ie=T;for(;l.pos>L;)X>=0&&l.id==X&&l.size>=0?(l.end<=ie-n&&(d(I,j,y,Z,l.end,ie,X,$),Z=I.length,ie=l.end),l.next()):f(y,L,I,j,X);if(X>=0&&Z>0&&Z<I.length&&d(I,j,y,Z,y,ie,X,$),I.reverse(),j.reverse(),X>-1&&Z>0){let G=c(R);N=wx(R,I,j,0,I.length,0,T-y,G,G)}else N=g(R,I,j,T-y,$-T)}m.push(N),k.push(W)}function c(p){return(b,m,k)=>{let C=0,v=b.length-1,y,T;if(v>=0&&(y=b[v])instanceof Br){if(!v&&y.type==p&&y.length==k)return y;(T=y.prop(fi.lookAhead))&&(C=m[v]+y.length+T)}return g(p,b,m,k,C)}}function d(p,b,m,k,C,v,y,T){let E=[],$=[];for(;p.length>k;)E.push(p.pop()),$.push(b.pop()+m-C);p.push(g(i.types[y],E,$,v-C,T-v)),b.push(C-m)}function g(p,b,m,k,C=0,v){if(h){let y=[fi.contextHash,h];v=v?[y].concat(v):[y]}if(C>25){let y=[fi.lookAhead,C];v=v?[y].concat(v):[y]}return new Br(p,b,m,k,v)}function w(p,b){let m=l.fork(),k=0,C=0,v=0,y=m.end-n,T={size:0,start:0,skip:0};e:for(let E=m.pos-p;m.pos>E;){let $=m.size;if(m.id==b&&$>=0){T.size=k,T.start=C,T.skip=v,v+=4,k+=4,m.next();continue}let R=m.pos-$;if($<0||R<E||m.start<y)break;let N=m.id>=o?4:0,_=m.start;for(m.next();m.pos>R;){if(m.size<0)if(m.size==-3)N+=4;else break e;else m.id>=o&&(N+=4);m.next()}C=_,k+=$,v+=N}return(b<0||k==p)&&(T.size=k,T.start=C,T.skip=v),T.size>4?T:void 0}function S(p,b,m){let{id:k,start:C,end:v,size:y}=l;if(l.next(),y>=0&&k<o){let T=m;if(y>4){let E=l.pos-(y-4);for(;l.pos>E;)m=S(p,b,m)}b[--m]=T,b[--m]=v-p,b[--m]=C-p,b[--m]=k}else y==-3?h=k:y==-4&&(u=k);return m}let x=[],Q=[];for(;l.pos>0;)f(r.start||0,r.bufferStart||0,x,Q,-1);let M=(e=r.length)!==null&&e!==void 0?e:x.length?Q[0]+x[0].length:0;return new Br(a[r.topID],x.reverse(),Q.reverse(),M)}const b_=new WeakMap;function Um(r,e){if(!r.isAnonymous||e instanceof Jh||e.type!=r)return 1;let t=b_.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=r||!(i instanceof Br)){t=1;break}t+=Um(r,i)}b_.set(e,t)}return t}function wx(r,e,t,i,n,s,o,l,a){let h=0;for(let g=i;g<n;g++)h+=Um(r,e[g]);let u=Math.ceil(h*1.5/8),f=[],c=[];function d(g,w,S,x,Q){for(let M=S;M<x;){let p=M,b=w[M],m=Um(r,g[M]);for(M++;M<x;M++){let k=Um(r,g[M]);if(m+k>=u)break;m+=k}if(M==p+1){if(m>u){let k=g[p];d(k.children,k.positions,0,k.children.length,w[p]+Q);continue}f.push(g[p])}else{let k=w[M-1]+g[M-1].length-b;f.push(wx(r,g,w,p,M,b,k,null,a))}c.push(b+Q-s)}}return d(e,t,i,n,0),(l||a)(f,c,o)}class DK{startParse(e,t,i){return typeof e=="string"&&(e=new EK(e)),i=i?i.length?i.map(n=>new Gk(n.from,n.to)):[new Gk(0,0)]:[new Gk(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let n=this.startParse(e,t,i);for(;;){let s=n.advance();if(s)return s}}}class EK{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new fi({perNode:!0});class J1{constructor(e,t,i,n,s,o,l,a,h,u=0,f){this.p=e,this.stack=t,this.state=i,this.reducePos=n,this.pos=s,this.score=o,this.buffer=l,this.bufferBase=a,this.curContext=h,this.lookAhead=u,this.parent=f}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let n=e.parser.context;return new J1(e,[],t,i,i,0,[],0,n?new O_(n,n.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){let t=e>>19,i=e&65535,{parser:n}=this.p,s=n.dynamicPrecedence(i);if(s&&(this.score+=s),t==0){this.pushState(n.getGoto(this.state,i,!0),this.reducePos),i<n.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,4,!0),this.reduceContext(i,this.reducePos);return}let o=this.stack.length-(t-1)*3-(e&262144?6:0),l=this.stack[o-2],a=this.stack[o-1],h=this.bufferBase+this.buffer.length-a;if(i<n.minRepeatTerm||e&131072){let u=n.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,l,u,h+4,!0)}if(e&262144)this.state=this.stack[o];else{let u=this.stack[o-3];this.state=n.getGoto(u,i,!0)}for(;this.stack.length>o;)this.stack.pop();this.reduceContext(i,l)}storeNode(e,t,i,n=4,s=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,l=this.buffer.length;if(l==0&&o.parent&&(l=o.bufferBase-o.parent.bufferBase,o=o.parent),l>0&&o.buffer[l-4]==0&&o.buffer[l-1]>-1){if(t==i)return;if(o.buffer[l-2]>=t){o.buffer[l-2]=i;return}}}if(!s||this.pos==i)this.buffer.push(e,t,i,n);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0)for(;o>0&&this.buffer[o-2]>i;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,n>4&&(n-=4);this.buffer[o]=e,this.buffer[o+1]=t,this.buffer[o+2]=i,this.buffer[o+3]=n}}shift(e,t,i){let n=this.pos;if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let s=e,{parser:o}=this.p;(i>this.pos||t<=o.maxNode)&&(this.pos=i,o.stateFlag(s,1)||(this.reducePos=i)),this.pushState(s,n),this.shiftContext(t,n),t<=o.maxNode&&this.buffer.push(t,n,i,4)}else this.pos=i,this.shiftContext(t,n),t<=this.p.parser.maxNode&&this.buffer.push(t,n,i,4)}apply(e,t,i){e&65536?this.reduce(e):this.shift(e,t,i)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let n=this.pos;this.reducePos=this.pos=n+e.length,this.pushState(t,n),this.buffer.push(i,n,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),n=e.bufferBase+t;for(;e&&n==e.bufferBase;)e=e.parent;return new J1(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,n,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new BK(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if((i&65536)==0)return!0;if(i==0)return!1;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>4<<1||this.stack.length>=120){let n=[];for(let s=0,o;s<t.length;s+=2)(o=t[s+1])!=this.state&&this.p.parser.hasAction(o,e)&&n.push(t[s],o);if(this.stack.length<120)for(let s=0;n.length<4<<1&&s<t.length;s+=2){let o=t[s+1];n.some((l,a)=>a&1&&l==o)||n.push(t[s],o)}t=n}let i=[];for(let n=0;n<t.length&&i.length<4;n+=2){let s=t[n+1];if(s==this.state)continue;let o=this.split();o.pushState(s,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(t[n],this.pos),o.score-=200,i.push(o)}return i}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if((e&65536)==0)return!1;let{parser:t}=this.p;if(!t.validAction(this.state,e)){let i=e>>19,n=e&65535,s=this.stack.length-i*3;if(s<0||t.getGoto(this.stack[s],n,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new O_(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class O_{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}var k_;(function(r){r[r.Insert=200]="Insert",r[r.Delete=190]="Delete",r[r.Reduce=100]="Reduce",r[r.MaxNext=4]="MaxNext",r[r.MaxInsertStackDepth=300]="MaxInsertStackDepth",r[r.DampenInsertStackDepth=120]="DampenInsertStackDepth"})(k_||(k_={}));class BK{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let n=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=n}}class eb{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new eb(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new eb(this.stack,this.pos,this.index)}}class Ym{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const w_=new Ym;class NK{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=w_,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,n=this.rangeIndex,s=this.pos+e;for(;s<i.from;){if(!n)return null;let o=this.ranges[--n];s-=i.from-o.to,i=o}for(;t<0?s>i.to:s>=i.to;){if(n==this.ranges.length-1)return null;let o=this.ranges[++n];s+=o.from-i.to,i=o}return s}peek(e){let t=this.chunkOff+e,i,n;if(t>=0&&t<this.chunk.length)i=this.pos+e,n=this.chunk.charCodeAt(t);else{let s=this.resolveOffset(e,1);if(s==null)return-1;if(i=s,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let o=this.rangeIndex,l=this.range;for(;l.to<=i;)l=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-i)),n=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),n}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=w_,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let n of this.ranges){if(n.from>=t)break;n.to>e&&(i+=this.input.read(Math.max(n.from,e),Math.min(n.to,t)))}return i}}class Km{constructor(e,t){this.data=e,this.id=t}token(e,t){IK(this.data,e,t,this.id)}}Km.prototype.contextual=Km.prototype.fallback=Km.prototype.extend=!1;class vp{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function IK(r,e,t,i){let n=0,s=1<<i,{parser:o}=t.p,{dialect:l}=o;e:for(;(s&r[n])!=0;){let a=r[n+1];for(let c=n+3;c<a;c+=2)if((r[c+1]&s)>0){let d=r[c];if(l.allows(d)&&(e.token.value==-1||e.token.value==d||o.overrides(d,e.token.value))){e.acceptToken(d);break}}let h=e.next,u=0,f=r[n+2];if(e.next<0&&f>u&&r[a+f*3-3]==65535){n=r[a+f*3-1];continue e}for(;u<f;){let c=u+f>>1,d=a+c+(c<<1),g=r[d],w=r[d+1];if(h<g)f=c;else if(h>=w)u=c+1;else{n=r[d+2],e.advance();continue e}}break}}function nm(r,e=Uint16Array){if(typeof r!="string")return r;let t=null;for(let i=0,n=0;i<r.length;){let s=0;for(;;){let o=r.charCodeAt(i++),l=!1;if(o==126){s=65535;break}o>=92&&o--,o>=34&&o--;let a=o-32;if(a>=46&&(a-=46,l=!0),s+=a,l)break;s*=46}t?t[n++]=s:t=new e(s)}return t}const As=typeof process!="undefined"&&process.env&&/\bparse\b/.test({}.LOG);let Uk=null;var y_;(function(r){r[r.Margin=25]="Margin"})(y_||(y_={}));function v_(r,e,t){let i=r.cursor(qn.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(r.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:r.length}}class LK{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?v_(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?v_(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],n=this.index[t];if(n==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=i.children[n],o=this.start[t]+i.positions[n];if(o>e)return this.nextStart=o,null;if(s instanceof Br){if(o==e){if(o<this.safeFrom)return null;let l=o+s.length;if(l<=this.safeTo){let a=s.prop(fi.lookAhead);if(!a||l+a<this.fragment.to)return s}}this.index[t]++,o+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+s.length}}}class zK{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new Ym)}getActions(e){let t=0,i=null,{parser:n}=e.p,{tokenizers:s}=n,o=n.stateSlot(e.state,3),l=e.curContext?e.curContext.hash:0,a=0;for(let h=0;h<s.length;h++){if((1<<h&o)==0)continue;let u=s[h],f=this.tokens[h];if(!(i&&!u.fallback)&&((u.contextual||f.start!=e.pos||f.mask!=o||f.context!=l)&&(this.updateCachedToken(f,u,e),f.mask=o,f.context=l),f.lookAhead>f.end+25&&(a=Math.max(f.lookAhead,a)),f.value!=0)){let c=t;if(f.extended>-1&&(t=this.addActions(e,f.extended,f.end,t)),t=this.addActions(e,f.value,f.end,t),!u.extend&&(i=f,t>c))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),!i&&e.pos==this.stream.end&&(i=new Ym,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Ym,{pos:i,p:n}=e;return t.start=i,t.end=Math.min(i+1,n.stream.end),t.value=i==n.stream.end?n.parser.eofTerm:0,t}updateCachedToken(e,t,i){if(t.token(this.stream.reset(i.pos,e),i),e.value>-1){let{parser:n}=i.p;for(let s=0;s<n.specialized.length;s++)if(n.specialized[s]==e.value){let o=n.specializers[s](this.stream.read(e.start,e.end),i);if(o>=0&&i.p.parser.dialect.allows(o>>1)){(o&1)==0?e.value=o>>1:e.extended=o>>1;break}}}else e.value=0,e.end=Math.min(i.p.stream.end,i.pos+1)}putAction(e,t,i,n){for(let s=0;s<n;s+=3)if(this.actions[s]==e)return n;return this.actions[n++]=e,this.actions[n++]=t,this.actions[n++]=i,n}addActions(e,t,i,n){let{state:s}=e,{parser:o}=e.p,{data:l}=o;for(let a=0;a<2;a++)for(let h=o.stateSlot(s,a?2:1);;h+=3){if(l[h]==65535)if(l[h+1]==1)h=sl(l,h+2);else{n==0&&l[h+1]==2&&(n=this.putAction(sl(l,h+2),t,i,n));break}l[h]==t&&(n=this.putAction(sl(l,h+1),t,i,n))}return n}}var S_;(function(r){r[r.Distance=5]="Distance",r[r.MaxRemainingPerStep=3]="MaxRemainingPerStep",r[r.MinBufferLengthPrune=500]="MinBufferLengthPrune",r[r.ForceReduceLimit=10]="ForceReduceLimit",r[r.CutDepth=15e3]="CutDepth",r[r.CutTo=9e3]="CutTo"})(S_||(S_={}));class WK{constructor(e,t,i,n){this.parser=e,this.input=t,this.ranges=n,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new NK(t,n),this.tokens=new zK(e,this.stream),this.topTerm=e.top[1];let{from:s}=n[0];this.stacks=[J1.start(this,e.top[0],s)],this.fragments=i.length&&this.stream.end-s>e.bufferLength*4?new LK(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],n,s;for(let o=0;o<e.length;o++){let l=e[o];for(;;){if(this.tokens.mainToken=null,l.pos>t)i.push(l);else{if(this.advanceStack(l,i,e))continue;{n||(n=[],s=[]),n.push(l);let a=this.tokens.getMainToken(l);s.push(a.value,a.end)}}break}}if(!i.length){let o=n&&FK(n);if(o)return this.stackToTree(o);if(this.parser.strict)throw As&&n&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&n){let o=this.stoppedAt!=null&&n[0].pos>this.stoppedAt?n[0]:this.runRecovery(n,s,i);if(o)return this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(i.length>o)for(i.sort((l,a)=>a.score-l.score);i.length>o;)i.pop();i.some(l=>l.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let o=0;o<i.length-1;o++){let l=i[o];for(let a=o+1;a<i.length;a++){let h=i[a];if(l.sameState(h)||l.buffer.length>500&&h.buffer.length>500)if((l.score-h.score||l.buffer.length-h.buffer.length)>0)i.splice(a--,1);else{i.splice(o--,1);continue e}}}}this.minStackPos=i[0].pos;for(let o=1;o<i.length;o++)i[o].pos<this.minStackPos&&(this.minStackPos=i[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let n=e.pos,{parser:s}=this,o=As?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&n>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let h=e.curContext&&e.curContext.tracker.strict,u=h?e.curContext.hash:0;for(let f=this.fragments.nodeAt(n);f;){let c=this.parser.nodeSet.types[f.type.id]==f.type?s.getGoto(e.state,f.type.id):-1;if(c>-1&&f.length&&(!h||(f.prop(fi.contextHash)||0)==u))return e.useNode(f,c),As&&console.log(o+this.stackID(e)+` (via reuse of ${s.getName(f.type.id)})`),!0;if(!(f instanceof Br)||f.children.length==0||f.positions[0]>0)break;let d=f.children[0];if(d instanceof Br&&f.positions[0]==0)f=d;else break}}let l=s.stateSlot(e.state,4);if(l>0)return e.reduce(l),As&&console.log(o+this.stackID(e)+` (via always-reduce ${s.getName(l&65535)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let a=this.tokens.getActions(e);for(let h=0;h<a.length;){let u=a[h++],f=a[h++],c=a[h++],d=h==a.length||!i,g=d?e:e.split();if(g.apply(u,f,c),As&&console.log(o+this.stackID(g)+` (via ${(u&65536)==0?"shift":`reduce of ${s.getName(u&65535)}`} for ${s.getName(f)} @ ${n}${g==e?"":", split"})`),d)return!0;g.pos>n?t.push(g):i.push(g)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return x_(e,t),!0}}runRecovery(e,t,i){let n=null,s=!1;for(let o=0;o<e.length;o++){let l=e[o],a=t[o<<1],h=t[(o<<1)+1],u=As?this.stackID(l)+" -> ":"";if(l.deadEnd&&(s||(s=!0,l.restart(),As&&console.log(u+this.stackID(l)+" (restarted)"),this.advanceFully(l,i))))continue;let f=l.split(),c=u;for(let d=0;f.forceReduce()&&d<10&&(As&&console.log(c+this.stackID(f)+" (via force-reduce)"),!this.advanceFully(f,i));d++)As&&(c=this.stackID(f)+" -> ");for(let d of l.recoverByInsert(a))As&&console.log(u+this.stackID(d)+" (via recover-insert)"),this.advanceFully(d,i);this.stream.end>l.pos?(h==l.pos&&(h++,a=0),l.recoverByDelete(a,h),As&&console.log(u+this.stackID(l)+` (via recover-delete ${this.parser.getName(a)})`),x_(l,i)):(!n||n.score<l.score)&&(n=l)}return n}stackToTree(e){return e.close(),Br.build({buffer:eb.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(Uk||(Uk=new WeakMap)).get(e);return t||Uk.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function x_(r,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==r.pos&&i.sameState(r)){e[t].score<r.score&&(e[t]=r);return}}e.push(r)}class VK{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}const Yk=r=>r;class jK{constructor(e){this.start=e.start,this.shift=e.shift||Yk,this.reduce=e.reduce||Yk,this.reuse=e.reuse||Yk,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class tb extends DK{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (${14})`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let l=0;l<e.repeatNodeCount;l++)t.push("");let i=Object.keys(e.topRules).map(l=>e.topRules[l][1]),n=[];for(let l=0;l<t.length;l++)n.push([]);function s(l,a,h){n[l].push([a,a.deserialize(String(h))])}if(e.nodeProps)for(let l of e.nodeProps){let a=l[0];typeof a=="string"&&(a=fi[a]);for(let h=1;h<l.length;){let u=l[h++];if(u>=0)s(u,a,l[h++]);else{let f=l[h+-u];for(let c=-u;c>0;c--)s(l[h++],a,f);h++}}}this.nodeSet=new bx(t.map((l,a)=>Ds.define({name:a>=this.minRepeatTerm?void 0:l,id:a,props:n[a],top:i.indexOf(a)>-1,error:a==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(a)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=GN;let o=nm(e.tokenData);if(this.context=e.context,this.specialized=new Uint16Array(e.specialized?e.specialized.length:0),this.specializers=[],e.specialized)for(let l=0;l<e.specialized.length;l++)this.specialized[l]=e.specialized[l].term,this.specializers[l]=e.specialized[l].get;this.states=nm(e.states,Uint32Array),this.data=nm(e.stateData),this.goto=nm(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(l=>typeof l=="number"?new Km(o,l):l),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let n=new WK(this,e,t,i);for(let s of this.wrappers)n=s(n,e,t,i);return n}getGoto(e,t,i=!1){let n=this.goto;if(t>=n[0])return-1;for(let s=n[t+1];;){let o=n[s++],l=o&1,a=n[s++];if(l&&i)return a;for(let h=s+(o>>1);s<h;s++)if(n[s]==e)return a;if(l)return-1}}hasAction(e,t){let i=this.data;for(let n=0;n<2;n++)for(let s=this.stateSlot(e,n?2:1),o;;s+=3){if((o=i[s])==65535)if(i[s+1]==1)o=i[s=sl(i,s+2)];else{if(i[s+1]==2)return sl(i,s+2);break}if(o==t||o==0)return sl(i,s+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){if(t==this.stateSlot(e,4))return!0;for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=sl(this.data,i+2);else return!1;if(t==sl(this.data,i+1))return!0}}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=sl(this.data,i+2);else break;if((this.data[i+2]&1)==0){let n=this.data[i+1];t.some((s,o)=>o&1&&s==n)||t.push(this.data[i],n)}}return t}overrides(e,t){let i=C_(this.data,this.tokenPrecTable,t);return i<0||C_(this.data,this.tokenPrecTable,e)<i}configure(e){let t=Object.assign(Object.create(tb.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let n=e.tokenizers.find(s=>s.from==i);return n?n.to:i})),e.specializers&&(t.specializers=this.specializers.map(i=>{let n=e.specializers.find(s=>s.from==i);return n?n.to:i})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let s of e.split(" ")){let o=t.indexOf(s);o>=0&&(i[o]=!0)}let n=null;for(let s=0;s<t.length;s++)if(!i[s])for(let o=this.dialects[t[s]],l;(l=this.data[o++])!=65535;)(n||(n=new Uint8Array(this.maxTerm+1)))[l]=1;return new VK(e,i,n)}static deserialize(e){return new tb(e)}}function sl(r,e){return r[e]|r[e+1]<<16}function C_(r,e,t){for(let i=e,n;(n=r[i])!=65535;i++)if(n==t)return i-e;return-1}function FK(r){let e=null;for(let t of r){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}let HK=0;class Po{constructor(e,t,i){this.set=e,this.base=t,this.modified=i,this.id=HK++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let t=new Po([],null,[]);if(t.set.push(t),e)for(let i of e.set)t.set.push(i);return t}static defineModifier(){let e=new ib;return t=>t.modified.indexOf(e)>-1?t:ib.get(t.base||t,t.modified.concat(e).sort((i,n)=>i.id-n.id))}}let qK=0;class ib{constructor(){this.instances=[],this.id=qK++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(l=>l.base==e&&XK(t,l.modified));if(i)return i;let n=[],s=new Po(n,e,t);for(let l of t)l.instances.push(s);let o=KN(t);for(let l of e.set)for(let a of o)n.push(ib.get(l,a));return s}}function XK(r,e){return r.length==e.length&&r.every((t,i)=>t==e[i])}function KN(r){let e=[r];for(let t=0;t<r.length;t++)for(let i of KN(r.slice(0,t).concat(r.slice(t+1))))e.push(i);return e}function ZK(r){let e=Object.create(null);for(let t in r){let i=r[t];Array.isArray(i)||(i=[i]);for(let n of t.split(" "))if(n){let s=[],o=2,l=n;for(let f=0;;){if(l=="..."&&f>0&&f+3==n.length){o=1;break}let c=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!c)throw new RangeError("Invalid path: "+n);if(s.push(c[0]=="*"?"":c[0][0]=='"'?JSON.parse(c[0]):c[0]),f+=c[0].length,f==n.length)break;let d=n[f++];if(f==n.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+n);l=n.slice(f)}let a=s.length-1,h=s[a];if(!h)throw new RangeError("Invalid path: "+n);let u=new UK(i,o,a>0?s.slice(0,a):null);e[h]=u.sort(e[h])}}return GK.add(e)}const GK=new fi;class UK{constructor(e,t,i,n){this.tags=e,this.mode=t,this.context=i,this.next=n}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function YK(r,e){let t=Object.create(null);for(let s of r)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let o of s.tag)t[o.id]=s.class;let{scope:i,all:n=null}=e||{};return{style:s=>{let o=n;for(let l of s)for(let a of l.set){let h=t[a.id];if(h){o=o?o+" "+h:h;break}}return o},scope:i}}const ke=Po.define,rm=ke(),Ul=ke(),A_=ke(Ul),T_=ke(Ul),Yl=ke(),sm=ke(Yl),Kk=ke(Yl),ko=ke(),oh=ke(ko),ro=ke(),so=ke(),$2=ke(),wc=ke($2),om=ke(),oe={comment:rm,lineComment:ke(rm),blockComment:ke(rm),docComment:ke(rm),name:Ul,variableName:ke(Ul),typeName:A_,tagName:ke(A_),propertyName:T_,attributeName:ke(T_),className:ke(Ul),labelName:ke(Ul),namespace:ke(Ul),macroName:ke(Ul),literal:Yl,string:sm,docString:ke(sm),character:ke(sm),attributeValue:ke(sm),number:Kk,integer:ke(Kk),float:ke(Kk),bool:ke(Yl),regexp:ke(Yl),escape:ke(Yl),color:ke(Yl),url:ke(Yl),keyword:ro,self:ke(ro),null:ke(ro),atom:ke(ro),unit:ke(ro),modifier:ke(ro),operatorKeyword:ke(ro),controlKeyword:ke(ro),definitionKeyword:ke(ro),moduleKeyword:ke(ro),operator:so,derefOperator:ke(so),arithmeticOperator:ke(so),logicOperator:ke(so),bitwiseOperator:ke(so),compareOperator:ke(so),updateOperator:ke(so),definitionOperator:ke(so),typeOperator:ke(so),controlOperator:ke(so),punctuation:$2,separator:ke($2),bracket:wc,angleBracket:ke(wc),squareBracket:ke(wc),paren:ke(wc),brace:ke(wc),content:ko,heading:oh,heading1:ke(oh),heading2:ke(oh),heading3:ke(oh),heading4:ke(oh),heading5:ke(oh),heading6:ke(oh),contentSeparator:ke(ko),list:ke(ko),quote:ke(ko),emphasis:ke(ko),strong:ke(ko),link:ke(ko),monospace:ke(ko),strikethrough:ke(ko),inserted:ke(),deleted:ke(),changed:ke(),invalid:ke(),meta:om,documentMeta:ke(om),annotation:ke(om),processingInstruction:ke(om),definition:Po.defineModifier(),constant:Po.defineModifier(),function:Po.defineModifier(),standard:Po.defineModifier(),local:Po.defineModifier(),special:Po.defineModifier()};YK([{tag:oe.link,class:"tok-link"},{tag:oe.heading,class:"tok-heading"},{tag:oe.emphasis,class:"tok-emphasis"},{tag:oe.strong,class:"tok-strong"},{tag:oe.keyword,class:"tok-keyword"},{tag:oe.atom,class:"tok-atom"},{tag:oe.bool,class:"tok-bool"},{tag:oe.url,class:"tok-url"},{tag:oe.labelName,class:"tok-labelName"},{tag:oe.inserted,class:"tok-inserted"},{tag:oe.deleted,class:"tok-deleted"},{tag:oe.literal,class:"tok-literal"},{tag:oe.string,class:"tok-string"},{tag:oe.number,class:"tok-number"},{tag:[oe.regexp,oe.escape,oe.special(oe.string)],class:"tok-string2"},{tag:oe.variableName,class:"tok-variableName"},{tag:oe.local(oe.variableName),class:"tok-variableName tok-local"},{tag:oe.definition(oe.variableName),class:"tok-variableName tok-definition"},{tag:oe.special(oe.variableName),class:"tok-variableName2"},{tag:oe.definition(oe.propertyName),class:"tok-propertyName tok-definition"},{tag:oe.typeName,class:"tok-typeName"},{tag:oe.namespace,class:"tok-namespace"},{tag:oe.className,class:"tok-className"},{tag:oe.macroName,class:"tok-macroName"},{tag:oe.propertyName,class:"tok-propertyName"},{tag:oe.operator,class:"tok-operator"},{tag:oe.comment,class:"tok-comment"},{tag:oe.meta,class:"tok-meta"},{tag:oe.invalid,class:"tok-invalid"},{tag:oe.punctuation,class:"tok-punctuation"}]);const KK=1,P_=281,__=2,JK=3,lm=282,eJ=4,tJ=283,$_=284,iJ=286,nJ=287,rJ=5,sJ=6,oJ=1,lJ=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],JN=125,aJ=123,hJ=59,M_=47,uJ=42,fJ=43,cJ=45,dJ=36,pJ=96,gJ=92,mJ=new jK({start:!1,shift(r,e){return e==rJ||e==sJ||e==iJ?r:e==nJ},strict:!1}),bJ=new vp((r,e)=>{let{next:t}=r;(t==JN||t==-1||e.context)&&e.canShift($_)&&r.acceptToken($_)},{contextual:!0,fallback:!0}),OJ=new vp((r,e)=>{let{next:t}=r,i;lJ.indexOf(t)>-1||t==M_&&((i=r.peek(1))==M_||i==uJ)||t!=JN&&t!=hJ&&t!=-1&&!e.context&&e.canShift(P_)&&r.acceptToken(P_)},{contextual:!0}),kJ=new vp((r,e)=>{let{next:t}=r;if((t==fJ||t==cJ)&&(r.advance(),t==r.next)){r.advance();let i=!e.context&&e.canShift(__);r.acceptToken(i?__:JK)}},{contextual:!0}),wJ=new vp(r=>{for(let e=!1,t=0;;t++){let{next:i}=r;if(i<0){t&&r.acceptToken(lm);break}else if(i==pJ){t?r.acceptToken(lm):r.acceptToken(tJ,1);break}else if(i==aJ&&e){t==1?r.acceptToken(eJ,1):r.acceptToken(lm,-1);break}else if(i==10&&t){r.advance(),r.acceptToken(lm);break}else i==gJ&&r.advance();e=i==dJ,r.advance()}}),yJ=new vp((r,e)=>{if(!(r.next!=101||!e.dialectEnabled(oJ))){r.advance();for(let t=0;t<6;t++){if(r.next!="xtends".charCodeAt(t))return;r.advance()}r.next>=57&&r.next<=65||r.next>=48&&r.next<=90||r.next==95||r.next>=97&&r.next<=122||r.next>160||r.acceptToken(KK)}}),vJ=ZK({"get set async static":oe.modifier,"for while do if else switch try catch finally return throw break continue default case":oe.controlKeyword,"in of await yield void typeof delete instanceof":oe.operatorKeyword,"let var const function class extends":oe.definitionKeyword,"import export from":oe.moduleKeyword,"with debugger as new":oe.keyword,TemplateString:oe.special(oe.string),Super:oe.atom,BooleanLiteral:oe.bool,this:oe.self,null:oe.null,Star:oe.modifier,VariableName:oe.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":oe.function(oe.variableName),VariableDefinition:oe.definition(oe.variableName),Label:oe.labelName,PropertyName:oe.propertyName,PrivatePropertyName:oe.special(oe.propertyName),"CallExpression/MemberExpression/PropertyName":oe.function(oe.propertyName),"FunctionDeclaration/VariableDefinition":oe.function(oe.definition(oe.variableName)),"ClassDeclaration/VariableDefinition":oe.definition(oe.className),PropertyDefinition:oe.definition(oe.propertyName),PrivatePropertyDefinition:oe.definition(oe.special(oe.propertyName)),UpdateOp:oe.updateOperator,LineComment:oe.lineComment,BlockComment:oe.blockComment,Number:oe.number,String:oe.string,ArithOp:oe.arithmeticOperator,LogicOp:oe.logicOperator,BitOp:oe.bitwiseOperator,CompareOp:oe.compareOperator,RegExp:oe.regexp,Equals:oe.definitionOperator,"Arrow : Spread":oe.punctuation,"( )":oe.paren,"[ ]":oe.squareBracket,"{ }":oe.brace,"InterpolationStart InterpolationEnd":oe.special(oe.brace),".":oe.derefOperator,", ;":oe.separator,TypeName:oe.typeName,TypeDefinition:oe.definition(oe.typeName),"type enum interface implements namespace module declare":oe.definitionKeyword,"abstract global Privacy readonly override":oe.modifier,"is keyof unique infer":oe.operatorKeyword,JSXAttributeValue:oe.attributeValue,JSXText:oe.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":oe.angleBracket,"JSXIdentifier JSXNameSpacedName":oe.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":oe.attributeName}),SJ={__proto__:null,export:18,as:23,from:29,default:32,async:37,function:38,this:48,true:56,false:56,void:66,typeof:70,null:86,super:88,new:122,await:139,yield:141,delete:142,class:152,extends:154,public:197,private:197,protected:197,readonly:199,instanceof:220,in:222,const:224,import:256,keyof:307,unique:311,infer:317,is:351,abstract:371,implements:373,type:375,let:378,var:380,interface:387,enum:391,namespace:397,module:399,declare:403,global:407,for:428,of:437,while:440,with:444,do:448,if:452,else:454,switch:458,case:464,try:470,catch:474,finally:478,return:482,throw:486,break:490,continue:494,debugger:498},xJ={__proto__:null,async:109,get:111,set:113,public:161,private:161,protected:161,static:163,abstract:165,override:167,readonly:173,new:355},CJ={__proto__:null,"<":129},AJ=tb.deserialize({version:14,states:"$8SO`QdOOO'QQ(C|O'#ChO'XOWO'#DVO)dQdO'#D]O)tQdO'#DhO){QdO'#DrO-xQdO'#DxOOQO'#E]'#E]O.]Q`O'#E[O.bQ`O'#E[OOQ(C['#Ef'#EfO0aQ(C|O'#ItO2wQ(C|O'#IuO3eQ`O'#EzO3jQ!bO'#FaOOQ(C['#FS'#FSO3rO#tO'#FSO4QQ&jO'#FhO5bQ`O'#FgOOQ(C['#Iu'#IuOOQ(CW'#It'#ItOOQS'#J^'#J^O5gQ`O'#HpO5lQ(ChO'#HqOOQS'#Ih'#IhOOQS'#Hr'#HrQ`QdOOO){QdO'#DjO5tQ`O'#G[O5yQ&jO'#CmO6XQ`O'#EZO6dQ`O'#EgO6iQ,UO'#FRO7TQ`O'#G[O7YQ`O'#G`O7eQ`O'#G`O7sQ`O'#GcO7sQ`O'#GdO7sQ`O'#GfO5tQ`O'#GiO8dQ`O'#GlO9rQ`O'#CdO:SQ`O'#GyO:[Q`O'#HPO:[Q`O'#HRO`QdO'#HTO:[Q`O'#HVO:[Q`O'#HYO:aQ`O'#H`O:fQ(CjO'#HfO){QdO'#HhO:qQ(CjO'#HjO:|Q(CjO'#HlO5lQ(ChO'#HnO){QdO'#DWOOOW'#Ht'#HtO;XOWO,59qOOQ(C[,59q,59qO=jQtO'#ChO=tQdO'#HuO>XQ`O'#IvO@WQtO'#IvO'dQdO'#IvO@_Q`O,59wO@uQ7[O'#DbOAnQ`O'#E]OA{Q`O'#JROBWQ`O'#JQOBWQ`O'#JQOB`Q`O,5:yOBeQ`O'#JPOBlQaO'#DyO5yQ&jO'#EZOBzQ`O'#EZOCVQpO'#FROOQ(C[,5:S,5:SOC_QdO,5:SOE]Q(C|O,5:^OEyQ`O,5:dOFdQ(ChO'#JOO7YQ`O'#I}OFkQ`O'#I}OFsQ`O,5:xOFxQ`O'#I}OGWQdO,5:vOIWQ&jO'#EWOJeQ`O,5:vOKwQ&jO'#DlOLOQdO'#DqOLYQ7[O,5;PO){QdO,5;POOQS'#Er'#ErOOQS'#Et'#EtO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;ROOQS'#Ex'#ExOLbQdO,5;cOOQ(C[,5;h,5;hOOQ(C[,5;i,5;iONbQ`O,5;iOOQ(C[,5;j,5;jO){QdO'#IPONgQ(ChO,5<TO! RQ&jO,5;RO){QdO,5;fO! kQ!bO'#JVO! YQ!bO'#JVO! rQ!bO'#JVO!!TQ!bO,5;qOOOO,5;{,5;{O!!cQdO'#FcOOOO'#IO'#IOO3rO#tO,5;nO!!jQ!bO'#FeOOQ(C[,5;n,5;nO!#WQ,VO'#CrOOQ(C]'#Cu'#CuO!#kQ`O'#CuO!#pOWO'#CyO!$^Q,VO,5<QO!$eQ`O,5<SO!%tQ&jO'#FrO!&RQ`O'#FsO!&WQ`O'#FsO!&]Q&jO'#FwO!'[Q7[O'#F{O!'}Q,VO'#IqOOQ(C]'#Iq'#IqO!(XQaO'#IpO!(gQ`O'#IoO!(oQ`O'#CqOOQ(C]'#Cs'#CsOOQ(C]'#C|'#C|O!(wQ`O'#DOOJjQ&jO'#FjOJjQ&jO'#FlO!(|Q`O'#FnO!)RQ`O'#FoO!&WQ`O'#FuOJjQ&jO'#FzO!)WQ`O'#E^O!)oQ`O,5<RO`QdO,5>[OOQS'#Ik'#IkOOQS,5>],5>]OOQS-E;p-E;pO!+kQ(C|O,5:UOOQ(CX'#Cp'#CpO!,[Q&kO,5<vOOQO'#Cf'#CfO!,mQ(ChO'#IlO5bQ`O'#IlO:aQ`O,59XO!-OQ!bO,59XO!-WQ&jO,59XO5yQ&jO,59XO!-cQ`O,5:vO!-kQ`O'#GxO!-yQ`O'#JbO){QdO,5;kO!.RQ7[O,5;mO!.WQ`O,5=cO!.]Q`O,5=cO!.bQ`O,5=cO5lQ(ChO,5=cO5tQ`O,5<vO!.pQ`O'#E_O!/UQ7[O'#E`OOQ(CW'#JP'#JPO!/gQ(ChO'#J_O5lQ(ChO,5<zO7sQ`O,5=QOOQP'#Cr'#CrO!/rQ!bO,5<}O!/zQ!cO,5=OO!0VQ`O,5=QO!0[QpO,5=TO:aQ`O'#GnO5tQ`O'#GpO!0dQ`O'#GpO5yQ&jO'#GsO!0iQ`O'#GsOOQS,5=W,5=WO!0nQ`O'#GtO!0vQ`O'#CmO!0{Q`O,59OO!1VQ`O,59OO!3XQdO,59OOOQS,59O,59OO!3fQ(ChO,59OO){QdO,59OO!3qQdO'#G{OOQS'#G|'#G|OOQS'#G}'#G}O`QdO,5=eO!4RQ`O,5=eO){QdO'#DxO`QdO,5=kO`QdO,5=mO!4WQ`O,5=oO`QdO,5=qO!4]Q`O,5=tO!4bQdO,5=zOOQS,5>Q,5>QO){QdO,5>QO5lQ(ChO,5>SOOQS,5>U,5>UO!8cQ`O,5>UOOQS,5>W,5>WO!8cQ`O,5>WOOQS,5>Y,5>YO!8hQpO,59rOOOW-E;r-E;rOOQ(C[1G/]1G/]O!8mQtO,5>aO'dQdO,5>aOOQO,5>f,5>fO!8wQdO'#HuOOQO-E;s-E;sO!9UQ`O,5?bO!9^QtO,5?bO!9eQ`O,5?lOOQ(C[1G/c1G/cO!9mQ!bO'#DTOOQO'#Ix'#IxO){QdO'#IxO!:[Q!bO'#IxO!:yQ!bO'#DcO!;[Q7[O'#DcO!=gQdO'#DcO!=nQ`O'#IwO!=vQ`O,59|O!={Q`O'#EaO!>ZQ`O'#JSO!>cQ`O,5:zO!>yQ7[O'#DcO){QdO,5?mO!?TQ`O'#HzOOQO-E;x-E;xO!9eQ`O,5?lOOQ(CW1G0e1G0eO!@aQ7[O'#D|OOQ(C[,5:e,5:eO){QdO,5:eOIWQ&jO,5:eO!@hQaO,5:eO:aQ`O,5:uO!-OQ!bO,5:uO!-WQ&jO,5:uO5yQ&jO,5:uOOQ(C[1G/n1G/nOOQ(C[1G0O1G0OOOQ(CW'#EV'#EVO){QdO,5?jO!@sQ(ChO,5?jO!AUQ(ChO,5?jO!A]Q`O,5?iO!AeQ`O'#H|O!A]Q`O,5?iOOQ(CW1G0d1G0dO7YQ`O,5?iOOQ(C[1G0b1G0bO!BPQ(C|O1G0bO!CRQ(CyO,5:rOOQ(C]'#Fq'#FqO!CoQ(C}O'#IqOGWQdO1G0bO!EqQ,VO'#IyO!E{Q`O,5:WO!FQQtO'#IzO){QdO'#IzO!F[Q`O,5:]OOQ(C]'#DT'#DTOOQ(C[1G0k1G0kO!FaQ`O1G0kO!HrQ(C|O1G0mO!HyQ(C|O1G0mO!K^Q(C|O1G0mO!KeQ(C|O1G0mO!MlQ(C|O1G0mO!NPQ(C|O1G0mO#!pQ(C|O1G0mO#!wQ(C|O1G0mO#%[Q(C|O1G0mO#%cQ(C|O1G0mO#'WQ(C|O1G0mO#*QQMlO'#ChO#+{QMlO1G0}O#-vQMlO'#IuOOQ(C[1G1T1G1TO#.ZQ(C|O,5>kOOQ(CW-E;}-E;}O#.zQ(C}O1G0mOOQ(C[1G0m1G0mO#1PQ(C|O1G1QO#1pQ!bO,5;sO#1uQ!bO,5;tO#1zQ!bO'#F[O#2`Q`O'#FZOOQO'#JW'#JWOOQO'#H}'#H}O#2eQ!bO1G1]OOQ(C[1G1]1G1]OOOO1G1f1G1fO#2sQMlO'#ItO#2}Q`O,5;}OLbQdO,5;}OOOO-E;|-E;|OOQ(C[1G1Y1G1YOOQ(C[,5<P,5<PO#3SQ!bO,5<POOQ(C],59a,59aOIWQ&jO'#C{OOOW'#Hs'#HsO#3XOWO,59eOOQ(C],59e,59eO){QdO1G1lO!)RQ`O'#IRO#3dQ`O,5<eOOQ(C],5<b,5<bOOQO'#GV'#GVOJjQ&jO,5<pOOQO'#GX'#GXOJjQ&jO,5<rOIWQ&jO,5<tOOQO1G1n1G1nO#3oQqO'#CpO#4SQqO,5<^O#4ZQ`O'#JZO5tQ`O'#JZO#4iQ`O,5<`OJjQ&jO,5<_O#4nQ`O'#FtO#4yQ`O,5<_O#5OQqO'#FqO#5]QqO'#J[O#5gQ`O'#J[OIWQ&jO'#J[O#5lQ`O,5<cOOQ(CW'#Dg'#DgO#5qQ!bO'#F|O!'VQ7[O'#F|O!'VQ7[O'#GOO#6SQ`O'#GPO!&WQ`O'#GSO#6XQ(ChO'#ITO#6dQ7[O,5<gOOQ(C],5<g,5<gO#6kQ7[O'#F|O#6yQ7[O'#F}O#7RQ7[O'#F}OOQ(C],5<u,5<uOJjQ&jO,5?[OJjQ&jO,5?[O#7WQ`O'#IUO#7cQ`O,5?ZO#7kQ`O,59]OOQ(C]'#Ch'#ChO#8[Q,VO,59jOOQ(C],59j,59jO#8}Q,VO,5<UO#9pQ,VO,5<WO#9zQ`O,5<YOOQ(C],5<Z,5<ZO#:PQ`O,5<aO#:UQ,VO,5<fOGWQdO1G1mO#:fQ`O1G1mOOQS1G3v1G3vOOQ(C[1G/p1G/pONbQ`O1G/pOOQS1G2b1G2bOIWQ&jO1G2bO){QdO1G2bOIWQ&jO1G2bO#:kQaO1G2bO#<QQ&jO'#EWOOQ(CW,5?W,5?WO#<[Q(ChO,5?WOOQS1G.s1G.sO:aQ`O1G.sO!-OQ!bO1G.sO!-WQ&jO1G.sO#<mQ`O1G0bO#<rQ`O'#ChO#<}Q`O'#JcO#=VQ`O,5=dO#=[Q`O'#JcO#=aQ`O'#JcO#=iQ`O'#I^O#=wQ`O,5?|O#>PQtO1G1VOOQ(C[1G1X1G1XO5tQ`O1G2}O#>WQ`O1G2}O#>]Q`O1G2}O#>bQ`O1G2}OOQS1G2}1G2}O#>gQ&kO1G2bO7YQ`O'#JQO7YQ`O'#EaO7YQ`O'#IWO#>xQ(ChO,5?yOOQS1G2f1G2fO!0VQ`O1G2lOIWQ&jO1G2iO#?TQ`O1G2iOOQS1G2j1G2jOIWQ&jO1G2jO#?YQaO1G2jO#?bQ7[O'#GhOOQS1G2l1G2lO!'VQ7[O'#IYO!0[QpO1G2oOOQS1G2o1G2oOOQS,5=Y,5=YO#?jQ&kO,5=[O5tQ`O,5=[O#6SQ`O,5=_O5bQ`O,5=_O!-OQ!bO,5=_O!-WQ&jO,5=_O5yQ&jO,5=_O#?{Q`O'#JaO#@WQ`O,5=`OOQS1G.j1G.jO#@]Q(ChO1G.jO#@hQ`O1G.jO#@mQ`O1G.jO5lQ(ChO1G.jO#@uQtO,5@OO#APQ`O,5@OO#A[QdO,5=gO#AcQ`O,5=gO7YQ`O,5@OOOQS1G3P1G3PO`QdO1G3POOQS1G3V1G3VOOQS1G3X1G3XO:[Q`O1G3ZO#AhQdO1G3]O#EcQdO'#H[OOQS1G3`1G3`O#EpQ`O'#HbO:aQ`O'#HdOOQS1G3f1G3fO#ExQdO1G3fO5lQ(ChO1G3lOOQS1G3n1G3nOOQ(CW'#Fx'#FxO5lQ(ChO1G3pO5lQ(ChO1G3rOOOW1G/^1G/^O#IvQpO,5<TO#JOQtO1G3{OOQO1G4Q1G4QO){QdO,5>aO#JYQ`O1G4|O#JbQ`O1G5WO#JjQ`O,5?dOLbQdO,5:{O7YQ`O,5:{O:aQ`O,59}OLbQdO,59}O!-OQ!bO,59}O#JoQMlO,59}OOQO,5:{,5:{O#JyQ7[O'#HvO#KaQ`O,5?cOOQ(C[1G/h1G/hO#KiQ7[O'#H{O#K}Q`O,5?nOOQ(CW1G0f1G0fO!;[Q7[O,59}O#LVQtO1G5XO7YQ`O,5>fOOQ(CW'#ES'#ESO#LaQ(DjO'#ETO!@XQ7[O'#D}OOQO'#Hy'#HyO#L{Q7[O,5:hOOQ(C[,5:h,5:hO#MSQ7[O'#D}O#MeQ7[O'#D}O#MlQ7[O'#EYO#MoQ7[O'#ETO#M|Q7[O'#ETO!@XQ7[O'#ETO#NaQ`O1G0PO#NfQqO1G0POOQ(C[1G0P1G0PO){QdO1G0POIWQ&jO1G0POOQ(C[1G0a1G0aO:aQ`O1G0aO!-OQ!bO1G0aO!-WQ&jO1G0aO#NmQ(C|O1G5UO){QdO1G5UO#N}Q(ChO1G5UO$ `Q`O1G5TO7YQ`O,5>hOOQO,5>h,5>hO$ hQ`O,5>hOOQO-E;z-E;zO$ `Q`O1G5TO$ vQ(C}O,59jO$#xQ(C}O,5<UO$%}Q(C}O,5<WO$(SQ(C}O,5<fOOQ(C[7+%|7+%|O$*_Q(C|O7+%|O$+OQ&jO'#HwO$+YQ`O,5?eOOQ(C]1G/r1G/rO$+bQdO'#HxO$+oQ`O,5?fO$+wQtO,5?fOOQ(C[1G/w1G/wOOQ(C[7+&V7+&VO$,RQMlO,5:^O){QdO7+&iO$,]QMlO,5:UOOQO1G1_1G1_OOQO1G1`1G1`O$,jQ!LQO,5;vOLbQdO,5;uOOQO-E;{-E;{OOQ(C[7+&w7+&wOOOO7+'Q7+'QOOOO1G1i1G1iO$,uQ`O1G1iOOQ(C[1G1k1G1kO$,zQqO,59gOOOW-E;q-E;qOOQ(C]1G/P1G/PO$-RQ(C|O7+'WOOQ(C],5>m,5>mO$-rQ`O,5>mOOQ(C]1G2P1G2PP$-wQ`O'#IRPOQ(C]-E<P-E<PO$.hQ,VO1G2[O$/ZQ,VO1G2^O$/eQqO1G2`OOQ(C]1G1x1G1xO$/lQ`O'#IQO$/zQ`O,5?uO$/zQ`O,5?uO$0SQ`O,5?uO$0_Q`O,5?uOOQO1G1z1G1zO$0mQ,VO1G1yOJjQ&jO1G1yO$0}Q&jO'#ISO$1_Q`O,5?vOIWQ&jO,5?vO$1gQqO,5?vOOQ(C]1G1}1G1}OOQ(CW,5<h,5<hOOQ(CW,5<i,5<iO$1qQ`O,5<iO#5}Q`O,5<iO!-OQ!bO,5<hO$1vQ`O,5<jOOQ(CW,5<k,5<kO$1qQ`O,5<nOOQO,5>o,5>oOOQO-E<R-E<ROOQ(C]1G2R1G2RO!'VQ7[O,5<hO$2OQ`O,5<iO!'VQ7[O,5<jO!'VQ7[O,5<iO$2ZQ,VO1G4vO$2eQ,VO1G4vOOQO,5>p,5>pOOQO-E<S-E<SOOQP1G.w1G.wO!.RQ7[O,59lO){QdO,59lO$2rQ`O1G1tOJjQ&jO1G1{O$2wQ(C|O7+'XOOQ(C[7+'X7+'XOGWQdO7+'XOOQ(C[7+%[7+%[O$3hQqO'#J]O#NaQ`O7+'|O$3rQ`O7+'|O$3zQqO7+'|OOQS7+'|7+'|OIWQ&jO7+'|O){QdO7+'|OIWQ&jO7+'|O$4UQ(CyO'#ChO$4iQ(CyO,5<lO$5ZQ`O,5<lOOQ(CW1G4r1G4rOOQS7+$_7+$_O:aQ`O7+$_O!-OQ!bO7+$_OGWQdO7+%|O$5`Q`O'#I]O$5qQ`O,5?}OOQO1G3O1G3OO5tQ`O,5?}O$5qQ`O,5?}O$5yQ`O,5?}OOQO,5>x,5>xOOQO-E<[-E<[OOQ(C[7+&q7+&qO$6OQ`O7+(iO5lQ(ChO7+(iO5tQ`O7+(iO$6TQ`O7+(iO$6YQaO7+'|OOQ(CW,5>r,5>rOOQ(CW-E<U-E<UOOQS7+(W7+(WO$6hQ(CyO7+(TOIWQ&jO7+(TO$6rQqO7+(UOOQS7+(U7+(UOIWQ&jO7+(UO$6yQ`O'#J`O$7UQ`O,5=SOOQO,5>t,5>tOOQO-E<W-E<WOOQS7+(Z7+(ZO$8OQ7[O'#GqOOQS1G2v1G2vOIWQ&jO1G2vO){QdO1G2vOIWQ&jO1G2vO$8VQaO1G2vO$8eQ&kO1G2vO5lQ(ChO1G2yO#6SQ`O1G2yO5bQ`O1G2yO!-OQ!bO1G2yO!-WQ&jO1G2yO$8vQ`O'#I[O$9RQ`O,5?{O$9ZQ7[O,5?{OOQ(CW1G2z1G2zOOQS7+$U7+$UO$9cQ`O7+$UO5lQ(ChO7+$UO$9hQ`O7+$UO){QdO1G5jO){QdO1G5kO$9mQdO1G3RO$9tQ`O1G3RO$9yQdO1G3RO$:QQ(ChO1G5jOOQS7+(k7+(kO5lQ(ChO7+(uO`QdO7+(wOOQS'#Jf'#JfOOQS'#I_'#I_O$:[QdO,5=vOOQS,5=v,5=vO){QdO'#H]O$:iQ`O'#H_OOQS,5=|,5=|O7YQ`O,5=|OOQS,5>O,5>OOOQS7+)Q7+)QOOQS7+)W7+)WOOQS7+)[7+)[OOQS7+)^7+)^OOQO1G5O1G5OO$:nQMlO1G0gO$:xQ`O1G0gOOQO1G/i1G/iO$;TQMlO1G/iO:aQ`O1G/iOLbQdO'#DcOOQO,5>b,5>bOOQO-E;t-E;tOOQO,5>g,5>gOOQO-E;y-E;yO!-OQ!bO1G/iO:aQ`O,5:iOOQO,5:o,5:oO){QdO,5:oO$;_Q(ChO,5:oO$;jQ(ChO,5:oO!-OQ!bO,5:iOOQO-E;w-E;wOOQ(C[1G0S1G0SO!@XQ7[O,5:iO$;xQ7[O,5:iO$<ZQ(DjO,5:oO$<uQ7[O,5:iO!@XQ7[O,5:oOOQO,5:t,5:tO$<|Q7[O,5:oO$=ZQ(ChO,5:oOOQ(C[7+%k7+%kO#NaQ`O7+%kO#NfQqO7+%kOOQ(C[7+%{7+%{O:aQ`O7+%{O!-OQ!bO7+%{O$=oQ(C|O7+*pO){QdO7+*pOOQO1G4S1G4SO7YQ`O1G4SO$>PQ`O7+*oO$>XQ(C}O1G2[O$@^Q(C}O1G2^O$BcQ(C}O1G1yO$DnQ,VO,5>cOOQO-E;u-E;uO$DxQtO,5>dO){QdO,5>dOOQO-E;v-E;vO$ESQ`O1G5QO$E[QMlO1G0bO$GcQMlO1G0mO$GjQMlO1G0mO$IkQMlO1G0mO$IrQMlO1G0mO$KgQMlO1G0mO$KzQMlO1G0mO$NXQMlO1G0mO$N`QMlO1G0mO%!aQMlO1G0mO%!hQMlO1G0mO%$]QMlO1G0mO%$pQ(C|O<<JTO%%rQMmO1G0mO%'|QMmO'#IqO%)iQMlO1G1QOLbQdO'#F^OOQO'#JX'#JXOOQO1G1b1G1bO%)vQ`O1G1aO%){QMlO,5>kOOOO7+'T7+'TOOOW1G/R1G/ROOQ(C]1G4X1G4XOJjQ&jO7+'zO%*VQ`O,5>lO5tQ`O,5>lOOQO-E<O-E<OO%*eQ`O1G5aO%*eQ`O1G5aO%*mQ`O1G5aO%*xQ,VO7+'eO%+YQqO,5>nO%+dQ`O,5>nOIWQ&jO,5>nOOQO-E<Q-E<QO%+iQqO1G5bO%+sQ`O1G5bOOQ(CW1G2T1G2TO$1qQ`O1G2TOOQ(CW1G2S1G2SO%+{Q`O1G2UOIWQ&jO1G2UOOQ(CW1G2Y1G2YO!-OQ!bO1G2SO#5}Q`O1G2TO%,QQ`O1G2UO%,YQ`O1G2TOJjQ&jO7+*bOOQ(C]1G/W1G/WO%,eQ`O1G/WOOQ(C]7+'`7+'`O%,jQ,VO7+'gO%,zQ(C|O<<JsOOQ(C[<<Js<<JsOIWQ&jO'#IVO%-kQ`O,5?wOOQS<<Kh<<KhOIWQ&jO<<KhO#NaQ`O<<KhO%-sQ`O<<KhO%-{QqO<<KhOIWQ&jO1G2WOOQS<<Gy<<GyO:aQ`O<<GyO%.VQ(C|O<<IhOOQ(C[<<Ih<<IhOOQO,5>w,5>wO%.vQ`O,5>wO%.{Q`O,5>wOOQO-E<Z-E<ZO%/TQ`O1G5iO%/TQ`O1G5iO5tQ`O1G5iO%/]Q`O<<LTOOQS<<LT<<LTO%/bQ`O<<LTO5lQ(ChO<<LTO){QdO<<KhOIWQ&jO<<KhOOQS<<Ko<<KoO$6hQ(CyO<<KoOOQS<<Kp<<KpO$6rQqO<<KpO%/gQ7[O'#IXO%/rQ`O,5?zOLbQdO,5?zOOQS1G2n1G2nO#LaQ(DjO'#ETO!@XQ7[O'#GrOOQO'#IZ'#IZO%/zQ7[O,5=]OOQS,5=],5=]O%0RQ7[O'#ETO%0^Q7[O'#ETO%0uQ7[O'#ETO%1PQ7[O'#GrO%1bQ`O7+(bO%1gQ`O7+(bO%1oQqO7+(bOOQS7+(b7+(bOIWQ&jO7+(bO){QdO7+(bOIWQ&jO7+(bO%1yQaO7+(bOOQS7+(e7+(eO5lQ(ChO7+(eO#6SQ`O7+(eO5bQ`O7+(eO!-OQ!bO7+(eO%2XQ`O,5>vOOQO-E<Y-E<YOOQO'#Gu'#GuO%2dQ`O1G5gO5lQ(ChO<<GpOOQS<<Gp<<GpO%2lQ`O<<GpO%2qQ`O7++UO%2vQ`O7++VOOQS7+(m7+(mO%2{Q`O7+(mO%3QQdO7+(mO%3XQ`O7+(mO){QdO7++UO){QdO7++VOOQS<<La<<LaOOQS<<Lc<<LcOOQS-E<]-E<]OOQS1G3b1G3bO%3^Q`O,5=wOOQS,5=y,5=yO%3cQ`O1G3hOLbQdO7+&ROOQO7+%T7+%TO%3hQMlO1G5XO:aQ`O7+%TOOQO1G0T1G0TO%3rQ(C|O1G0ZOOQO1G0Z1G0ZO){QdO1G0ZO%3|Q(ChO1G0ZO:aQ`O1G0TO!-OQ!bO1G0TO!@XQ7[O1G0TO%4XQ(ChO1G0ZO%4gQ7[O1G0TO%4xQ(ChO1G0ZO%5^Q(DjO1G0ZO%5hQ7[O1G0TO!@XQ7[O1G0ZOOQ(C[<<IV<<IVOOQ(C[<<Ig<<IgO:aQ`O<<IgO%5oQ(C|O<<N[OOQO7+)n7+)nO%6PQ(C}O7+'eO%8[Q(C}O7+'gO%:gQtO1G4OO%:qQMlO7+%|O%;gQMmO,59jO%=hQMmO,5<UO%?lQMmO,5<WO%A[QMmO,5<fO%B}QMlO7+'WO%C[QMlO7+'XO%CiQ`O,5;xOOQO7+&{7+&{O%CnQ,VO<<KfOOQO1G4W1G4WO%CuQ`O1G4WO%DQQ`O1G4WO%D`Q`O7+*{O%D`Q`O7+*{OIWQ&jO1G4YO%DhQqO1G4YO%DrQ`O7+*|OOQ(CW7+'o7+'oO$1qQ`O7+'pO%DzQqO7+'pOOQ(CW7+'n7+'nO$1qQ`O7+'oO%ERQ`O7+'pOIWQ&jO7+'pO#5}Q`O7+'oO%EWQ,VO<<M|OOQ(C]7+$r7+$rO%EbQqO,5>qOOQO-E<T-E<TO#NaQ`OANASOOQSANASANASOIWQ&jOANASO%ElQ(CyO7+'rOOQSAN=eAN=eO5tQ`O1G4cOOQO1G4c1G4cO%E|Q`O1G4cO%FRQ`O7++TO%FRQ`O7++TO5lQ(ChOANAoO%FZQ`OANAoOOQSANAoANAoO%F`Q`OANASO%FhQqOANASOOQSANAZANAZOOQSANA[ANA[O%FrQ`O,5>sOOQO-E<V-E<VO%F}QMlO1G5fO#6SQ`O,5=^O5bQ`O,5=^O!-OQ!bO,5=^OOQO-E<X-E<XOOQS1G2w1G2wO$<ZQ(DjO,5:oO!@XQ7[O,5=^O%GXQ7[O,5=^O%GjQ7[O,5:oOOQS<<K|<<K|OIWQ&jO<<K|O%1bQ`O<<K|O%GtQ`O<<K|O%G|QqO<<K|O){QdO<<K|OIWQ&jO<<K|OOQS<<LP<<LPO5lQ(ChO<<LPO#6SQ`O<<LPO5bQ`O<<LPO%HWQ7[O1G4bO%H`Q`O7++ROOQSAN=[AN=[O5lQ(ChOAN=[OOQS<<Np<<NpOOQS<<Nq<<NqOOQS<<LX<<LXO%HhQ`O<<LXO%HmQdO<<LXO%HtQ`O<<NpO%HyQ`O<<NqOOQS1G3c1G3cO:aQ`O7+)SO%IOQMlO<<ImOOQO<<Ho<<HoOOQO7+%u7+%uO%3rQ(C|O7+%uO){QdO7+%uOOQO7+%o7+%oO:aQ`O7+%oO!-OQ!bO7+%oO%IYQ(ChO7+%uO!@XQ7[O7+%oO%IeQ(ChO7+%uO%IsQ7[O7+%oO%JUQ(ChO7+%uOOQ(C[AN?RAN?RO%JjQMlO<<JTO%JwQMmO1G1yO%MOQMmO1G2[O& SQMmO1G2^O&!rQMlO<<JsO&#PQMlO<<IhOOQO1G1d1G1dOJjQ&jOANAQOOQO7+)r7+)rO&#^Q`O7+)rO&#iQ`O<<NgO&#qQqO7+)tOOQ(CW<<K[<<K[O$1qQ`O<<K[OOQ(CW<<KZ<<KZO&#{QqO<<K[O$1qQ`O<<KZOOQSG26nG26nO#NaQ`OG26nOOQO7+)}7+)}O5tQ`O7+)}O&$SQ`O<<NoOOQSG27ZG27ZO5lQ(ChOG27ZOIWQ&jOG26nOLbQdO1G4_O&$[Q`O7++QO5lQ(ChO1G2xO#6SQ`O1G2xO5bQ`O1G2xO!-OQ!bO1G2xO!@XQ7[O1G2xO%5^Q(DjO1G0ZO&$dQ7[O1G2xO%1bQ`OANAhOOQSANAhANAhOIWQ&jOANAhO&$uQ`OANAhO&$}QqOANAhOOQSANAkANAkO5lQ(ChOANAkO#6SQ`OANAkOOQO'#Gv'#GvOOQO7+)|7+)|OOQSG22vG22vOOQSANAsANAsO&%XQ`OANAsOOQSAND[AND[OOQSAND]AND]OOQS<<Ln<<LnOOQO<<Ia<<IaO%3rQ(C|O<<IaOOQO<<IZ<<IZO:aQ`O<<IZO){QdO<<IaO!-OQ!bO<<IZO&%^Q(ChO<<IaO!@XQ7[O<<IZO&%iQ(ChO<<IaO&%wQMmO7+'eO&'jQMmO7+'gO&)]Q,VOG26lOOQO<<M^<<M^OOQ(CWAN@vAN@vO$1qQ`OAN@vOOQ(CWAN@uAN@uOOQSLD,YLD,YOOQO<<Mi<<MiOOQSLD,uLD,uO#NaQ`OLD,YO&)mQMlO7+)yOOQO7+(d7+(dO5lQ(ChO7+(dO#6SQ`O7+(dO5bQ`O7+(dO!-OQ!bO7+(dO!@XQ7[O7+(dOOQSG27SG27SO%1bQ`OG27SOIWQ&jOG27SOOQSG27VG27VO5lQ(ChOG27VOOQSG27_G27_OOQOAN>{AN>{OOQOAN>uAN>uO%3rQ(C|OAN>{O:aQ`OAN>uO){QdOAN>{O!-OQ!bOAN>uO&)wQ(ChOAN>{O&*SQ(C}OG26lOOQ(CWG26bG26bOOQS!$( t!$( tOOQO<<LO<<LOO5lQ(ChO<<LOO#6SQ`O<<LOO5bQ`O<<LOO!-OQ!bO<<LOOOQSLD,nLD,nO%1bQ`OLD,nOOQSLD,qLD,qOOQOG24gG24gOOQOG24aG24aO%3rQ(C|OG24gO:aQ`OG24aO){QdOG24gO&,pQ!LRO,5:rO&-gQ$ITO'#IqOOQOANAjANAjO5lQ(ChOANAjO#6SQ`OANAjO5bQ`OANAjOOQS!$(!Y!$(!YOOQOLD*RLD*ROOQOLD){LD){O%3rQ(C|OLD*RO&.ZQMmOG26lO&/|Q!LRO,59jO&0pQ!LRO,5<UO&1dQ!LRO,5<WO&2WQ!LRO,5<fOOQOG27UG27UO5lQ(ChOG27UO#6SQ`OG27UOOQO!$'Mm!$'MmO&2}Q!LRO1G2[O&3qQ!LRO1G2^O&4eQ!LRO1G1yOOQOLD,pLD,pO5lQ(ChOLD,pO&5[Q!LRO7+'eO&6RQ!LRO7+'gOOQO!$(![!$(![O&6xQ!LROG26lOLbQdO'#DrO&7oQtO'#ItOLbQdO'#DjO&7vQ(C|O'#ChO&8aQtO'#ChO&8qQdO,5:vO&:qQ&jO'#EWOLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO'#IPO&<OQ`O,5<TO&=eQ&jO,5;ROLbQdO,5;fO!(wQ`O'#DOO!(wQ`O'#DOO!(wQ`O'#DOOIWQ&jO'#FjO&:qQ&jO'#FjO&<WQ&jO'#FjOIWQ&jO'#FlO&:qQ&jO'#FlO&<WQ&jO'#FlOIWQ&jO'#FzO&:qQ&jO'#FzO&<WQ&jO'#FzOLbQdO,5?mO&8qQdO1G0bO&=lQMlO'#ChOLbQdO1G1lOIWQ&jO,5<pO&:qQ&jO,5<pO&<WQ&jO,5<pOIWQ&jO,5<rO&:qQ&jO,5<rO&<WQ&jO,5<rOIWQ&jO,5<_O&:qQ&jO,5<_O&<WQ&jO,5<_O&8qQdO1G1mOLbQdO7+&iOIWQ&jO1G1yO&:qQ&jO1G1yO&<WQ&jO1G1yOIWQ&jO1G1{O&:qQ&jO1G1{O&<WQ&jO1G1{O&8qQdO7+'XO&8qQdO7+%|O&=vQ`O7+'pOIWQ&jOANAQO&:qQ&jOANAQO&<WQ&jOANAQO&=vQ`O<<K[O&=vQ`OAN@vO&={Q`O'#E[O&>QQ`O'#E[O&>YQ`O'#EzO&>_Q`O'#EgO&>dQ`O'#JRO&>oQ`O'#JPO&>zQ`O,5:vO&?PQ,VO,5<QO&?WQ`O'#FsO&?]Q`O'#FsO&?bQ`O'#FsO&?gQ`O,5<RO&?oQ`O,5:vO&?wQMlO1G0}O&@OQ`O,5<_O&@TQ`O,5<_O&@YQ`O,5<_O&@_Q`O,5<aO&@dQ`O,5<aO&@iQ`O,5<aO&@nQ`O1G1mO&@sQ`O1G0bO&@xQ`O1G2UO&@}Q,VO<<KfO&AUQ,VO<<KfO&A]Q,VO<<KfO&AdQqO7+'pO&AkQ`O7+'pO&ApQqO<<K[O4QQ&jO'#FhO5bQ`O'#FgOBzQ`O'#EZOLbQdO,5;cO!&WQ`O'#FsO!&WQ`O'#FsO!&WQ`O'#FsO!&WQ`O'#FuO!&WQ`O'#FuO!&WQ`O'#FuO&AwQ`O,5<jOJjQ&jO7+'zOJjQ&jO7+'zOJjQ&jO7+'zOIWQ&jO1G2UO&BPQ`O1G2UOIWQ&jO7+'pO!'VQ7[O'#GOO$/eQqO1G2`O$/eQqO1G2`O$/eQqO1G2`O!'VQ7[O,5<jOIWQ&jO,5<tOIWQ&jO,5<tOIWQ&jO,5<t",stateData:"&B}~O'YOS'ZOSTOSUOS~OQTORTOXyO]cO_hObnOcmOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!TSO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!nlO#dsO#tpO#x^O%PqO%RtO%TrO%UrO%XuO%ZvO%^wO%_wO%axO%nzO%t{O%v|O%x}O%z!OO%}!PO&T!QO&Z!RO&]!SO&_!TO&a!UO&c!VO']PO'fQO'oYO'|aO~OQ[XZ[X_[Xj[Xu[Xv[Xx[X!R[X!a[X!b[X!d[X!j[X!{[X#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'W[X'f[X'p[X'w[X'x[X~O!]$lX~P$zOS!WO'U!XO'V!ZO~OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']![O'fQO'oYO'|aO~O!Q!`O!R!]O!O'jP!O'tP~P'dO!S!mO~P`OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']9aO'fQO'oYO'|aO~OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O'fQO'oYO'|aO~O!Q!rO#U!uO#V!rO']9bO!c'qP~P+{O#W!vO~O!]!wO#W!vO~OQ#^OZ#dOj#ROu!{Ov!{Ox!|O!R#bO!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O_'hX'W'hX!c'hX!O'hX!T'hX%Q'hX!]'hX~P.jO!{#eO#o#eOQ'iXZ'iX_'iXj'iXu'iXv'iXx'iX!R'iX!a'iX!b'iX!d'iX!j'iX#['iX#]'iX#^'iX#_'iX#`'iX#a'iX#b'iX#e'iX#g'iX#i'iX#j'iX'f'iX'p'iX'w'iX'x'iX~O#c'iX'W'iX!O'iX!c'iXn'iX!T'iX%Q'iX!]'iX~P0zO!{#eO~O#z#fO$R#jO~O!T#kO#x^O$U#lO$W#nO~O]#qOh$QOj#rOk#qOl#qOq$ROs$SOx#yO!T#zO!_$XO!d#vO#V$YO#t$VO$_$TO$a$UO$d$WO']#pO'b$PO'f#sO'a'cP~O!d$ZO~O!]$]O~O_$^O'W$^O~O']$bO~O!d$ZO']$bO'^$dO'b$PO~Oc$jO!d$ZO']$bO~O#c#TO~O]$sOu$oO!T$lO!d$nO%R$rO']$bO'^$dO^(UP~O!n$tO~Ox$uO!T$vO']$bO~Ox$uO!T$vO%Z$zO']$bO~O']${O~O#dsO%RtO%TrO%UrO%XuO%ZvO%^wO%_wO~Ob%UOc%TO!n%RO%P%SO%c%QO~P7xOb%XOcmO!T%WO!nlO#dsO%PqO%TrO%UrO%XuO%ZvO%^wO%_wO%axO~O`%[O!{%_O%R%YO'^$dO~P8wO!d%`O!g%dO~O!d%eO~O!TSO~O_$^O'T%mO'W$^O~O_$^O'T%pO'W$^O~O_$^O'T%rO'W$^O~OS!WO'U!XO'V%vO~OQ[XZ[Xj[Xu[Xv[Xx[X!R[X!RdX!a[X!b[X!d[X!j[X!{[X!{dX#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'f[X'p[X'w[X'x[X~O!O[X!OdX~P;dO!Q%xO!O&iX!O&nX!R&iX!R&nX~P'dO!R%zO!O'jX~OQ#^OZ#dOj#ROu!{Ov!{Ox!|O!R%zO!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O!O'jX~P>aO!O&PO~Ox&SO!W&^O!X&VO!Y&VO'^$dO~O]&TOk&TO!Q&WO'g&QO!S'kP!S'vP~P@dO!O'sX!R'sX!]'sX!c'sX'p'sX~O!{'sX#W#PX!S'sX~PA]O!{&_O!O'uX!R'uX~O!R&`O!O'tX~O!O&cO~O!{#eO~PA]OP&gO!T&dO!o&fO']$bO~Oc&lO!d$ZO']$bO~Ou$oO!d$nO~O!S&mO~P`Ou!{Ov!{Ox!|O!b!yO!d!zO'fQOQ!faZ!faj!fa!R!fa!a!fa!j!fa#[!fa#]!fa#^!fa#_!fa#`!fa#a!fa#b!fa#c!fa#e!fa#g!fa#i!fa#j!fa'p!fa'w!fa'x!fa~O_!fa'W!fa!O!fa!c!fan!fa!T!fa%Q!fa!]!fa~PCfO!c&nO~O!]!wO!{&pO'p&oO!R'rX_'rX'W'rX~O!c'rX~PFOO!R&tO!c'qX~O!c&vO~Ox$uO!T$vO#V&wO']$bO~OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!TSO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']9aO'fQO'oYO'|aO~O]#qOh$QOj#rOk#qOl#qOq$ROs9tOx#yO!T#zO!_;eO!d#vO#V9}O#t$VO$_9wO$a9zO$d$WO']&{O'b$PO'f#sO~O#W&}O~O]#qOh$QOj#rOk#qOl#qOq$ROs$SOx#yO!T#zO!_$XO!d#vO#V$YO#t$VO$_$TO$a$UO$d$WO']&{O'b$PO'f#sO~O'a'mP~PJjO!Q'RO!c'nP~P){O'g'TO'oYO~OQ9^OR9^O]cOb;`Oc!jOhcOj9^OkcOlcOq9^Os9^OxRO{cO|cO}cO!T!bO!_9`O!dUO!g9^O!h9^O!i9^O!j9^O!k9^O!n!iO#t!lO#x^O']'cO'fQO'oYO'|;^O~O!d!zO~O!R#bO_$]a'W$]a!c$]a!O$]a!T$]a%Q$]a!]$]a~O#d'jO~PIWO!]'lO!T'yX#w'yX#z'yX$R'yX~Ou'mO~P! YOu'mO!T'yX#w'yX#z'yX$R'yX~O!T'oO#w'sO#z'nO$R'tO~O!Q'wO~PLbO#z#fO$R'zO~OP$eXu$eXx$eX!b$eX'w$eX'x$eX~OPfX!RfX!{fX'afX'a$eX~P!!rOk'|O~OS'}O'U(OO'V(QO~OP(ZOu(SOx(TO'w(VO'x(XO~O'a(RO~P!#{O'a([O~O]#qOh$QOj#rOk#qOl#qOq$ROs9tOx#yO!T#zO!_;eO!d#vO#V9}O#t$VO$_9wO$a9zO$d$WO'b$PO'f#sO~O!Q(`O'](]O!c'}P~P!$jO#W(bO~O!d(cO~O!Q(hO'](eO!O(OP~P!$jOj(uOx(mO!W(sO!X(lO!Y(lO!d(cO!x(tO$w(oO'^$dO'g(jO~O!S(rO~P!&jO!b!yOP'eXu'eXx'eX'w'eX'x'eX!R'eX!{'eX~O'a'eX#m'eX~P!'cOP(xO!{(wO!R'dX'a'dX~O!R(yO'a'cX~O']${O'a'cP~O'](|O~O!d)RO~O']&{O~Ox$uO!Q!rO!T$vO#U!uO#V!rO']$bO!c'qP~O!]!wO#W)VO~OQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O_!^a!R!^a'W!^a!O!^a!c!^an!^a!T!^a%Q!^a!]!^a~P!)wOP)_O!T&dO!o)^O%Q)]O'b$PO~O!])aO!T'`X_'`X!R'`X'W'`X~O!d$ZO'b$PO~O!d$ZO']$bO'b$PO~O!]!wO#W&}O~O])lO%R)mO'])iO!S(VP~O!R)nO^(UX~O'g'TO~OZ)rO~O^)sO~O!T$lO']$bO'^$dO^(UP~Ox$uO!Q)xO!R&`O!T$vO']$bO!O'tP~O]&ZOk&ZO!Q)yO'g'TO!S'vP~O!R)zO_(RX'W(RX~O!{*OO'b$PO~OP*RO!T#zO'b$PO~O!T*TO~Ou*VO!TSO~O!n*[O~Oc*aO~O'](|O!S(TP~Oc$jO~O%RtO']${O~P8wOZ*gO^*fO~OQTORTO]cObnOcmOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!nlO#x^O%PqO'fQO'oYO'|aO~O!T!bO#t!lO']9aO~P!1_O^*fO_$^O'W$^O~O_*kO#d*mO%T*mO%U*mO~P){O!d%`O~O%t*rO~O!T*tO~O&V*vO&X*wOQ&SaR&SaX&Sa]&Sa_&Sab&Sac&Sah&Saj&Sak&Sal&Saq&Sas&Sax&Sa{&Sa|&Sa}&Sa!T&Sa!_&Sa!d&Sa!g&Sa!h&Sa!i&Sa!j&Sa!k&Sa!n&Sa#d&Sa#t&Sa#x&Sa%P&Sa%R&Sa%T&Sa%U&Sa%X&Sa%Z&Sa%^&Sa%_&Sa%a&Sa%n&Sa%t&Sa%v&Sa%x&Sa%z&Sa%}&Sa&T&Sa&Z&Sa&]&Sa&_&Sa&a&Sa&c&Sa'S&Sa']&Sa'f&Sa'o&Sa'|&Sa!S&Sa%{&Sa`&Sa&Q&Sa~O']*|O~On+PO~O!O&ia!R&ia~P!)wO!Q+TO!O&iX!R&iX~P){O!R%zO!O'ja~O!O'ja~P>aO!R&`O!O'ta~O!RwX!R!ZX!SwX!S!ZX!]wX!]!ZX!d!ZX!{wX'b!ZX~O!]+YO!{+XO!R#TX!R'lX!S#TX!S'lX!]'lX!d'lX'b'lX~O!]+[O!d$ZO'b$PO!R!VX!S!VX~O]&ROk&ROx&SO'g(jO~OQ9^OR9^O]cOb;`Oc!jOhcOj9^OkcOlcOq9^Os9^OxRO{cO|cO}cO!T!bO!_9`O!dUO!g9^O!h9^O!i9^O!j9^O!k9^O!n!iO#t!lO#x^O'fQO'oYO'|;^O~O']:SO~P!;jO!R+`O!S'kX~O!S+bO~O!]+YO!{+XO!R#TX!S#TX~O!R+cO!S'vX~O!S+eO~O]&ROk&ROx&SO'^$dO'g(jO~O!X+fO!Y+fO~P!>hOx$uO!Q+hO!T$vO']$bO!O&nX!R&nX~O_+lO!W+oO!X+kO!Y+kO!r+sO!s+qO!t+rO!u+pO!x+tO'^$dO'g(jO'o+iO~O!S+nO~P!?iOP+yO!T&dO!o+xO~O!{,PO!R'ra!c'ra_'ra'W'ra~O!]!wO~P!@sO!R&tO!c'qa~Ox$uO!Q,SO!T$vO#U,UO#V,SO']$bO!R&pX!c&pX~O_#Oi!R#Oi'W#Oi!O#Oi!c#Oin#Oi!T#Oi%Q#Oi!]#Oi~P!)wOP;tOu(SOx(TO'w(VO'x(XO~O#W!za!R!za!c!za!{!za!T!za_!za'W!za!O!za~P!BpO#W'eXQ'eXZ'eX_'eXj'eXv'eX!a'eX!d'eX!j'eX#['eX#]'eX#^'eX#_'eX#`'eX#a'eX#b'eX#c'eX#e'eX#g'eX#i'eX#j'eX'W'eX'f'eX'p'eX!c'eX!O'eX!T'eXn'eX%Q'eX!]'eX~P!'cO!R,_O'a'mX~P!#{O'a,aO~O!R,bO!c'nX~P!)wO!c,eO~O!O,fO~OQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O'fQOZ#Zi_#Zij#Zi!R#Zi!a#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O#[#Zi~P!FfO#[#PO~P!FfOQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO'fQOZ#Zi_#Zi!R#Zi!a#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~Oj#Zi~P!IQOj#RO~P!IQOQ#^Oj#ROu!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO'fQO_#Zi!R#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~OZ#Zi!a#Zi#a#Zi#b#Zi#c#Zi~P!KlOZ#dO!a#TO#a#TO#b#TO#c#TO~P!KlOQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO'fQO_#Zi!R#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O'w#Zi~P!NdO'w!}O~P!NdOQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO'fQO'w!}O_#Zi!R#Zi#i#Zi#j#Zi'W#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O'x#Zi~P##OO'x#OO~P##OOQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO'fQO'w!}O'x#OO~O_#Zi!R#Zi#j#Zi'W#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~P#%jOQ[XZ[Xj[Xu[Xv[Xx[X!a[X!b[X!d[X!j[X!{[X#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'f[X'p[X'w[X'x[X!R[X!S[X~O#m[X~P#'}OQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO#g9lO#i9nO#j9oO'fQO'p#[O'w!}O'x#OO~O#m,hO~P#*XOQ'iXZ'iXj'iXu'iXv'iXx'iX!a'iX!b'iX!d'iX!j'iX#['iX#]'iX#^'iX#_'iX#`'iX#a'iX#b'iX#e'iX#g'iX#i'iX#j'iX'f'iX'p'iX'w'iX'x'iX!R'iX~O!{9sO#o9sO#c'iX#m'iX!S'iX~P#,SO_&sa!R&sa'W&sa!c&san&sa!O&sa!T&sa%Q&sa!]&sa~P!)wOQ#ZiZ#Zi_#Zij#Ziv#Zi!R#Zi!a#Zi!b#Zi!d#Zi!j#Zi#[#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'f#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~P!BpO_#ni!R#ni'W#ni!O#ni!c#nin#ni!T#ni%Q#ni!]#ni~P!)wO#z,jO~O#z,kO~O!]'lO!{,lO!T$OX#w$OX#z$OX$R$OX~O!Q,mO~O!T'oO#w,oO#z'nO$R,pO~O!R9pO!S'hX~P#*XO!S,qO~O$R,sO~OS'}O'U(OO'V,vO~O],yOk,yO!O,zO~O!RdX!]dX!cdX!c$eX'pdX~P!!rO!c-QO~P!BpO!R-RO!]!wO'p&oO!c'}X~O!c-WO~O!Q(`O']$bO!c'}P~O#W-YO~O!O$eX!R$eX!]$lX~P!!rO!R-ZO!O(OX~P!BpO!]-]O~O!O-_O~Oj-cO!]!wO!d$ZO'b$PO'p&oO~O!])aO~O_$^O!R-hO'W$^O~O!S-jO~P!&jO!X-kO!Y-kO'^$dO'g(jO~Ox-mO'g(jO~O!x-nO~O']${O!R&xX'a&xX~O!R(yO'a'ca~O'a-sO~Ou-tOv-tOx-uOPra'wra'xra!Rra!{ra~O'ara#mra~P#7pOu(SOx(TOP$^a'w$^a'x$^a!R$^a!{$^a~O'a$^a#m$^a~P#8fOu(SOx(TOP$`a'w$`a'x$`a!R$`a!{$`a~O'a$`a#m$`a~P#9XO]-vO~O#W-wO~O'a$na!R$na!{$na#m$na~P!#{O#W-zO~OP.TO!T&dO!o.SO%Q.RO~O]#qOj#rOk#qOl#qOq$ROs9tOx#yO!T#zO!_;eO!d#vO#V9}O#t$VO$_9wO$a9zO$d$WO'b$PO'f#sO~Oh.VO'].UO~P#:yO!])aO!T'`a_'`a!R'`a'W'`a~O#W.]O~OZ[X!RdX!SdX~O!R.^O!S(VX~O!S.`O~OZ.aO~O].cO'])iO~O!T$lO']$bO^'QX!R'QX~O!R)nO^(Ua~O!c.fO~P!)wO].hO~OZ.iO~O^.jO~OP.TO!T&dO!o.SO%Q.RO'b$PO~O!R)zO_(Ra'W(Ra~O!{.pO~OP.sO!T#zO~O'g'TO!S(SP~OP.}O!T.yO!o.|O%Q.{O'b$PO~OZ/XO!R/VO!S(TX~O!S/YO~O^/[O_$^O'W$^O~O]/]O~O]/^O'](|O~O#c/_O%r/`O~P0zO!{#eO#c/_O%r/`O~O_/aO~P){O_/cO~O%{/gOQ%yiR%yiX%yi]%yi_%yib%yic%yih%yij%yik%yil%yiq%yis%yix%yi{%yi|%yi}%yi!T%yi!_%yi!d%yi!g%yi!h%yi!i%yi!j%yi!k%yi!n%yi#d%yi#t%yi#x%yi%P%yi%R%yi%T%yi%U%yi%X%yi%Z%yi%^%yi%_%yi%a%yi%n%yi%t%yi%v%yi%x%yi%z%yi%}%yi&T%yi&Z%yi&]%yi&_%yi&a%yi&c%yi'S%yi']%yi'f%yi'o%yi'|%yi!S%yi`%yi&Q%yi~O`/mO!S/kO&Q/lO~P`O!TSO!d/oO~O&X*wOQ&SiR&SiX&Si]&Si_&Sib&Sic&Sih&Sij&Sik&Sil&Siq&Sis&Six&Si{&Si|&Si}&Si!T&Si!_&Si!d&Si!g&Si!h&Si!i&Si!j&Si!k&Si!n&Si#d&Si#t&Si#x&Si%P&Si%R&Si%T&Si%U&Si%X&Si%Z&Si%^&Si%_&Si%a&Si%n&Si%t&Si%v&Si%x&Si%z&Si%}&Si&T&Si&Z&Si&]&Si&_&Si&a&Si&c&Si'S&Si']&Si'f&Si'o&Si'|&Si!S&Si%{&Si`&Si&Q&Si~O!R#bOn$]a~O!O&ii!R&ii~P!)wO!R%zO!O'ji~O!R&`O!O'ti~O!O/uO~O!R!Va!S!Va~P#*XO]&ROk&RO!Q/{O'g(jO!R&jX!S&jX~P@dO!R+`O!S'ka~O]&ZOk&ZO!Q)yO'g'TO!R&oX!S&oX~O!R+cO!S'va~O!O'ui!R'ui~P!)wO_$^O!]!wO!d$ZO!j0VO!{0TO'W$^O'b$PO'p&oO~O!S0YO~P!?iO!X0ZO!Y0ZO'^$dO'g(jO'o+iO~O!W0[O~P#MSO!TSO!W0[O!u0^O!x0_O~P#MSO!W0[O!s0aO!t0aO!u0^O!x0_O~P#MSO!T&dO~O!T&dO~P!BpO!R'ri!c'ri_'ri'W'ri~P!)wO!{0jO!R'ri!c'ri_'ri'W'ri~O!R&tO!c'qi~Ox$uO!T$vO#V0lO']$bO~O#WraQraZra_rajra!ara!bra!dra!jra#[ra#]ra#^ra#_ra#`ra#ara#bra#cra#era#gra#ira#jra'Wra'fra'pra!cra!Ora!Tranra%Qra!]ra~P#7pO#W$^aQ$^aZ$^a_$^aj$^av$^a!a$^a!b$^a!d$^a!j$^a#[$^a#]$^a#^$^a#_$^a#`$^a#a$^a#b$^a#c$^a#e$^a#g$^a#i$^a#j$^a'W$^a'f$^a'p$^a!c$^a!O$^a!T$^an$^a%Q$^a!]$^a~P#8fO#W$`aQ$`aZ$`a_$`aj$`av$`a!a$`a!b$`a!d$`a!j$`a#[$`a#]$`a#^$`a#_$`a#`$`a#a$`a#b$`a#c$`a#e$`a#g$`a#i$`a#j$`a'W$`a'f$`a'p$`a!c$`a!O$`a!T$`an$`a%Q$`a!]$`a~P#9XO#W$naQ$naZ$na_$naj$nav$na!R$na!a$na!b$na!d$na!j$na#[$na#]$na#^$na#_$na#`$na#a$na#b$na#c$na#e$na#g$na#i$na#j$na'W$na'f$na'p$na!c$na!O$na!T$na!{$nan$na%Q$na!]$na~P!BpO_#Oq!R#Oq'W#Oq!O#Oq!c#Oqn#Oq!T#Oq%Q#Oq!]#Oq~P!)wO!R&kX'a&kX~PJjO!R,_O'a'ma~O!Q0tO!R&lX!c&lX~P){O!R,bO!c'na~O!R,bO!c'na~P!)wO#m!fa!S!fa~PCfO#m!^a!R!^a!S!^a~P#*XO!T1XO#x^O$P1YO~O!S1^O~On1_O~P!BpO_$Yq!R$Yq'W$Yq!O$Yq!c$Yqn$Yq!T$Yq%Q$Yq!]$Yq~P!)wO!O1`O~O],yOk,yO~Ou(SOx(TO'x(XOP$xi'w$xi!R$xi!{$xi~O'a$xi#m$xi~P$.POu(SOx(TOP$zi'w$zi'x$zi!R$zi!{$zi~O'a$zi#m$zi~P$.rO'p#[O~P!BpO!Q1cO']$bO!R&tX!c&tX~O!R-RO!c'}a~O!R-RO!]!wO!c'}a~O!R-RO!]!wO'p&oO!c'}a~O'a$gi!R$gi!{$gi#m$gi~P!#{O!Q1kO'](eO!O&vX!R&vX~P!$jO!R-ZO!O(Oa~O!R-ZO!O(Oa~P!BpO!]!wO~O!]!wO#c1sO~Oj1vO!]!wO'p&oO~O!R'di'a'di~P!#{O!{1yO!R'di'a'di~P!#{O!c1|O~O_$Zq!R$Zq'W$Zq!O$Zq!c$Zqn$Zq!T$Zq%Q$Zq!]$Zq~P!)wO!R2QO!T(PX~P!BpO!T&dO%Q2TO~O!T&dO%Q2TO~P!BpO!T$eX$u[X_$eX!R$eX'W$eX~P!!rO$u2XOPgXugXxgX!TgX'wgX'xgX_gX!RgX'WgX~O$u2XO~O]2_O%R2`O'])iO!R'PX!S'PX~O!R.^O!S(Va~OZ2dO~O^2eO~O]2hO~OP2jO!T&dO!o2iO%Q2TO~O_$^O'W$^O~P!BpO!T#zO~P!BpO!R2oO!{2qO!S(SX~O!S2rO~Ox;oO!W2{O!X2tO!Y2tO!r2zO!s2yO!t2yO!x2xO'^$dO'g(jO'o+iO~O!S2wO~P$7ZOP3SO!T.yO!o3RO%Q3QO~OP3SO!T.yO!o3RO%Q3QO'b$PO~O'](|O!R'OX!S'OX~O!R/VO!S(Ta~O]3^O'g3]O~O]3_O~O^3aO~O!c3dO~P){O_3fO~O_3fO~P){O#c3hO%r3iO~PFOO`/mO!S3mO&Q/lO~P`O!]3oO~O!R#Ti!S#Ti~P#*XO!{3qO!R#Ti!S#Ti~O!R!Vi!S!Vi~P#*XO_$^O!{3xO'W$^O~O_$^O!]!wO!{3xO'W$^O~O!X3|O!Y3|O'^$dO'g(jO'o+iO~O_$^O!]!wO!d$ZO!j3}O!{3xO'W$^O'b$PO'p&oO~O!W4OO~P$;xO!W4OO!u4RO!x4SO~P$;xO_$^O!]!wO!j3}O!{3xO'W$^O'p&oO~O!R'rq!c'rq_'rq'W'rq~P!)wO!R&tO!c'qq~O#W$xiQ$xiZ$xi_$xij$xiv$xi!a$xi!b$xi!d$xi!j$xi#[$xi#]$xi#^$xi#_$xi#`$xi#a$xi#b$xi#c$xi#e$xi#g$xi#i$xi#j$xi'W$xi'f$xi'p$xi!c$xi!O$xi!T$xin$xi%Q$xi!]$xi~P$.PO#W$ziQ$ziZ$zi_$zij$ziv$zi!a$zi!b$zi!d$zi!j$zi#[$zi#]$zi#^$zi#_$zi#`$zi#a$zi#b$zi#c$zi#e$zi#g$zi#i$zi#j$zi'W$zi'f$zi'p$zi!c$zi!O$zi!T$zin$zi%Q$zi!]$zi~P$.rO#W$giQ$giZ$gi_$gij$giv$gi!R$gi!a$gi!b$gi!d$gi!j$gi#[$gi#]$gi#^$gi#_$gi#`$gi#a$gi#b$gi#c$gi#e$gi#g$gi#i$gi#j$gi'W$gi'f$gi'p$gi!c$gi!O$gi!T$gi!{$gin$gi%Q$gi!]$gi~P!BpO!R&ka'a&ka~P!#{O!R&la!c&la~P!)wO!R,bO!c'ni~O#m#Oi!R#Oi!S#Oi~P#*XOQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O'fQOZ#Zij#Zi!a#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~O#[#Zi~P$EiO#[9eO~P$EiOQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO'fQOZ#Zi!a#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~Oj#Zi~P$GqOj9gO~P$GqOQ#^Oj9gOu!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO'fQO#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~OZ#Zi!a#Zi#a#Zi#b#Zi#c#Zi~P$IyOZ9rO!a9iO#a9iO#b9iO#c9iO~P$IyOQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO'fQO#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'x#Zi!R#Zi!S#Zi~O'w#Zi~P$L_O'w!}O~P$L_OQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO#g9lO'fQO'w!}O#i#Zi#j#Zi#m#Zi'p#Zi!R#Zi!S#Zi~O'x#Zi~P$NgO'x#OO~P$NgOQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO#g9lO#i9nO'fQO'w!}O'x#OO~O#j#Zi#m#Zi'p#Zi!R#Zi!S#Zi~P%!oO_#ky!R#ky'W#ky!O#ky!c#kyn#ky!T#ky%Q#ky!]#ky~P!)wOP;vOu(SOx(TO'w(VO'x(XO~OQ#ZiZ#Zij#Ziv#Zi!a#Zi!b#Zi!d#Zi!j#Zi#[#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'f#Zi'p#Zi!R#Zi!S#Zi~P%%aO!b!yOP'eXu'eXx'eX'w'eX'x'eX!S'eX~OQ'eXZ'eXj'eXv'eX!a'eX!d'eX!j'eX#['eX#]'eX#^'eX#_'eX#`'eX#a'eX#b'eX#c'eX#e'eX#g'eX#i'eX#j'eX#m'eX'f'eX'p'eX!R'eX~P%'eO#m#ni!R#ni!S#ni~P#*XO!S4eO~O!R&sa!S&sa~P#*XO!]!wO'p&oO!R&ta!c&ta~O!R-RO!c'}i~O!R-RO!]!wO!c'}i~O'a$gq!R$gq!{$gq#m$gq~P!#{O!O&va!R&va~P!BpO!]4lO~O!R-ZO!O(Oi~P!BpO!R-ZO!O(Oi~O!O4pO~O!]!wO#c4uO~Oj4vO!]!wO'p&oO~O!O4xO~O'a$iq!R$iq!{$iq#m$iq~P!#{O_$Zy!R$Zy'W$Zy!O$Zy!c$Zyn$Zy!T$Zy%Q$Zy!]$Zy~P!)wO!R2QO!T(Pa~O!T&dO%Q4}O~O!T&dO%Q4}O~P!BpO_#Oy!R#Oy'W#Oy!O#Oy!c#Oyn#Oy!T#Oy%Q#Oy!]#Oy~P!)wOZ5QO~O]5SO'])iO~O!R.^O!S(Vi~O]5VO~O^5WO~O'g'TO!R&{X!S&{X~O!R2oO!S(Sa~O!S5eO~P$7ZOx;sO'g(jO'o+iO~O!W5hO!X5gO!Y5gO!x0_O'^$dO'g(jO'o+iO~O!s5iO!t5iO~P%0^O!X5gO!Y5gO'^$dO'g(jO'o+iO~O!T.yO~O!T.yO%Q5kO~O!T.yO%Q5kO~P!BpOP5pO!T.yO!o5oO%Q5kO~OZ5uO!R'Oa!S'Oa~O!R/VO!S(Ti~O]5xO~O!c5yO~O!c5zO~O!c5{O~O!c5{O~P){O_5}O~O!]6QO~O!c6RO~O!R'ui!S'ui~P#*XO_$^O'W$^O~P!)wO_$^O!{6WO'W$^O~O_$^O!]!wO!{6WO'W$^O~O!X6]O!Y6]O'^$dO'g(jO'o+iO~O_$^O!]!wO!j6^O!{6WO'W$^O'p&oO~O!d$ZO'b$PO~P%4xO!W6_O~P%4gO!R'ry!c'ry_'ry'W'ry~P!)wO#W$gqQ$gqZ$gq_$gqj$gqv$gq!R$gq!a$gq!b$gq!d$gq!j$gq#[$gq#]$gq#^$gq#_$gq#`$gq#a$gq#b$gq#c$gq#e$gq#g$gq#i$gq#j$gq'W$gq'f$gq'p$gq!c$gq!O$gq!T$gq!{$gqn$gq%Q$gq!]$gq~P!BpO#W$iqQ$iqZ$iq_$iqj$iqv$iq!R$iq!a$iq!b$iq!d$iq!j$iq#[$iq#]$iq#^$iq#_$iq#`$iq#a$iq#b$iq#c$iq#e$iq#g$iq#i$iq#j$iq'W$iq'f$iq'p$iq!c$iq!O$iq!T$iq!{$iqn$iq%Q$iq!]$iq~P!BpO!R&li!c&li~P!)wO#m#Oq!R#Oq!S#Oq~P#*XOu-tOv-tOx-uOPra'wra'xra!Sra~OQraZrajra!ara!bra!dra!jra#[ra#]ra#^ra#_ra#`ra#ara#bra#cra#era#gra#ira#jra#mra'fra'pra!Rra~P%;OOu(SOx(TOP$^a'w$^a'x$^a!S$^a~OQ$^aZ$^aj$^av$^a!a$^a!b$^a!d$^a!j$^a#[$^a#]$^a#^$^a#_$^a#`$^a#a$^a#b$^a#c$^a#e$^a#g$^a#i$^a#j$^a#m$^a'f$^a'p$^a!R$^a~P%=SOu(SOx(TOP$`a'w$`a'x$`a!S$`a~OQ$`aZ$`aj$`av$`a!a$`a!b$`a!d$`a!j$`a#[$`a#]$`a#^$`a#_$`a#`$`a#a$`a#b$`a#c$`a#e$`a#g$`a#i$`a#j$`a#m$`a'f$`a'p$`a!R$`a~P%?WOQ$naZ$naj$nav$na!a$na!b$na!d$na!j$na#[$na#]$na#^$na#_$na#`$na#a$na#b$na#c$na#e$na#g$na#i$na#j$na#m$na'f$na'p$na!R$na!S$na~P%%aO#m$Yq!R$Yq!S$Yq~P#*XO#m$Zq!R$Zq!S$Zq~P#*XO!S6hO~O#m6iO~P!#{O!]!wO!R&ti!c&ti~O!]!wO'p&oO!R&ti!c&ti~O!R-RO!c'}q~O!O&vi!R&vi~P!BpO!R-ZO!O(Oq~O!O6oO~P!BpO!O6oO~O!R'dy'a'dy~P!#{O!R&ya!T&ya~P!BpO!T$tq_$tq!R$tq'W$tq~P!BpOZ6vO~O!R.^O!S(Vq~O]6yO~O!T&dO%Q6zO~O!T&dO%Q6zO~P!BpO!{6{O!R&{a!S&{a~O!R2oO!S(Si~P#*XO!X7RO!Y7RO'^$dO'g(jO'o+iO~O!W7TO!x4SO~P%GXO!T.yO%Q7WO~O!T.yO%Q7WO~P!BpO]7_O'g7^O~O!R/VO!S(Tq~O!c7aO~O!c7aO~P){O!c7cO~O!c7dO~O!R#Ty!S#Ty~P#*XO_$^O!{7jO'W$^O~O_$^O!]!wO!{7jO'W$^O~O!X7mO!Y7mO'^$dO'g(jO'o+iO~O_$^O!]!wO!j7nO!{7jO'W$^O'p&oO~O#m#ky!R#ky!S#ky~P#*XOQ$giZ$gij$giv$gi!a$gi!b$gi!d$gi!j$gi#[$gi#]$gi#^$gi#_$gi#`$gi#a$gi#b$gi#c$gi#e$gi#g$gi#i$gi#j$gi#m$gi'f$gi'p$gi!R$gi!S$gi~P%%aOu(SOx(TO'x(XOP$xi'w$xi!S$xi~OQ$xiZ$xij$xiv$xi!a$xi!b$xi!d$xi!j$xi#[$xi#]$xi#^$xi#_$xi#`$xi#a$xi#b$xi#c$xi#e$xi#g$xi#i$xi#j$xi#m$xi'f$xi'p$xi!R$xi~P%LjOu(SOx(TOP$zi'w$zi'x$zi!S$zi~OQ$ziZ$zij$ziv$zi!a$zi!b$zi!d$zi!j$zi#[$zi#]$zi#^$zi#_$zi#`$zi#a$zi#b$zi#c$zi#e$zi#g$zi#i$zi#j$zi#m$zi'f$zi'p$zi!R$zi~P%NnO#m$Zy!R$Zy!S$Zy~P#*XO#m#Oy!R#Oy!S#Oy~P#*XO!]!wO!R&tq!c&tq~O!R-RO!c'}y~O!O&vq!R&vq~P!BpO!O7tO~P!BpO!R.^O!S(Vy~O!R2oO!S(Sq~O!X8QO!Y8QO'^$dO'g(jO'o+iO~O!T.yO%Q8TO~O!T.yO%Q8TO~P!BpO!c8WO~O_$^O!{8]O'W$^O~O_$^O!]!wO!{8]O'W$^O~OQ$gqZ$gqj$gqv$gq!a$gq!b$gq!d$gq!j$gq#[$gq#]$gq#^$gq#_$gq#`$gq#a$gq#b$gq#c$gq#e$gq#g$gq#i$gq#j$gq#m$gq'f$gq'p$gq!R$gq!S$gq~P%%aOQ$iqZ$iqj$iqv$iq!a$iq!b$iq!d$iq!j$iq#[$iq#]$iq#^$iq#_$iq#`$iq#a$iq#b$iq#c$iq#e$iq#g$iq#i$iq#j$iq#m$iq'f$iq'p$iq!R$iq!S$iq~P%%aO'a$|!Z!R$|!Z!{$|!Z#m$|!Z~P!#{O!R&{q!S&{q~P#*XO_$^O!{8oO'W$^O~O#W$|!ZQ$|!ZZ$|!Z_$|!Zj$|!Zv$|!Z!R$|!Z!a$|!Z!b$|!Z!d$|!Z!j$|!Z#[$|!Z#]$|!Z#^$|!Z#_$|!Z#`$|!Z#a$|!Z#b$|!Z#c$|!Z#e$|!Z#g$|!Z#i$|!Z#j$|!Z'W$|!Z'f$|!Z'p$|!Z!c$|!Z!O$|!Z!T$|!Z!{$|!Zn$|!Z%Q$|!Z!]$|!Z~P!BpOP;uOu(SOx(TO'w(VO'x(XO~O!S!za!W!za!X!za!Y!za!r!za!s!za!t!za!x!za'^!za'g!za'o!za~P&,_O!W'eX!X'eX!Y'eX!r'eX!s'eX!t'eX!x'eX'^'eX'g'eX'o'eX~P%'eOQ$|!ZZ$|!Zj$|!Zv$|!Z!a$|!Z!b$|!Z!d$|!Z!j$|!Z#[$|!Z#]$|!Z#^$|!Z#_$|!Z#`$|!Z#a$|!Z#b$|!Z#c$|!Z#e$|!Z#g$|!Z#i$|!Z#j$|!Z#m$|!Z'f$|!Z'p$|!Z!R$|!Z!S$|!Z~P%%aO!Wra!Xra!Yra!rra!sra!tra!xra'^ra'gra'ora~P%;OO!W$^a!X$^a!Y$^a!r$^a!s$^a!t$^a!x$^a'^$^a'g$^a'o$^a~P%=SO!W$`a!X$`a!Y$`a!r$`a!s$`a!t$`a!x$`a'^$`a'g$`a'o$`a~P%?WO!S$na!W$na!X$na!Y$na!r$na!s$na!t$na!x$na'^$na'g$na'o$na~P&,_O!W$xi!X$xi!Y$xi!r$xi!s$xi!t$xi!x$xi'^$xi'g$xi'o$xi~P%LjO!W$zi!X$zi!Y$zi!r$zi!s$zi!t$zi!x$zi'^$zi'g$zi'o$zi~P%NnO!S$gi!W$gi!X$gi!Y$gi!r$gi!s$gi!t$gi!x$gi'^$gi'g$gi'o$gi~P&,_O!S$gq!W$gq!X$gq!Y$gq!r$gq!s$gq!t$gq!x$gq'^$gq'g$gq'o$gq~P&,_O!S$iq!W$iq!X$iq!Y$iq!r$iq!s$iq!t$iq!x$iq'^$iq'g$iq'o$iq~P&,_O!S$|!Z!W$|!Z!X$|!Z!Y$|!Z!r$|!Z!s$|!Z!t$|!Z!x$|!Z'^$|!Z'g$|!Z'o$|!Z~P&,_On'hX~P.jOn[X!O[X!c[X%r[X!T[X%Q[X!][X~P$zO!]dX!c[X!cdX'pdX~P;dOQ9^OR9^O]cOb;`Oc!jOhcOj9^OkcOlcOq9^Os9^OxRO{cO|cO}cO!TSO!_9`O!dUO!g9^O!h9^O!i9^O!j9^O!k9^O!n!iO#t!lO#x^O']'cO'fQO'oYO'|;^O~O]#qOh$QOj#rOk#qOl#qOq$ROs9uOx#yO!T#zO!_;fO!d#vO#V:OO#t$VO$_9xO$a9{O$d$WO']&{O'b$PO'f#sO~O!R9pO!S$]a~O]#qOh$QOj#rOk#qOl#qOq$ROs9vOx#yO!T#zO!_;gO!d#vO#V:PO#t$VO$_9yO$a9|O$d$WO']&{O'b$PO'f#sO~O#d'jO~P&<WO!S[X!SdX~P;dO!]9dO~O#W9cO~O!]!wO#W9cO~O!{9sO~O#c9iO~O!{:QO!R'uX!S'uX~O!{9sO!R'sX!S'sX~O#W:RO~O'a:TO~P!#{O#W:[O~O#W:]O~O#W:^O~O!]!wO#W:_O~O!]!wO#W:RO~O#m:`O~P#*XO#W:aO~O#W:bO~O#W:cO~O#W:dO~O#W:eO~O#W:fO~O#W:gO~O#W:hO~O!O:iO~O#m:jO~P!#{O#m:kO~P!#{O#m:lO~P!#{O!O:mO~P!BpO!O:mO~O!O:nO~P!BpO!]!wO#c;lO~O!]!wO#c;nO~O#x~!b!r!t!u#U#V'|$_$a$d$u%P%Q%R%X%Z%^%_%a%c~UT#x'|#]}'Y'Z#z'Y']'g~",goto:"#Kk(ZPPPPPPPP([P(lP*`PPPP-zPP.a3s7o8SP8SPPP8SP:U8SP8SP:YPP:`P:t?VPPPP?ZPPPP?ZA{PPPBRDdP?ZPFwPPPPHp?ZPPPPPJi?ZPPMjNgPPPPNk!!TP!!]!#^PNg?Z?Z!&n!)i!.[!.[!1kPPP!1r!4h?ZPPPPPPPPPP!7_P!8pPP?Z!9}P?ZP?Z?Z?Z?ZP?Z!;dPP!>]P!AQ!AY!A^!A^P!>YP!Ab!AbP!DVP!DZ?Z?Z!Da!GT8SP8SP8S8SP!HW8S8S!Jf8S!M_8S# g8S8S#!T#$c#$c#$g#$c#$oP#$cP8S#%k8S#'X8S8S-zPPP#(yPP#)c#)cP#)cP#)x#)cPP#*OP#)uP#)u#*b!!X#)u#+P#+V#+Y([#+]([P#+d#+d#+dP([P([P([P([PP([P#+j#+mP#+m([P#+qP#+tP([P([P([P([P([P([([#+z#,U#,[#,b#,p#,v#,|#-W#-^#-m#-s#.R#.X#._#.m#/S#0z#1Y#1`#1f#1l#1r#1|#2S#2Y#2d#2v#2|PPPPPPPP#3SPP#3v#7OPP#8f#8m#8uPP#>a#@t#Fp#Fs#Fv#GR#GUPP#GX#G]#Gz#Hq#Hu#IZPP#I_#Ie#IiP#Il#Ip#Is#Jc#Jy#KO#KR#KU#K[#K_#Kc#KgmhOSj}!n$]%c%f%g%i*o*t/g/jQ$imQ$ppQ%ZyS&V!b+`Q&k!jS(l#z(qQ)g$jQ)t$rQ*`%TQ+f&^S+k&d+mQ+}&lQ-k(sQ/U*aY0Z+o+p+q+r+sS2t.y2vU3|0[0^0aU5g2y2z2{S6]4O4RS7R5h5iQ7m6_R8Q7T$p[ORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8o!j'e#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ(}$SQ)l$lQ*b%WQ*i%`Q,X9tQ.W)aQ.c)mQ/^*gQ2_.^Q3Z/VQ4^9vQ5S2`R8{9upeOSjy}!n$]%Y%c%f%g%i*o*t/g/jR*d%[&WVOSTjkn}!S!W!k!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%z&S&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;`;a[!cRU!]!`%x&WQ$clQ$hmS$mp$rv$wrs!r!u$Z$u&`&t&w)x)y)z*m+Y+h,S,U/o0lQ%PwQ&h!iQ&j!jS(_#v(cS)f$i$jQ)j$lQ)w$tQ*Z%RQ*_%TS+|&k&lQ-V(`Q.[)gQ.b)mQ.d)nQ.g)rQ/P*[S/T*`*aQ0h+}Q1b-RQ2^.^Q2b.aQ2g.iQ3Y/UQ4i1cQ5R2`Q5U2dQ6u5QR7w6vx#xa!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;k!Y$fm!j$h$i$j&U&j&k&l(k)f)g+]+j+|+}-d.[0Q0W0]0h1u3{4Q6Z7k8^Q)`$cQ*P$|Q*S$}Q*^%TQ.k)wQ/O*ZU/S*_*`*aQ3T/PS3X/T/UQ5b2sQ5t3YS7P5c5fS8O7Q7SQ8f8PQ8u8g#[;b!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vd;c9d9x9{:O:V:Y:]:b:e:ke;d9r9y9|:P:W:Z:^:c:f:lW#}a$P(y;^S$|t%YQ$}uQ%OvR)}$z%P#|a!w!y#d#v#y$T$U$Y&g'}(W(Y(Z(b(h(w(x)])_)a*O*R+y,_-Y-Z-]-w.R.T.p.s.{.}1a1k1s1y2Q2T2X2j3Q3S4l4u4}5k5p6i6z7W8T9d9r9w9x9y9z9{9|9}:O:P:U:V:W:X:Y:Z:[:]:^:a:b:c:d:e:f:j:k:l;^;i;j;k;l;n;t;u;vT(O#s(PX)O$S9t9u9vU&Z!b$v+cQ'U!{Q)q$oQ.t*TQ1z-tR5^2o&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;a$]#aZ!_!o$a%w%}&y'Q'W'X'Y'Z'[']'^'_'`'a'b'd'g'k'u)p+R+^+g,O,^,d,g,i,w-x/v/y0i0s0w0x0y0z0{0|0}1O1P1Q1R1S1T1W1]2O2[3s3v4W4[4]4b4c5`6S6V6b6f6g7g7z8Z8m8y9_:|T!XQ!Y&_cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ&X!bR/|+`Y&R!b&V&^+`+fS(k#z(qS+j&d+mS-d(l(sQ-e(mQ-l(tQ.v*VU0W+k+o+pU0]+q+r+sS0b+t2xQ1u-kQ1w-mQ1x-nS2s.y2vU3{0Z0[0^Q4P0_Q4Q0aS5c2t2{S5f2y2zU6Z3|4O4RQ6`4SS7Q5g5hQ7S5iS7k6]6_S8P7R7TQ8^7mQ8g8QQ;h;oR;m;slhOSj}!n$]%c%f%g%i*o*t/g/jQ%k!QS&x!v9cQ)d$gQ*X%PQ*Y%QQ+z&iS,]&}:RS-y)V:_Q.Y)eQ.x*WQ/n*vQ/p*wQ/x+ZQ0`+qQ0f+{S2P-z:gQ2Y.ZS2].]:hQ3r/zQ3u0RQ4U0gQ5P2ZQ6T3tQ6X3zQ6a4VQ7e6RQ7h6YQ8Y7iQ8l8[R8x8n$W#`Z!_!o%w%}&y'Q'W'X'Y'Z'[']'^'_'`'a'b'd'g'k'u)p+R+^+g,O,^,d,g,w-x/v/y0i0s0w0x0y0z0{0|0}1O1P1Q1R1S1T1W1]2O2[3s3v4W4[4]4b4c5`6S6V6b6f6g7g7z8Z8m8y9_:|W(v#{&|1V8qT)Z$a,i$W#_Z!_!o%w%}&y'Q'W'X'Y'Z'[']'^'_'`'a'b'd'g'k'u)p+R+^+g,O,^,d,g,w-x/v/y0i0s0w0x0y0z0{0|0}1O1P1Q1R1S1T1W1]2O2[3s3v4W4[4]4b4c5`6S6V6b6f6g7g7z8Z8m8y9_:|Q'f#`S)Y$a,iR-{)Z&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ%f{Q%g|Q%i!OQ%j!PR/f*rQ&e!iQ)[$cQ+w&hS.Q)`)wS0c+u+vW2S-}.O.P.kS4T0d0eU4|2U2V2WU6s4{5Y5ZQ7v6tR8b7yT+l&d+mS+j&d+mU0W+k+o+pU0]+q+r+sS0b+t2xS2s.y2vU3{0Z0[0^Q4P0_Q4Q0aS5c2t2{S5f2y2zU6Z3|4O4RQ6`4SS7Q5g5hQ7S5iS7k6]6_S8P7R7TQ8^7mR8g8QS+l&d+mT2u.y2vS&r!q/dQ-U(_Q-b(kS0V+j2sQ1g-VS1p-c-lU3}0]0b5fQ4h1bS4s1v1xU6^4P4Q7SQ6k4iQ6r4vR7n6`Q!xXS&q!q/dQ)W$[Q)b$eQ)h$kQ,Q&rQ-T(_Q-a(kQ-f(nQ.X)cQ/Q*]S0U+j2sS1f-U-VS1o-b-lQ1r-eQ1t-gQ3V/RW3y0V0]0b5fQ4g1bQ4k1gS4o1p1xQ4t1wQ5r3WW6[3}4P4Q7SS6j4h4iS6n4p:iQ6p4sQ6}5aQ7[5sS7l6^6`Q7r6kS7s6o:mQ7u6rQ7|7OQ8V7]Q8_7nS8a7t:nQ8d7}Q8s8eQ9Q8tQ9X9RQ:u:pQ;T:zQ;U:{Q;V;hR;[;m$rWORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oS!xn!k!j:o#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aR:u;`$rXORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oQ$[b!Y$em!j$h$i$j&U&j&k&l(k)f)g+]+j+|+}-d.[0Q0W0]0h1u3{4Q6Z7k8^S$kn!kQ)c$fQ*]%TW/R*^*_*`*aU3W/S/T/UQ5a2sS5s3X3YU7O5b5c5fQ7]5tU7}7P7Q7SS8e8O8PS8t8f8gQ9R8u!j:p#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ:z;_R:{;`$f]OSTjk}!S!W!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%c%e%f%g%i%m%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oY!hRU!]!`%xv$wrs!r!u$Z$u&`&t&w)x)y)z*m+Y+h,S,U/o0lQ*j%`!h:q#]#k'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aR:t&WS&[!b$vR0O+c$p[ORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8o!j'e#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aR*i%`$roORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oQ'U!{!k:r#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;a!h#VZ!_$a%w%}&y'Q'_'`'a'b'g'k)p+R+g,O,^,d,w-x0i0s1T2O2[3v4W4[6V7g8Z8m8y9_!R9k'd'u+^,i/v/y0w1P1Q1R1S1W1]3s4]4b4c5`6S6b6f6g7z:|!d#XZ!_$a%w%}&y'Q'a'b'g'k)p+R+g,O,^,d,w-x0i0s1T2O2[3v4W4[6V7g8Z8m8y9_}9m'd'u+^,i/v/y0w1R1S1W1]3s4]4b4c5`6S6b6f6g7z:|!`#]Z!_$a%w%}&y'Q'g'k)p+R+g,O,^,d,w-x0i0s1T2O2[3v4W4[6V7g8Z8m8y9_Q1a-Px;a'd'u+^,i/v/y0w1W1]3s4]4b4c5`6S6b6f6g7z:|Q;i;pQ;j;qR;k;r&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aS#l`#mR1Y,l&e_ORSTU`jk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k#m$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,l,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aS#g^#nT'n#i'rT#h^#nT'p#i'r&e`ORSTU`jk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k#m$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,l,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aT#l`#mQ#o`R'y#m$rbORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8o!k;_#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;a#RdOSUj}!S!W!n!|#k$]%[%_%`%c%e%f%g%i%m&S&f'w)^*k*o*t+x,m-u.S.|/_/`/a/c/g/j/l1X2i3R3f3h3i5o5}x#{a!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;k#[&|!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vQ)S$WQ,x(Sd1V9r9y9|:P:W:Z:^:c:f:le8q9d9x9{:O:V:Y:]:b:e:kx#wa!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;kQ(d#xS(n#z(qQ)T$XQ-g(o#[:w!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vd:x9d9x9{:O:V:Y:]:b:e:kd:y9r9y9|:P:W:Z:^:c:f:lQ:};bQ;O;cQ;P;dQ;Q;eQ;R;fR;S;gx#{a!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;k#[&|!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vd1V9r9y9|:P:W:Z:^:c:f:le8q9d9x9{:O:V:Y:]:b:e:klfOSj}!n$]%c%f%g%i*o*t/g/jQ(g#yQ*}%pQ+O%rR1j-Z%O#|a!w!y#d#v#y$T$U$Y&g'}(W(Y(Z(b(h(w(x)])_)a*O*R+y,_-Y-Z-]-w.R.T.p.s.{.}1a1k1s1y2Q2T2X2j3Q3S4l4u4}5k5p6i6z7W8T9d9r9w9x9y9z9{9|9}:O:P:U:V:W:X:Y:Z:[:]:^:a:b:c:d:e:f:j:k:l;^;i;j;k;l;n;t;u;vQ*Q$}Q.r*SQ2m.qR5]2nT(p#z(qS(p#z(qT2u.y2vQ)b$eQ-f(nQ.X)cQ/Q*]Q3V/RQ5r3WQ6}5aQ7[5sQ7|7OQ8V7]Q8d7}Q8s8eQ9Q8tR9X9Rp(W#t'O)U-X-o-p0q1h1}4f4w7q:v;W;X;Y!n:U&z'i(^(f+v,[,t-P-^-|.P.o.q0e0p1i1m2W2l2n3O4Y4Z4m4q4y5O5Z5n6m6q7Y8`;Z;];p;q;r[:V8p9O9V9Y9Z9]]:W1U4a6c7o7p8zr(Y#t'O)U,}-X-o-p0q1h1}4f4w7q:v;W;X;Y!p:X&z'i(^(f+v,[,t-P-^-|.P.o.q0e0n0p1i1m2W2l2n3O4Y4Z4m4q4y5O5Z5n6m6q7Y8`;Z;];p;q;r^:Y8p9O9T9V9Y9Z9]_:Z1U4a6c6d7o7p8zpeOSjy}!n$]%Y%c%f%g%i*o*t/g/jQ%VxR*k%`peOSjy}!n$]%Y%c%f%g%i*o*t/g/jR%VxQ*U%OR.n)}qeOSjy}!n$]%Y%c%f%g%i*o*t/g/jQ.z*ZS3P/O/PW5j2|2}3O3TU7V5l5m5nU8R7U7X7YQ8h8SR8v8iQ%^yR*e%YR3^/XR7_5uS$mp$rR.d)nQ%czR*o%dR*u%jT/h*t/jR*y%kQ*x%kR/q*yQjOQ!nST$`j!nQ(P#sR,u(PQ!YQR%u!YQ!^RU%{!^%|+UQ%|!_R+U%}Q+a&XR/}+aQ,`'OR0r,`Q,c'QS0u,c0vR0v,dQ+m&dR0X+mS!eR$uU&a!e&b+VQ&b!fR+V&OQ+d&[R0P+dQ&u!sQ,R&sU,V&u,R0mR0m,WQ'r#iR,n'rQ#m`R'x#mQ#cZU'h#c+Q9qQ+Q9_R9q'uQ-S(_W1d-S1e4j6lU1e-T-U-VS4j1f1gR6l4k$k(U#t&z'O'i(^(f)P)Q)U+v,Y,Z,[,t,}-O-P-X-^-o-p-|.P.o.q0e0n0o0p0q1U1h1i1m1}2W2l2n3O4Y4Z4_4`4a4f4m4q4w4y5O5Z5n6c6d6e6m6q7Y7o7p7q8`8p8z8|8}9O9T9U9V9Y9Z9]:v;W;X;Y;Z;];p;q;rQ-[(fU1l-[1n4nQ1n-^R4n1mQ(q#zR-i(qQ(z$OR-r(zQ2R-|R4z2RQ){$xR.m){Q2p.tS5_2p6|R6|5`Q*W%PR.w*WQ2v.yR5d2vQ/W*bS3[/W5vR5v3^Q._)jW2a._2c5T6wQ2c.bQ5T2bR6w5UQ)o$mR.e)oQ/j*tR3l/jWiOSj!nQ%h}Q)X$]Q*n%cQ*p%fQ*q%gQ*s%iQ/e*oS/h*t/jR3k/gQ$_gQ%l!RQ%o!TQ%q!UQ%s!VQ)v$sQ)|$yQ*d%^Q*{%nQ-h(pS/Z*e*hQ/r*zQ/s*}Q/t+OS0S+j2sQ2f.hQ2k.oQ3U/QQ3`/]Q3j/fY3w0U0V0]0b5fQ5X2hQ5[2lQ5q3VQ5w3_[6U3v3y3}4P4Q7SQ6x5VQ7Z5rQ7`5xW7f6V6[6^6`Q7x6yQ7{6}Q8U7[U8X7g7l7nQ8c7|Q8j8VS8k8Z8_Q8r8dQ8w8mQ9P8sQ9S8yQ9W9QR9[9XQ$gmQ&i!jU)e$h$i$jQ+Z&UU+{&j&k&lQ-`(kS.Z)f)gQ/z+]Q0R+jS0g+|+}Q1q-dQ2Z.[Q3t0QS3z0W0]Q4V0hQ4r1uS6Y3{4QQ7i6ZQ8[7kR8n8^S#ua;^R({$PU$Oa$P;^R-q(yQ#taS&z!w)aQ'O!yQ'i#dQ(^#vQ(f#yQ)P$TQ)Q$UQ)U$YQ+v&gQ,Y9wQ,Z9zQ,[9}Q,t'}Q,}(WQ-O(YQ-P(ZQ-X(bQ-^(hQ-o(wQ-p(xd-|)].R.{2T3Q4}5k6z7W8TQ.P)_Q.o*OQ.q*RQ0e+yQ0n:UQ0o:XQ0p:[Q0q,_Q1U9rQ1h-YQ1i-ZQ1m-]Q1}-wQ2W.TQ2l.pQ2n.sQ3O.}Q4Y:aQ4Z:dQ4_9yQ4`9|Q4a:PQ4f1aQ4m1kQ4q1sQ4w1yQ4y2QQ5O2XQ5Z2jQ5n3SQ6c:^Q6d:WQ6e:ZQ6m4lQ6q4uQ7Y5pQ7o:cQ7p:fQ7q6iQ8`:jQ8p9dQ8z:lQ8|9xQ8}9{Q9O:OQ9T:VQ9U:YQ9V:]Q9Y:bQ9Z:eQ9]:kQ:v;^Q;W;iQ;X;jQ;Y;kQ;Z;lQ;];nQ;p;tQ;q;uR;r;vlgOSj}!n$]%c%f%g%i*o*t/g/jS!pU%eQ%n!SQ%t!WQ'V!|Q'v#kS*h%[%_Q*l%`Q*z%mQ+W&SQ+u&fQ,r'wQ.O)^Q/b*kQ0d+xQ1[,mQ1{-uQ2V.SQ2}.|Q3b/_Q3c/`Q3e/aQ3g/cQ3n/lQ4d1XQ5Y2iQ5m3RQ5|3fQ6O3hQ6P3iQ7X5oR7b5}!vZOSUj}!S!n!|$]%[%_%`%c%e%f%g%i%m&S&f)^*k*o*t+x-u.S.|/_/`/a/c/g/j/l2i3R3f3h3i5o5}Q!_RQ!oTQ$akS%w!]%zQ%}!`Q&y!vQ'Q!zQ'W#PQ'X#QQ'Y#RQ'Z#SQ'[#TQ']#UQ'^#VQ'_#WQ'`#XQ'a#YQ'b#ZQ'd#]Q'g#bQ'k#eW'u#k'w,m1XQ)p$nS+R%x+TS+^&W/{Q+g&_Q,O&pQ,^&}Q,d'RQ,g9^Q,i9`Q,w(RQ-x)VQ/v+XQ/y+[Q0i,PQ0s,bQ0w9cQ0x9eQ0y9fQ0z9gQ0{9hQ0|9iQ0}9jQ1O9kQ1P9lQ1Q9mQ1R9nQ1S9oQ1T,hQ1W9sQ1]9pQ2O-zQ2[.]Q3s:QQ3v0TQ4W0jQ4[0tQ4]:RQ4b:TQ4c:_Q5`2qQ6S3qQ6V3xQ6b:`Q6f:gQ6g:hQ7g6WQ7z6{Q8Z7jQ8m8]Q8y8oQ9_!WR:|;aR!aRR&Y!bS&U!b+`S+]&V&^R0Q+fR'P!yR'S!zT!tU$ZS!sU$ZU$xrs*mS&s!r!uQ,T&tQ,W&wQ.l)zS0k,S,UR4X0l`!dR!]!`$u%x&`)x+hh!qUrs!r!u$Z&t&w)z,S,U0lQ/d*mQ/w+YQ3p/oT:s&W)yT!gR$uS!fR$uS%y!]&`S&O!`)xS+S%x+hT+_&W)yT&]!b$vQ#i^R'{#nT'q#i'rR1Z,lT(a#v(cR(i#yQ-})]Q2U.RQ2|.{Q4{2TQ5l3QQ6t4}Q7U5kQ7y6zQ8S7WR8i8TlhOSj}!n$]%c%f%g%i*o*t/g/jQ%]yR*d%YV$yrs*mR.u*TR*c%WQ$qpR)u$rR)k$lT%az%dT%bz%dT/i*t/j",nodeNames:"\u26A0 extends ArithOp ArithOp InterpolationStart LineComment BlockComment Script ExportDeclaration export Star as VariableName String from ; default FunctionDeclaration async function VariableDefinition TypeParamList TypeDefinition ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation VoidType void TypeofType typeof MemberExpression . ?. PropertyName [ TemplateString Interpolation null super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewExpression new TypeArgList CompareOp < ) ( ArgList UnaryExpression await yield delete LogicOp BitOp ParenthesizedExpression ClassExpression class extends ClassBody MethodDeclaration Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression PrivatePropertyName BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXStartTag JSXSelfClosingTag JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody MethodDeclaration AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement",maxTerm:332,context:mJ,nodeProps:[["closedBy",4,"InterpolationEnd",40,"]",51,"}",66,")",132,"JSXSelfCloseEndTag JSXEndTag",146,"JSXEndTag"],["group",-26,8,15,17,58,184,188,191,192,194,197,200,211,213,219,221,223,225,228,234,240,242,244,246,248,250,251,"Statement",-30,12,13,24,27,28,41,43,44,45,47,52,60,68,74,75,91,92,101,103,119,122,124,125,126,127,129,130,148,149,151,"Expression",-22,23,25,29,32,34,152,154,156,157,159,160,161,163,164,165,167,168,169,178,180,182,183,"Type",-3,79,85,90,"ClassItem"],["openedBy",30,"InterpolationStart",46,"[",50,"{",65,"(",131,"JSXStartTag",141,"JSXStartTag JSXStartCloseTag"]],propSources:[vJ],skippedNodes:[0,5,6],repeatNodeCount:28,tokenData:"!C}~R!`OX%TXY%cYZ'RZ[%c[]%T]^'R^p%Tpq%cqr'crs(kst0htu2`uv4pvw5ewx6cxy<yyz=Zz{=k{|>k|}?O}!O>k!O!P?`!P!QCl!Q!R!0[!R![!1q![!]!7s!]!^!8V!^!_!8g!_!`!9d!`!a!:[!a!b!<R!b!c%T!c!}2`!}#O!=d#O#P%T#P#Q!=t#Q#R!>U#R#S2`#S#T!>i#T#o2`#o#p!>y#p#q!?O#q#r!?f#r#s!?x#s$f%T$f$g%c$g#BY2`#BY#BZ!@Y#BZ$IS2`$IS$I_!@Y$I_$I|2`$I|$I}!Bq$I}$JO!Bq$JO$JT2`$JT$JU!@Y$JU$KV2`$KV$KW!@Y$KW&FU2`&FU&FV!@Y&FV?HT2`?HT?HU!@Y?HU~2`W%YR$UWO!^%T!_#o%T#p~%T7Z%jg$UW'Y7ROX%TXY%cYZ%TZ[%c[p%Tpq%cq!^%T!_#o%T#p$f%T$f$g%c$g#BY%T#BY#BZ%c#BZ$IS%T$IS$I_%c$I_$JT%T$JT$JU%c$JU$KV%T$KV$KW%c$KW&FU%T&FU&FV%c&FV?HT%T?HT?HU%c?HU~%T7Z'YR$UW'Z7RO!^%T!_#o%T#p~%T$T'jS$UW!j#{O!^%T!_!`'v!`#o%T#p~%T$O'}S#e#v$UWO!^%T!_!`(Z!`#o%T#p~%T$O(bR#e#v$UWO!^%T!_#o%T#p~%T)X(rZ$UW]#eOY(kYZ)eZr(krs*rs!^(k!^!_+U!_#O(k#O#P-b#P#o(k#o#p+U#p~(k&r)jV$UWOr)ers*Ps!^)e!^!_*a!_#o)e#o#p*a#p~)e&r*WR$P&j$UWO!^%T!_#o%T#p~%T&j*dROr*ars*ms~*a&j*rO$P&j)X*{R$P&j$UW]#eO!^%T!_#o%T#p~%T)P+ZV]#eOY+UYZ*aZr+Urs+ps#O+U#O#P+w#P~+U)P+wO$P&j]#e)P+zROr+Urs,Ts~+U)P,[U$P&j]#eOY,nZr,nrs-Vs#O,n#O#P-[#P~,n#e,sU]#eOY,nZr,nrs-Vs#O,n#O#P-[#P~,n#e-[O]#e#e-_PO~,n)X-gV$UWOr(krs-|s!^(k!^!_+U!_#o(k#o#p+U#p~(k)X.VZ$P&j$UW]#eOY.xYZ%TZr.xrs/rs!^.x!^!_,n!_#O.x#O#P0S#P#o.x#o#p,n#p~.x#m/PZ$UW]#eOY.xYZ%TZr.xrs/rs!^.x!^!_,n!_#O.x#O#P0S#P#o.x#o#p,n#p~.x#m/yR$UW]#eO!^%T!_#o%T#p~%T#m0XT$UWO!^.x!^!_,n!_#o.x#o#p,n#p~.x3]0mZ$UWOt%Ttu1`u!^%T!_!c%T!c!}1`!}#R%T#R#S1`#S#T%T#T#o1`#p$g%T$g~1`3]1g]$UW'o3TOt%Ttu1`u!Q%T!Q![1`![!^%T!_!c%T!c!}1`!}#R%T#R#S1`#S#T%T#T#o1`#p$g%T$g~1`7Z2k_$UW#zS']$y'g3SOt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$g%T$g~2`[3q_$UW#zSOt%Ttu3ju}%T}!O3j!O!Q%T!Q![3j![!^%T!_!c%T!c!}3j!}#R%T#R#S3j#S#T%T#T#o3j#p$g%T$g~3j$O4wS#^#v$UWO!^%T!_!`5T!`#o%T#p~%T$O5[R$UW#o#vO!^%T!_#o%T#p~%T5b5lU'x5Y$UWOv%Tvw6Ow!^%T!_!`5T!`#o%T#p~%T$O6VS$UW#i#vO!^%T!_!`5T!`#o%T#p~%T)X6jZ$UW]#eOY6cYZ7]Zw6cwx*rx!^6c!^!_8T!_#O6c#O#P:T#P#o6c#o#p8T#p~6c&r7bV$UWOw7]wx*Px!^7]!^!_7w!_#o7]#o#p7w#p~7]&j7zROw7wwx*mx~7w)P8YV]#eOY8TYZ7wZw8Twx+px#O8T#O#P8o#P~8T)P8rROw8Twx8{x~8T)P9SU$P&j]#eOY9fZw9fwx-Vx#O9f#O#P9}#P~9f#e9kU]#eOY9fZw9fwx-Vx#O9f#O#P9}#P~9f#e:QPO~9f)X:YV$UWOw6cwx:ox!^6c!^!_8T!_#o6c#o#p8T#p~6c)X:xZ$P&j$UW]#eOY;kYZ%TZw;kwx/rx!^;k!^!_9f!_#O;k#O#P<e#P#o;k#o#p9f#p~;k#m;rZ$UW]#eOY;kYZ%TZw;kwx/rx!^;k!^!_9f!_#O;k#O#P<e#P#o;k#o#p9f#p~;k#m<jT$UWO!^;k!^!_9f!_#o;k#o#p9f#p~;k&i=QR!d&a$UWO!^%T!_#o%T#p~%Tk=bR!cc$UWO!^%T!_#o%T#p~%T7V=tU'^4V#_#v$UWOz%Tz{>W{!^%T!_!`5T!`#o%T#p~%T$O>_S#[#v$UWO!^%T!_!`5T!`#o%T#p~%T%w>rSj%o$UWO!^%T!_!`5T!`#o%T#p~%T&i?VR!R&a$UWO!^%T!_#o%T#p~%T7Z?gVu5^$UWO!O%T!O!P?|!P!Q%T!Q![@r![!^%T!_#o%T#p~%T!{@RT$UWO!O%T!O!P@b!P!^%T!_#o%T#p~%T!{@iR!Q!s$UWO!^%T!_#o%T#p~%T!{@yZ$UWk!sO!Q%T!Q![@r![!^%T!_!g%T!g!hAl!h#R%T#R#S@r#S#X%T#X#YAl#Y#o%T#p~%T!{AqZ$UWO{%T{|Bd|}%T}!OBd!O!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T!{BiV$UWO!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T!{CVV$UWk!sO!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T7ZCs`$UW#]#vOYDuYZ%TZzDuz{Jl{!PDu!P!Q!-e!Q!^Du!^!_Fx!_!`!.^!`!a!/]!a!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~DuXD|[$UW}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~DuXEy_$UW}PO!^%T!_#Z%T#Z#[Er#[#]%T#]#^Er#^#a%T#a#bEr#b#g%T#g#hEr#h#i%T#i#jEr#j#m%T#m#nEr#n#o%T#p~%TPF}V}POYFxZ!PFx!P!QGd!Q!}Fx!}#OG{#O#PHh#P~FxPGiU}P#Z#[Gd#]#^Gd#a#bGd#g#hGd#i#jGd#m#nGdPHOTOYG{Z#OG{#O#PH_#P#QFx#Q~G{PHbQOYG{Z~G{PHkQOYFxZ~FxXHvY$UWOYHqYZ%TZ!^Hq!^!_G{!_#OHq#O#PIf#P#QDu#Q#oHq#o#pG{#p~HqXIkV$UWOYHqYZ%TZ!^Hq!^!_G{!_#oHq#o#pG{#p~HqXJVV$UWOYDuYZ%TZ!^Du!^!_Fx!_#oDu#o#pFx#p~Du7ZJs^$UW}POYJlYZKoZzJlz{NQ{!PJl!P!Q!,R!Q!^Jl!^!_!!]!_!}Jl!}#O!'|#O#P!+a#P#oJl#o#p!!]#p~Jl7ZKtV$UWOzKoz{LZ{!^Ko!^!_M]!_#oKo#o#pM]#p~Ko7ZL`X$UWOzKoz{LZ{!PKo!P!QL{!Q!^Ko!^!_M]!_#oKo#o#pM]#p~Ko7ZMSR$UWU7RO!^%T!_#o%T#p~%T7RM`ROzM]z{Mi{~M]7RMlTOzM]z{Mi{!PM]!P!QM{!Q~M]7RNQOU7R7ZNX^$UW}POYJlYZKoZzJlz{NQ{!PJl!P!Q! T!Q!^Jl!^!_!!]!_!}Jl!}#O!'|#O#P!+a#P#oJl#o#p!!]#p~Jl7Z! ^_$UWU7R}PO!^%T!_#Z%T#Z#[Er#[#]%T#]#^Er#^#a%T#a#bEr#b#g%T#g#hEr#h#i%T#i#jEr#j#m%T#m#nEr#n#o%T#p~%T7R!!bY}POY!!]YZM]Zz!!]z{!#Q{!P!!]!P!Q!&x!Q!}!!]!}#O!$`#O#P!&f#P~!!]7R!#VY}POY!!]YZM]Zz!!]z{!#Q{!P!!]!P!Q!#u!Q!}!!]!}#O!$`#O#P!&f#P~!!]7R!#|UU7R}P#Z#[Gd#]#^Gd#a#bGd#g#hGd#i#jGd#m#nGd7R!$cWOY!$`YZM]Zz!$`z{!${{#O!$`#O#P!&S#P#Q!!]#Q~!$`7R!%OYOY!$`YZM]Zz!$`z{!${{!P!$`!P!Q!%n!Q#O!$`#O#P!&S#P#Q!!]#Q~!$`7R!%sTU7ROYG{Z#OG{#O#PH_#P#QFx#Q~G{7R!&VTOY!$`YZM]Zz!$`z{!${{~!$`7R!&iTOY!!]YZM]Zz!!]z{!#Q{~!!]7R!&}_}POzM]z{Mi{#ZM]#Z#[!&x#[#]M]#]#^!&x#^#aM]#a#b!&x#b#gM]#g#h!&x#h#iM]#i#j!&x#j#mM]#m#n!&x#n~M]7Z!(R[$UWOY!'|YZKoZz!'|z{!(w{!^!'|!^!_!$`!_#O!'|#O#P!*o#P#QJl#Q#o!'|#o#p!$`#p~!'|7Z!(|^$UWOY!'|YZKoZz!'|z{!(w{!P!'|!P!Q!)x!Q!^!'|!^!_!$`!_#O!'|#O#P!*o#P#QJl#Q#o!'|#o#p!$`#p~!'|7Z!*PY$UWU7ROYHqYZ%TZ!^Hq!^!_G{!_#OHq#O#PIf#P#QDu#Q#oHq#o#pG{#p~Hq7Z!*tX$UWOY!'|YZKoZz!'|z{!(w{!^!'|!^!_!$`!_#o!'|#o#p!$`#p~!'|7Z!+fX$UWOYJlYZKoZzJlz{NQ{!^Jl!^!_!!]!_#oJl#o#p!!]#p~Jl7Z!,Yc$UW}POzKoz{LZ{!^Ko!^!_M]!_#ZKo#Z#[!,R#[#]Ko#]#^!,R#^#aKo#a#b!,R#b#gKo#g#h!,R#h#iKo#i#j!,R#j#mKo#m#n!,R#n#oKo#o#pM]#p~Ko7Z!-lV$UWT7ROY!-eYZ%TZ!^!-e!^!_!.R!_#o!-e#o#p!.R#p~!-e7R!.WQT7ROY!.RZ~!.R$P!.g[$UW#o#v}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~Du]!/f[#wS$UW}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~Du!{!0cd$UWk!sO!O%T!O!P@r!P!Q%T!Q![!1q![!^%T!_!g%T!g!hAl!h#R%T#R#S!1q#S#U%T#U#V!3X#V#X%T#X#YAl#Y#b%T#b#c!2w#c#d!4m#d#l%T#l#m!5{#m#o%T#p~%T!{!1x_$UWk!sO!O%T!O!P@r!P!Q%T!Q![!1q![!^%T!_!g%T!g!hAl!h#R%T#R#S!1q#S#X%T#X#YAl#Y#b%T#b#c!2w#c#o%T#p~%T!{!3OR$UWk!sO!^%T!_#o%T#p~%T!{!3^W$UWO!Q%T!Q!R!3v!R!S!3v!S!^%T!_#R%T#R#S!3v#S#o%T#p~%T!{!3}Y$UWk!sO!Q%T!Q!R!3v!R!S!3v!S!^%T!_#R%T#R#S!3v#S#b%T#b#c!2w#c#o%T#p~%T!{!4rV$UWO!Q%T!Q!Y!5X!Y!^%T!_#R%T#R#S!5X#S#o%T#p~%T!{!5`X$UWk!sO!Q%T!Q!Y!5X!Y!^%T!_#R%T#R#S!5X#S#b%T#b#c!2w#c#o%T#p~%T!{!6QZ$UWO!Q%T!Q![!6s![!^%T!_!c%T!c!i!6s!i#R%T#R#S!6s#S#T%T#T#Z!6s#Z#o%T#p~%T!{!6z]$UWk!sO!Q%T!Q![!6s![!^%T!_!c%T!c!i!6s!i#R%T#R#S!6s#S#T%T#T#Z!6s#Z#b%T#b#c!2w#c#o%T#p~%T$u!7|R!]V$UW#m$fO!^%T!_#o%T#p~%T!q!8^R_!i$UWO!^%T!_#o%T#p~%T5w!8rR'bd!a/n#x&s'|P!P!Q!8{!^!_!9Q!_!`!9_W!9QO$WW#v!9VP#`#v!_!`!9Y#v!9_O#o#v#v!9dO#a#v$u!9kT!{$m$UWO!^%T!_!`'v!`!a!9z!a#o%T#p~%T$P!:RR#W#w$UWO!^%T!_#o%T#p~%T%V!:gT'a!R#a#v$RS$UWO!^%T!_!`!:v!`!a!;W!a#o%T#p~%T$O!:}R#a#v$UWO!^%T!_#o%T#p~%T$O!;_T#`#v$UWO!^%T!_!`5T!`!a!;n!a#o%T#p~%T$O!;uS#`#v$UWO!^%T!_!`5T!`#o%T#p~%T*a!<YV'p#{$UWO!O%T!O!P!<o!P!^%T!_!a%T!a!b!=P!b#o%T#p~%T*[!<vRv*S$UWO!^%T!_#o%T#p~%T$O!=WS$UW#j#vO!^%T!_!`5T!`#o%T#p~%T7V!=kRx6}$UWO!^%T!_#o%T#p~%Tk!={R!Oc$UWO!^%T!_#o%T#p~%T$O!>]S#g#v$UWO!^%T!_!`5T!`#o%T#p~%T$a!>pR$UW'f$XO!^%T!_#o%T#p~%T~!?OO!T~5b!?VT'w5Y$UWO!^%T!_!`5T!`#o%T#p#q!=P#q~%T6X!?oR!S5}nQ$UWO!^%T!_#o%T#p~%TX!@PR!kP$UWO!^%T!_#o%T#p~%T7Z!@gr$UW'Y7R#zS']$y'g3SOX%TXY%cYZ%TZ[%c[p%Tpq%cqt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$f%T$f$g%c$g#BY2`#BY#BZ!@Y#BZ$IS2`$IS$I_!@Y$I_$JT2`$JT$JU!@Y$JU$KV2`$KV$KW!@Y$KW&FU2`&FU&FV!@Y&FV?HT2`?HT?HU!@Y?HU~2`7Z!CO_$UW'Z7R#zS']$y'g3SOt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$g%T$g~2`",tokenizers:[yJ,OJ,kJ,wJ,0,1,2,3,4,5,6,7,8,9,bJ],topRules:{Script:[0,7]},dialects:{jsx:12107,ts:12109},dynamicPrecedences:{149:1,176:1},specialized:[{term:289,get:r=>SJ[r]||-1},{term:299,get:r=>xJ[r]||-1},{term:63,get:r=>CJ[r]||-1}],tokenPrec:12130}),TJ=1024;let PJ=0;class Jk{constructor(e,t){this.from=e,this.to=t}}class Ut{constructor(e={}){this.id=PJ++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=gs.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}Ut.closedBy=new Ut({deserialize:r=>r.split(" ")});Ut.openedBy=new Ut({deserialize:r=>r.split(" ")});Ut.group=new Ut({deserialize:r=>r.split(" ")});Ut.contextHash=new Ut({perNode:!0});Ut.lookAhead=new Ut({perNode:!0});Ut.mounted=new Ut({perNode:!0});const _J=Object.create(null);class gs{constructor(e,t,i,n=0){this.name=e,this.props=t,this.id=i,this.flags=n}static define(e){let t=e.props&&e.props.length?Object.create(null):_J,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),n=new gs(e.name||"",t,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(n)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return n}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Ut.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let n of i.split(" "))t[n]=e[i];return i=>{for(let n=i.prop(Ut.group),s=-1;s<(n?n.length:0);s++){let o=t[s<0?i.name:n[s]];if(o)return o}}}}gs.none=new gs("",Object.create(null),0,8);const am=new WeakMap,R_=new WeakMap;var xn;(function(r){r[r.ExcludeBuffers=1]="ExcludeBuffers",r[r.IncludeAnonymous=2]="IncludeAnonymous",r[r.IgnoreMounts=4]="IgnoreMounts",r[r.IgnoreOverlays=8]="IgnoreOverlays"})(xn||(xn={}));class nr{constructor(e,t,i,n,s){if(this.type=e,this.children=t,this.positions=i,this.length=n,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,l]of s)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=this.prop(Ut.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let n=i.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new sb(this.topNode,e)}cursorAt(e,t=0,i=0){let n=am.get(this)||this.topNode,s=new sb(n);return s.moveTo(e,t),am.set(this,s._tree),s}get topNode(){return new Rs(this,0,0,null)}resolve(e,t=0){let i=Bf(am.get(this)||this.topNode,e,t,!1);return am.set(this,i),i}resolveInner(e,t=0){let i=Bf(R_.get(this)||this.topNode,e,t,!0);return R_.set(this,i),i}iterate(e){let{enter:t,leave:i,from:n=0,to:s=this.length}=e;for(let o=this.cursor((e.mode||0)|xn.IncludeAnonymous);;){let l=!1;if(o.from<=s&&o.to>=n&&(o.type.isAnonymous||t(o)!==!1)){if(o.firstChild())continue;l=!0}for(;l&&i&&!o.type.isAnonymous&&i(o),!o.nextSibling();){if(!o.parent())return;l=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:Sx(gs.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,n)=>new nr(this.type,t,i,n,this.propValues),e.makeTree||((t,i,n)=>new nr(gs.none,t,i,n)))}static build(e){return MJ(e)}}nr.empty=new nr(gs.none,[],[],0);class yx{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new yx(this.buffer,this.index)}}class eu{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return gs.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],n=this.set.types[t],s=n.name;if(/\W/.test(s)&&!n.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,t,i,n,s){let{buffer:o}=this,l=-1;for(let a=e;a!=t&&!(eI(s,n,o[a+1],o[a+2])&&(l=a,i>0));a=o[a+3]);return l}slice(e,t,i,n){let s=this.buffer,o=new Uint16Array(t-e);for(let l=e,a=0;l<t;)o[a++]=s[l++],o[a++]=s[l++]-i,o[a++]=s[l++]-i,o[a++]=s[l++]-e;return new eu(o,n-i,this.set)}}function eI(r,e,t,i){switch(r){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function tI(r,e){let t=r.childBefore(e);for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(r=t,t=i.prevSibling):t=i}return r}function Bf(r,e,t,i){for(var n;r.from==r.to||(t<1?r.from>=e:r.from>e)||(t>-1?r.to<=e:r.to<e);){let o=!i&&r instanceof Rs&&r.index<0?null:r.parent;if(!o)return r;r=o}let s=i?0:xn.IgnoreOverlays;if(i)for(let o=r,l=o.parent;l;o=l,l=o.parent)o instanceof Rs&&o.index<0&&((n=l.enter(e,t,s))===null||n===void 0?void 0:n.from)!=o.from&&(r=l);for(;;){let o=r.enter(e,t,s);if(!o)return r;r=o}}class Rs{constructor(e,t,i,n){this._tree=e,this.from=t,this.index=i,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,n,s=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,h=t>0?l.length:-1;e!=h;e+=t){let u=l[e],f=a[e]+o.from;if(!!eI(n,i,f,f+u.length)){if(u instanceof eu){if(s&xn.ExcludeBuffers)continue;let c=u.findChild(0,u.buffer.length,t,i-f,n);if(c>-1)return new zo(new $J(o,u,e,f),null,c)}else if(s&xn.IncludeAnonymous||!u.type.isAnonymous||vx(u)){let c;if(!(s&xn.IgnoreMounts)&&u.props&&(c=u.prop(Ut.mounted))&&!c.overlay)return new Rs(c.tree,f,e,o);let d=new Rs(u,f,e,o);return s&xn.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(t<0?u.children.length-1:0,t,i,n)}}}if(s&xn.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let n;if(!(i&xn.IgnoreOverlays)&&(n=this._tree.prop(Ut.mounted))&&n.overlay){let s=e-this.from;for(let{from:o,to:l}of n.overlay)if((t>0?o<=s:o<s)&&(t<0?l>=s:l>s))return new Rs(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new sb(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return Bf(this,e,t,!1)}resolveInner(e,t=0){return Bf(this,e,t,!0)}enterUnfinishedNodesBefore(e){return tI(this,e)}getChild(e,t=null,i=null){let n=nb(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return nb(this,e,t,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return rb(this,e)}}function nb(r,e,t,i){let n=r.cursor(),s=[];if(!n.firstChild())return s;if(t!=null){for(;!n.type.is(t);)if(!n.nextSibling())return s}for(;;){if(i!=null&&n.type.is(i))return s;if(n.type.is(e)&&s.push(n.node),!n.nextSibling())return i==null?s:[]}}function rb(r,e,t=e.length-1){for(let i=r.parent;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class $J{constructor(e,t,i,n){this.parent=e,this.buffer=t,this.index=i,this.start=n}}class zo{constructor(e,t,i){this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,i){let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.context.start,i);return s<0?null:new zo(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&xn.ExcludeBuffers)return null;let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new zo(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new zo(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new zo(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new sb(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,n=this.index+4,s=i.buffer[this.index+3];if(s>n){let o=i.buffer[this.index+1],l=i.buffer[this.index+2];e.push(i.slice(n,s,o,l)),t.push(0)}return new nr(this.type,e,t,this.to-this.from)}resolve(e,t=0){return Bf(this,e,t,!1)}resolveInner(e,t=0){return Bf(this,e,t,!0)}enterUnfinishedNodesBefore(e){return tI(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,i=null){let n=nb(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return nb(this,e,t,i)}get node(){return this}matchContext(e){return rb(this,e)}}class sb{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Rs)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=i+n.buffer[e+1],this.to=i+n.buffer[e+2],!0}yield(e){return e?e instanceof Rs?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:n}=this.buffer,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&xn.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&xn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&xn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let n=i<0?0:this.stack[i]+4;if(this.index!=n)return this.yieldBuf(t.findChild(n,this.index,-1,0,4))}else{let n=t.buffer[this.index+3];if(n<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(n)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(n.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:i}=n)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let s=t+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let l=i._tree.children[s];if(this.mode&xn.IncludeAnonymous||l instanceof eu||!l.type.isAnonymous||vx(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer){e:for(let n=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==n){if(n==this.index)return o;t=o,i=s+1;break e}n=this.stack[--s]}}for(let n=i;n<this.stack.length;n++)t=new zo(this.buffer,t,this.stack[n]);return this.bufferNode=new zo(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let n=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(n=!0)}for(;n&&t&&t(this),n=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,n=!0}}}matchContext(e){if(!this.buffer)return rb(this.node,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let n=e.length-1,s=this.stack.length-1;n>=0;s--){if(s<0)return rb(this.node,e,n);let o=i[t.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[n]&&e[n]!=o.name)return!1;n--}}return!0}}function vx(r){return r.children.some(e=>e instanceof eu||!e.type.isAnonymous||vx(e))}function MJ(r){var e;let{buffer:t,nodeSet:i,maxBufferLength:n=TJ,reused:s=[],minRepeatType:o=i.types.length}=r,l=Array.isArray(t)?new yx(t,t.length):t,a=i.types,h=0,u=0;function f(p,b,m,k,C){let{id:v,start:y,end:T,size:E}=l,$=u;for(;E<0;)if(l.next(),E==-1){let L=s[v];m.push(L),k.push(y-p);return}else if(E==-3){h=v;return}else if(E==-4){u=v;return}else throw new RangeError(`Unrecognized record size: ${E}`);let R=a[v],N,_,W=y-p;if(T-y<=n&&(_=w(l.pos-b,C))){let L=new Uint16Array(_.size-_.skip),I=l.pos-_.size,j=L.length;for(;l.pos>I;)j=S(_.start,L,j);N=new eu(L,T-_.start,i),W=_.start-p}else{let L=l.pos-E;l.next();let I=[],j=[],X=v>=o?v:-1,Z=0,ie=T;for(;l.pos>L;)X>=0&&l.id==X&&l.size>=0?(l.end<=ie-n&&(d(I,j,y,Z,l.end,ie,X,$),Z=I.length,ie=l.end),l.next()):f(y,L,I,j,X);if(X>=0&&Z>0&&Z<I.length&&d(I,j,y,Z,y,ie,X,$),I.reverse(),j.reverse(),X>-1&&Z>0){let G=c(R);N=Sx(R,I,j,0,I.length,0,T-y,G,G)}else N=g(R,I,j,T-y,$-T)}m.push(N),k.push(W)}function c(p){return(b,m,k)=>{let C=0,v=b.length-1,y,T;if(v>=0&&(y=b[v])instanceof nr){if(!v&&y.type==p&&y.length==k)return y;(T=y.prop(Ut.lookAhead))&&(C=m[v]+y.length+T)}return g(p,b,m,k,C)}}function d(p,b,m,k,C,v,y,T){let E=[],$=[];for(;p.length>k;)E.push(p.pop()),$.push(b.pop()+m-C);p.push(g(i.types[y],E,$,v-C,T-v)),b.push(C-m)}function g(p,b,m,k,C=0,v){if(h){let y=[Ut.contextHash,h];v=v?[y].concat(v):[y]}if(C>25){let y=[Ut.lookAhead,C];v=v?[y].concat(v):[y]}return new nr(p,b,m,k,v)}function w(p,b){let m=l.fork(),k=0,C=0,v=0,y=m.end-n,T={size:0,start:0,skip:0};e:for(let E=m.pos-p;m.pos>E;){let $=m.size;if(m.id==b&&$>=0){T.size=k,T.start=C,T.skip=v,v+=4,k+=4,m.next();continue}let R=m.pos-$;if($<0||R<E||m.start<y)break;let N=m.id>=o?4:0,_=m.start;for(m.next();m.pos>R;){if(m.size<0)if(m.size==-3)N+=4;else break e;else m.id>=o&&(N+=4);m.next()}C=_,k+=$,v+=N}return(b<0||k==p)&&(T.size=k,T.start=C,T.skip=v),T.size>4?T:void 0}function S(p,b,m){let{id:k,start:C,end:v,size:y}=l;if(l.next(),y>=0&&k<o){let T=m;if(y>4){let E=l.pos-(y-4);for(;l.pos>E;)m=S(p,b,m)}b[--m]=T,b[--m]=v-p,b[--m]=C-p,b[--m]=k}else y==-3?h=k:y==-4&&(u=k);return m}let x=[],Q=[];for(;l.pos>0;)f(r.start||0,r.bufferStart||0,x,Q,-1);let M=(e=r.length)!==null&&e!==void 0?e:x.length?Q[0]+x[0].length:0;return new nr(a[r.topID],x.reverse(),Q.reverse(),M)}const Q_=new WeakMap;function Jm(r,e){if(!r.isAnonymous||e instanceof eu||e.type!=r)return 1;let t=Q_.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=r||!(i instanceof nr)){t=1;break}t+=Jm(r,i)}Q_.set(e,t)}return t}function Sx(r,e,t,i,n,s,o,l,a){let h=0;for(let g=i;g<n;g++)h+=Jm(r,e[g]);let u=Math.ceil(h*1.5/8),f=[],c=[];function d(g,w,S,x,Q){for(let M=S;M<x;){let p=M,b=w[M],m=Jm(r,g[M]);for(M++;M<x;M++){let k=Jm(r,g[M]);if(m+k>=u)break;m+=k}if(M==p+1){if(m>u){let k=g[p];d(k.children,k.positions,0,k.children.length,w[p]+Q);continue}f.push(g[p])}else{let k=w[M-1]+g[M-1].length-b;f.push(Sx(r,g,w,p,M,b,k,null,a))}c.push(b+Q-s)}}return d(e,t,i,n,0),(l||a)(f,c,o)}class RJ{constructor(){this.map=new WeakMap}setBuffer(e,t,i){let n=this.map.get(e);n||this.map.set(e,n=new Map),n.set(t,i)}getBuffer(e,t){let i=this.map.get(e);return i&&i.get(t)}set(e,t){e instanceof zo?this.setBuffer(e.context.buffer,e.index,t):e instanceof Rs&&this.map.set(e.tree,t)}get(e){return e instanceof zo?this.getBuffer(e.context.buffer,e.index):e instanceof Rs?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class Rh{constructor(e,t,i,n,s=!1,o=!1){this.from=e,this.to=t,this.tree=i,this.offset=n,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let n=[new Rh(0,e.length,e,0,!1,i)];for(let s of t)s.to>e.length&&n.push(s);return n}static applyChanges(e,t,i=128){if(!t.length)return e;let n=[],s=1,o=e.length?e[0]:null;for(let l=0,a=0,h=0;;l++){let u=l<t.length?t[l]:null,f=u?u.fromA:1e9;if(f-a>=i)for(;o&&o.from<f;){let c=o;if(a>=c.from||f<=c.to||h){let d=Math.max(c.from,a)-h,g=Math.min(c.to,f)-h;c=d>=g?null:new Rh(d,g,c.tree,c.offset+h,l>0,!!u)}if(c&&n.push(c),o.to>f)break;o=s<e.length?e[s++]:null}if(!u)break;a=u.toA,h=u.toA-u.toB}return n}}class QJ{startParse(e,t,i){return typeof e=="string"&&(e=new DJ(e)),i=i?i.length?i.map(n=>new Jk(n.from,n.to)):[new Jk(0,0)]:[new Jk(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let n=this.startParse(e,t,i);for(;;){let s=n.advance();if(s)return s}}}class DJ{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Ut({perNode:!0});let EJ=0;class _o{constructor(e,t,i){this.set=e,this.base=t,this.modified=i,this.id=EJ++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let t=new _o([],null,[]);if(t.set.push(t),e)for(let i of e.set)t.set.push(i);return t}static defineModifier(){let e=new ob;return t=>t.modified.indexOf(e)>-1?t:ob.get(t.base||t,t.modified.concat(e).sort((i,n)=>i.id-n.id))}}let BJ=0;class ob{constructor(){this.instances=[],this.id=BJ++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(l=>l.base==e&&NJ(t,l.modified));if(i)return i;let n=[],s=new _o(n,e,t);for(let l of t)l.instances.push(s);let o=iI(t);for(let l of e.set)for(let a of o)n.push(ob.get(l,a));return s}}function NJ(r,e){return r.length==e.length&&r.every((t,i)=>t==e[i])}function iI(r){let e=[r];for(let t=0;t<r.length;t++)for(let i of iI(r.slice(0,t).concat(r.slice(t+1))))e.push(i);return e}function IJ(r){let e=Object.create(null);for(let t in r){let i=r[t];Array.isArray(i)||(i=[i]);for(let n of t.split(" "))if(n){let s=[],o=2,l=n;for(let f=0;;){if(l=="..."&&f>0&&f+3==n.length){o=1;break}let c=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!c)throw new RangeError("Invalid path: "+n);if(s.push(c[0]=="*"?"":c[0][0]=='"'?JSON.parse(c[0]):c[0]),f+=c[0].length,f==n.length)break;let d=n[f++];if(f==n.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+n);l=n.slice(f)}let a=s.length-1,h=s[a];if(!h)throw new RangeError("Invalid path: "+n);let u=new zJ(i,o,a>0?s.slice(0,a):null);e[h]=u.sort(e[h])}}return LJ.add(e)}const LJ=new Ut;class zJ{constructor(e,t,i,n){this.tags=e,this.mode=t,this.context=i,this.next=n}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function WJ(r,e){let t=Object.create(null);for(let s of r)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let o of s.tag)t[o.id]=s.class;let{scope:i,all:n=null}=e||{};return{style:s=>{let o=n;for(let l of s)for(let a of l.set){let h=t[a.id];if(h){o=o?o+" "+h:h;break}}return o},scope:i}}const we=_o.define,hm=we(),Kl=we(),D_=we(Kl),E_=we(Kl),Jl=we(),um=we(Jl),ew=we(Jl),wo=we(),lh=we(wo),oo=we(),lo=we(),M2=we(),yc=we(M2),fm=we(),ct={comment:hm,lineComment:we(hm),blockComment:we(hm),docComment:we(hm),name:Kl,variableName:we(Kl),typeName:D_,tagName:we(D_),propertyName:E_,attributeName:we(E_),className:we(Kl),labelName:we(Kl),namespace:we(Kl),macroName:we(Kl),literal:Jl,string:um,docString:we(um),character:we(um),attributeValue:we(um),number:ew,integer:we(ew),float:we(ew),bool:we(Jl),regexp:we(Jl),escape:we(Jl),color:we(Jl),url:we(Jl),keyword:oo,self:we(oo),null:we(oo),atom:we(oo),unit:we(oo),modifier:we(oo),operatorKeyword:we(oo),controlKeyword:we(oo),definitionKeyword:we(oo),moduleKeyword:we(oo),operator:lo,derefOperator:we(lo),arithmeticOperator:we(lo),logicOperator:we(lo),bitwiseOperator:we(lo),compareOperator:we(lo),updateOperator:we(lo),definitionOperator:we(lo),typeOperator:we(lo),controlOperator:we(lo),punctuation:M2,separator:we(M2),bracket:yc,angleBracket:we(yc),squareBracket:we(yc),paren:we(yc),brace:we(yc),content:wo,heading:lh,heading1:we(lh),heading2:we(lh),heading3:we(lh),heading4:we(lh),heading5:we(lh),heading6:we(lh),contentSeparator:we(wo),list:we(wo),quote:we(wo),emphasis:we(wo),strong:we(wo),link:we(wo),monospace:we(wo),strikethrough:we(wo),inserted:we(),deleted:we(),changed:we(),invalid:we(),meta:fm,documentMeta:we(fm),annotation:we(fm),processingInstruction:we(fm),definition:_o.defineModifier(),constant:_o.defineModifier(),function:_o.defineModifier(),standard:_o.defineModifier(),local:_o.defineModifier(),special:_o.defineModifier()};WJ([{tag:ct.link,class:"tok-link"},{tag:ct.heading,class:"tok-heading"},{tag:ct.emphasis,class:"tok-emphasis"},{tag:ct.strong,class:"tok-strong"},{tag:ct.keyword,class:"tok-keyword"},{tag:ct.atom,class:"tok-atom"},{tag:ct.bool,class:"tok-bool"},{tag:ct.url,class:"tok-url"},{tag:ct.labelName,class:"tok-labelName"},{tag:ct.inserted,class:"tok-inserted"},{tag:ct.deleted,class:"tok-deleted"},{tag:ct.literal,class:"tok-literal"},{tag:ct.string,class:"tok-string"},{tag:ct.number,class:"tok-number"},{tag:[ct.regexp,ct.escape,ct.special(ct.string)],class:"tok-string2"},{tag:ct.variableName,class:"tok-variableName"},{tag:ct.local(ct.variableName),class:"tok-variableName tok-local"},{tag:ct.definition(ct.variableName),class:"tok-variableName tok-definition"},{tag:ct.special(ct.variableName),class:"tok-variableName2"},{tag:ct.definition(ct.propertyName),class:"tok-propertyName tok-definition"},{tag:ct.typeName,class:"tok-typeName"},{tag:ct.namespace,class:"tok-namespace"},{tag:ct.className,class:"tok-className"},{tag:ct.macroName,class:"tok-macroName"},{tag:ct.propertyName,class:"tok-propertyName"},{tag:ct.operator,class:"tok-operator"},{tag:ct.comment,class:"tok-comment"},{tag:ct.meta,class:"tok-meta"},{tag:ct.invalid,class:"tok-invalid"},{tag:ct.punctuation,class:"tok-punctuation"}]);var tw;const lb=new Ut;function VJ(r){return Ie.define({combine:r?e=>e.concat(r):void 0})}class Wo{constructor(e,t,i=[]){this.data=e,it.prototype.hasOwnProperty("tree")||Object.defineProperty(it.prototype,"tree",{get(){return Nf(this)}}),this.parser=t,this.extension=[Lf.of(this),it.languageData.of((n,s,o)=>n.facet(B_(n,s,o)))].concat(i)}isActiveAt(e,t,i=-1){return B_(e,t,i)==this.data}findRegions(e){let t=e.facet(Lf);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],n=(s,o)=>{if(s.prop(lb)==this.data){i.push({from:o,to:o+s.length});return}let l=s.prop(Ut.mounted);if(l){if(l.tree.prop(lb)==this.data){if(l.overlay)for(let a of l.overlay)i.push({from:a.from+o,to:a.to+o});else i.push({from:o,to:o+s.length});return}else if(l.overlay){let a=i.length;if(n(l.tree,l.overlay[0].from+o),i.length>a)return}}for(let a=0;a<s.children.length;a++){let h=s.children[a];h instanceof nr&&n(h,s.positions[a]+o)}};return n(Nf(e),0),i}get allowsNesting(){return!0}}Wo.setState=xt.define();function B_(r,e,t){let i=r.facet(Lf);if(!i)return null;let n=i.data;if(i.allowsNesting)for(let s=Nf(r).topNode;s;s=s.enter(e,t,xn.ExcludeBuffers))n=s.type.prop(lb)||n;return n}class ab extends Wo{constructor(e,t){super(e,t),this.parser=t}static define(e){let t=VJ(e.languageData);return new ab(t,e.parser.configure({props:[lb.add(i=>i.isTop?t:void 0)]}))}configure(e){return new ab(this.data,this.parser.configure(e))}get allowsNesting(){return this.parser.hasWrappers()}}function Nf(r){let e=r.field(Wo.state,!1);return e?e.tree:nr.empty}class jJ{constructor(e,t=e.length){this.doc=e,this.length=t,this.cursorPos=0,this.string="",this.cursor=e.iter()}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let vc=null;class hb{constructor(e,t,i=[],n,s,o,l,a){this.parser=e,this.state=t,this.fragments=i,this.tree=n,this.treeLen=s,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new hb(e,t,[],nr.empty,0,i,[],null)}startParse(){return this.parser.startParse(new jJ(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=nr.empty&&this.isDone(t!=null?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let n=Date.now()+e;e=()=>Date.now()>n}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let n=this.parse.advance();if(n)if(this.fragments=this.withoutTempSkipped(Rh.addTree(n,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=n,this.parse=null,this.treeLen<(t!=null?t:this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Rh.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=vc;vc=this;try{return e()}finally{vc=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=N_(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:n,treeLen:s,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((h,u,f,c)=>a.push({fromA:h,toA:u,fromB:f,toB:c})),i=Rh.applyChanges(i,a),n=nr.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let h of this.skipped){let u=e.mapPos(h.from,1),f=e.mapPos(h.to,-1);u<f&&l.push({from:u,to:f})}}}return new hb(this.parser,t,i,n,s,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:n,to:s}=this.skipped[i];n<e.to&&s>e.from&&(this.fragments=N_(this.fragments,n,s),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends QJ{createParse(t,i,n){let s=n[0].from,o=n[n.length-1].to;return{parsedPos:s,advance(){let a=vc;if(a){for(let h of n)a.tempSkipped.push(h);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new nr(gs.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return vc}}function N_(r,e,t){return Rh.applyChanges(r,[{fromA:e,toA:t,fromB:e,toB:t}])}class If{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new If(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=hb.create(e.facet(Lf).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new If(i)}}Wo.state=or.define({create:If.init,update(r,e){for(let t of e.effects)if(t.is(Wo.setState))return t.value;return e.startState.facet(Lf)!=e.state.facet(Lf)?If.init(e.state):r.apply(e)}});let nI=r=>{let e=setTimeout(()=>r(),500);return()=>clearTimeout(e)};typeof requestIdleCallback!="undefined"&&(nI=r=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(r,{timeout:500-100})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const iw=typeof navigator!="undefined"&&((tw=navigator.scheduling)===null||tw===void 0?void 0:tw.isInputPending)?()=>navigator.scheduling.isInputPending():null,FJ=fn.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Wo.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Wo.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=nI(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:n}}=this.view,s=i.field(Wo.state);if(s.tree==s.context.tree&&s.context.isDone(n+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!iw?Math.max(25,e.timeRemaining()-5):1e9),l=s.context.treeLen<n&&i.doc.length>n+1e3,a=s.context.work(()=>iw&&iw()||Date.now()>o,n+(l?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Wo.setState.of(new If(s.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>hs(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Lf=Ie.define({combine(r){return r.length?r[0]:null},enables:[Wo.state,FJ]});class HJ{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const qJ=Ie.define({combine:r=>{if(!r.length)return"  ";if(!/^(?: +|\t+)$/.test(r[0]))throw new Error("Invalid indent unit: "+JSON.stringify(r[0]));return r[0]}}),XJ=new Ut;function ZJ(r){let e=r.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let n=r.options.simulateBreak,s=r.state.doc.lineAt(t.from),o=n==null||n<=s.from?s.to:Math.min(s.to,n);for(let l=t.to;;){let a=e.childAfter(l);if(!a||a==i)return null;if(!a.type.isSkipped)return a.from<o?t:null;l=a.to}}function GJ({closing:r,align:e=!0,units:t=1}){return i=>UJ(i,e,t,r)}function UJ(r,e,t,i,n){let s=r.textAfter,o=s.match(/^\s*/)[0].length,l=i&&s.slice(o,o+i.length)==i||n==r.pos+o,a=e?ZJ(r):null;return a?l?r.column(a.from):r.column(a.to):r.baseIndent+(l?0:r.unit*t)}const YJ=r=>r.baseIndent;function nw({except:r,units:e=1}={}){return t=>{let i=r&&r.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const KJ=new Ut;function JJ(r){let e=r.firstChild,t=r.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?r.to:t.from}:null}const eee=Object.create(null),I_=[gs.none],L_=[],tee=Object.create(null);for(let[r,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])tee[r]=iee(eee,e);function rw(r,e){L_.indexOf(r)>-1||(L_.push(r),console.warn(e))}function iee(r,e){let t=null;for(let s of e.split(".")){let o=r[s]||ct[s];o?typeof o=="function"?t?t=o(t):rw(s,`Modifier ${s} used at start of tag`):t?rw(s,`Tag ${s} used as modifier`):t=o:rw(s,`Unknown highlighting tag ${s}`)}if(!t)return 0;let i=e.replace(/ /g,"_"),n=gs.define({id:I_.length,name:i,props:[IJ({[i]:t})]});return I_.push(n),n.id}function z_(r){let e=Object.keys(r).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function nee(r){let e=Object.create(null),t=Object.create(null);for(let{label:n}of r){e[n[0]]=!0;for(let s=1;s<n.length;s++)t[n[s]]=!0}let i=z_(e)+z_(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function ree(r){let e=r.map(n=>typeof n=="string"?{label:n}:n),[t,i]=e.every(n=>/^\w+$/.test(n.label))?[/\w*$/,/\w+$/]:nee(e);return n=>{let s=n.matchBefore(i);return s||n.explicit?{from:s?s.from:n.pos,options:e,validFor:t}:null}}function see(r,e){return t=>{for(let i=Nf(t.state).resolveInner(t.pos,-1);i;i=i.parent)if(r.indexOf(i.name)>-1)return null;return e(t)}}const oee=nt.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"300px"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class lee{constructor(e,t,i,n){this.field=e,this.line=t,this.from=i,this.to=n}}class xx{constructor(e,t,i){this.field=e,this.from=t,this.to=i}map(e){let t=e.mapPos(this.from,-1,gr.TrackDel),i=e.mapPos(this.to,1,gr.TrackDel);return t==null||i==null?null:new xx(this.field,t,i)}}class Cx{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let i=[],n=[t],s=e.doc.lineAt(t),o=/^\s*/.exec(s.text)[0];for(let a of this.lines){if(i.length){let h=o,u=/^\t*/.exec(a)[0].length;for(let f=0;f<u;f++)h+=e.facet(qJ);n.push(t+h.length-u),a=h+a.slice(u)}i.push(a),t+=a.length+1}let l=this.fieldPositions.map(a=>new xx(a.field,n[a.line]+a.from,n[a.line]+a.to));return{text:i,ranges:l}}static parse(e){let t=[],i=[],n=[],s;for(let o of e.split(/\r\n?|\n/)){for(;s=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(o);){let l=s[1]?+s[1]:null,a=s[2]||s[3]||"",h=-1;for(let u=0;u<t.length;u++)(l!=null?t[u].seq==l:a?t[u].name==a:!1)&&(h=u);if(h<0){let u=0;for(;u<t.length&&(l==null||t[u].seq!=null&&t[u].seq<l);)u++;t.splice(u,0,{seq:l,name:a}),h=u;for(let f of n)f.field>=h&&f.field++}n.push(new lee(h,i.length,s.index,s.index+a.length)),o=o.slice(0,s.index)+a+o.slice(s.index+s[0].length)}for(let l;l=/([$#])\\{/.exec(o);){o=o.slice(0,l.index)+l[1]+"{"+o.slice(l.index+l[0].length);for(let a of n)a.line==i.length&&a.from>l.index&&(a.from--,a.to--)}i.push(o)}return new Cx(i,n)}}let aee=ot.widget({widget:new class extends Hh{toDOM(){let r=document.createElement("span");return r.className="cm-snippetFieldPosition",r}ignoreEvent(){return!1}}}),hee=ot.mark({class:"cm-snippetField"});class Xf{constructor(e,t){this.ranges=e,this.active=t,this.deco=ot.set(e.map(i=>(i.from==i.to?aee:hee).range(i.from,i.to)))}map(e){let t=[];for(let i of this.ranges){let n=i.map(e);if(!n)return null;t.push(n)}return new Xf(t,this.active)}selectionInsideField(e){return e.ranges.every(t=>this.ranges.some(i=>i.field==this.active&&i.from<=t.from&&i.to>=t.to))}}const Sp=xt.define({map(r,e){return r&&r.map(e)}}),uee=xt.define(),Gd=or.define({create(){return null},update(r,e){for(let t of e.effects){if(t.is(Sp))return t.value;if(t.is(uee)&&r)return new Xf(r.ranges,t.value)}return r&&e.docChanged&&(r=r.map(e.changes)),r&&e.selection&&!r.selectionInsideField(e.selection)&&(r=null),r},provide:r=>nt.decorations.from(r,e=>e?e.deco:ot.none)});function Ax(r,e){return se.create(r.filter(t=>t.field==e).map(t=>se.range(t.from,t.to)))}function fee(r){let e=Cx.parse(r);return(t,i,n,s)=>{let{text:o,ranges:l}=e.instantiate(t.state,n),a={changes:{from:n,to:s,insert:_t.of(o)},scrollIntoView:!0};if(l.length&&(a.selection=Ax(l,0)),l.length>1){let h=new Xf(l,0),u=a.effects=[Sp.of(h)];t.state.field(Gd,!1)===void 0&&u.push(xt.appendConfig.of([Gd,mee,bee,oee]))}t.dispatch(t.state.update(a))}}function rI(r){return({state:e,dispatch:t})=>{let i=e.field(Gd,!1);if(!i||r<0&&i.active==0)return!1;let n=i.active+r,s=r>0&&!i.ranges.some(o=>o.field==n+r);return t(e.update({selection:Ax(i.ranges,n),effects:Sp.of(s?null:new Xf(i.ranges,n))})),!0}}const cee=({state:r,dispatch:e})=>r.field(Gd,!1)?(e(r.update({effects:Sp.of(null)})),!0):!1,dee=rI(1),pee=rI(-1),gee=[{key:"Tab",run:dee,shift:pee},{key:"Escape",run:cee}],W_=Ie.define({combine(r){return r.length?r[0]:gee}}),mee=Ff.highest(Tb.compute([W_],r=>r.facet(W_)));function Ts(r,e){return Object.assign(Object.assign({},e),{apply:fee(r)})}const bee=nt.domEventHandlers({mousedown(r,e){let t=e.state.field(Gd,!1),i;if(!t||(i=e.posAtCoords({x:r.clientX,y:r.clientY}))==null)return!1;let n=t.ranges.find(s=>s.from<=i&&s.to>=i);return!n||n.field==t.active?!1:(e.dispatch({selection:Ax(t.ranges,n.field),effects:Sp.of(t.ranges.some(s=>s.field>n.field)?new Xf(t.ranges,n.field):null)}),!0)}}),sI=new class extends Dh{};sI.startSide=1;sI.endSide=-1;const Oee=[Ts("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),Ts("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),Ts("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),Ts("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),Ts("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),Ts(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),Ts("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),Ts(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),Ts(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),Ts('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),Ts('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],V_=new RJ,oI=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function Sc(r){return(e,t)=>{let i=e.node.getChild("VariableDefinition");return i&&t(i,r),!0}}const kee=["FunctionDeclaration"],wee={FunctionDeclaration:Sc("function"),ClassDeclaration:Sc("class"),ClassExpression:()=>!0,EnumDeclaration:Sc("constant"),TypeAliasDeclaration:Sc("type"),NamespaceDeclaration:Sc("namespace"),VariableDefinition(r,e){r.matchContext(kee)||e(r,"variable")},TypeDefinition(r,e){e(r,"type")},__proto__:null};function lI(r,e){let t=V_.get(e);if(t)return t;let i=[],n=!0;function s(o,l){let a=r.sliceString(o.from,o.to);i.push({label:a,type:l})}return e.cursor(xn.IncludeAnonymous).iterate(o=>{if(n)n=!1;else if(o.name){let l=wee[o.name];if(l&&l(o,s)||oI.has(o.name))return!1}else if(o.to-o.from>8192){for(let l of lI(r,o.node))i.push(l);return!1}}),V_.set(e,i),i}const j_=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,aI=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName"];function yee(r){let e=Nf(r.state).resolveInner(r.pos,-1);if(aI.indexOf(e.name)>-1)return null;let t=e.to-e.from<20&&j_.test(r.state.sliceDoc(e.from,e.to));if(!t&&!r.explicit)return null;let i=[];for(let n=e;n;n=n.parent)oI.has(n.name)&&(i=i.concat(lI(r.state.doc,n)));return{options:i,from:t?e.from:r.pos,validFor:j_}}const Ea=ab.define({parser:AJ.configure({props:[XJ.add({IfStatement:nw({except:/^\s*({|else\b)/}),TryStatement:nw({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:YJ,SwitchBody:r=>{let e=r.textAfter,t=/^\s*\}/.test(e),i=/^\s*(case|default)\b/.test(e);return r.baseIndent+(t?0:i?1:2)*r.unit},Block:GJ({closing:"}"}),ArrowFunction:r=>r.baseIndent+r.unit,"TemplateString BlockComment":()=>-1,"Statement Property":nw({except:/^{/}),JSXElement(r){let e=/^\s*<\//.test(r.textAfter);return r.lineIndent(r.node.from)+(e?0:r.unit)},JSXEscape(r){let e=/\s*\}/.test(r.textAfter);return r.lineIndent(r.node.from)+(e?0:r.unit)},"JSXOpenTag JSXSelfClosingTag"(r){return r.column(r.node.from)+r.unit}}),KJ.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression":JJ,BlockComment(r){return{from:r.from+2,to:r.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),vee=Ea.configure({dialect:"ts"}),See=Ea.configure({dialect:"jsx"}),xee=Ea.configure({dialect:"jsx ts"}),Cee="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(r=>({label:r,type:"keyword"}));function hI(r={}){let e=r.jsx?r.typescript?xee:See:r.typescript?vee:Ea;return new HJ(e,[Ea.data.of({autocomplete:see(aI,ree(Oee.concat(Cee)))}),Ea.data.of({autocomplete:yee}),r.jsx?Tee:[]])}function F_(r,e,t=r.length){if(!e)return"";let i=e.getChild("JSXIdentifier");return i?r.sliceString(i.from,Math.min(i.to,t)):""}const Aee=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),Tee=nt.inputHandler.of((r,e,t,i)=>{if((Aee?r.composing:r.compositionStarted)||r.state.readOnly||e!=t||i!=">"&&i!="/"||!Ea.isActiveAt(r.state,e,-1))return!1;let{state:n}=r,s=n.changeByRange(o=>{var l,a,h;let{head:u}=o,f=Nf(n).resolveInner(u,-1),c;if(f.name=="JSXStartTag"&&(f=f.parent),i==">"&&f.name=="JSXFragmentTag")return{range:se.cursor(u+1),changes:{from:u,insert:"><>"}};if(i==">"&&f.name=="JSXIdentifier"){if(((a=(l=f.parent)===null||l===void 0?void 0:l.lastChild)===null||a===void 0?void 0:a.name)!="JSXEndTag"&&(c=F_(n.doc,f.parent,u)))return{range:se.cursor(u+1),changes:{from:u,insert:`></${c}>`}}}else if(i=="/"&&f.name=="JSXFragmentTag"){let d=f.parent,g=d==null?void 0:d.parent;if(d.from==u-1&&((h=g.lastChild)===null||h===void 0?void 0:h.name)!="JSXEndTag"&&(c=F_(n.doc,g==null?void 0:g.firstChild,u))){let w=`/${c}>`;return{range:se.cursor(u+w.length),changes:{from:u,insert:w}}}}return{range:o}});return s.changes.empty?!1:(r.dispatch(s,{userEvent:"input.type",scrollIntoView:!0}),!0)}),Pee=1024;let _ee=0;class sw{constructor(e,t){this.from=e,this.to=t}}class Yt{constructor(e={}){this.id=_ee++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=ms.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}Yt.closedBy=new Yt({deserialize:r=>r.split(" ")});Yt.openedBy=new Yt({deserialize:r=>r.split(" ")});Yt.group=new Yt({deserialize:r=>r.split(" ")});Yt.contextHash=new Yt({perNode:!0});Yt.lookAhead=new Yt({perNode:!0});Yt.mounted=new Yt({perNode:!0});const $ee=Object.create(null);class ms{constructor(e,t,i,n=0){this.name=e,this.props=t,this.id=i,this.flags=n}static define(e){let t=e.props&&e.props.length?Object.create(null):$ee,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),n=new ms(e.name||"",t,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(n)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return n}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Yt.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let n of i.split(" "))t[n]=e[i];return i=>{for(let n=i.prop(Yt.group),s=-1;s<(n?n.length:0);s++){let o=t[s<0?i.name:n[s]];if(o)return o}}}}ms.none=new ms("",Object.create(null),0,8);const cm=new WeakMap,H_=new WeakMap;var Xn;(function(r){r[r.ExcludeBuffers=1]="ExcludeBuffers",r[r.IncludeAnonymous=2]="IncludeAnonymous",r[r.IgnoreMounts=4]="IgnoreMounts",r[r.IgnoreOverlays=8]="IgnoreOverlays"})(Xn||(Xn={}));class rr{constructor(e,t,i,n,s){if(this.type=e,this.children=t,this.positions=i,this.length=n,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,l]of s)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=this.prop(Yt.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let n=i.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new cb(this.topNode,e)}cursorAt(e,t=0,i=0){let n=cm.get(this)||this.topNode,s=new cb(n);return s.moveTo(e,t),cm.set(this,s._tree),s}get topNode(){return new Tl(this,0,0,null)}resolve(e,t=0){let i=zf(cm.get(this)||this.topNode,e,t,!1);return cm.set(this,i),i}resolveInner(e,t=0){let i=zf(H_.get(this)||this.topNode,e,t,!0);return H_.set(this,i),i}iterate(e){let{enter:t,leave:i,from:n=0,to:s=this.length}=e;for(let o=this.cursor((e.mode||0)|Xn.IncludeAnonymous);;){let l=!1;if(o.from<=s&&o.to>=n&&(o.type.isAnonymous||t(o)!==!1)){if(o.firstChild())continue;l=!0}for(;l&&i&&!o.type.isAnonymous&&i(o),!o.nextSibling();){if(!o.parent())return;l=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:_x(ms.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,n)=>new rr(this.type,t,i,n,this.propValues),e.makeTree||((t,i,n)=>new rr(ms.none,t,i,n)))}static build(e){return Ree(e)}}rr.empty=new rr(ms.none,[],[],0);class Tx{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Tx(this.buffer,this.index)}}class tu{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return ms.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],n=this.set.types[t],s=n.name;if(/\W/.test(s)&&!n.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,t,i,n,s){let{buffer:o}=this,l=-1;for(let a=e;a!=t&&!(uI(s,n,o[a+1],o[a+2])&&(l=a,i>0));a=o[a+3]);return l}slice(e,t,i,n){let s=this.buffer,o=new Uint16Array(t-e);for(let l=e,a=0;l<t;)o[a++]=s[l++],o[a++]=s[l++]-i,o[a++]=s[l++]-i,o[a++]=s[l++]-e;return new tu(o,n-i,this.set)}}function uI(r,e,t,i){switch(r){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function fI(r,e){let t=r.childBefore(e);for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(r=t,t=i.prevSibling):t=i}return r}function zf(r,e,t,i){for(var n;r.from==r.to||(t<1?r.from>=e:r.from>e)||(t>-1?r.to<=e:r.to<e);){let o=!i&&r instanceof Tl&&r.index<0?null:r.parent;if(!o)return r;r=o}let s=i?0:Xn.IgnoreOverlays;if(i)for(let o=r,l=o.parent;l;o=l,l=o.parent)o instanceof Tl&&o.index<0&&((n=l.enter(e,t,s))===null||n===void 0?void 0:n.from)!=o.from&&(r=l);for(;;){let o=r.enter(e,t,s);if(!o)return r;r=o}}class Tl{constructor(e,t,i,n){this._tree=e,this.from=t,this.index=i,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,n,s=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,h=t>0?l.length:-1;e!=h;e+=t){let u=l[e],f=a[e]+o.from;if(!!uI(n,i,f,f+u.length)){if(u instanceof tu){if(s&Xn.ExcludeBuffers)continue;let c=u.findChild(0,u.buffer.length,t,i-f,n);if(c>-1)return new Ma(new Mee(o,u,e,f),null,c)}else if(s&Xn.IncludeAnonymous||!u.type.isAnonymous||Px(u)){let c;if(!(s&Xn.IgnoreMounts)&&u.props&&(c=u.prop(Yt.mounted))&&!c.overlay)return new Tl(c.tree,f,e,o);let d=new Tl(u,f,e,o);return s&Xn.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(t<0?u.children.length-1:0,t,i,n)}}}if(s&Xn.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let n;if(!(i&Xn.IgnoreOverlays)&&(n=this._tree.prop(Yt.mounted))&&n.overlay){let s=e-this.from;for(let{from:o,to:l}of n.overlay)if((t>0?o<=s:o<s)&&(t<0?l>=s:l>s))return new Tl(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new cb(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return zf(this,e,t,!1)}resolveInner(e,t=0){return zf(this,e,t,!0)}enterUnfinishedNodesBefore(e){return fI(this,e)}getChild(e,t=null,i=null){let n=ub(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return ub(this,e,t,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return fb(this,e)}}function ub(r,e,t,i){let n=r.cursor(),s=[];if(!n.firstChild())return s;if(t!=null){for(;!n.type.is(t);)if(!n.nextSibling())return s}for(;;){if(i!=null&&n.type.is(i))return s;if(n.type.is(e)&&s.push(n.node),!n.nextSibling())return i==null?s:[]}}function fb(r,e,t=e.length-1){for(let i=r.parent;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class Mee{constructor(e,t,i,n){this.parent=e,this.buffer=t,this.index=i,this.start=n}}class Ma{constructor(e,t,i){this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,i){let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.context.start,i);return s<0?null:new Ma(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&Xn.ExcludeBuffers)return null;let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new Ma(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Ma(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Ma(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new cb(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,n=this.index+4,s=i.buffer[this.index+3];if(s>n){let o=i.buffer[this.index+1],l=i.buffer[this.index+2];e.push(i.slice(n,s,o,l)),t.push(0)}return new rr(this.type,e,t,this.to-this.from)}resolve(e,t=0){return zf(this,e,t,!1)}resolveInner(e,t=0){return zf(this,e,t,!0)}enterUnfinishedNodesBefore(e){return fI(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,i=null){let n=ub(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return ub(this,e,t,i)}get node(){return this}matchContext(e){return fb(this,e)}}class cb{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Tl)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=i+n.buffer[e+1],this.to=i+n.buffer[e+2],!0}yield(e){return e?e instanceof Tl?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:n}=this.buffer,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&Xn.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Xn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Xn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let n=i<0?0:this.stack[i]+4;if(this.index!=n)return this.yieldBuf(t.findChild(n,this.index,-1,0,4))}else{let n=t.buffer[this.index+3];if(n<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(n)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(n.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:i}=n)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let s=t+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let l=i._tree.children[s];if(this.mode&Xn.IncludeAnonymous||l instanceof tu||!l.type.isAnonymous||Px(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer){e:for(let n=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==n){if(n==this.index)return o;t=o,i=s+1;break e}n=this.stack[--s]}}for(let n=i;n<this.stack.length;n++)t=new Ma(this.buffer,t,this.stack[n]);return this.bufferNode=new Ma(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let n=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(n=!0)}for(;n&&t&&t(this),n=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,n=!0}}}matchContext(e){if(!this.buffer)return fb(this.node,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let n=e.length-1,s=this.stack.length-1;n>=0;s--){if(s<0)return fb(this.node,e,n);let o=i[t.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[n]&&e[n]!=o.name)return!1;n--}}return!0}}function Px(r){return r.children.some(e=>e instanceof tu||!e.type.isAnonymous||Px(e))}function Ree(r){var e;let{buffer:t,nodeSet:i,maxBufferLength:n=Pee,reused:s=[],minRepeatType:o=i.types.length}=r,l=Array.isArray(t)?new Tx(t,t.length):t,a=i.types,h=0,u=0;function f(p,b,m,k,C){let{id:v,start:y,end:T,size:E}=l,$=u;for(;E<0;)if(l.next(),E==-1){let L=s[v];m.push(L),k.push(y-p);return}else if(E==-3){h=v;return}else if(E==-4){u=v;return}else throw new RangeError(`Unrecognized record size: ${E}`);let R=a[v],N,_,W=y-p;if(T-y<=n&&(_=w(l.pos-b,C))){let L=new Uint16Array(_.size-_.skip),I=l.pos-_.size,j=L.length;for(;l.pos>I;)j=S(_.start,L,j);N=new tu(L,T-_.start,i),W=_.start-p}else{let L=l.pos-E;l.next();let I=[],j=[],X=v>=o?v:-1,Z=0,ie=T;for(;l.pos>L;)X>=0&&l.id==X&&l.size>=0?(l.end<=ie-n&&(d(I,j,y,Z,l.end,ie,X,$),Z=I.length,ie=l.end),l.next()):f(y,L,I,j,X);if(X>=0&&Z>0&&Z<I.length&&d(I,j,y,Z,y,ie,X,$),I.reverse(),j.reverse(),X>-1&&Z>0){let G=c(R);N=_x(R,I,j,0,I.length,0,T-y,G,G)}else N=g(R,I,j,T-y,$-T)}m.push(N),k.push(W)}function c(p){return(b,m,k)=>{let C=0,v=b.length-1,y,T;if(v>=0&&(y=b[v])instanceof rr){if(!v&&y.type==p&&y.length==k)return y;(T=y.prop(Yt.lookAhead))&&(C=m[v]+y.length+T)}return g(p,b,m,k,C)}}function d(p,b,m,k,C,v,y,T){let E=[],$=[];for(;p.length>k;)E.push(p.pop()),$.push(b.pop()+m-C);p.push(g(i.types[y],E,$,v-C,T-v)),b.push(C-m)}function g(p,b,m,k,C=0,v){if(h){let y=[Yt.contextHash,h];v=v?[y].concat(v):[y]}if(C>25){let y=[Yt.lookAhead,C];v=v?[y].concat(v):[y]}return new rr(p,b,m,k,v)}function w(p,b){let m=l.fork(),k=0,C=0,v=0,y=m.end-n,T={size:0,start:0,skip:0};e:for(let E=m.pos-p;m.pos>E;){let $=m.size;if(m.id==b&&$>=0){T.size=k,T.start=C,T.skip=v,v+=4,k+=4,m.next();continue}let R=m.pos-$;if($<0||R<E||m.start<y)break;let N=m.id>=o?4:0,_=m.start;for(m.next();m.pos>R;){if(m.size<0)if(m.size==-3)N+=4;else break e;else m.id>=o&&(N+=4);m.next()}C=_,k+=$,v+=N}return(b<0||k==p)&&(T.size=k,T.start=C,T.skip=v),T.size>4?T:void 0}function S(p,b,m){let{id:k,start:C,end:v,size:y}=l;if(l.next(),y>=0&&k<o){let T=m;if(y>4){let E=l.pos-(y-4);for(;l.pos>E;)m=S(p,b,m)}b[--m]=T,b[--m]=v-p,b[--m]=C-p,b[--m]=k}else y==-3?h=k:y==-4&&(u=k);return m}let x=[],Q=[];for(;l.pos>0;)f(r.start||0,r.bufferStart||0,x,Q,-1);let M=(e=r.length)!==null&&e!==void 0?e:x.length?Q[0]+x[0].length:0;return new rr(a[r.topID],x.reverse(),Q.reverse(),M)}const q_=new WeakMap;function e0(r,e){if(!r.isAnonymous||e instanceof tu||e.type!=r)return 1;let t=q_.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=r||!(i instanceof rr)){t=1;break}t+=e0(r,i)}q_.set(e,t)}return t}function _x(r,e,t,i,n,s,o,l,a){let h=0;for(let g=i;g<n;g++)h+=e0(r,e[g]);let u=Math.ceil(h*1.5/8),f=[],c=[];function d(g,w,S,x,Q){for(let M=S;M<x;){let p=M,b=w[M],m=e0(r,g[M]);for(M++;M<x;M++){let k=e0(r,g[M]);if(m+k>=u)break;m+=k}if(M==p+1){if(m>u){let k=g[p];d(k.children,k.positions,0,k.children.length,w[p]+Q);continue}f.push(g[p])}else{let k=w[M-1]+g[M-1].length-b;f.push(_x(r,g,w,p,M,b,k,null,a))}c.push(b+Q-s)}}return d(e,t,i,n,0),(l||a)(f,c,o)}class Qh{constructor(e,t,i,n,s=!1,o=!1){this.from=e,this.to=t,this.tree=i,this.offset=n,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let n=[new Qh(0,e.length,e,0,!1,i)];for(let s of t)s.to>e.length&&n.push(s);return n}static applyChanges(e,t,i=128){if(!t.length)return e;let n=[],s=1,o=e.length?e[0]:null;for(let l=0,a=0,h=0;;l++){let u=l<t.length?t[l]:null,f=u?u.fromA:1e9;if(f-a>=i)for(;o&&o.from<f;){let c=o;if(a>=c.from||f<=c.to||h){let d=Math.max(c.from,a)-h,g=Math.min(c.to,f)-h;c=d>=g?null:new Qh(d,g,c.tree,c.offset+h,l>0,!!u)}if(c&&n.push(c),o.to>f)break;o=s<e.length?e[s++]:null}if(!u)break;a=u.toA,h=u.toA-u.toB}return n}}class Qee{startParse(e,t,i){return typeof e=="string"&&(e=new Dee(e)),i=i?i.length?i.map(n=>new sw(n.from,n.to)):[new sw(0,0)]:[new sw(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let n=this.startParse(e,t,i);for(;;){let s=n.advance();if(s)return s}}}class Dee{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Yt({perNode:!0});let Eee=0;class $o{constructor(e,t,i){this.set=e,this.base=t,this.modified=i,this.id=Eee++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let t=new $o([],null,[]);if(t.set.push(t),e)for(let i of e.set)t.set.push(i);return t}static defineModifier(){let e=new db;return t=>t.modified.indexOf(e)>-1?t:db.get(t.base||t,t.modified.concat(e).sort((i,n)=>i.id-n.id))}}let Bee=0;class db{constructor(){this.instances=[],this.id=Bee++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(l=>l.base==e&&Nee(t,l.modified));if(i)return i;let n=[],s=new $o(n,e,t);for(let l of t)l.instances.push(s);let o=cI(t);for(let l of e.set)for(let a of o)n.push(db.get(l,a));return s}}function Nee(r,e){return r.length==e.length&&r.every((t,i)=>t==e[i])}function cI(r){let e=[r];for(let t=0;t<r.length;t++)for(let i of cI(r.slice(0,t).concat(r.slice(t+1))))e.push(i);return e}function Iee(r){let e=Object.create(null);for(let t in r){let i=r[t];Array.isArray(i)||(i=[i]);for(let n of t.split(" "))if(n){let s=[],o=2,l=n;for(let f=0;;){if(l=="..."&&f>0&&f+3==n.length){o=1;break}let c=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!c)throw new RangeError("Invalid path: "+n);if(s.push(c[0]=="*"?"":c[0][0]=='"'?JSON.parse(c[0]):c[0]),f+=c[0].length,f==n.length)break;let d=n[f++];if(f==n.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+n);l=n.slice(f)}let a=s.length-1,h=s[a];if(!h)throw new RangeError("Invalid path: "+n);let u=new zee(i,o,a>0?s.slice(0,a):null);e[h]=u.sort(e[h])}}return Lee.add(e)}const Lee=new Yt;class zee{constructor(e,t,i,n){this.tags=e,this.mode=t,this.context=i,this.next=n}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function Wee(r,e){let t=Object.create(null);for(let s of r)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let o of s.tag)t[o.id]=s.class;let{scope:i,all:n=null}=e||{};return{style:s=>{let o=n;for(let l of s)for(let a of l.set){let h=t[a.id];if(h){o=o?o+" "+h:h;break}}return o},scope:i}}const ye=$o.define,dm=ye(),ea=ye(),X_=ye(ea),Z_=ye(ea),ta=ye(),pm=ye(ta),ow=ye(ta),yo=ye(),ah=ye(yo),ao=ye(),ho=ye(),R2=ye(),xc=ye(R2),gm=ye(),dt={comment:dm,lineComment:ye(dm),blockComment:ye(dm),docComment:ye(dm),name:ea,variableName:ye(ea),typeName:X_,tagName:ye(X_),propertyName:Z_,attributeName:ye(Z_),className:ye(ea),labelName:ye(ea),namespace:ye(ea),macroName:ye(ea),literal:ta,string:pm,docString:ye(pm),character:ye(pm),attributeValue:ye(pm),number:ow,integer:ye(ow),float:ye(ow),bool:ye(ta),regexp:ye(ta),escape:ye(ta),color:ye(ta),url:ye(ta),keyword:ao,self:ye(ao),null:ye(ao),atom:ye(ao),unit:ye(ao),modifier:ye(ao),operatorKeyword:ye(ao),controlKeyword:ye(ao),definitionKeyword:ye(ao),moduleKeyword:ye(ao),operator:ho,derefOperator:ye(ho),arithmeticOperator:ye(ho),logicOperator:ye(ho),bitwiseOperator:ye(ho),compareOperator:ye(ho),updateOperator:ye(ho),definitionOperator:ye(ho),typeOperator:ye(ho),controlOperator:ye(ho),punctuation:R2,separator:ye(R2),bracket:xc,angleBracket:ye(xc),squareBracket:ye(xc),paren:ye(xc),brace:ye(xc),content:yo,heading:ah,heading1:ye(ah),heading2:ye(ah),heading3:ye(ah),heading4:ye(ah),heading5:ye(ah),heading6:ye(ah),contentSeparator:ye(yo),list:ye(yo),quote:ye(yo),emphasis:ye(yo),strong:ye(yo),link:ye(yo),monospace:ye(yo),strikethrough:ye(yo),inserted:ye(),deleted:ye(),changed:ye(),invalid:ye(),meta:gm,documentMeta:ye(gm),annotation:ye(gm),processingInstruction:ye(gm),definition:$o.defineModifier(),constant:$o.defineModifier(),function:$o.defineModifier(),standard:$o.defineModifier(),local:$o.defineModifier(),special:$o.defineModifier()};Wee([{tag:dt.link,class:"tok-link"},{tag:dt.heading,class:"tok-heading"},{tag:dt.emphasis,class:"tok-emphasis"},{tag:dt.strong,class:"tok-strong"},{tag:dt.keyword,class:"tok-keyword"},{tag:dt.atom,class:"tok-atom"},{tag:dt.bool,class:"tok-bool"},{tag:dt.url,class:"tok-url"},{tag:dt.labelName,class:"tok-labelName"},{tag:dt.inserted,class:"tok-inserted"},{tag:dt.deleted,class:"tok-deleted"},{tag:dt.literal,class:"tok-literal"},{tag:dt.string,class:"tok-string"},{tag:dt.number,class:"tok-number"},{tag:[dt.regexp,dt.escape,dt.special(dt.string)],class:"tok-string2"},{tag:dt.variableName,class:"tok-variableName"},{tag:dt.local(dt.variableName),class:"tok-variableName tok-local"},{tag:dt.definition(dt.variableName),class:"tok-variableName tok-definition"},{tag:dt.special(dt.variableName),class:"tok-variableName2"},{tag:dt.definition(dt.propertyName),class:"tok-propertyName tok-definition"},{tag:dt.typeName,class:"tok-typeName"},{tag:dt.namespace,class:"tok-namespace"},{tag:dt.className,class:"tok-className"},{tag:dt.macroName,class:"tok-macroName"},{tag:dt.propertyName,class:"tok-propertyName"},{tag:dt.operator,class:"tok-operator"},{tag:dt.comment,class:"tok-comment"},{tag:dt.meta,class:"tok-meta"},{tag:dt.invalid,class:"tok-invalid"},{tag:dt.punctuation,class:"tok-punctuation"}]);var lw;const pb=new Yt;function Vee(r){return Ie.define({combine:r?e=>e.concat(r):void 0})}class Vo{constructor(e,t,i=[]){this.data=e,it.prototype.hasOwnProperty("tree")||Object.defineProperty(it.prototype,"tree",{get(){return Ud(this)}}),this.parser=t,this.extension=[Vf.of(this),it.languageData.of((n,s,o)=>n.facet(G_(n,s,o)))].concat(i)}isActiveAt(e,t,i=-1){return G_(e,t,i)==this.data}findRegions(e){let t=e.facet(Vf);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],n=(s,o)=>{if(s.prop(pb)==this.data){i.push({from:o,to:o+s.length});return}let l=s.prop(Yt.mounted);if(l){if(l.tree.prop(pb)==this.data){if(l.overlay)for(let a of l.overlay)i.push({from:a.from+o,to:a.to+o});else i.push({from:o,to:o+s.length});return}else if(l.overlay){let a=i.length;if(n(l.tree,l.overlay[0].from+o),i.length>a)return}}for(let a=0;a<s.children.length;a++){let h=s.children[a];h instanceof rr&&n(h,s.positions[a]+o)}};return n(Ud(e),0),i}get allowsNesting(){return!0}}Vo.setState=xt.define();function G_(r,e,t){let i=r.facet(Vf);if(!i)return null;let n=i.data;if(i.allowsNesting)for(let s=Ud(r).topNode;s;s=s.enter(e,t,Xn.ExcludeBuffers))n=s.type.prop(pb)||n;return n}class gb extends Vo{constructor(e,t){super(e,t),this.parser=t}static define(e){let t=Vee(e.languageData);return new gb(t,e.parser.configure({props:[pb.add(i=>i.isTop?t:void 0)]}))}configure(e){return new gb(this.data,this.parser.configure(e))}get allowsNesting(){return this.parser.hasWrappers()}}function Ud(r){let e=r.field(Vo.state,!1);return e?e.tree:rr.empty}class jee{constructor(e,t=e.length){this.doc=e,this.length=t,this.cursorPos=0,this.string="",this.cursor=e.iter()}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let Cc=null;class mb{constructor(e,t,i=[],n,s,o,l,a){this.parser=e,this.state=t,this.fragments=i,this.tree=n,this.treeLen=s,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new mb(e,t,[],rr.empty,0,i,[],null)}startParse(){return this.parser.startParse(new jee(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=rr.empty&&this.isDone(t!=null?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let n=Date.now()+e;e=()=>Date.now()>n}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let n=this.parse.advance();if(n)if(this.fragments=this.withoutTempSkipped(Qh.addTree(n,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=n,this.parse=null,this.treeLen<(t!=null?t:this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Qh.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Cc;Cc=this;try{return e()}finally{Cc=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=U_(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:n,treeLen:s,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((h,u,f,c)=>a.push({fromA:h,toA:u,fromB:f,toB:c})),i=Qh.applyChanges(i,a),n=rr.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let h of this.skipped){let u=e.mapPos(h.from,1),f=e.mapPos(h.to,-1);u<f&&l.push({from:u,to:f})}}}return new mb(this.parser,t,i,n,s,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:n,to:s}=this.skipped[i];n<e.to&&s>e.from&&(this.fragments=U_(this.fragments,n,s),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Qee{createParse(t,i,n){let s=n[0].from,o=n[n.length-1].to;return{parsedPos:s,advance(){let a=Cc;if(a){for(let h of n)a.tempSkipped.push(h);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new rr(ms.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Cc}}function U_(r,e,t){return Qh.applyChanges(r,[{fromA:e,toA:t,fromB:e,toB:t}])}class Wf{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new Wf(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=mb.create(e.facet(Vf).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new Wf(i)}}Vo.state=or.define({create:Wf.init,update(r,e){for(let t of e.effects)if(t.is(Vo.setState))return t.value;return e.startState.facet(Vf)!=e.state.facet(Vf)?Wf.init(e.state):r.apply(e)}});let dI=r=>{let e=setTimeout(()=>r(),500);return()=>clearTimeout(e)};typeof requestIdleCallback!="undefined"&&(dI=r=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(r,{timeout:500-100})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const aw=typeof navigator!="undefined"&&((lw=navigator.scheduling)===null||lw===void 0?void 0:lw.isInputPending)?()=>navigator.scheduling.isInputPending():null,Fee=fn.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Vo.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Vo.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=dI(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:n}}=this.view,s=i.field(Vo.state);if(s.tree==s.context.tree&&s.context.isDone(n+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!aw?Math.max(25,e.timeRemaining()-5):1e9),l=s.context.treeLen<n&&i.doc.length>n+1e3,a=s.context.work(()=>aw&&aw()||Date.now()>o,n+(l?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Vo.setState.of(new Wf(s.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>hs(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Vf=Ie.define({combine(r){return r.length?r[0]:null},enables:[Vo.state,Fee]});class Hee{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const qee=new Yt,Xee=new Yt,Zee=Object.create(null),Y_=[ms.none],K_=[],Gee=Object.create(null);for(let[r,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Gee[r]=Uee(Zee,e);function hw(r,e){K_.indexOf(r)>-1||(K_.push(r),console.warn(e))}function Uee(r,e){let t=null;for(let s of e.split(".")){let o=r[s]||dt[s];o?typeof o=="function"?t?t=o(t):hw(s,`Modifier ${s} used at start of tag`):t?hw(s,`Tag ${s} used as modifier`):t=o:hw(s,`Unknown highlighting tag ${s}`)}if(!t)return 0;let i=e.replace(/ /g,"_"),n=ms.define({id:Y_.length,name:i,props:[Iee({[i]:t})]});return Y_.push(n),n.id}const Ac=["_blank","_self","_top","_parent"],uw=["ascii","utf-8","utf-16","latin1","latin1"],fw=["get","post","put","delete"],cw=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],Lr=["true","false"],Ae={},Yee={a:{attrs:{href:null,ping:null,type:null,media:null,target:Ac,hreflang:null}},abbr:Ae,acronym:Ae,address:Ae,applet:Ae,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:null,hreflang:null,type:null,shape:["default","rect","circle","poly"]}},article:Ae,aside:Ae,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["autoplay"],loop:["loop"],controls:["controls"]}},b:Ae,base:{attrs:{href:null,target:Ac}},basefont:Ae,bdi:Ae,bdo:Ae,big:Ae,blockquote:{attrs:{cite:null}},body:Ae,br:Ae,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["autofocus"],disabled:["autofocus"],formenctype:cw,formmethod:fw,formnovalidate:["novalidate"],formtarget:Ac,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:Ae,center:Ae,cite:Ae,code:Ae,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["disabled"],checked:["checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["disabled"],multiple:["multiple"]}},datalist:{attrs:{data:null}},dd:Ae,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["open"]}},dfn:Ae,dir:Ae,div:Ae,dl:Ae,dt:Ae,em:Ae,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["disabled"],form:null,name:null}},figcaption:Ae,figure:Ae,font:Ae,footer:Ae,form:{attrs:{action:null,name:null,"accept-charset":uw,autocomplete:["on","off"],enctype:cw,method:fw,novalidate:["novalidate"],target:Ac}},frame:Ae,frameset:Ae,h1:Ae,h2:Ae,h3:Ae,h4:Ae,h5:Ae,h6:Ae,head:{children:["title","base","link","style","meta","script","noscript","command"]},header:Ae,hgroup:Ae,hr:Ae,html:{attrs:{manifest:null}},i:Ae,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["autofocus"],checked:["checked"],disabled:["disabled"],formenctype:cw,formmethod:fw,formnovalidate:["novalidate"],formtarget:Ac,multiple:["multiple"],readonly:["readonly"],required:["required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:Ae,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["autofocus"],disabled:["disabled"],keytype:["RSA"]}},label:{attrs:{for:null,form:null}},legend:Ae,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:null,media:null,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:Ae,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:uw,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:Ae,noframes:Ae,noscript:Ae,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["typemustmatch"]}},ol:{attrs:{reversed:["reversed"],start:null,type:["1","a","A","i","I"]},children:["li","script","template","ul","ol"]},optgroup:{attrs:{disabled:["disabled"],label:null}},option:{attrs:{disabled:["disabled"],label:null,selected:["selected"],value:null}},output:{attrs:{for:null,form:null,name:null}},p:Ae,param:{attrs:{name:null,value:null}},pre:Ae,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:Ae,rt:Ae,ruby:Ae,s:Ae,samp:Ae,script:{attrs:{type:["text/javascript"],src:null,async:["async"],defer:["defer"],charset:uw}},section:Ae,select:{attrs:{form:null,name:null,size:null,autofocus:["autofocus"],disabled:["disabled"],multiple:["multiple"]}},slot:{attrs:{name:null}},small:Ae,source:{attrs:{src:null,type:null,media:null}},span:Ae,strike:Ae,strong:Ae,style:{attrs:{type:["text/css"],media:null,scoped:null}},sub:Ae,summary:Ae,sup:Ae,table:Ae,tbody:Ae,td:{attrs:{colspan:null,rowspan:null,headers:null}},template:Ae,textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["autofocus"],disabled:["disabled"],readonly:["readonly"],required:["required"],wrap:["soft","hard"]}},tfoot:Ae,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:Ae,time:{attrs:{datetime:null}},title:Ae,tr:Ae,track:{attrs:{src:null,label:null,default:null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:null}},tt:Ae,u:Ae,ul:{children:["li","script","template","ul","ol"]},var:Ae,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["autoplay"],mediagroup:["movie"],muted:["muted"],controls:["controls"]}},wbr:Ae},Kee={accesskey:null,class:null,contenteditable:Lr,contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["ar","bn","de","en-GB","en-US","es","fr","hi","id","ja","pa","pt","ru","tr","zh"],spellcheck:Lr,autocorrect:Lr,autocapitalize:Lr,style:null,tabindex:null,title:null,translate:["yes","no"],onclick:null,rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"],role:"alert application article banner button cell checkbox complementary contentinfo dialog document feed figure form grid gridcell heading img list listbox listitem main navigation region row rowgroup search switch tab table tabpanel textbox timer".split(" "),"aria-activedescendant":null,"aria-atomic":Lr,"aria-autocomplete":["inline","list","both","none"],"aria-busy":Lr,"aria-checked":["true","false","mixed","undefined"],"aria-controls":null,"aria-describedby":null,"aria-disabled":Lr,"aria-dropeffect":null,"aria-expanded":["true","false","undefined"],"aria-flowto":null,"aria-grabbed":["true","false","undefined"],"aria-haspopup":Lr,"aria-hidden":Lr,"aria-invalid":["true","false","grammar","spelling"],"aria-label":null,"aria-labelledby":null,"aria-level":null,"aria-live":["off","polite","assertive"],"aria-multiline":Lr,"aria-multiselectable":Lr,"aria-owns":null,"aria-posinset":null,"aria-pressed":["true","false","mixed","undefined"],"aria-readonly":Lr,"aria-relevant":null,"aria-required":Lr,"aria-selected":["true","false","undefined"],"aria-setsize":null,"aria-sort":["ascending","descending","none","other"],"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null};class bb{constructor(e,t){this.tags=Object.assign(Object.assign({},Yee),e),this.globalAttrs=Object.assign(Object.assign({},Kee),t),this.allTags=Object.keys(this.tags),this.globalAttrNames=Object.keys(this.globalAttrs)}}bb.default=new bb;function jf(r,e,t=r.length){if(!e)return"";let i=e.firstChild,n=i&&i.getChild("TagName");return n?r.sliceString(n.from,Math.min(n.to,t)):""}function oO(r,e=!1){for(let t=r.parent;t;t=t.parent)if(t.name=="Element")if(e)e=!1;else return t;return null}function pI(r,e,t){let i=t.tags[jf(r,oO(e,!0))];return(i==null?void 0:i.children)||t.allTags}function $x(r,e){let t=[];for(let i=e;i=oO(i);){let n=jf(r,i);if(n&&i.lastChild.name=="CloseTag")break;n&&t.indexOf(n)<0&&(e.name=="EndTag"||e.from>=i.firstChild.to)&&t.push(n)}return t}const gI=/^[:\-\.\w\u00b7-\uffff]*$/;function J_(r,e,t,i,n){let s=/\s*>/.test(r.sliceDoc(n,n+5))?"":">";return{from:i,to:n,options:pI(r.doc,t,e).map(o=>({label:o,type:"type"})).concat($x(r.doc,t).map((o,l)=>({label:"/"+o,apply:"/"+o+s,type:"type",boost:99-l}))),validFor:/^\/?[:\-\.\w\u00b7-\uffff]*$/}}function e$(r,e,t,i){let n=/\s*>/.test(r.sliceDoc(i,i+5))?"":">";return{from:t,to:i,options:$x(r.doc,e).map((s,o)=>({label:s,apply:s+n,type:"type",boost:99-o})),validFor:gI}}function Jee(r,e,t,i){let n=[],s=0;for(let o of pI(r.doc,t,e))n.push({label:"<"+o,type:"type"});for(let o of $x(r.doc,t))n.push({label:"</"+o+">",type:"type",boost:99-s++});return{from:i,to:i,options:n,validFor:/^<\/?[:\-\.\w\u00b7-\uffff]*$/}}function ete(r,e,t,i,n){let s=oO(t),o=s?e.tags[jf(r.doc,s)]:null,l=o&&o.attrs?Object.keys(o.attrs).concat(e.globalAttrNames):e.globalAttrNames;return{from:i,to:n,options:l.map(a=>({label:a,type:"property"})),validFor:gI}}function tte(r,e,t,i,n){var s;let o=(s=t.parent)===null||s===void 0?void 0:s.getChild("AttributeName"),l=[],a;if(o){let h=r.sliceDoc(o.from,o.to),u=e.globalAttrs[h];if(!u){let f=oO(t),c=f?e.tags[jf(r.doc,f)]:null;u=(c==null?void 0:c.attrs)&&c.attrs[h]}if(u){let f=r.sliceDoc(i,n).toLowerCase(),c='"',d='"';/^['"]/.test(f)?(a=f[0]=='"'?/^[^"]*$/:/^[^']*$/,c="",d=r.sliceDoc(n,n+1)==f[0]?"":f[0],f=f.slice(1),i++):a=/^[^\s<>='"]*$/;for(let g of u)l.push({label:g,apply:c+g+d,type:"constant"})}}return{from:i,to:n,options:l,validFor:a}}function ite(r,e){let{state:t,pos:i}=e,n=Ud(t).resolveInner(i),s=n.resolve(i,-1);for(let o=i,l;n==s&&(l=s.childBefore(o));){let a=l.lastChild;if(!a||!a.type.isError||a.from<a.to)break;n=s=l,o=a.from}return s.name=="TagName"?s.parent&&/CloseTag$/.test(s.parent.name)?e$(t,s,s.from,i):J_(t,r,s,s.from,i):s.name=="StartTag"?J_(t,r,s,i,i):s.name=="StartCloseTag"||s.name=="IncompleteCloseTag"?e$(t,s,i,i):e.explicit&&(s.name=="OpenTag"||s.name=="SelfClosingTag")||s.name=="AttributeName"?ete(t,r,s,s.name=="AttributeName"?s.from:i,i):s.name=="Is"||s.name=="AttributeValue"||s.name=="UnquotedAttributeValue"?tte(t,r,s,s.name=="Is"?i:s.from,i):e.explicit&&(n.name=="Element"||n.name=="Text"||n.name=="Document")?Jee(t,r,s,i):null}function nte(r){let{extraTags:e,extraGlobalAttributes:t}=r,i=t||e?new bb(e,t):bb.default;return n=>ite(i,n)}const Q2=gb.define({parser:pY.configure({props:[qee.add({Element(r){let e=/^(\s*)(<\/)?/.exec(r.textAfter);return r.node.to<=r.pos+e[0].length?r.continue():r.lineIndent(r.node.from)+(e[2]?0:r.unit)},"OpenTag CloseTag SelfClosingTag"(r){return r.column(r.node.from)+r.unit},Document(r){if(r.pos+/\s*/.exec(r.textAfter)[0].length<r.node.to)return r.continue();let e=null,t;for(let i=r.node;;){let n=i.lastChild;if(!n||n.name!="Element"||n.to!=i.to)break;e=i=n}return e&&!((t=e.lastChild)&&(t.name=="CloseTag"||t.name=="SelfClosingTag"))?r.lineIndent(e.from)+r.unit:null}}),Xee.add({Element(r){let e=r.firstChild,t=r.lastChild;return!e||e.name!="OpenTag"?null:{from:e.to,to:t.name=="CloseTag"?t.from:r.to}}})],wrap:mY([{tag:"script",attrs(r){return!r.type||/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i.test(r.type)},parser:Ea.parser},{tag:"style",attrs(r){return(!r.lang||r.lang=="css")&&(!r.type||/^(text\/)?(x-)?(stylesheet|css)$/i.test(r.type))},parser:_2.parser}])}),languageData:{commentTokens:{block:{open:"<!--",close:"-->"}},indentOnInput:/^\s*<\/\w+\W$/,wordChars:"-._"}});function rte(r={}){let e=Q2;return r.matchClosingTags===!1&&(e=e.configure({dialect:"noMatch"})),new Hee(e,[Q2.data.of({autocomplete:nte(r)}),r.autoCloseTags!==!1?ste:[],hI().support,_K().support])}const ste=nt.inputHandler.of((r,e,t,i)=>{if(r.composing||r.state.readOnly||e!=t||i!=">"&&i!="/"||!Q2.isActiveAt(r.state,e,-1))return!1;let{state:n}=r,s=n.changeByRange(o=>{var l,a,h;let{head:u}=o,f=Ud(n).resolveInner(u,-1),c;if((f.name=="TagName"||f.name=="StartTag")&&(f=f.parent),i==">"&&f.name=="OpenTag"){if(((a=(l=f.parent)===null||l===void 0?void 0:l.lastChild)===null||a===void 0?void 0:a.name)!="CloseTag"&&(c=jf(n.doc,f.parent,u)))return{range:se.cursor(u+1),changes:{from:u,insert:`></${c}>`}}}else if(i=="/"&&f.name=="OpenTag"){let d=f.parent,g=d==null?void 0:d.parent;if(d.from==u-1&&((h=g.lastChild)===null||h===void 0?void 0:h.name)!="CloseTag"&&(c=jf(n.doc,g,u))){let w=`/${c}>`;return{range:se.cursor(u+w.length),changes:{from:u,insert:w}}}}return{range:o}});return s.changes.empty?!1:(r.dispatch(s,{userEvent:"input.type",scrollIntoView:!0}),!0)}),mI=aG({block:{open:"<!--",close:"-->"}}),bI=UG.configure({props:[cG.add(r=>{if(!(!r.is("Block")||r.is("Document")))return(e,t)=>({from:t.doc.lineAt(e.from).to,to:e.to})}),fG.add({Document:()=>null}),y1.add({Document:mI})]});function Mx(r){return new Io(mI,r)}const ote=Mx(bI),lte=bI.configure([rU,oU,sU,lU]),OI=Mx(lte);function ate(r,e){return t=>{if(t&&r){let i=null;if(typeof r=="function"?i=r(t):i=v1.matchLanguageName(r,t,!0),i instanceof v1)return i.support?i.support.language.parser:jd.getSkippingParser(i.load());if(i)return i.parser}return e?e.parser:null}}function t$(r,e){return e.sliceString(r.from,r.from+50)}class dw{constructor(e,t,i,n,s,o,l){this.node=e,this.from=t,this.to=i,this.spaceBefore=n,this.spaceAfter=s,this.type=o,this.item=l}blank(e=!0){let t=this.spaceBefore;if(this.node.name=="Blockquote")t+=">";else for(let i=this.to-this.from-t.length-this.spaceAfter.length;i>0;i--)t+=" ";return t+(e?this.spaceAfter:"")}marker(e,t){let i=this.node.name=="OrderedList"?String(+wI(this.item,e)[2]+t):"";return this.spaceBefore+i+this.type+this.spaceAfter}}function kI(r,e,t){let i=[];for(let o=r;o&&o.name!="Document";o=o.parent)(o.name=="ListItem"||o.name=="Blockquote")&&i.push(o);let n=[],s=0;for(let o=i.length-1;o>=0;o--){let l=i[o],a,h=s;if(l.name=="Blockquote"&&(a=/^[ \t]*>( ?)/.exec(e.slice(s))))s+=a[0].length,n.push(new dw(l,h,s,"",a[1],">",null));else if(l.name=="ListItem"&&l.parent.name=="OrderedList"&&(a=/^([ \t]*)\d+([.)])([ \t]*)/.exec(t$(l,t)))){let u=a[3],f=a[0].length;u.length>=4&&(u=u.slice(0,u.length-4),f-=4),s+=f,n.push(new dw(l.parent,h,s,a[1],u,a[2],l))}else if(l.name=="ListItem"&&l.parent.name=="BulletList"&&(a=/^([ \t]*)([-+*])([ \t]{1,4}\[[ xX]\])?([ \t]+)/.exec(t$(l,t)))){let u=a[4],f=a[0].length;u.length>4&&(u=u.slice(0,u.length-4),f-=4);let c=a[2];a[3]&&(c+=a[3].replace(/[xX]/," ")),s+=f,n.push(new dw(l.parent,h,s,a[1],u,c,l))}}return n}function wI(r,e){return/^(\s*)(\d+)(?=[.)])/.exec(e.sliceString(r.from,r.from+10))}function pw(r,e,t,i=0){for(let n=-1,s=r;;){if(s.name=="ListItem"){let l=wI(s,e),a=+l[2];if(n>=0){if(a!=n+1)return;t.push({from:s.from+l[1].length,to:s.from+l[0].length,insert:String(n+2+i)})}n=a}let o=s.nextSibling;if(!o)break;s=o}}const hte=({state:r,dispatch:e})=>{let t=Vd(r),{doc:i}=r,n=null,s=r.changeByRange(o=>{if(!o.empty||!OI.isActiveAt(r,o.from))return n={range:o};let l=o.from,a=i.lineAt(l),h=kI(t.resolveInner(l,-1),a.text,i);for(;h.length&&h[h.length-1].from>l-a.from;)h.pop();if(!h.length)return n={range:o};let u=h[h.length-1];if(u.to-u.spaceAfter.length>l-a.from)return n={range:o};let f=l>=u.to-u.spaceAfter.length&&!/\S/.test(a.text.slice(u.to));if(u.item&&f)if(u.node.firstChild.to>=l||a.from>0&&!/[^\s>]/.test(i.lineAt(a.from-1).text)){let S=h.length>1?h[h.length-2]:null,x,Q="";S&&S.item?(x=a.from+S.from,Q=S.marker(i,1)):x=a.from+(S?S.to:0);let M=[{from:x,to:l,insert:Q}];return u.node.name=="OrderedList"&&pw(u.item,i,M,-2),S&&S.node.name=="OrderedList"&&pw(S.item,i,M),{range:se.cursor(x+Q.length),changes:M}}else{let S="";for(let x=0,Q=h.length-2;x<=Q;x++)S+=h[x].blank(x<Q);return S+=r.lineBreak,{range:se.cursor(l+S.length),changes:{from:a.from,insert:S}}}if(u.node.name=="Blockquote"&&f&&a.from){let S=i.lineAt(a.from-1),x=/>\s*$/.exec(S.text);if(x&&x.index==u.from){let Q=r.changes([{from:S.from+x.index,to:S.to},{from:a.from+u.from,to:a.to}]);return{range:o.map(Q),changes:Q}}}let c=[];u.node.name=="OrderedList"&&pw(u.item,i,c);let d=r.lineBreak,g=u.item&&u.item.from<a.from;if(!g||/^[\s\d.)\-+*>]*/.exec(a.text)[0].length>=u.to)for(let S=0,x=h.length-1;S<=x;S++)d+=S==x&&!g?h[S].marker(i,1):h[S].blank();let w=l;for(;w>a.from&&/\s/.test(a.text.charAt(w-a.from-1));)w--;return c.push({from:w,to:l,insert:d}),{range:se.cursor(w+d.length),changes:c}});return n?!1:(e(r.update(s,{scrollIntoView:!0,userEvent:"input"})),!0)};function i$(r){return r.name=="QuoteMark"||r.name=="ListMark"}function ute(r,e){let t=r.resolveInner(e,-1),i=e;i$(t)&&(i=t.from,t=t.parent);for(let n;n=t.childBefore(i);)if(i$(n))i=n.from;else if(n.name=="OrderedList"||n.name=="BulletList")t=n.lastChild,i=t.to;else break;return t}const fte=({state:r,dispatch:e})=>{let t=Vd(r),i=null,n=r.changeByRange(s=>{let o=s.from,{doc:l}=r;if(s.empty&&OI.isActiveAt(r,s.from)){let a=l.lineAt(o),h=kI(ute(t,o),a.text,l);if(h.length){let u=h[h.length-1],f=u.to-u.spaceAfter.length+(u.spaceAfter?1:0);if(o-a.from>f&&!/\S/.test(a.text.slice(f,o-a.from)))return{range:se.cursor(a.from+f),changes:{from:a.from+f,to:o}};if(o-a.from==f){let c=a.from+u.from;if(u.item&&u.node.from<u.item.from&&/\S/.test(a.text.slice(u.from,u.to)))return{range:s,changes:{from:c,to:a.from+u.to,insert:u.blank()}};if(c<o)return{range:se.cursor(c),changes:{from:c,to:o}}}}}return i={range:s}});return i?!1:(e(r.update(n,{scrollIntoView:!0,userEvent:"delete"})),!0)},cte=[{key:"Enter",run:hte},{key:"Backspace",run:fte}],n$=rte({matchClosingTags:!1});function r$(r={}){let{codeLanguages:e,defaultCodeLanguage:t,addKeymap:i=!0,base:{parser:n}=ote}=r;if(!(n instanceof sO))throw new RangeError("Base parser provided to `markdown` should be a Markdown parser");let s=r.extensions?[r.extensions]:[],o=[n$.support],l;t instanceof r8?(o.push(t.support),l=t.language):t&&(l=t);let a=e||l?ate(e,l):void 0;return s.push(KG({codeParser:a,htmlParser:n$.language.parser})),i&&o.push(Ff.high(Tb.of(cte))),new r8(Mx(n.configure(s)),o)}const ku=[];function lr(r,e=lt){let t;const i=new Set;function n(l){if(ki(r,l)&&(r=l,t)){const a=!ku.length;for(const h of i)h[1](),ku.push(h,r);if(a){for(let h=0;h<ku.length;h+=2)ku[h][0](ku[h+1]);ku.length=0}}}function s(l){n(l(r))}function o(l,a=lt){const h=[l,a];return i.add(h),i.size===1&&(t=e(n)||lt),l(r),()=>{i.delete(h),i.size===0&&(t(),t=null)}}return{set:n,update:s,subscribe:o}}let dte={name:"Default",font:"Fira Code, Menlo",fontSize:"16pt",textAreaColor:"#454158",backgroundColor:"#22212C",textColor:"#80ffea",borderColor:"#1B1A23",Cyan:"#80FFEA",Green:"#8AFF80",Orange:"#FFCA80",Pink:"#FF80BF",Purple:"#9580FF",Red:"#FF9580",Yellow:"#FFFF80",functionColor:"#9580FF",stringColor:"#8AFF80",constantColor:"#FFCA80",keywordColor:"#FFFF80",highlightBackgroundColor:"#4f4f5f",selectionColor:"#22212C",buttons:[{color:"#80FFEA",id:0},{color:"#8AFF80",id:1},{color:"#FFCA80",id:2},{color:"#FF80BF",id:3},{color:"#9580FF",id:4},{color:"#FF9580",id:5},{color:"blue",id:6},{color:"green",id:7},{color:"red",id:8},{color:"purple",id:9}]};const et=lr(dte);function pte(r){let e,t;return{c(){e=B("div"),P(e,"name","editor"),P(e,"id","CMeditor"),P(e,"style",t="height: "+r[0]+"; width: "+r[1]+"; "+r[2]),P(e,"class","svelte-1p9zuvj")},m(i,n){K(i,e,n),r[6](e)},p(i,[n]){n&7&&t!==(t="height: "+i[0]+"; width: "+i[1]+"; "+i[2])&&P(e,"style",t)},i:lt,o:lt,d(i){i&&Y(e),r[6](null)}}}function gte(r,e,t){let i;Re(r,et,_=>t(11,i=_));const n=Xa();let{height:s=0}=e,{width:o=0}=e,{styling:l=""}=e,{config:a={}}=e,{initFinished:h=!1}=e,u=null,f=null,c=null,d=null,g=null;const w=bi.theme({"&":{color:i.textColor,backgroundColor:i.textAreaColor,height:s,minHeight:s},".cm-content":{caretColor:i.Cyan,minHeight:s},"&.cm-focused .cm-cursor":{borderLeftColor:i.Cyan},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, ::selection":{backgroundColor:i.selectionColor},".cm-panels":{backgroundColor:i.backgroundColor,color:i.textColor},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:i.highlightBackgroundColor},".cm-selectionMatch":{backgroundColor:"#aafe661a"},".cm-matchingBracket, .cm-nonmatchingBracket":{backgroundColor:"#bad0f847",outline:"1px solid #515a6b"},".cm-gutter":{minHeight:s},".cm-gutters":{backgroundColor:i.backgroundColor,color:i.green,border:"none"},".cm-activeLineGutter":{backgroundColor:i.highlightBackgroundColor},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"1px solid #181a1f",backgroundColor:i.backgroundColor},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:i.highlightBackgroundColor,color:i.textColor}}},{dark:!0});function S(_,W){n(_,{data:W})}function x(_){h&&Q(_)}function Q(_){u!==null&&t(3,u.innerHTML="",u);const W=[$6(),$X(),O6(),x6(),it.allowMultipleSelections.of(!0),W7(),nV(oV,{fallback:!0}),dV(),_F(),zF(),W6(),F6(),FC(),TZ(),Tb.of([...QF,...vZ,...FZ,...LX,...Y7,...ZD,...Nq]),w,bi.updateListener.of(L=>{L.docChanged&&S("textChange",{value:T(),cursor:y()})})];switch(a.lineNumbers&&(W.push(ez()),W.push(tV()),W.push(Y6())),a.language){case"markdown":W.push(r$());break;case"javascript":W.push(hI());break;default:W.push(r$());break}a.lineWrapping&&W.push(bi.lineWrapping),a.lineHighlight&&W.push(FC()),f=it.create({doc:_,extensions:W}),c=new bi({state:f,parent:u})}Sr(()=>(Q(""),d={getSelection:m,getValue:T,replaceSelection:k,somethingSelected:C,setCursor:v,getCursor:y,setValue:x,getLine:b,focus:E,getEdView:$,getEdState:R,isFocused:p,insertAtCursor:M},S("editorChange",d),E(),()=>{f=null,c=null,d=null}));function M(_){if(typeof c!="undefined"){let W=y(),L=c.state.update({changes:[{from:W,insert:_}]});c.dispatch(L)}}function p(){return typeof c!="undefined"?c.hasFocus:!1}function b(_){return typeof c!="undefined"?c.docView.domAtPos(_).node.textContent:""}function m(){if(typeof c!="undefined")return c.state.sliceDoc(c.state.selection.main.from,c.state.selection.main.to)}function k(_){if(typeof c!="undefined"){let W=c.state.selection.main.from,L=c.state.update({changes:[{from:c.state.selection.main.from,to:c.state.selection.main.to},{from:W,insert:_}]});c.dispatch(L)}}function C(){if(typeof c!="undefined")return c.state.selection.ranges.some(_=>!_.empty)}function v(_){typeof c!="undefined"&&(g=_,c.dispatch({selection:{anchor:g}}))}function y(){return typeof c!="undefined"?(g=c.state.selection.main.head,g):0}function T(){if(typeof c!="undefined")return c.state.doc.toString()}function E(){typeof c!="undefined"&&c.focus()}function $(){return c}function R(){return f}function N(_){sr[_?"unshift":"push"](()=>{u=_,t(3,u)})}return r.$$set=_=>{"height"in _&&t(0,s=_.height),"width"in _&&t(1,o=_.width),"styling"in _&&t(2,l=_.styling),"config"in _&&t(4,a=_.config),"initFinished"in _&&t(5,h=_.initFinished)},[s,o,l,u,a,h,N]}class lO extends _i{constructor(e){super(),Pi(this,e,gte,pte,ki,{height:0,width:1,styling:2,config:4,initFinished:5})}}function s$(r,e,t){const i=r.slice();return i[17]=e[t],i}function o$(r){let e,t,i=r[17].name+"",n,s,o,l=r[17].email+"",a,h,u,f,c,d,g,w;function S(){return r[11](r[17])}function x(){return r[12](r[17])}return{c(){e=B("tr"),t=B("td"),n=ne(i),s=F(),o=B("td"),a=ne(l),h=F(),u=B("td"),u.textContent="\u{1F58B}",f=F(),c=B("td"),c.textContent="\u274C",d=F(),P(u,"class","iconClick svelte-1c11hkb"),P(c,"class","iconClick svelte-1c11hkb")},m(Q,M){K(Q,e,M),A(e,t),A(t,n),A(e,s),A(e,o),A(o,a),A(e,h),A(e,u),A(e,f),A(e,c),A(e,d),g||(w=[U(u,"click",S),U(c,"click",x)],g=!0)},p(Q,M){r=Q,M&1&&i!==(i=r[17].name+"")&&tt(n,i),M&1&&l!==(l=r[17].email+"")&&tt(a,l)},d(Q){Q&&Y(e),g=!1,yt(w)}}}function l$(r){let e,t,i,n,s,o,l,a,h,u,f,c,d,g,w,S,x,Q,M;return{c(){e=B("div"),t=B("div"),i=B("label"),i.textContent="Name:",n=F(),s=B("input"),o=F(),l=B("div"),a=B("label"),a.textContent="Email:",h=F(),u=B("input"),f=F(),c=B("div"),d=B("button"),g=ne("Save"),w=F(),S=B("button"),x=ne("Close"),P(i,"for","aename"),P(s,"type","text"),P(s,"id","aename"),O(s,"background-color",r[4].textAreaColor),O(s,"color",r[4].textColor),O(s,"border-color",r[4].borderColor),P(s,"class","svelte-1c11hkb"),P(t,"id","addeditrow"),P(t,"class","svelte-1c11hkb"),P(a,"for","aeemail"),P(u,"type","text"),P(u,"id","aeemail"),O(u,"background-color",r[4].textAreaColor),O(u,"color",r[4].textColor),O(u,"border-color",r[4].borderColor),P(u,"class","svelte-1c11hkb"),P(l,"id","addeditrow"),P(l,"class","svelte-1c11hkb"),O(d,"background-color",r[4].textAreaColor),O(d,"color",r[4].textColor),O(d,"border-color",r[4].borderColor),P(d,"class","svelte-1c11hkb"),O(S,"background-color",r[4].textAreaColor),O(S,"color",r[4].textColor),O(S,"border-color",r[4].borderColor),P(S,"class","svelte-1c11hkb"),P(c,"id","buttonrow"),P(c,"class","svelte-1c11hkb"),P(e,"id","addeditdiv"),O(e,"background-color",r[4].backgroundColor),O(e,"font-family",r[4].font),O(e,"color",r[4].textColor),O(e,"font-size",r[4].fontSize),O(e,"border-color",r[4].textAreaColor),P(e,"class","svelte-1c11hkb")},m(p,b){K(p,e,b),A(e,t),A(t,i),A(t,n),A(t,s),Xe(s,r[2]),A(e,o),A(e,l),A(l,a),A(l,h),A(l,u),Xe(u,r[3]),A(e,f),A(e,c),A(c,d),A(d,g),A(c,w),A(c,S),A(S,x),Q||(M=[U(s,"input",r[13]),U(u,"input",r[14]),U(d,"click",r[7]),U(S,"click",r[15])],Q=!0)},p(p,b){b&16&&O(s,"background-color",p[4].textAreaColor),b&16&&O(s,"color",p[4].textColor),b&16&&O(s,"border-color",p[4].borderColor),b&4&&s.value!==p[2]&&Xe(s,p[2]),b&16&&O(u,"background-color",p[4].textAreaColor),b&16&&O(u,"color",p[4].textColor),b&16&&O(u,"border-color",p[4].borderColor),b&8&&u.value!==p[3]&&Xe(u,p[3]),b&16&&O(d,"background-color",p[4].textAreaColor),b&16&&O(d,"color",p[4].textColor),b&16&&O(d,"border-color",p[4].borderColor),b&16&&O(S,"background-color",p[4].textAreaColor),b&16&&O(S,"color",p[4].textColor),b&16&&O(S,"border-color",p[4].borderColor),b&16&&O(e,"background-color",p[4].backgroundColor),b&16&&O(e,"font-family",p[4].font),b&16&&O(e,"color",p[4].textColor),b&16&&O(e,"font-size",p[4].fontSize),b&16&&O(e,"border-color",p[4].textAreaColor)},d(p){p&&Y(e),Q=!1,yt(M)}}}function mte(r){let e,t,i,n,s,o,l,a,h,u,f,c,d,g,w,S,x,Q=r[0],M=[];for(let b=0;b<Q.length;b+=1)M[b]=o$(s$(r,Q,b));let p=r[1]&&l$(r);return{c(){e=B("div"),t=B("div"),i=B("table"),n=B("thead"),n.innerHTML="<th>Name</th>  <th>Address</th>  <th></th>  <th></th>",s=F(),o=B("tbody");for(let b=0;b<M.length;b+=1)M[b].c();l=F(),a=B("div"),h=B("button"),u=ne("New"),f=F(),c=B("button"),d=ne("Close"),g=F(),p&&p.c(),w=bn(),P(t,"id","tablediv"),P(t,"class","svelte-1c11hkb"),O(h,"background-color",r[4].textAreaColor),O(h,"color",r[4].textColor),O(h,"border-color",r[4].borderColor),P(h,"class","svelte-1c11hkb"),O(c,"background-color",r[4].textAreaColor),O(c,"color",r[4].textColor),O(c,"border-color",r[4].borderColor),P(c,"class","svelte-1c11hkb"),P(a,"id","buttonrow"),P(a,"class","svelte-1c11hkb"),P(e,"id","addressBook"),O(e,"background-color",r[4].backgroundColor),O(e,"font-family",r[4].font),O(e,"color",r[4].textColor),O(e,"font-size",r[4].fontSize),O(e,"border-color",r[4].borderColor),P(e,"class","svelte-1c11hkb")},m(b,m){K(b,e,m),A(e,t),A(t,i),A(i,n),A(i,s),A(i,o);for(let k=0;k<M.length;k+=1)M[k].m(o,null);A(e,l),A(e,a),A(a,h),A(h,u),A(a,f),A(a,c),A(c,d),K(b,g,m),p&&p.m(b,m),K(b,w,m),S||(x=[U(h,"click",r[5]),U(c,"click",r[6])],S=!0)},p(b,[m]){if(m&769){Q=b[0];let k;for(k=0;k<Q.length;k+=1){const C=s$(b,Q,k);M[k]?M[k].p(C,m):(M[k]=o$(C),M[k].c(),M[k].m(o,null))}for(;k<M.length;k+=1)M[k].d(1);M.length=Q.length}m&16&&O(h,"background-color",b[4].textAreaColor),m&16&&O(h,"color",b[4].textColor),m&16&&O(h,"border-color",b[4].borderColor),m&16&&O(c,"background-color",b[4].textAreaColor),m&16&&O(c,"color",b[4].textColor),m&16&&O(c,"border-color",b[4].borderColor),m&16&&O(e,"background-color",b[4].backgroundColor),m&16&&O(e,"font-family",b[4].font),m&16&&O(e,"color",b[4].textColor),m&16&&O(e,"font-size",b[4].fontSize),m&16&&O(e,"border-color",b[4].borderColor),b[1]?p?p.p(b,m):(p=l$(b),p.c(),p.m(w.parentNode,w)):p&&(p.d(1),p=null)},i:lt,o:lt,d(b){b&&Y(e),In(M,b),b&&Y(g),p&&p.d(b),b&&Y(w),S=!1,yt(x)}}}function bte(r,e,t){let i;Re(r,et,p=>t(4,i=p));let{show:n}=e,s=[],o=!1,l="",a="";Sr(()=>{h()});function h(p){fetch("http://localhost:9978/api/emailit/emails",{method:"GET",headers:{"Content-type":"application/json"}}).then(b=>b.json()).then(b=>{t(0,s=b.emails),typeof p!="undefined"&&p()})}function u(){t(1,o=!0),t(2,l=""),t(3,a="")}function f(){t(10,n=!1)}function c(){t(3,a=a.trim()),t(2,l=l.trim()),t(0,s=s.filter(p=>p.email!==a)),s.push({name:l,email:a}),t(0,s),fetch("http://localhost:9978/api/emailit/addEmail",{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify({name:l,email:a})}),t(1,o=!1)}function d(p){console.log(p),t(2,l=p.name),t(3,a=p.email)}function g(p){p.email=p.email.trim(),t(0,s=s.filter(b=>b.email!==p.email)),fetch("http://localhost:9978/api/emailit/addEmail",{method:"DELETE",headers:{"Content-type":"application/json"},body:{name:"",email:p.email}})}const w=p=>{d(p)},S=p=>{g(p)};function x(){l=this.value,t(2,l)}function Q(){a=this.value,t(3,a)}const M=()=>{t(1,o=!1)};return r.$$set=p=>{"show"in p&&t(10,n=p.show)},[s,o,l,a,i,u,f,c,d,g,n,w,S,x,Q,M]}class Ote extends _i{constructor(e){super(),Pi(this,e,bte,mte,ki,{show:10})}}var kte=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},yI={exports:{}};(function(r){(function(){function e(p){var b={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:`Remove only spaces, ' and " from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids`,type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,describe:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,describe:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,describe:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,describe:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,describe:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",describe:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,describe:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,describe:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,describe:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"},emoji:{defaultValue:!1,describe:"Enable emoji support. Ex: `this is a :smile: emoji`",type:"boolean"},underline:{defaultValue:!1,describe:"Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",type:"boolean"},ellipsis:{defaultValue:!0,describe:"Replaces three dots with the ellipsis unicode character",type:"boolean"},completeHTMLDocument:{defaultValue:!1,describe:"Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",type:"boolean"},metadata:{defaultValue:!1,describe:"Enable support for document metadata (defined at the top of the document between `\xAB\xAB\xAB` and `\xBB\xBB\xBB` or between `---` and `---`).",type:"boolean"},splitAdjacentBlockquotes:{defaultValue:!1,describe:"Split adjacent blockquote blocks",type:"boolean"}};if(p===!1)return JSON.parse(JSON.stringify(b));var m={};for(var k in b)b.hasOwnProperty(k)&&(m[k]=b[k].defaultValue);return m}function t(){var p=e(!0),b={};for(var m in p)p.hasOwnProperty(m)&&(b[m]=!0);return b}var i={},n={},s={},o=e(!0),l="vanilla",a={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0,emoji:!0,splitAdjacentBlockquotes:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:e(!0),allOn:t()};i.helper={},i.extensions={},i.setOption=function(p,b){return o[p]=b,this},i.getOption=function(p){return o[p]},i.getOptions=function(){return o},i.resetOptions=function(){o=e(!0)},i.setFlavor=function(p){if(!a.hasOwnProperty(p))throw Error(p+" flavor was not found");i.resetOptions();var b=a[p];l=p;for(var m in b)b.hasOwnProperty(m)&&(o[m]=b[m])},i.getFlavor=function(){return l},i.getFlavorOptions=function(p){if(a.hasOwnProperty(p))return a[p]},i.getDefaultOptions=function(p){return e(p)},i.subParser=function(p,b){if(i.helper.isString(p))if(typeof b!="undefined")n[p]=b;else{if(n.hasOwnProperty(p))return n[p];throw Error("SubParser named "+p+" not registered!")}},i.extension=function(p,b){if(!i.helper.isString(p))throw Error("Extension 'name' must be a string");if(p=i.helper.stdExtName(p),i.helper.isUndefined(b)){if(!s.hasOwnProperty(p))throw Error("Extension named "+p+" is not registered!");return s[p]}else{typeof b=="function"&&(b=b()),i.helper.isArray(b)||(b=[b]);var m=h(b,p);if(m.valid)s[p]=b;else throw Error(m.error)}},i.getAllExtensions=function(){return s},i.removeExtension=function(p){delete s[p]},i.resetExtensions=function(){s={}};function h(p,b){var m=b?"Error in "+b+" extension->":"Error in unnamed extension",k={valid:!0,error:""};i.helper.isArray(p)||(p=[p]);for(var C=0;C<p.length;++C){var v=m+" sub-extension "+C+": ",y=p[C];if(typeof y!="object")return k.valid=!1,k.error=v+"must be an object, but "+typeof y+" given",k;if(!i.helper.isString(y.type))return k.valid=!1,k.error=v+'property "type" must be a string, but '+typeof y.type+" given",k;var T=y.type=y.type.toLowerCase();if(T==="language"&&(T=y.type="lang"),T==="html"&&(T=y.type="output"),T!=="lang"&&T!=="output"&&T!=="listener")return k.valid=!1,k.error=v+"type "+T+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',k;if(T==="listener"){if(i.helper.isUndefined(y.listeners))return k.valid=!1,k.error=v+'. Extensions of type "listener" must have a property called "listeners"',k}else if(i.helper.isUndefined(y.filter)&&i.helper.isUndefined(y.regex))return k.valid=!1,k.error=v+T+' extensions must define either a "regex" property or a "filter" method',k;if(y.listeners){if(typeof y.listeners!="object")return k.valid=!1,k.error=v+'"listeners" property must be an object but '+typeof y.listeners+" given",k;for(var E in y.listeners)if(y.listeners.hasOwnProperty(E)&&typeof y.listeners[E]!="function")return k.valid=!1,k.error=v+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+E+" must be a function but "+typeof y.listeners[E]+" given",k}if(y.filter){if(typeof y.filter!="function")return k.valid=!1,k.error=v+'"filter" must be a function, but '+typeof y.filter+" given",k}else if(y.regex){if(i.helper.isString(y.regex)&&(y.regex=new RegExp(y.regex,"g")),!(y.regex instanceof RegExp))return k.valid=!1,k.error=v+'"regex" property must either be a string or a RegExp object, but '+typeof y.regex+" given",k;if(i.helper.isUndefined(y.replace))return k.valid=!1,k.error=v+'"regex" extensions must implement a replace string or function',k}}return k}i.validateExtension=function(p){var b=h(p,null);return b.valid?!0:(console.warn(b.error),!1)},i.hasOwnProperty("helper")||(i.helper={}),i.helper.isString=function(p){return typeof p=="string"||p instanceof String},i.helper.isFunction=function(p){var b={};return p&&b.toString.call(p)==="[object Function]"},i.helper.isArray=function(p){return Array.isArray(p)},i.helper.isUndefined=function(p){return typeof p=="undefined"},i.helper.forEach=function(p,b){if(i.helper.isUndefined(p))throw new Error("obj param is required");if(i.helper.isUndefined(b))throw new Error("callback param is required");if(!i.helper.isFunction(b))throw new Error("callback param must be a function/closure");if(typeof p.forEach=="function")p.forEach(b);else if(i.helper.isArray(p))for(var m=0;m<p.length;m++)b(p[m],m,p);else if(typeof p=="object")for(var k in p)p.hasOwnProperty(k)&&b(p[k],k,p);else throw new Error("obj does not seem to be an array or an iterable object")},i.helper.stdExtName=function(p){return p.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()};function u(p,b){var m=b.charCodeAt(0);return"\xA8E"+m+"E"}i.helper.escapeCharactersCallback=u,i.helper.escapeCharacters=function(p,b,m){var k="(["+b.replace(/([\[\]\\])/g,"\\$1")+"])";m&&(k="\\\\"+k);var C=new RegExp(k,"g");return p=p.replace(C,u),p},i.helper.unescapeHTMLEntities=function(p){return p.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};var f=function(p,b,m,k){var C=k||"",v=C.indexOf("g")>-1,y=new RegExp(b+"|"+m,"g"+C.replace(/g/g,"")),T=new RegExp(b,C.replace(/g/g,"")),E=[],$,R,N,_,W;do for($=0;N=y.exec(p);)if(T.test(N[0]))$++||(R=y.lastIndex,_=R-N[0].length);else if($&&!--$){W=N.index+N[0].length;var L={left:{start:_,end:R},match:{start:R,end:N.index},right:{start:N.index,end:W},wholeMatch:{start:_,end:W}};if(E.push(L),!v)return E}while($&&(y.lastIndex=R));return E};i.helper.matchRecursiveRegExp=function(p,b,m,k){for(var C=f(p,b,m,k),v=[],y=0;y<C.length;++y)v.push([p.slice(C[y].wholeMatch.start,C[y].wholeMatch.end),p.slice(C[y].match.start,C[y].match.end),p.slice(C[y].left.start,C[y].left.end),p.slice(C[y].right.start,C[y].right.end)]);return v},i.helper.replaceRecursiveRegExp=function(p,b,m,k,C){if(!i.helper.isFunction(b)){var v=b;b=function(){return v}}var y=f(p,m,k,C),T=p,E=y.length;if(E>0){var $=[];y[0].wholeMatch.start!==0&&$.push(p.slice(0,y[0].wholeMatch.start));for(var R=0;R<E;++R)$.push(b(p.slice(y[R].wholeMatch.start,y[R].wholeMatch.end),p.slice(y[R].match.start,y[R].match.end),p.slice(y[R].left.start,y[R].left.end),p.slice(y[R].right.start,y[R].right.end))),R<E-1&&$.push(p.slice(y[R].wholeMatch.end,y[R+1].wholeMatch.start));y[E-1].wholeMatch.end<p.length&&$.push(p.slice(y[E-1].wholeMatch.end)),T=$.join("")}return T},i.helper.regexIndexOf=function(p,b,m){if(!i.helper.isString(p))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(!(b instanceof RegExp))throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var k=p.substring(m||0).search(b);return k>=0?k+(m||0):k},i.helper.splitAtIndex=function(p,b){if(!i.helper.isString(p))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[p.substring(0,b),p.substring(b)]},i.helper.encodeEmailAddress=function(p){var b=[function(m){return"&#"+m.charCodeAt(0)+";"},function(m){return"&#x"+m.charCodeAt(0).toString(16)+";"},function(m){return m}];return p=p.replace(/./g,function(m){if(m==="@")m=b[Math.floor(Math.random()*2)](m);else{var k=Math.random();m=k>.9?b[2](m):k>.45?b[1](m):b[0](m)}return m}),p},i.helper.padEnd=function(b,m,k){return m=m>>0,k=String(k||" "),b.length>m?String(b):(m=m-b.length,m>k.length&&(k+=k.repeat(m/k.length)),String(b)+k.slice(0,m))},typeof console=="undefined"&&(console={warn:function(p){alert(p)},log:function(p){alert(p)},error:function(p){throw p}}),i.helper.regexes={asteriskDashAndColon:/([*_:~])/g},i.helper.emojis={"+1":"\u{1F44D}","-1":"\u{1F44E}",100:"\u{1F4AF}",1234:"\u{1F522}","1st_place_medal":"\u{1F947}","2nd_place_medal":"\u{1F948}","3rd_place_medal":"\u{1F949}","8ball":"\u{1F3B1}",a:"\u{1F170}\uFE0F",ab:"\u{1F18E}",abc:"\u{1F524}",abcd:"\u{1F521}",accept:"\u{1F251}",aerial_tramway:"\u{1F6A1}",airplane:"\u2708\uFE0F",alarm_clock:"\u23F0",alembic:"\u2697\uFE0F",alien:"\u{1F47D}",ambulance:"\u{1F691}",amphora:"\u{1F3FA}",anchor:"\u2693\uFE0F",angel:"\u{1F47C}",anger:"\u{1F4A2}",angry:"\u{1F620}",anguished:"\u{1F627}",ant:"\u{1F41C}",apple:"\u{1F34E}",aquarius:"\u2652\uFE0F",aries:"\u2648\uFE0F",arrow_backward:"\u25C0\uFE0F",arrow_double_down:"\u23EC",arrow_double_up:"\u23EB",arrow_down:"\u2B07\uFE0F",arrow_down_small:"\u{1F53D}",arrow_forward:"\u25B6\uFE0F",arrow_heading_down:"\u2935\uFE0F",arrow_heading_up:"\u2934\uFE0F",arrow_left:"\u2B05\uFE0F",arrow_lower_left:"\u2199\uFE0F",arrow_lower_right:"\u2198\uFE0F",arrow_right:"\u27A1\uFE0F",arrow_right_hook:"\u21AA\uFE0F",arrow_up:"\u2B06\uFE0F",arrow_up_down:"\u2195\uFE0F",arrow_up_small:"\u{1F53C}",arrow_upper_left:"\u2196\uFE0F",arrow_upper_right:"\u2197\uFE0F",arrows_clockwise:"\u{1F503}",arrows_counterclockwise:"\u{1F504}",art:"\u{1F3A8}",articulated_lorry:"\u{1F69B}",artificial_satellite:"\u{1F6F0}",astonished:"\u{1F632}",athletic_shoe:"\u{1F45F}",atm:"\u{1F3E7}",atom_symbol:"\u269B\uFE0F",avocado:"\u{1F951}",b:"\u{1F171}\uFE0F",baby:"\u{1F476}",baby_bottle:"\u{1F37C}",baby_chick:"\u{1F424}",baby_symbol:"\u{1F6BC}",back:"\u{1F519}",bacon:"\u{1F953}",badminton:"\u{1F3F8}",baggage_claim:"\u{1F6C4}",baguette_bread:"\u{1F956}",balance_scale:"\u2696\uFE0F",balloon:"\u{1F388}",ballot_box:"\u{1F5F3}",ballot_box_with_check:"\u2611\uFE0F",bamboo:"\u{1F38D}",banana:"\u{1F34C}",bangbang:"\u203C\uFE0F",bank:"\u{1F3E6}",bar_chart:"\u{1F4CA}",barber:"\u{1F488}",baseball:"\u26BE\uFE0F",basketball:"\u{1F3C0}",basketball_man:"\u26F9\uFE0F",basketball_woman:"\u26F9\uFE0F&zwj;\u2640\uFE0F",bat:"\u{1F987}",bath:"\u{1F6C0}",bathtub:"\u{1F6C1}",battery:"\u{1F50B}",beach_umbrella:"\u{1F3D6}",bear:"\u{1F43B}",bed:"\u{1F6CF}",bee:"\u{1F41D}",beer:"\u{1F37A}",beers:"\u{1F37B}",beetle:"\u{1F41E}",beginner:"\u{1F530}",bell:"\u{1F514}",bellhop_bell:"\u{1F6CE}",bento:"\u{1F371}",biking_man:"\u{1F6B4}",bike:"\u{1F6B2}",biking_woman:"\u{1F6B4}&zwj;\u2640\uFE0F",bikini:"\u{1F459}",biohazard:"\u2623\uFE0F",bird:"\u{1F426}",birthday:"\u{1F382}",black_circle:"\u26AB\uFE0F",black_flag:"\u{1F3F4}",black_heart:"\u{1F5A4}",black_joker:"\u{1F0CF}",black_large_square:"\u2B1B\uFE0F",black_medium_small_square:"\u25FE\uFE0F",black_medium_square:"\u25FC\uFE0F",black_nib:"\u2712\uFE0F",black_small_square:"\u25AA\uFE0F",black_square_button:"\u{1F532}",blonde_man:"\u{1F471}",blonde_woman:"\u{1F471}&zwj;\u2640\uFE0F",blossom:"\u{1F33C}",blowfish:"\u{1F421}",blue_book:"\u{1F4D8}",blue_car:"\u{1F699}",blue_heart:"\u{1F499}",blush:"\u{1F60A}",boar:"\u{1F417}",boat:"\u26F5\uFE0F",bomb:"\u{1F4A3}",book:"\u{1F4D6}",bookmark:"\u{1F516}",bookmark_tabs:"\u{1F4D1}",books:"\u{1F4DA}",boom:"\u{1F4A5}",boot:"\u{1F462}",bouquet:"\u{1F490}",bowing_man:"\u{1F647}",bow_and_arrow:"\u{1F3F9}",bowing_woman:"\u{1F647}&zwj;\u2640\uFE0F",bowling:"\u{1F3B3}",boxing_glove:"\u{1F94A}",boy:"\u{1F466}",bread:"\u{1F35E}",bride_with_veil:"\u{1F470}",bridge_at_night:"\u{1F309}",briefcase:"\u{1F4BC}",broken_heart:"\u{1F494}",bug:"\u{1F41B}",building_construction:"\u{1F3D7}",bulb:"\u{1F4A1}",bullettrain_front:"\u{1F685}",bullettrain_side:"\u{1F684}",burrito:"\u{1F32F}",bus:"\u{1F68C}",business_suit_levitating:"\u{1F574}",busstop:"\u{1F68F}",bust_in_silhouette:"\u{1F464}",busts_in_silhouette:"\u{1F465}",butterfly:"\u{1F98B}",cactus:"\u{1F335}",cake:"\u{1F370}",calendar:"\u{1F4C6}",call_me_hand:"\u{1F919}",calling:"\u{1F4F2}",camel:"\u{1F42B}",camera:"\u{1F4F7}",camera_flash:"\u{1F4F8}",camping:"\u{1F3D5}",cancer:"\u264B\uFE0F",candle:"\u{1F56F}",candy:"\u{1F36C}",canoe:"\u{1F6F6}",capital_abcd:"\u{1F520}",capricorn:"\u2651\uFE0F",car:"\u{1F697}",card_file_box:"\u{1F5C3}",card_index:"\u{1F4C7}",card_index_dividers:"\u{1F5C2}",carousel_horse:"\u{1F3A0}",carrot:"\u{1F955}",cat:"\u{1F431}",cat2:"\u{1F408}",cd:"\u{1F4BF}",chains:"\u26D3",champagne:"\u{1F37E}",chart:"\u{1F4B9}",chart_with_downwards_trend:"\u{1F4C9}",chart_with_upwards_trend:"\u{1F4C8}",checkered_flag:"\u{1F3C1}",cheese:"\u{1F9C0}",cherries:"\u{1F352}",cherry_blossom:"\u{1F338}",chestnut:"\u{1F330}",chicken:"\u{1F414}",children_crossing:"\u{1F6B8}",chipmunk:"\u{1F43F}",chocolate_bar:"\u{1F36B}",christmas_tree:"\u{1F384}",church:"\u26EA\uFE0F",cinema:"\u{1F3A6}",circus_tent:"\u{1F3AA}",city_sunrise:"\u{1F307}",city_sunset:"\u{1F306}",cityscape:"\u{1F3D9}",cl:"\u{1F191}",clamp:"\u{1F5DC}",clap:"\u{1F44F}",clapper:"\u{1F3AC}",classical_building:"\u{1F3DB}",clinking_glasses:"\u{1F942}",clipboard:"\u{1F4CB}",clock1:"\u{1F550}",clock10:"\u{1F559}",clock1030:"\u{1F565}",clock11:"\u{1F55A}",clock1130:"\u{1F566}",clock12:"\u{1F55B}",clock1230:"\u{1F567}",clock130:"\u{1F55C}",clock2:"\u{1F551}",clock230:"\u{1F55D}",clock3:"\u{1F552}",clock330:"\u{1F55E}",clock4:"\u{1F553}",clock430:"\u{1F55F}",clock5:"\u{1F554}",clock530:"\u{1F560}",clock6:"\u{1F555}",clock630:"\u{1F561}",clock7:"\u{1F556}",clock730:"\u{1F562}",clock8:"\u{1F557}",clock830:"\u{1F563}",clock9:"\u{1F558}",clock930:"\u{1F564}",closed_book:"\u{1F4D5}",closed_lock_with_key:"\u{1F510}",closed_umbrella:"\u{1F302}",cloud:"\u2601\uFE0F",cloud_with_lightning:"\u{1F329}",cloud_with_lightning_and_rain:"\u26C8",cloud_with_rain:"\u{1F327}",cloud_with_snow:"\u{1F328}",clown_face:"\u{1F921}",clubs:"\u2663\uFE0F",cocktail:"\u{1F378}",coffee:"\u2615\uFE0F",coffin:"\u26B0\uFE0F",cold_sweat:"\u{1F630}",comet:"\u2604\uFE0F",computer:"\u{1F4BB}",computer_mouse:"\u{1F5B1}",confetti_ball:"\u{1F38A}",confounded:"\u{1F616}",confused:"\u{1F615}",congratulations:"\u3297\uFE0F",construction:"\u{1F6A7}",construction_worker_man:"\u{1F477}",construction_worker_woman:"\u{1F477}&zwj;\u2640\uFE0F",control_knobs:"\u{1F39B}",convenience_store:"\u{1F3EA}",cookie:"\u{1F36A}",cool:"\u{1F192}",policeman:"\u{1F46E}",copyright:"\xA9\uFE0F",corn:"\u{1F33D}",couch_and_lamp:"\u{1F6CB}",couple:"\u{1F46B}",couple_with_heart_woman_man:"\u{1F491}",couple_with_heart_man_man:"\u{1F468}&zwj;\u2764\uFE0F&zwj;\u{1F468}",couple_with_heart_woman_woman:"\u{1F469}&zwj;\u2764\uFE0F&zwj;\u{1F469}",couplekiss_man_man:"\u{1F468}&zwj;\u2764\uFE0F&zwj;\u{1F48B}&zwj;\u{1F468}",couplekiss_man_woman:"\u{1F48F}",couplekiss_woman_woman:"\u{1F469}&zwj;\u2764\uFE0F&zwj;\u{1F48B}&zwj;\u{1F469}",cow:"\u{1F42E}",cow2:"\u{1F404}",cowboy_hat_face:"\u{1F920}",crab:"\u{1F980}",crayon:"\u{1F58D}",credit_card:"\u{1F4B3}",crescent_moon:"\u{1F319}",cricket:"\u{1F3CF}",crocodile:"\u{1F40A}",croissant:"\u{1F950}",crossed_fingers:"\u{1F91E}",crossed_flags:"\u{1F38C}",crossed_swords:"\u2694\uFE0F",crown:"\u{1F451}",cry:"\u{1F622}",crying_cat_face:"\u{1F63F}",crystal_ball:"\u{1F52E}",cucumber:"\u{1F952}",cupid:"\u{1F498}",curly_loop:"\u27B0",currency_exchange:"\u{1F4B1}",curry:"\u{1F35B}",custard:"\u{1F36E}",customs:"\u{1F6C3}",cyclone:"\u{1F300}",dagger:"\u{1F5E1}",dancer:"\u{1F483}",dancing_women:"\u{1F46F}",dancing_men:"\u{1F46F}&zwj;\u2642\uFE0F",dango:"\u{1F361}",dark_sunglasses:"\u{1F576}",dart:"\u{1F3AF}",dash:"\u{1F4A8}",date:"\u{1F4C5}",deciduous_tree:"\u{1F333}",deer:"\u{1F98C}",department_store:"\u{1F3EC}",derelict_house:"\u{1F3DA}",desert:"\u{1F3DC}",desert_island:"\u{1F3DD}",desktop_computer:"\u{1F5A5}",male_detective:"\u{1F575}\uFE0F",diamond_shape_with_a_dot_inside:"\u{1F4A0}",diamonds:"\u2666\uFE0F",disappointed:"\u{1F61E}",disappointed_relieved:"\u{1F625}",dizzy:"\u{1F4AB}",dizzy_face:"\u{1F635}",do_not_litter:"\u{1F6AF}",dog:"\u{1F436}",dog2:"\u{1F415}",dollar:"\u{1F4B5}",dolls:"\u{1F38E}",dolphin:"\u{1F42C}",door:"\u{1F6AA}",doughnut:"\u{1F369}",dove:"\u{1F54A}",dragon:"\u{1F409}",dragon_face:"\u{1F432}",dress:"\u{1F457}",dromedary_camel:"\u{1F42A}",drooling_face:"\u{1F924}",droplet:"\u{1F4A7}",drum:"\u{1F941}",duck:"\u{1F986}",dvd:"\u{1F4C0}","e-mail":"\u{1F4E7}",eagle:"\u{1F985}",ear:"\u{1F442}",ear_of_rice:"\u{1F33E}",earth_africa:"\u{1F30D}",earth_americas:"\u{1F30E}",earth_asia:"\u{1F30F}",egg:"\u{1F95A}",eggplant:"\u{1F346}",eight_pointed_black_star:"\u2734\uFE0F",eight_spoked_asterisk:"\u2733\uFE0F",electric_plug:"\u{1F50C}",elephant:"\u{1F418}",email:"\u2709\uFE0F",end:"\u{1F51A}",envelope_with_arrow:"\u{1F4E9}",euro:"\u{1F4B6}",european_castle:"\u{1F3F0}",european_post_office:"\u{1F3E4}",evergreen_tree:"\u{1F332}",exclamation:"\u2757\uFE0F",expressionless:"\u{1F611}",eye:"\u{1F441}",eye_speech_bubble:"\u{1F441}&zwj;\u{1F5E8}",eyeglasses:"\u{1F453}",eyes:"\u{1F440}",face_with_head_bandage:"\u{1F915}",face_with_thermometer:"\u{1F912}",fist_oncoming:"\u{1F44A}",factory:"\u{1F3ED}",fallen_leaf:"\u{1F342}",family_man_woman_boy:"\u{1F46A}",family_man_boy:"\u{1F468}&zwj;\u{1F466}",family_man_boy_boy:"\u{1F468}&zwj;\u{1F466}&zwj;\u{1F466}",family_man_girl:"\u{1F468}&zwj;\u{1F467}",family_man_girl_boy:"\u{1F468}&zwj;\u{1F467}&zwj;\u{1F466}",family_man_girl_girl:"\u{1F468}&zwj;\u{1F467}&zwj;\u{1F467}",family_man_man_boy:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F466}",family_man_man_boy_boy:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F466}&zwj;\u{1F466}",family_man_man_girl:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F467}",family_man_man_girl_boy:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F467}&zwj;\u{1F466}",family_man_man_girl_girl:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F467}&zwj;\u{1F467}",family_man_woman_boy_boy:"\u{1F468}&zwj;\u{1F469}&zwj;\u{1F466}&zwj;\u{1F466}",family_man_woman_girl:"\u{1F468}&zwj;\u{1F469}&zwj;\u{1F467}",family_man_woman_girl_boy:"\u{1F468}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F466}",family_man_woman_girl_girl:"\u{1F468}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F467}",family_woman_boy:"\u{1F469}&zwj;\u{1F466}",family_woman_boy_boy:"\u{1F469}&zwj;\u{1F466}&zwj;\u{1F466}",family_woman_girl:"\u{1F469}&zwj;\u{1F467}",family_woman_girl_boy:"\u{1F469}&zwj;\u{1F467}&zwj;\u{1F466}",family_woman_girl_girl:"\u{1F469}&zwj;\u{1F467}&zwj;\u{1F467}",family_woman_woman_boy:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F466}",family_woman_woman_boy_boy:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F466}&zwj;\u{1F466}",family_woman_woman_girl:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F467}",family_woman_woman_girl_boy:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F466}",family_woman_woman_girl_girl:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F467}",fast_forward:"\u23E9",fax:"\u{1F4E0}",fearful:"\u{1F628}",feet:"\u{1F43E}",female_detective:"\u{1F575}\uFE0F&zwj;\u2640\uFE0F",ferris_wheel:"\u{1F3A1}",ferry:"\u26F4",field_hockey:"\u{1F3D1}",file_cabinet:"\u{1F5C4}",file_folder:"\u{1F4C1}",film_projector:"\u{1F4FD}",film_strip:"\u{1F39E}",fire:"\u{1F525}",fire_engine:"\u{1F692}",fireworks:"\u{1F386}",first_quarter_moon:"\u{1F313}",first_quarter_moon_with_face:"\u{1F31B}",fish:"\u{1F41F}",fish_cake:"\u{1F365}",fishing_pole_and_fish:"\u{1F3A3}",fist_raised:"\u270A",fist_left:"\u{1F91B}",fist_right:"\u{1F91C}",flags:"\u{1F38F}",flashlight:"\u{1F526}",fleur_de_lis:"\u269C\uFE0F",flight_arrival:"\u{1F6EC}",flight_departure:"\u{1F6EB}",floppy_disk:"\u{1F4BE}",flower_playing_cards:"\u{1F3B4}",flushed:"\u{1F633}",fog:"\u{1F32B}",foggy:"\u{1F301}",football:"\u{1F3C8}",footprints:"\u{1F463}",fork_and_knife:"\u{1F374}",fountain:"\u26F2\uFE0F",fountain_pen:"\u{1F58B}",four_leaf_clover:"\u{1F340}",fox_face:"\u{1F98A}",framed_picture:"\u{1F5BC}",free:"\u{1F193}",fried_egg:"\u{1F373}",fried_shrimp:"\u{1F364}",fries:"\u{1F35F}",frog:"\u{1F438}",frowning:"\u{1F626}",frowning_face:"\u2639\uFE0F",frowning_man:"\u{1F64D}&zwj;\u2642\uFE0F",frowning_woman:"\u{1F64D}",middle_finger:"\u{1F595}",fuelpump:"\u26FD\uFE0F",full_moon:"\u{1F315}",full_moon_with_face:"\u{1F31D}",funeral_urn:"\u26B1\uFE0F",game_die:"\u{1F3B2}",gear:"\u2699\uFE0F",gem:"\u{1F48E}",gemini:"\u264A\uFE0F",ghost:"\u{1F47B}",gift:"\u{1F381}",gift_heart:"\u{1F49D}",girl:"\u{1F467}",globe_with_meridians:"\u{1F310}",goal_net:"\u{1F945}",goat:"\u{1F410}",golf:"\u26F3\uFE0F",golfing_man:"\u{1F3CC}\uFE0F",golfing_woman:"\u{1F3CC}\uFE0F&zwj;\u2640\uFE0F",gorilla:"\u{1F98D}",grapes:"\u{1F347}",green_apple:"\u{1F34F}",green_book:"\u{1F4D7}",green_heart:"\u{1F49A}",green_salad:"\u{1F957}",grey_exclamation:"\u2755",grey_question:"\u2754",grimacing:"\u{1F62C}",grin:"\u{1F601}",grinning:"\u{1F600}",guardsman:"\u{1F482}",guardswoman:"\u{1F482}&zwj;\u2640\uFE0F",guitar:"\u{1F3B8}",gun:"\u{1F52B}",haircut_woman:"\u{1F487}",haircut_man:"\u{1F487}&zwj;\u2642\uFE0F",hamburger:"\u{1F354}",hammer:"\u{1F528}",hammer_and_pick:"\u2692",hammer_and_wrench:"\u{1F6E0}",hamster:"\u{1F439}",hand:"\u270B",handbag:"\u{1F45C}",handshake:"\u{1F91D}",hankey:"\u{1F4A9}",hatched_chick:"\u{1F425}",hatching_chick:"\u{1F423}",headphones:"\u{1F3A7}",hear_no_evil:"\u{1F649}",heart:"\u2764\uFE0F",heart_decoration:"\u{1F49F}",heart_eyes:"\u{1F60D}",heart_eyes_cat:"\u{1F63B}",heartbeat:"\u{1F493}",heartpulse:"\u{1F497}",hearts:"\u2665\uFE0F",heavy_check_mark:"\u2714\uFE0F",heavy_division_sign:"\u2797",heavy_dollar_sign:"\u{1F4B2}",heavy_heart_exclamation:"\u2763\uFE0F",heavy_minus_sign:"\u2796",heavy_multiplication_x:"\u2716\uFE0F",heavy_plus_sign:"\u2795",helicopter:"\u{1F681}",herb:"\u{1F33F}",hibiscus:"\u{1F33A}",high_brightness:"\u{1F506}",high_heel:"\u{1F460}",hocho:"\u{1F52A}",hole:"\u{1F573}",honey_pot:"\u{1F36F}",horse:"\u{1F434}",horse_racing:"\u{1F3C7}",hospital:"\u{1F3E5}",hot_pepper:"\u{1F336}",hotdog:"\u{1F32D}",hotel:"\u{1F3E8}",hotsprings:"\u2668\uFE0F",hourglass:"\u231B\uFE0F",hourglass_flowing_sand:"\u23F3",house:"\u{1F3E0}",house_with_garden:"\u{1F3E1}",houses:"\u{1F3D8}",hugs:"\u{1F917}",hushed:"\u{1F62F}",ice_cream:"\u{1F368}",ice_hockey:"\u{1F3D2}",ice_skate:"\u26F8",icecream:"\u{1F366}",id:"\u{1F194}",ideograph_advantage:"\u{1F250}",imp:"\u{1F47F}",inbox_tray:"\u{1F4E5}",incoming_envelope:"\u{1F4E8}",tipping_hand_woman:"\u{1F481}",information_source:"\u2139\uFE0F",innocent:"\u{1F607}",interrobang:"\u2049\uFE0F",iphone:"\u{1F4F1}",izakaya_lantern:"\u{1F3EE}",jack_o_lantern:"\u{1F383}",japan:"\u{1F5FE}",japanese_castle:"\u{1F3EF}",japanese_goblin:"\u{1F47A}",japanese_ogre:"\u{1F479}",jeans:"\u{1F456}",joy:"\u{1F602}",joy_cat:"\u{1F639}",joystick:"\u{1F579}",kaaba:"\u{1F54B}",key:"\u{1F511}",keyboard:"\u2328\uFE0F",keycap_ten:"\u{1F51F}",kick_scooter:"\u{1F6F4}",kimono:"\u{1F458}",kiss:"\u{1F48B}",kissing:"\u{1F617}",kissing_cat:"\u{1F63D}",kissing_closed_eyes:"\u{1F61A}",kissing_heart:"\u{1F618}",kissing_smiling_eyes:"\u{1F619}",kiwi_fruit:"\u{1F95D}",koala:"\u{1F428}",koko:"\u{1F201}",label:"\u{1F3F7}",large_blue_circle:"\u{1F535}",large_blue_diamond:"\u{1F537}",large_orange_diamond:"\u{1F536}",last_quarter_moon:"\u{1F317}",last_quarter_moon_with_face:"\u{1F31C}",latin_cross:"\u271D\uFE0F",laughing:"\u{1F606}",leaves:"\u{1F343}",ledger:"\u{1F4D2}",left_luggage:"\u{1F6C5}",left_right_arrow:"\u2194\uFE0F",leftwards_arrow_with_hook:"\u21A9\uFE0F",lemon:"\u{1F34B}",leo:"\u264C\uFE0F",leopard:"\u{1F406}",level_slider:"\u{1F39A}",libra:"\u264E\uFE0F",light_rail:"\u{1F688}",link:"\u{1F517}",lion:"\u{1F981}",lips:"\u{1F444}",lipstick:"\u{1F484}",lizard:"\u{1F98E}",lock:"\u{1F512}",lock_with_ink_pen:"\u{1F50F}",lollipop:"\u{1F36D}",loop:"\u27BF",loud_sound:"\u{1F50A}",loudspeaker:"\u{1F4E2}",love_hotel:"\u{1F3E9}",love_letter:"\u{1F48C}",low_brightness:"\u{1F505}",lying_face:"\u{1F925}",m:"\u24C2\uFE0F",mag:"\u{1F50D}",mag_right:"\u{1F50E}",mahjong:"\u{1F004}\uFE0F",mailbox:"\u{1F4EB}",mailbox_closed:"\u{1F4EA}",mailbox_with_mail:"\u{1F4EC}",mailbox_with_no_mail:"\u{1F4ED}",man:"\u{1F468}",man_artist:"\u{1F468}&zwj;\u{1F3A8}",man_astronaut:"\u{1F468}&zwj;\u{1F680}",man_cartwheeling:"\u{1F938}&zwj;\u2642\uFE0F",man_cook:"\u{1F468}&zwj;\u{1F373}",man_dancing:"\u{1F57A}",man_facepalming:"\u{1F926}&zwj;\u2642\uFE0F",man_factory_worker:"\u{1F468}&zwj;\u{1F3ED}",man_farmer:"\u{1F468}&zwj;\u{1F33E}",man_firefighter:"\u{1F468}&zwj;\u{1F692}",man_health_worker:"\u{1F468}&zwj;\u2695\uFE0F",man_in_tuxedo:"\u{1F935}",man_judge:"\u{1F468}&zwj;\u2696\uFE0F",man_juggling:"\u{1F939}&zwj;\u2642\uFE0F",man_mechanic:"\u{1F468}&zwj;\u{1F527}",man_office_worker:"\u{1F468}&zwj;\u{1F4BC}",man_pilot:"\u{1F468}&zwj;\u2708\uFE0F",man_playing_handball:"\u{1F93E}&zwj;\u2642\uFE0F",man_playing_water_polo:"\u{1F93D}&zwj;\u2642\uFE0F",man_scientist:"\u{1F468}&zwj;\u{1F52C}",man_shrugging:"\u{1F937}&zwj;\u2642\uFE0F",man_singer:"\u{1F468}&zwj;\u{1F3A4}",man_student:"\u{1F468}&zwj;\u{1F393}",man_teacher:"\u{1F468}&zwj;\u{1F3EB}",man_technologist:"\u{1F468}&zwj;\u{1F4BB}",man_with_gua_pi_mao:"\u{1F472}",man_with_turban:"\u{1F473}",tangerine:"\u{1F34A}",mans_shoe:"\u{1F45E}",mantelpiece_clock:"\u{1F570}",maple_leaf:"\u{1F341}",martial_arts_uniform:"\u{1F94B}",mask:"\u{1F637}",massage_woman:"\u{1F486}",massage_man:"\u{1F486}&zwj;\u2642\uFE0F",meat_on_bone:"\u{1F356}",medal_military:"\u{1F396}",medal_sports:"\u{1F3C5}",mega:"\u{1F4E3}",melon:"\u{1F348}",memo:"\u{1F4DD}",men_wrestling:"\u{1F93C}&zwj;\u2642\uFE0F",menorah:"\u{1F54E}",mens:"\u{1F6B9}",metal:"\u{1F918}",metro:"\u{1F687}",microphone:"\u{1F3A4}",microscope:"\u{1F52C}",milk_glass:"\u{1F95B}",milky_way:"\u{1F30C}",minibus:"\u{1F690}",minidisc:"\u{1F4BD}",mobile_phone_off:"\u{1F4F4}",money_mouth_face:"\u{1F911}",money_with_wings:"\u{1F4B8}",moneybag:"\u{1F4B0}",monkey:"\u{1F412}",monkey_face:"\u{1F435}",monorail:"\u{1F69D}",moon:"\u{1F314}",mortar_board:"\u{1F393}",mosque:"\u{1F54C}",motor_boat:"\u{1F6E5}",motor_scooter:"\u{1F6F5}",motorcycle:"\u{1F3CD}",motorway:"\u{1F6E3}",mount_fuji:"\u{1F5FB}",mountain:"\u26F0",mountain_biking_man:"\u{1F6B5}",mountain_biking_woman:"\u{1F6B5}&zwj;\u2640\uFE0F",mountain_cableway:"\u{1F6A0}",mountain_railway:"\u{1F69E}",mountain_snow:"\u{1F3D4}",mouse:"\u{1F42D}",mouse2:"\u{1F401}",movie_camera:"\u{1F3A5}",moyai:"\u{1F5FF}",mrs_claus:"\u{1F936}",muscle:"\u{1F4AA}",mushroom:"\u{1F344}",musical_keyboard:"\u{1F3B9}",musical_note:"\u{1F3B5}",musical_score:"\u{1F3BC}",mute:"\u{1F507}",nail_care:"\u{1F485}",name_badge:"\u{1F4DB}",national_park:"\u{1F3DE}",nauseated_face:"\u{1F922}",necktie:"\u{1F454}",negative_squared_cross_mark:"\u274E",nerd_face:"\u{1F913}",neutral_face:"\u{1F610}",new:"\u{1F195}",new_moon:"\u{1F311}",new_moon_with_face:"\u{1F31A}",newspaper:"\u{1F4F0}",newspaper_roll:"\u{1F5DE}",next_track_button:"\u23ED",ng:"\u{1F196}",no_good_man:"\u{1F645}&zwj;\u2642\uFE0F",no_good_woman:"\u{1F645}",night_with_stars:"\u{1F303}",no_bell:"\u{1F515}",no_bicycles:"\u{1F6B3}",no_entry:"\u26D4\uFE0F",no_entry_sign:"\u{1F6AB}",no_mobile_phones:"\u{1F4F5}",no_mouth:"\u{1F636}",no_pedestrians:"\u{1F6B7}",no_smoking:"\u{1F6AD}","non-potable_water":"\u{1F6B1}",nose:"\u{1F443}",notebook:"\u{1F4D3}",notebook_with_decorative_cover:"\u{1F4D4}",notes:"\u{1F3B6}",nut_and_bolt:"\u{1F529}",o:"\u2B55\uFE0F",o2:"\u{1F17E}\uFE0F",ocean:"\u{1F30A}",octopus:"\u{1F419}",oden:"\u{1F362}",office:"\u{1F3E2}",oil_drum:"\u{1F6E2}",ok:"\u{1F197}",ok_hand:"\u{1F44C}",ok_man:"\u{1F646}&zwj;\u2642\uFE0F",ok_woman:"\u{1F646}",old_key:"\u{1F5DD}",older_man:"\u{1F474}",older_woman:"\u{1F475}",om:"\u{1F549}",on:"\u{1F51B}",oncoming_automobile:"\u{1F698}",oncoming_bus:"\u{1F68D}",oncoming_police_car:"\u{1F694}",oncoming_taxi:"\u{1F696}",open_file_folder:"\u{1F4C2}",open_hands:"\u{1F450}",open_mouth:"\u{1F62E}",open_umbrella:"\u2602\uFE0F",ophiuchus:"\u26CE",orange_book:"\u{1F4D9}",orthodox_cross:"\u2626\uFE0F",outbox_tray:"\u{1F4E4}",owl:"\u{1F989}",ox:"\u{1F402}",package:"\u{1F4E6}",page_facing_up:"\u{1F4C4}",page_with_curl:"\u{1F4C3}",pager:"\u{1F4DF}",paintbrush:"\u{1F58C}",palm_tree:"\u{1F334}",pancakes:"\u{1F95E}",panda_face:"\u{1F43C}",paperclip:"\u{1F4CE}",paperclips:"\u{1F587}",parasol_on_ground:"\u26F1",parking:"\u{1F17F}\uFE0F",part_alternation_mark:"\u303D\uFE0F",partly_sunny:"\u26C5\uFE0F",passenger_ship:"\u{1F6F3}",passport_control:"\u{1F6C2}",pause_button:"\u23F8",peace_symbol:"\u262E\uFE0F",peach:"\u{1F351}",peanuts:"\u{1F95C}",pear:"\u{1F350}",pen:"\u{1F58A}",pencil2:"\u270F\uFE0F",penguin:"\u{1F427}",pensive:"\u{1F614}",performing_arts:"\u{1F3AD}",persevere:"\u{1F623}",person_fencing:"\u{1F93A}",pouting_woman:"\u{1F64E}",phone:"\u260E\uFE0F",pick:"\u26CF",pig:"\u{1F437}",pig2:"\u{1F416}",pig_nose:"\u{1F43D}",pill:"\u{1F48A}",pineapple:"\u{1F34D}",ping_pong:"\u{1F3D3}",pisces:"\u2653\uFE0F",pizza:"\u{1F355}",place_of_worship:"\u{1F6D0}",plate_with_cutlery:"\u{1F37D}",play_or_pause_button:"\u23EF",point_down:"\u{1F447}",point_left:"\u{1F448}",point_right:"\u{1F449}",point_up:"\u261D\uFE0F",point_up_2:"\u{1F446}",police_car:"\u{1F693}",policewoman:"\u{1F46E}&zwj;\u2640\uFE0F",poodle:"\u{1F429}",popcorn:"\u{1F37F}",post_office:"\u{1F3E3}",postal_horn:"\u{1F4EF}",postbox:"\u{1F4EE}",potable_water:"\u{1F6B0}",potato:"\u{1F954}",pouch:"\u{1F45D}",poultry_leg:"\u{1F357}",pound:"\u{1F4B7}",rage:"\u{1F621}",pouting_cat:"\u{1F63E}",pouting_man:"\u{1F64E}&zwj;\u2642\uFE0F",pray:"\u{1F64F}",prayer_beads:"\u{1F4FF}",pregnant_woman:"\u{1F930}",previous_track_button:"\u23EE",prince:"\u{1F934}",princess:"\u{1F478}",printer:"\u{1F5A8}",purple_heart:"\u{1F49C}",purse:"\u{1F45B}",pushpin:"\u{1F4CC}",put_litter_in_its_place:"\u{1F6AE}",question:"\u2753",rabbit:"\u{1F430}",rabbit2:"\u{1F407}",racehorse:"\u{1F40E}",racing_car:"\u{1F3CE}",radio:"\u{1F4FB}",radio_button:"\u{1F518}",radioactive:"\u2622\uFE0F",railway_car:"\u{1F683}",railway_track:"\u{1F6E4}",rainbow:"\u{1F308}",rainbow_flag:"\u{1F3F3}\uFE0F&zwj;\u{1F308}",raised_back_of_hand:"\u{1F91A}",raised_hand_with_fingers_splayed:"\u{1F590}",raised_hands:"\u{1F64C}",raising_hand_woman:"\u{1F64B}",raising_hand_man:"\u{1F64B}&zwj;\u2642\uFE0F",ram:"\u{1F40F}",ramen:"\u{1F35C}",rat:"\u{1F400}",record_button:"\u23FA",recycle:"\u267B\uFE0F",red_circle:"\u{1F534}",registered:"\xAE\uFE0F",relaxed:"\u263A\uFE0F",relieved:"\u{1F60C}",reminder_ribbon:"\u{1F397}",repeat:"\u{1F501}",repeat_one:"\u{1F502}",rescue_worker_helmet:"\u26D1",restroom:"\u{1F6BB}",revolving_hearts:"\u{1F49E}",rewind:"\u23EA",rhinoceros:"\u{1F98F}",ribbon:"\u{1F380}",rice:"\u{1F35A}",rice_ball:"\u{1F359}",rice_cracker:"\u{1F358}",rice_scene:"\u{1F391}",right_anger_bubble:"\u{1F5EF}",ring:"\u{1F48D}",robot:"\u{1F916}",rocket:"\u{1F680}",rofl:"\u{1F923}",roll_eyes:"\u{1F644}",roller_coaster:"\u{1F3A2}",rooster:"\u{1F413}",rose:"\u{1F339}",rosette:"\u{1F3F5}",rotating_light:"\u{1F6A8}",round_pushpin:"\u{1F4CD}",rowing_man:"\u{1F6A3}",rowing_woman:"\u{1F6A3}&zwj;\u2640\uFE0F",rugby_football:"\u{1F3C9}",running_man:"\u{1F3C3}",running_shirt_with_sash:"\u{1F3BD}",running_woman:"\u{1F3C3}&zwj;\u2640\uFE0F",sa:"\u{1F202}\uFE0F",sagittarius:"\u2650\uFE0F",sake:"\u{1F376}",sandal:"\u{1F461}",santa:"\u{1F385}",satellite:"\u{1F4E1}",saxophone:"\u{1F3B7}",school:"\u{1F3EB}",school_satchel:"\u{1F392}",scissors:"\u2702\uFE0F",scorpion:"\u{1F982}",scorpius:"\u264F\uFE0F",scream:"\u{1F631}",scream_cat:"\u{1F640}",scroll:"\u{1F4DC}",seat:"\u{1F4BA}",secret:"\u3299\uFE0F",see_no_evil:"\u{1F648}",seedling:"\u{1F331}",selfie:"\u{1F933}",shallow_pan_of_food:"\u{1F958}",shamrock:"\u2618\uFE0F",shark:"\u{1F988}",shaved_ice:"\u{1F367}",sheep:"\u{1F411}",shell:"\u{1F41A}",shield:"\u{1F6E1}",shinto_shrine:"\u26E9",ship:"\u{1F6A2}",shirt:"\u{1F455}",shopping:"\u{1F6CD}",shopping_cart:"\u{1F6D2}",shower:"\u{1F6BF}",shrimp:"\u{1F990}",signal_strength:"\u{1F4F6}",six_pointed_star:"\u{1F52F}",ski:"\u{1F3BF}",skier:"\u26F7",skull:"\u{1F480}",skull_and_crossbones:"\u2620\uFE0F",sleeping:"\u{1F634}",sleeping_bed:"\u{1F6CC}",sleepy:"\u{1F62A}",slightly_frowning_face:"\u{1F641}",slightly_smiling_face:"\u{1F642}",slot_machine:"\u{1F3B0}",small_airplane:"\u{1F6E9}",small_blue_diamond:"\u{1F539}",small_orange_diamond:"\u{1F538}",small_red_triangle:"\u{1F53A}",small_red_triangle_down:"\u{1F53B}",smile:"\u{1F604}",smile_cat:"\u{1F638}",smiley:"\u{1F603}",smiley_cat:"\u{1F63A}",smiling_imp:"\u{1F608}",smirk:"\u{1F60F}",smirk_cat:"\u{1F63C}",smoking:"\u{1F6AC}",snail:"\u{1F40C}",snake:"\u{1F40D}",sneezing_face:"\u{1F927}",snowboarder:"\u{1F3C2}",snowflake:"\u2744\uFE0F",snowman:"\u26C4\uFE0F",snowman_with_snow:"\u2603\uFE0F",sob:"\u{1F62D}",soccer:"\u26BD\uFE0F",soon:"\u{1F51C}",sos:"\u{1F198}",sound:"\u{1F509}",space_invader:"\u{1F47E}",spades:"\u2660\uFE0F",spaghetti:"\u{1F35D}",sparkle:"\u2747\uFE0F",sparkler:"\u{1F387}",sparkles:"\u2728",sparkling_heart:"\u{1F496}",speak_no_evil:"\u{1F64A}",speaker:"\u{1F508}",speaking_head:"\u{1F5E3}",speech_balloon:"\u{1F4AC}",speedboat:"\u{1F6A4}",spider:"\u{1F577}",spider_web:"\u{1F578}",spiral_calendar:"\u{1F5D3}",spiral_notepad:"\u{1F5D2}",spoon:"\u{1F944}",squid:"\u{1F991}",stadium:"\u{1F3DF}",star:"\u2B50\uFE0F",star2:"\u{1F31F}",star_and_crescent:"\u262A\uFE0F",star_of_david:"\u2721\uFE0F",stars:"\u{1F320}",station:"\u{1F689}",statue_of_liberty:"\u{1F5FD}",steam_locomotive:"\u{1F682}",stew:"\u{1F372}",stop_button:"\u23F9",stop_sign:"\u{1F6D1}",stopwatch:"\u23F1",straight_ruler:"\u{1F4CF}",strawberry:"\u{1F353}",stuck_out_tongue:"\u{1F61B}",stuck_out_tongue_closed_eyes:"\u{1F61D}",stuck_out_tongue_winking_eye:"\u{1F61C}",studio_microphone:"\u{1F399}",stuffed_flatbread:"\u{1F959}",sun_behind_large_cloud:"\u{1F325}",sun_behind_rain_cloud:"\u{1F326}",sun_behind_small_cloud:"\u{1F324}",sun_with_face:"\u{1F31E}",sunflower:"\u{1F33B}",sunglasses:"\u{1F60E}",sunny:"\u2600\uFE0F",sunrise:"\u{1F305}",sunrise_over_mountains:"\u{1F304}",surfing_man:"\u{1F3C4}",surfing_woman:"\u{1F3C4}&zwj;\u2640\uFE0F",sushi:"\u{1F363}",suspension_railway:"\u{1F69F}",sweat:"\u{1F613}",sweat_drops:"\u{1F4A6}",sweat_smile:"\u{1F605}",sweet_potato:"\u{1F360}",swimming_man:"\u{1F3CA}",swimming_woman:"\u{1F3CA}&zwj;\u2640\uFE0F",symbols:"\u{1F523}",synagogue:"\u{1F54D}",syringe:"\u{1F489}",taco:"\u{1F32E}",tada:"\u{1F389}",tanabata_tree:"\u{1F38B}",taurus:"\u2649\uFE0F",taxi:"\u{1F695}",tea:"\u{1F375}",telephone_receiver:"\u{1F4DE}",telescope:"\u{1F52D}",tennis:"\u{1F3BE}",tent:"\u26FA\uFE0F",thermometer:"\u{1F321}",thinking:"\u{1F914}",thought_balloon:"\u{1F4AD}",ticket:"\u{1F3AB}",tickets:"\u{1F39F}",tiger:"\u{1F42F}",tiger2:"\u{1F405}",timer_clock:"\u23F2",tipping_hand_man:"\u{1F481}&zwj;\u2642\uFE0F",tired_face:"\u{1F62B}",tm:"\u2122\uFE0F",toilet:"\u{1F6BD}",tokyo_tower:"\u{1F5FC}",tomato:"\u{1F345}",tongue:"\u{1F445}",top:"\u{1F51D}",tophat:"\u{1F3A9}",tornado:"\u{1F32A}",trackball:"\u{1F5B2}",tractor:"\u{1F69C}",traffic_light:"\u{1F6A5}",train:"\u{1F68B}",train2:"\u{1F686}",tram:"\u{1F68A}",triangular_flag_on_post:"\u{1F6A9}",triangular_ruler:"\u{1F4D0}",trident:"\u{1F531}",triumph:"\u{1F624}",trolleybus:"\u{1F68E}",trophy:"\u{1F3C6}",tropical_drink:"\u{1F379}",tropical_fish:"\u{1F420}",truck:"\u{1F69A}",trumpet:"\u{1F3BA}",tulip:"\u{1F337}",tumbler_glass:"\u{1F943}",turkey:"\u{1F983}",turtle:"\u{1F422}",tv:"\u{1F4FA}",twisted_rightwards_arrows:"\u{1F500}",two_hearts:"\u{1F495}",two_men_holding_hands:"\u{1F46C}",two_women_holding_hands:"\u{1F46D}",u5272:"\u{1F239}",u5408:"\u{1F234}",u55b6:"\u{1F23A}",u6307:"\u{1F22F}\uFE0F",u6708:"\u{1F237}\uFE0F",u6709:"\u{1F236}",u6e80:"\u{1F235}",u7121:"\u{1F21A}\uFE0F",u7533:"\u{1F238}",u7981:"\u{1F232}",u7a7a:"\u{1F233}",umbrella:"\u2614\uFE0F",unamused:"\u{1F612}",underage:"\u{1F51E}",unicorn:"\u{1F984}",unlock:"\u{1F513}",up:"\u{1F199}",upside_down_face:"\u{1F643}",v:"\u270C\uFE0F",vertical_traffic_light:"\u{1F6A6}",vhs:"\u{1F4FC}",vibration_mode:"\u{1F4F3}",video_camera:"\u{1F4F9}",video_game:"\u{1F3AE}",violin:"\u{1F3BB}",virgo:"\u264D\uFE0F",volcano:"\u{1F30B}",volleyball:"\u{1F3D0}",vs:"\u{1F19A}",vulcan_salute:"\u{1F596}",walking_man:"\u{1F6B6}",walking_woman:"\u{1F6B6}&zwj;\u2640\uFE0F",waning_crescent_moon:"\u{1F318}",waning_gibbous_moon:"\u{1F316}",warning:"\u26A0\uFE0F",wastebasket:"\u{1F5D1}",watch:"\u231A\uFE0F",water_buffalo:"\u{1F403}",watermelon:"\u{1F349}",wave:"\u{1F44B}",wavy_dash:"\u3030\uFE0F",waxing_crescent_moon:"\u{1F312}",wc:"\u{1F6BE}",weary:"\u{1F629}",wedding:"\u{1F492}",weight_lifting_man:"\u{1F3CB}\uFE0F",weight_lifting_woman:"\u{1F3CB}\uFE0F&zwj;\u2640\uFE0F",whale:"\u{1F433}",whale2:"\u{1F40B}",wheel_of_dharma:"\u2638\uFE0F",wheelchair:"\u267F\uFE0F",white_check_mark:"\u2705",white_circle:"\u26AA\uFE0F",white_flag:"\u{1F3F3}\uFE0F",white_flower:"\u{1F4AE}",white_large_square:"\u2B1C\uFE0F",white_medium_small_square:"\u25FD\uFE0F",white_medium_square:"\u25FB\uFE0F",white_small_square:"\u25AB\uFE0F",white_square_button:"\u{1F533}",wilted_flower:"\u{1F940}",wind_chime:"\u{1F390}",wind_face:"\u{1F32C}",wine_glass:"\u{1F377}",wink:"\u{1F609}",wolf:"\u{1F43A}",woman:"\u{1F469}",woman_artist:"\u{1F469}&zwj;\u{1F3A8}",woman_astronaut:"\u{1F469}&zwj;\u{1F680}",woman_cartwheeling:"\u{1F938}&zwj;\u2640\uFE0F",woman_cook:"\u{1F469}&zwj;\u{1F373}",woman_facepalming:"\u{1F926}&zwj;\u2640\uFE0F",woman_factory_worker:"\u{1F469}&zwj;\u{1F3ED}",woman_farmer:"\u{1F469}&zwj;\u{1F33E}",woman_firefighter:"\u{1F469}&zwj;\u{1F692}",woman_health_worker:"\u{1F469}&zwj;\u2695\uFE0F",woman_judge:"\u{1F469}&zwj;\u2696\uFE0F",woman_juggling:"\u{1F939}&zwj;\u2640\uFE0F",woman_mechanic:"\u{1F469}&zwj;\u{1F527}",woman_office_worker:"\u{1F469}&zwj;\u{1F4BC}",woman_pilot:"\u{1F469}&zwj;\u2708\uFE0F",woman_playing_handball:"\u{1F93E}&zwj;\u2640\uFE0F",woman_playing_water_polo:"\u{1F93D}&zwj;\u2640\uFE0F",woman_scientist:"\u{1F469}&zwj;\u{1F52C}",woman_shrugging:"\u{1F937}&zwj;\u2640\uFE0F",woman_singer:"\u{1F469}&zwj;\u{1F3A4}",woman_student:"\u{1F469}&zwj;\u{1F393}",woman_teacher:"\u{1F469}&zwj;\u{1F3EB}",woman_technologist:"\u{1F469}&zwj;\u{1F4BB}",woman_with_turban:"\u{1F473}&zwj;\u2640\uFE0F",womans_clothes:"\u{1F45A}",womans_hat:"\u{1F452}",women_wrestling:"\u{1F93C}&zwj;\u2640\uFE0F",womens:"\u{1F6BA}",world_map:"\u{1F5FA}",worried:"\u{1F61F}",wrench:"\u{1F527}",writing_hand:"\u270D\uFE0F",x:"\u274C",yellow_heart:"\u{1F49B}",yen:"\u{1F4B4}",yin_yang:"\u262F\uFE0F",yum:"\u{1F60B}",zap:"\u26A1\uFE0F",zipper_mouth_face:"\u{1F910}",zzz:"\u{1F4A4}",octocat:'<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',showdown:`<span style="font-family: 'Anonymous Pro', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;">S</span>`},i.Converter=function(p){var b={},m=[],k=[],C={},v=l,y={parsed:{},raw:"",format:""};T();function T(){p=p||{};for(var _ in o)o.hasOwnProperty(_)&&(b[_]=o[_]);if(typeof p=="object")for(var W in p)p.hasOwnProperty(W)&&(b[W]=p[W]);else throw Error("Converter expects the passed parameter to be an object, but "+typeof p+" was passed instead.");b.extensions&&i.helper.forEach(b.extensions,E)}function E(_,W){if(W=W||null,i.helper.isString(_))if(_=i.helper.stdExtName(_),W=_,i.extensions[_]){console.warn("DEPRECATION WARNING: "+_+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),$(i.extensions[_],_);return}else if(!i.helper.isUndefined(s[_]))_=s[_];else throw Error('Extension "'+_+'" could not be loaded. It was either not found or is not a valid extension.');typeof _=="function"&&(_=_()),i.helper.isArray(_)||(_=[_]);var L=h(_,W);if(!L.valid)throw Error(L.error);for(var I=0;I<_.length;++I){switch(_[I].type){case"lang":m.push(_[I]);break;case"output":k.push(_[I]);break}if(_[I].hasOwnProperty("listeners"))for(var j in _[I].listeners)_[I].listeners.hasOwnProperty(j)&&R(j,_[I].listeners[j])}}function $(_,W){typeof _=="function"&&(_=_(new i.Converter)),i.helper.isArray(_)||(_=[_]);var L=h(_,W);if(!L.valid)throw Error(L.error);for(var I=0;I<_.length;++I)switch(_[I].type){case"lang":m.push(_[I]);break;case"output":k.push(_[I]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}function R(_,W){if(!i.helper.isString(_))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof _+" given");if(typeof W!="function")throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof W+" given");C.hasOwnProperty(_)||(C[_]=[]),C[_].push(W)}function N(_){var W=_.match(/^\s*/)[0].length,L=new RegExp("^\\s{0,"+W+"}","gm");return _.replace(L,"")}this._dispatch=function(W,L,I,j){if(C.hasOwnProperty(W))for(var X=0;X<C[W].length;++X){var Z=C[W][X](W,L,this,I,j);Z&&typeof Z!="undefined"&&(L=Z)}return L},this.listen=function(_,W){return R(_,W),this},this.makeHtml=function(_){if(!_)return _;var W={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:m,outputModifiers:k,converter:this,ghCodeBlocks:[],metadata:{parsed:{},raw:"",format:""}};return _=_.replace(//g,"\xA8T"),_=_.replace(/\$/g,"\xA8D"),_=_.replace(/\r\n/g,`
`),_=_.replace(/\r/g,`
`),_=_.replace(/\u00A0/g,"&nbsp;"),b.smartIndentationFix&&(_=N(_)),_=`

`+_+`

`,_=i.subParser("detab")(_,b,W),_=_.replace(/^[ \t]+$/mg,""),i.helper.forEach(m,function(L){_=i.subParser("runExtension")(L,_,b,W)}),_=i.subParser("metadata")(_,b,W),_=i.subParser("hashPreCodeTags")(_,b,W),_=i.subParser("githubCodeBlocks")(_,b,W),_=i.subParser("hashHTMLBlocks")(_,b,W),_=i.subParser("hashCodeTags")(_,b,W),_=i.subParser("stripLinkDefinitions")(_,b,W),_=i.subParser("blockGamut")(_,b,W),_=i.subParser("unhashHTMLSpans")(_,b,W),_=i.subParser("unescapeSpecialChars")(_,b,W),_=_.replace(/D/g,"$$"),_=_.replace(/T/g,"\xA8"),_=i.subParser("completeHTMLDocument")(_,b,W),i.helper.forEach(k,function(L){_=i.subParser("runExtension")(L,_,b,W)}),y=W.metadata,_},this.makeMarkdown=this.makeMd=function(_,W){if(_=_.replace(/\r\n/g,`
`),_=_.replace(/\r/g,`
`),_=_.replace(/>[ \t]+</,">\xA8NBSP;<"),!W)if(window&&window.document)W=window.document;else throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");var L=W.createElement("div");L.innerHTML=_;var I={preList:G(L)};ie(L);for(var j=L.childNodes,X="",Z=0;Z<j.length;Z++)X+=i.subParser("makeMarkdown.node")(j[Z],I);function ie(J){for(var ze=0;ze<J.childNodes.length;++ze){var ve=J.childNodes[ze];ve.nodeType===3?!/\S/.test(ve.nodeValue)&&!/^[ ]+$/.test(ve.nodeValue)?(J.removeChild(ve),--ze):(ve.nodeValue=ve.nodeValue.split(`
`).join(" "),ve.nodeValue=ve.nodeValue.replace(/(\s)+/g,"$1")):ve.nodeType===1&&ie(ve)}}function G(J){for(var ze=J.querySelectorAll("pre"),ve=[],_e=0;_e<ze.length;++_e)if(ze[_e].childElementCount===1&&ze[_e].firstChild.tagName.toLowerCase()==="code"){var kt=ze[_e].firstChild.innerHTML.trim(),Je=ze[_e].firstChild.getAttribute("data-language")||"";if(Je==="")for(var bt=ze[_e].firstChild.className.split(" "),Le=0;Le<bt.length;++Le){var Bt=bt[Le].match(/^language-(.+)$/);if(Bt!==null){Je=Bt[1];break}}kt=i.helper.unescapeHTMLEntities(kt),ve.push(kt),ze[_e].outerHTML='<precode language="'+Je+'" precodenum="'+_e.toString()+'"></precode>'}else ve.push(ze[_e].innerHTML),ze[_e].innerHTML="",ze[_e].setAttribute("prenum",_e.toString());return ve}return X},this.setOption=function(_,W){b[_]=W},this.getOption=function(_){return b[_]},this.getOptions=function(){return b},this.addExtension=function(_,W){W=W||null,E(_,W)},this.useExtension=function(_){E(_)},this.setFlavor=function(_){if(!a.hasOwnProperty(_))throw Error(_+" flavor was not found");var W=a[_];v=_;for(var L in W)W.hasOwnProperty(L)&&(b[L]=W[L])},this.getFlavor=function(){return v},this.removeExtension=function(_){i.helper.isArray(_)||(_=[_]);for(var W=0;W<_.length;++W){for(var L=_[W],I=0;I<m.length;++I)m[I]===L&&m.splice(I,1);for(var j=0;j<k.length;++j)k[j]===L&&k.splice(j,1)}},this.getAllExtensions=function(){return{language:m,output:k}},this.getMetadata=function(_){return _?y.raw:y.parsed},this.getMetadataFormat=function(){return y.format},this._setMetadataPair=function(_,W){y.parsed[_]=W},this._setMetadataFormat=function(_){y.format=_},this._setMetadataRaw=function(_){y.raw=_}},i.subParser("anchors",function(p,b,m){p=m.converter._dispatch("anchors.before",p,b,m);var k=function(C,v,y,T,E,$,R){if(i.helper.isUndefined(R)&&(R=""),y=y.toLowerCase(),C.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)T="";else if(!T)if(y||(y=v.toLowerCase().replace(/ ?\n/g," ")),T="#"+y,!i.helper.isUndefined(m.gUrls[y]))T=m.gUrls[y],i.helper.isUndefined(m.gTitles[y])||(R=m.gTitles[y]);else return C;T=T.replace(i.helper.regexes.asteriskDashAndColon,i.helper.escapeCharactersCallback);var N='<a href="'+T+'"';return R!==""&&R!==null&&(R=R.replace(/"/g,"&quot;"),R=R.replace(i.helper.regexes.asteriskDashAndColon,i.helper.escapeCharactersCallback),N+=' title="'+R+'"'),b.openLinksInNewWindow&&!/^#/.test(T)&&(N+=' rel="noopener noreferrer" target="\xA8E95Eblank"'),N+=">"+v+"</a>",N};return p=p.replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,k),p=p.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,k),p=p.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,k),p=p.replace(/\[([^\[\]]+)]()()()()()/g,k),b.ghMentions&&(p=p.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gmi,function(C,v,y,T,E){if(y==="\\")return v+T;if(!i.helper.isString(b.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var $=b.ghMentionsLink.replace(/\{u}/g,E),R="";return b.openLinksInNewWindow&&(R=' rel="noopener noreferrer" target="\xA8E95Eblank"'),v+'<a href="'+$+'"'+R+">"+T+"</a>"})),p=m.converter._dispatch("anchors.after",p,b,m),p});var c=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,d=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,g=/()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,w=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gmi,S=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,x=function(p){return function(b,m,k,C,v,y,T){k=k.replace(i.helper.regexes.asteriskDashAndColon,i.helper.escapeCharactersCallback);var E=k,$="",R="",N=m||"",_=T||"";return/^www\./i.test(k)&&(k=k.replace(/^www\./i,"http://www.")),p.excludeTrailingPunctuationFromURLs&&y&&($=y),p.openLinksInNewWindow&&(R=' rel="noopener noreferrer" target="\xA8E95Eblank"'),N+'<a href="'+k+'"'+R+">"+E+"</a>"+$+_}},Q=function(p,b){return function(m,k,C){var v="mailto:";return k=k||"",C=i.subParser("unescapeSpecialChars")(C,p,b),p.encodeEmails?(v=i.helper.encodeEmailAddress(v+C),C=i.helper.encodeEmailAddress(C)):v=v+C,k+'<a href="'+v+'">'+C+"</a>"}};i.subParser("autoLinks",function(p,b,m){return p=m.converter._dispatch("autoLinks.before",p,b,m),p=p.replace(g,x(b)),p=p.replace(S,Q(b,m)),p=m.converter._dispatch("autoLinks.after",p,b,m),p}),i.subParser("simplifiedAutoLinks",function(p,b,m){return b.simplifiedAutoLink&&(p=m.converter._dispatch("simplifiedAutoLinks.before",p,b,m),b.excludeTrailingPunctuationFromURLs?p=p.replace(d,x(b)):p=p.replace(c,x(b)),p=p.replace(w,Q(b,m)),p=m.converter._dispatch("simplifiedAutoLinks.after",p,b,m)),p}),i.subParser("blockGamut",function(p,b,m){return p=m.converter._dispatch("blockGamut.before",p,b,m),p=i.subParser("blockQuotes")(p,b,m),p=i.subParser("headers")(p,b,m),p=i.subParser("horizontalRule")(p,b,m),p=i.subParser("lists")(p,b,m),p=i.subParser("codeBlocks")(p,b,m),p=i.subParser("tables")(p,b,m),p=i.subParser("hashHTMLBlocks")(p,b,m),p=i.subParser("paragraphs")(p,b,m),p=m.converter._dispatch("blockGamut.after",p,b,m),p}),i.subParser("blockQuotes",function(p,b,m){p=m.converter._dispatch("blockQuotes.before",p,b,m),p=p+`

`;var k=/(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;return b.splitAdjacentBlockquotes&&(k=/^ {0,3}>[\s\S]*?(?:\n\n)/gm),p=p.replace(k,function(C){return C=C.replace(/^[ \t]*>[ \t]?/gm,""),C=C.replace(/0/g,""),C=C.replace(/^[ \t]+$/gm,""),C=i.subParser("githubCodeBlocks")(C,b,m),C=i.subParser("blockGamut")(C,b,m),C=C.replace(/(^|\n)/g,"$1  "),C=C.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(v,y){var T=y;return T=T.replace(/^  /mg,"\xA80"),T=T.replace(/0/g,""),T}),i.subParser("hashBlock")(`<blockquote>
`+C+`
</blockquote>`,b,m)}),p=m.converter._dispatch("blockQuotes.after",p,b,m),p}),i.subParser("codeBlocks",function(p,b,m){p=m.converter._dispatch("codeBlocks.before",p,b,m),p+="\xA80";var k=/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=0))/g;return p=p.replace(k,function(C,v,y){var T=v,E=y,$=`
`;return T=i.subParser("outdent")(T,b,m),T=i.subParser("encodeCode")(T,b,m),T=i.subParser("detab")(T,b,m),T=T.replace(/^\n+/g,""),T=T.replace(/\n+$/g,""),b.omitExtraWLInCodeBlocks&&($=""),T="<pre><code>"+T+$+"</code></pre>",i.subParser("hashBlock")(T,b,m)+E}),p=p.replace(/0/,""),p=m.converter._dispatch("codeBlocks.after",p,b,m),p}),i.subParser("codeSpans",function(p,b,m){return p=m.converter._dispatch("codeSpans.before",p,b,m),typeof p=="undefined"&&(p=""),p=p.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(k,C,v,y){var T=y;return T=T.replace(/^([ \t]*)/g,""),T=T.replace(/[ \t]*$/g,""),T=i.subParser("encodeCode")(T,b,m),T=C+"<code>"+T+"</code>",T=i.subParser("hashHTMLSpans")(T,b,m),T}),p=m.converter._dispatch("codeSpans.after",p,b,m),p}),i.subParser("completeHTMLDocument",function(p,b,m){if(!b.completeHTMLDocument)return p;p=m.converter._dispatch("completeHTMLDocument.before",p,b,m);var k="html",C=`<!DOCTYPE HTML>
`,v="",y=`<meta charset="utf-8">
`,T="",E="";typeof m.metadata.parsed.doctype!="undefined"&&(C="<!DOCTYPE "+m.metadata.parsed.doctype+`>
`,k=m.metadata.parsed.doctype.toString().toLowerCase(),(k==="html"||k==="html5")&&(y='<meta charset="utf-8">'));for(var $ in m.metadata.parsed)if(m.metadata.parsed.hasOwnProperty($))switch($.toLowerCase()){case"doctype":break;case"title":v="<title>"+m.metadata.parsed.title+`</title>
`;break;case"charset":k==="html"||k==="html5"?y='<meta charset="'+m.metadata.parsed.charset+`">
`:y='<meta name="charset" content="'+m.metadata.parsed.charset+`">
`;break;case"language":case"lang":T=' lang="'+m.metadata.parsed[$]+'"',E+='<meta name="'+$+'" content="'+m.metadata.parsed[$]+`">
`;break;default:E+='<meta name="'+$+'" content="'+m.metadata.parsed[$]+`">
`}return p=C+"<html"+T+`>
<head>
`+v+y+E+`</head>
<body>
`+p.trim()+`
</body>
</html>`,p=m.converter._dispatch("completeHTMLDocument.after",p,b,m),p}),i.subParser("detab",function(p,b,m){return p=m.converter._dispatch("detab.before",p,b,m),p=p.replace(/\t(?=\t)/g,"    "),p=p.replace(/\t/g,"\xA8A\xA8B"),p=p.replace(/B(.+?)A/g,function(k,C){for(var v=C,y=4-v.length%4,T=0;T<y;T++)v+=" ";return v}),p=p.replace(/A/g,"    "),p=p.replace(/B/g,""),p=m.converter._dispatch("detab.after",p,b,m),p}),i.subParser("ellipsis",function(p,b,m){return b.ellipsis&&(p=m.converter._dispatch("ellipsis.before",p,b,m),p=p.replace(/\.\.\./g,"\u2026"),p=m.converter._dispatch("ellipsis.after",p,b,m)),p}),i.subParser("emoji",function(p,b,m){if(!b.emoji)return p;p=m.converter._dispatch("emoji.before",p,b,m);var k=/:([\S]+?):/g;return p=p.replace(k,function(C,v){return i.helper.emojis.hasOwnProperty(v)?i.helper.emojis[v]:C}),p=m.converter._dispatch("emoji.after",p,b,m),p}),i.subParser("encodeAmpsAndAngles",function(p,b,m){return p=m.converter._dispatch("encodeAmpsAndAngles.before",p,b,m),p=p.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),p=p.replace(/<(?![a-z\/?$!])/gi,"&lt;"),p=p.replace(/</g,"&lt;"),p=p.replace(/>/g,"&gt;"),p=m.converter._dispatch("encodeAmpsAndAngles.after",p,b,m),p}),i.subParser("encodeBackslashEscapes",function(p,b,m){return p=m.converter._dispatch("encodeBackslashEscapes.before",p,b,m),p=p.replace(/\\(\\)/g,i.helper.escapeCharactersCallback),p=p.replace(/\\([`*_{}\[\]()>#+.!~=|:-])/g,i.helper.escapeCharactersCallback),p=m.converter._dispatch("encodeBackslashEscapes.after",p,b,m),p}),i.subParser("encodeCode",function(p,b,m){return p=m.converter._dispatch("encodeCode.before",p,b,m),p=p.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,i.helper.escapeCharactersCallback),p=m.converter._dispatch("encodeCode.after",p,b,m),p}),i.subParser("escapeSpecialCharsWithinTagAttributes",function(p,b,m){p=m.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",p,b,m);var k=/<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,C=/<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi;return p=p.replace(k,function(v){return v.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,i.helper.escapeCharactersCallback)}),p=p.replace(C,function(v){return v.replace(/([\\`*_~=|])/g,i.helper.escapeCharactersCallback)}),p=m.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",p,b,m),p}),i.subParser("githubCodeBlocks",function(p,b,m){return b.ghCodeBlocks?(p=m.converter._dispatch("githubCodeBlocks.before",p,b,m),p+="\xA80",p=p.replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,function(k,C,v,y){var T=b.omitExtraWLInCodeBlocks?"":`
`;return y=i.subParser("encodeCode")(y,b,m),y=i.subParser("detab")(y,b,m),y=y.replace(/^\n+/g,""),y=y.replace(/\n+$/g,""),y="<pre><code"+(v?' class="'+v+" language-"+v+'"':"")+">"+y+T+"</code></pre>",y=i.subParser("hashBlock")(y,b,m),`

\xA8G`+(m.ghCodeBlocks.push({text:k,codeblock:y})-1)+`G

`}),p=p.replace(/0/,""),m.converter._dispatch("githubCodeBlocks.after",p,b,m)):p}),i.subParser("hashBlock",function(p,b,m){return p=m.converter._dispatch("hashBlock.before",p,b,m),p=p.replace(/(^\n+|\n+$)/g,""),p=`

\xA8K`+(m.gHtmlBlocks.push(p)-1)+`K

`,p=m.converter._dispatch("hashBlock.after",p,b,m),p}),i.subParser("hashCodeTags",function(p,b,m){p=m.converter._dispatch("hashCodeTags.before",p,b,m);var k=function(C,v,y,T){var E=y+i.subParser("encodeCode")(v,b,m)+T;return"\xA8C"+(m.gHtmlSpans.push(E)-1)+"C"};return p=i.helper.replaceRecursiveRegExp(p,k,"<code\\b[^>]*>","</code>","gim"),p=m.converter._dispatch("hashCodeTags.after",p,b,m),p}),i.subParser("hashElement",function(p,b,m){return function(k,C){var v=C;return v=v.replace(/\n\n/g,`
`),v=v.replace(/^\n/,""),v=v.replace(/\n+$/g,""),v=`

\xA8K`+(m.gHtmlBlocks.push(v)-1)+`K

`,v}}),i.subParser("hashHTMLBlocks",function(p,b,m){p=m.converter._dispatch("hashHTMLBlocks.before",p,b,m);var k=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],C=function(_,W,L,I){var j=_;return L.search(/\bmarkdown\b/)!==-1&&(j=L+m.converter.makeHtml(W)+I),`

\xA8K`+(m.gHtmlBlocks.push(j)-1)+`K

`};b.backslashEscapesHTMLTags&&(p=p.replace(/\\<(\/?[^>]+?)>/g,function(_,W){return"&lt;"+W+"&gt;"}));for(var v=0;v<k.length;++v)for(var y,T=new RegExp("^ {0,3}(<"+k[v]+"\\b[^>]*>)","im"),E="<"+k[v]+"\\b[^>]*>",$="</"+k[v]+">";(y=i.helper.regexIndexOf(p,T))!==-1;){var R=i.helper.splitAtIndex(p,y),N=i.helper.replaceRecursiveRegExp(R[1],C,E,$,"im");if(N===R[1])break;p=R[0].concat(N)}return p=p.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,i.subParser("hashElement")(p,b,m)),p=i.helper.replaceRecursiveRegExp(p,function(_){return`

\xA8K`+(m.gHtmlBlocks.push(_)-1)+`K

`},"^ {0,3}<!--","-->","gm"),p=p.replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,i.subParser("hashElement")(p,b,m)),p=m.converter._dispatch("hashHTMLBlocks.after",p,b,m),p}),i.subParser("hashHTMLSpans",function(p,b,m){p=m.converter._dispatch("hashHTMLSpans.before",p,b,m);function k(C){return"\xA8C"+(m.gHtmlSpans.push(C)-1)+"C"}return p=p.replace(/<[^>]+?\/>/gi,function(C){return k(C)}),p=p.replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,function(C){return k(C)}),p=p.replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,function(C){return k(C)}),p=p.replace(/<[^>]+?>/gi,function(C){return k(C)}),p=m.converter._dispatch("hashHTMLSpans.after",p,b,m),p}),i.subParser("unhashHTMLSpans",function(p,b,m){p=m.converter._dispatch("unhashHTMLSpans.before",p,b,m);for(var k=0;k<m.gHtmlSpans.length;++k){for(var C=m.gHtmlSpans[k],v=0;/C(\d+)C/.test(C);){var y=RegExp.$1;if(C=C.replace("\xA8C"+y+"C",m.gHtmlSpans[y]),v===10){console.error("maximum nesting of 10 spans reached!!!");break}++v}p=p.replace("\xA8C"+k+"C",C)}return p=m.converter._dispatch("unhashHTMLSpans.after",p,b,m),p}),i.subParser("hashPreCodeTags",function(p,b,m){p=m.converter._dispatch("hashPreCodeTags.before",p,b,m);var k=function(C,v,y,T){var E=y+i.subParser("encodeCode")(v,b,m)+T;return`

\xA8G`+(m.ghCodeBlocks.push({text:C,codeblock:E})-1)+`G

`};return p=i.helper.replaceRecursiveRegExp(p,k,"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),p=m.converter._dispatch("hashPreCodeTags.after",p,b,m),p}),i.subParser("headers",function(p,b,m){p=m.converter._dispatch("headers.before",p,b,m);var k=isNaN(parseInt(b.headerLevelStart))?1:parseInt(b.headerLevelStart),C=b.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,v=b.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;p=p.replace(C,function(E,$){var R=i.subParser("spanGamut")($,b,m),N=b.noHeaderId?"":' id="'+T($)+'"',_=k,W="<h"+_+N+">"+R+"</h"+_+">";return i.subParser("hashBlock")(W,b,m)}),p=p.replace(v,function(E,$){var R=i.subParser("spanGamut")($,b,m),N=b.noHeaderId?"":' id="'+T($)+'"',_=k+1,W="<h"+_+N+">"+R+"</h"+_+">";return i.subParser("hashBlock")(W,b,m)});var y=b.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;p=p.replace(y,function(E,$,R){var N=R;b.customizedHeaderId&&(N=R.replace(/\s?\{([^{]+?)}\s*$/,""));var _=i.subParser("spanGamut")(N,b,m),W=b.noHeaderId?"":' id="'+T(R)+'"',L=k-1+$.length,I="<h"+L+W+">"+_+"</h"+L+">";return i.subParser("hashBlock")(I,b,m)});function T(E){var $,R;if(b.customizedHeaderId){var N=E.match(/\{([^{]+?)}\s*$/);N&&N[1]&&(E=N[1])}return $=E,i.helper.isString(b.prefixHeaderId)?R=b.prefixHeaderId:b.prefixHeaderId===!0?R="section-":R="",b.rawPrefixHeaderId||($=R+$),b.ghCompatibleHeaderId?$=$.replace(/ /g,"-").replace(/&amp;/g,"").replace(/T/g,"").replace(/D/g,"").replace(/[&+$,\/:;=?@"#{}|^~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():b.rawHeaderId?$=$.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/T/g,"\xA8").replace(/D/g,"$").replace(/["']/g,"-").toLowerCase():$=$.replace(/[^\w]/g,"").toLowerCase(),b.rawPrefixHeaderId&&($=R+$),m.hashLinkCounts[$]?$=$+"-"+m.hashLinkCounts[$]++:m.hashLinkCounts[$]=1,$}return p=m.converter._dispatch("headers.after",p,b,m),p}),i.subParser("horizontalRule",function(p,b,m){p=m.converter._dispatch("horizontalRule.before",p,b,m);var k=i.subParser("hashBlock")("<hr />",b,m);return p=p.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,k),p=p.replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,k),p=p.replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,k),p=m.converter._dispatch("horizontalRule.after",p,b,m),p}),i.subParser("images",function(p,b,m){p=m.converter._dispatch("images.before",p,b,m);var k=/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,C=/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,v=/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,y=/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,T=/!\[([^\[\]]+)]()()()()()/g;function E(R,N,_,W,L,I,j,X){return W=W.replace(/\s/g,""),$(R,N,_,W,L,I,j,X)}function $(R,N,_,W,L,I,j,X){var Z=m.gUrls,ie=m.gTitles,G=m.gDimensions;if(_=_.toLowerCase(),X||(X=""),R.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)W="";else if(W===""||W===null)if((_===""||_===null)&&(_=N.toLowerCase().replace(/ ?\n/g," ")),W="#"+_,!i.helper.isUndefined(Z[_]))W=Z[_],i.helper.isUndefined(ie[_])||(X=ie[_]),i.helper.isUndefined(G[_])||(L=G[_].width,I=G[_].height);else return R;N=N.replace(/"/g,"&quot;").replace(i.helper.regexes.asteriskDashAndColon,i.helper.escapeCharactersCallback),W=W.replace(i.helper.regexes.asteriskDashAndColon,i.helper.escapeCharactersCallback);var J='<img src="'+W+'" alt="'+N+'"';return X&&i.helper.isString(X)&&(X=X.replace(/"/g,"&quot;").replace(i.helper.regexes.asteriskDashAndColon,i.helper.escapeCharactersCallback),J+=' title="'+X+'"'),L&&I&&(L=L==="*"?"auto":L,I=I==="*"?"auto":I,J+=' width="'+L+'"',J+=' height="'+I+'"'),J+=" />",J}return p=p.replace(y,$),p=p.replace(v,E),p=p.replace(C,$),p=p.replace(k,$),p=p.replace(T,$),p=m.converter._dispatch("images.after",p,b,m),p}),i.subParser("italicsAndBold",function(p,b,m){p=m.converter._dispatch("italicsAndBold.before",p,b,m);function k(C,v,y){return v+C+y}return b.literalMidWordUnderscores?(p=p.replace(/\b___(\S[\s\S]*?)___\b/g,function(C,v){return k(v,"<strong><em>","</em></strong>")}),p=p.replace(/\b__(\S[\s\S]*?)__\b/g,function(C,v){return k(v,"<strong>","</strong>")}),p=p.replace(/\b_(\S[\s\S]*?)_\b/g,function(C,v){return k(v,"<em>","</em>")})):(p=p.replace(/___(\S[\s\S]*?)___/g,function(C,v){return/\S$/.test(v)?k(v,"<strong><em>","</em></strong>"):C}),p=p.replace(/__(\S[\s\S]*?)__/g,function(C,v){return/\S$/.test(v)?k(v,"<strong>","</strong>"):C}),p=p.replace(/_([^\s_][\s\S]*?)_/g,function(C,v){return/\S$/.test(v)?k(v,"<em>","</em>"):C})),b.literalMidWordAsterisks?(p=p.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g,function(C,v,y){return k(y,v+"<strong><em>","</em></strong>")}),p=p.replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g,function(C,v,y){return k(y,v+"<strong>","</strong>")}),p=p.replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g,function(C,v,y){return k(y,v+"<em>","</em>")})):(p=p.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,function(C,v){return/\S$/.test(v)?k(v,"<strong><em>","</em></strong>"):C}),p=p.replace(/\*\*(\S[\s\S]*?)\*\*/g,function(C,v){return/\S$/.test(v)?k(v,"<strong>","</strong>"):C}),p=p.replace(/\*([^\s*][\s\S]*?)\*/g,function(C,v){return/\S$/.test(v)?k(v,"<em>","</em>"):C})),p=m.converter._dispatch("italicsAndBold.after",p,b,m),p}),i.subParser("lists",function(p,b,m){function k(y,T){m.gListLevel++,y=y.replace(/\n{2,}$/,`
`),y+="\xA80";var E=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,$=/\n[ \t]*\n(?!0)/.test(y);return b.disableForced4SpacesIndentedSublists&&(E=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(0|\2([*+-]|\d+[.])[ \t]+))/gm),y=y.replace(E,function(R,N,_,W,L,I,j){j=j&&j.trim()!=="";var X=i.subParser("outdent")(L,b,m),Z="";return I&&b.tasklists&&(Z=' class="task-list-item" style="list-style-type: none;"',X=X.replace(/^[ \t]*\[(x|X| )?]/m,function(){var ie='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return j&&(ie+=" checked"),ie+=">",ie})),X=X.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,function(ie){return"\xA8A"+ie}),N||X.search(/\n{2,}/)>-1?(X=i.subParser("githubCodeBlocks")(X,b,m),X=i.subParser("blockGamut")(X,b,m)):(X=i.subParser("lists")(X,b,m),X=X.replace(/\n$/,""),X=i.subParser("hashHTMLBlocks")(X,b,m),X=X.replace(/\n\n+/g,`

`),$?X=i.subParser("paragraphs")(X,b,m):X=i.subParser("spanGamut")(X,b,m)),X=X.replace("\xA8A",""),X="<li"+Z+">"+X+`</li>
`,X}),y=y.replace(/0/g,""),m.gListLevel--,T&&(y=y.replace(/\s+$/,"")),y}function C(y,T){if(T==="ol"){var E=y.match(/^ *(\d+)\./);if(E&&E[1]!=="1")return' start="'+E[1]+'"'}return""}function v(y,T,E){var $=b.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,R=b.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,N=T==="ul"?$:R,_="";if(y.search(N)!==-1)(function L(I){var j=I.search(N),X=C(y,T);j!==-1?(_+=`

<`+T+X+`>
`+k(I.slice(0,j),!!E)+"</"+T+`>
`,T=T==="ul"?"ol":"ul",N=T==="ul"?$:R,L(I.slice(j))):_+=`

<`+T+X+`>
`+k(I,!!E)+"</"+T+`>
`})(y);else{var W=C(y,T);_=`

<`+T+W+`>
`+k(y,!!E)+"</"+T+`>
`}return _}return p=m.converter._dispatch("lists.before",p,b,m),p+="\xA80",m.gListLevel?p=p.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(y,T,E){var $=E.search(/[*+-]/g)>-1?"ul":"ol";return v(T,$,!0)}):p=p.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(y,T,E,$){var R=$.search(/[*+-]/g)>-1?"ul":"ol";return v(E,R,!1)}),p=p.replace(/0/,""),p=m.converter._dispatch("lists.after",p,b,m),p}),i.subParser("metadata",function(p,b,m){if(!b.metadata)return p;p=m.converter._dispatch("metadata.before",p,b,m);function k(C){m.metadata.raw=C,C=C.replace(/&/g,"&amp;").replace(/"/g,"&quot;"),C=C.replace(/\n {4}/g," "),C.replace(/^([\S ]+): +([\s\S]+?)$/gm,function(v,y,T){return m.metadata.parsed[y]=T,""})}return p=p.replace(/^\s*+(\S*?)\n([\s\S]+?)\n+\n/,function(C,v,y){return k(y),"\xA8M"}),p=p.replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/,function(C,v,y){return v&&(m.metadata.format=v),k(y),"\xA8M"}),p=p.replace(/M/g,""),p=m.converter._dispatch("metadata.after",p,b,m),p}),i.subParser("outdent",function(p,b,m){return p=m.converter._dispatch("outdent.before",p,b,m),p=p.replace(/^(\t|[ ]{1,4})/gm,"\xA80"),p=p.replace(/0/g,""),p=m.converter._dispatch("outdent.after",p,b,m),p}),i.subParser("paragraphs",function(p,b,m){p=m.converter._dispatch("paragraphs.before",p,b,m),p=p.replace(/^\n+/g,""),p=p.replace(/\n+$/g,"");for(var k=p.split(/\n{2,}/g),C=[],v=k.length,y=0;y<v;y++){var T=k[y];T.search(/(K|G)(\d+)\1/g)>=0?C.push(T):T.search(/\S/)>=0&&(T=i.subParser("spanGamut")(T,b,m),T=T.replace(/^([ \t]*)/g,"<p>"),T+="</p>",C.push(T))}for(v=C.length,y=0;y<v;y++){for(var E="",$=C[y],R=!1;/(K|G)(\d+)\1/.test($);){var N=RegExp.$1,_=RegExp.$2;N==="K"?E=m.gHtmlBlocks[_]:R?E=i.subParser("encodeCode")(m.ghCodeBlocks[_].text,b,m):E=m.ghCodeBlocks[_].codeblock,E=E.replace(/\$/g,"$$$$"),$=$.replace(/(\n\n)?(K|G)\d+\2(\n\n)?/,E),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test($)&&(R=!0)}C[y]=$}return p=C.join(`
`),p=p.replace(/^\n+/g,""),p=p.replace(/\n+$/g,""),m.converter._dispatch("paragraphs.after",p,b,m)}),i.subParser("runExtension",function(p,b,m,k){if(p.filter)b=p.filter(b,k.converter,m);else if(p.regex){var C=p.regex;C instanceof RegExp||(C=new RegExp(C,"g")),b=b.replace(C,p.replace)}return b}),i.subParser("spanGamut",function(p,b,m){return p=m.converter._dispatch("spanGamut.before",p,b,m),p=i.subParser("codeSpans")(p,b,m),p=i.subParser("escapeSpecialCharsWithinTagAttributes")(p,b,m),p=i.subParser("encodeBackslashEscapes")(p,b,m),p=i.subParser("images")(p,b,m),p=i.subParser("anchors")(p,b,m),p=i.subParser("autoLinks")(p,b,m),p=i.subParser("simplifiedAutoLinks")(p,b,m),p=i.subParser("emoji")(p,b,m),p=i.subParser("underline")(p,b,m),p=i.subParser("italicsAndBold")(p,b,m),p=i.subParser("strikethrough")(p,b,m),p=i.subParser("ellipsis")(p,b,m),p=i.subParser("hashHTMLSpans")(p,b,m),p=i.subParser("encodeAmpsAndAngles")(p,b,m),b.simpleLineBreaks?/\n\nK/.test(p)||(p=p.replace(/\n+/g,`<br />
`)):p=p.replace(/  +\n/g,`<br />
`),p=m.converter._dispatch("spanGamut.after",p,b,m),p}),i.subParser("strikethrough",function(p,b,m){function k(C){return b.simplifiedAutoLink&&(C=i.subParser("simplifiedAutoLinks")(C,b,m)),"<del>"+C+"</del>"}return b.strikethrough&&(p=m.converter._dispatch("strikethrough.before",p,b,m),p=p.replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,function(C,v){return k(v)}),p=m.converter._dispatch("strikethrough.after",p,b,m)),p}),i.subParser("stripLinkDefinitions",function(p,b,m){var k=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=0))/gm,C=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=0)|(?=\n\[))/gm;p+="\xA80";var v=function(y,T,E,$,R,N,_){return T=T.toLowerCase(),p.toLowerCase().split(T).length-1<2?y:(E.match(/^data:.+?\/.+?;base64,/)?m.gUrls[T]=E.replace(/\s/g,""):m.gUrls[T]=i.subParser("encodeAmpsAndAngles")(E,b,m),N?N+_:(_&&(m.gTitles[T]=_.replace(/"|'/g,"&quot;")),b.parseImgDimensions&&$&&R&&(m.gDimensions[T]={width:$,height:R}),""))};return p=p.replace(C,v),p=p.replace(k,v),p=p.replace(/0/,""),p}),i.subParser("tables",function(p,b,m){if(!b.tables)return p;var k=/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|0)/gm,C=/^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|0)/gm;function v(R){return/^:[ \t]*--*$/.test(R)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(R)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(R)?' style="text-align:center;"':""}function y(R,N){var _="";return R=R.trim(),(b.tablesHeaderId||b.tableHeaderId)&&(_=' id="'+R.replace(/ /g,"_").toLowerCase()+'"'),R=i.subParser("spanGamut")(R,b,m),"<th"+_+N+">"+R+`</th>
`}function T(R,N){var _=i.subParser("spanGamut")(R,b,m);return"<td"+N+">"+_+`</td>
`}function E(R,N){for(var _=`<table>
<thead>
<tr>
`,W=R.length,L=0;L<W;++L)_+=R[L];for(_+=`</tr>
</thead>
<tbody>
`,L=0;L<N.length;++L){_+=`<tr>
`;for(var I=0;I<W;++I)_+=N[L][I];_+=`</tr>
`}return _+=`</tbody>
</table>
`,_}function $(R){var N,_=R.split(`
`);for(N=0;N<_.length;++N)/^ {0,3}\|/.test(_[N])&&(_[N]=_[N].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(_[N])&&(_[N]=_[N].replace(/\|[ \t]*$/,"")),_[N]=i.subParser("codeSpans")(_[N],b,m);var W=_[0].split("|").map(function(J){return J.trim()}),L=_[1].split("|").map(function(J){return J.trim()}),I=[],j=[],X=[],Z=[];for(_.shift(),_.shift(),N=0;N<_.length;++N)_[N].trim()!==""&&I.push(_[N].split("|").map(function(J){return J.trim()}));if(W.length<L.length)return R;for(N=0;N<L.length;++N)X.push(v(L[N]));for(N=0;N<W.length;++N)i.helper.isUndefined(X[N])&&(X[N]=""),j.push(y(W[N],X[N]));for(N=0;N<I.length;++N){for(var ie=[],G=0;G<j.length;++G)i.helper.isUndefined(I[N][G]),ie.push(T(I[N][G],X[G]));Z.push(ie)}return E(j,Z)}return p=m.converter._dispatch("tables.before",p,b,m),p=p.replace(/\\(\|)/g,i.helper.escapeCharactersCallback),p=p.replace(k,$),p=p.replace(C,$),p=m.converter._dispatch("tables.after",p,b,m),p}),i.subParser("underline",function(p,b,m){return b.underline&&(p=m.converter._dispatch("underline.before",p,b,m),b.literalMidWordUnderscores?(p=p.replace(/\b___(\S[\s\S]*?)___\b/g,function(k,C){return"<u>"+C+"</u>"}),p=p.replace(/\b__(\S[\s\S]*?)__\b/g,function(k,C){return"<u>"+C+"</u>"})):(p=p.replace(/___(\S[\s\S]*?)___/g,function(k,C){return/\S$/.test(C)?"<u>"+C+"</u>":k}),p=p.replace(/__(\S[\s\S]*?)__/g,function(k,C){return/\S$/.test(C)?"<u>"+C+"</u>":k})),p=p.replace(/(_)/g,i.helper.escapeCharactersCallback),p=m.converter._dispatch("underline.after",p,b,m)),p}),i.subParser("unescapeSpecialChars",function(p,b,m){return p=m.converter._dispatch("unescapeSpecialChars.before",p,b,m),p=p.replace(/E(\d+)E/g,function(k,C){var v=parseInt(C);return String.fromCharCode(v)}),p=m.converter._dispatch("unescapeSpecialChars.after",p,b,m),p}),i.subParser("makeMarkdown.blockquote",function(p,b){var m="";if(p.hasChildNodes())for(var k=p.childNodes,C=k.length,v=0;v<C;++v){var y=i.subParser("makeMarkdown.node")(k[v],b);y!==""&&(m+=y)}return m=m.trim(),m="> "+m.split(`
`).join(`
> `),m}),i.subParser("makeMarkdown.codeBlock",function(p,b){var m=p.getAttribute("language"),k=p.getAttribute("precodenum");return"```"+m+`
`+b.preList[k]+"\n```"}),i.subParser("makeMarkdown.codeSpan",function(p){return"`"+p.innerHTML+"`"}),i.subParser("makeMarkdown.emphasis",function(p,b){var m="";if(p.hasChildNodes()){m+="*";for(var k=p.childNodes,C=k.length,v=0;v<C;++v)m+=i.subParser("makeMarkdown.node")(k[v],b);m+="*"}return m}),i.subParser("makeMarkdown.header",function(p,b,m){var k=new Array(m+1).join("#"),C="";if(p.hasChildNodes()){C=k+" ";for(var v=p.childNodes,y=v.length,T=0;T<y;++T)C+=i.subParser("makeMarkdown.node")(v[T],b)}return C}),i.subParser("makeMarkdown.hr",function(){return"---"}),i.subParser("makeMarkdown.image",function(p){var b="";return p.hasAttribute("src")&&(b+="!["+p.getAttribute("alt")+"](",b+="<"+p.getAttribute("src")+">",p.hasAttribute("width")&&p.hasAttribute("height")&&(b+=" ="+p.getAttribute("width")+"x"+p.getAttribute("height")),p.hasAttribute("title")&&(b+=' "'+p.getAttribute("title")+'"'),b+=")"),b}),i.subParser("makeMarkdown.links",function(p,b){var m="";if(p.hasChildNodes()&&p.hasAttribute("href")){var k=p.childNodes,C=k.length;m="[";for(var v=0;v<C;++v)m+=i.subParser("makeMarkdown.node")(k[v],b);m+="](",m+="<"+p.getAttribute("href")+">",p.hasAttribute("title")&&(m+=' "'+p.getAttribute("title")+'"'),m+=")"}return m}),i.subParser("makeMarkdown.list",function(p,b,m){var k="";if(!p.hasChildNodes())return"";for(var C=p.childNodes,v=C.length,y=p.getAttribute("start")||1,T=0;T<v;++T)if(!(typeof C[T].tagName=="undefined"||C[T].tagName.toLowerCase()!=="li")){var E="";m==="ol"?E=y.toString()+". ":E="- ",k+=E+i.subParser("makeMarkdown.listItem")(C[T],b),++y}return k+=`
<!-- -->
`,k.trim()}),i.subParser("makeMarkdown.listItem",function(p,b){for(var m="",k=p.childNodes,C=k.length,v=0;v<C;++v)m+=i.subParser("makeMarkdown.node")(k[v],b);return/\n$/.test(m)?m=m.split(`
`).join(`
    `).replace(/^ {4}$/gm,"").replace(/\n\n+/g,`

`):m+=`
`,m}),i.subParser("makeMarkdown.node",function(p,b,m){m=m||!1;var k="";if(p.nodeType===3)return i.subParser("makeMarkdown.txt")(p,b);if(p.nodeType===8)return"<!--"+p.data+`-->

`;if(p.nodeType!==1)return"";var C=p.tagName.toLowerCase();switch(C){case"h1":m||(k=i.subParser("makeMarkdown.header")(p,b,1)+`

`);break;case"h2":m||(k=i.subParser("makeMarkdown.header")(p,b,2)+`

`);break;case"h3":m||(k=i.subParser("makeMarkdown.header")(p,b,3)+`

`);break;case"h4":m||(k=i.subParser("makeMarkdown.header")(p,b,4)+`

`);break;case"h5":m||(k=i.subParser("makeMarkdown.header")(p,b,5)+`

`);break;case"h6":m||(k=i.subParser("makeMarkdown.header")(p,b,6)+`

`);break;case"p":m||(k=i.subParser("makeMarkdown.paragraph")(p,b)+`

`);break;case"blockquote":m||(k=i.subParser("makeMarkdown.blockquote")(p,b)+`

`);break;case"hr":m||(k=i.subParser("makeMarkdown.hr")(p,b)+`

`);break;case"ol":m||(k=i.subParser("makeMarkdown.list")(p,b,"ol")+`

`);break;case"ul":m||(k=i.subParser("makeMarkdown.list")(p,b,"ul")+`

`);break;case"precode":m||(k=i.subParser("makeMarkdown.codeBlock")(p,b)+`

`);break;case"pre":m||(k=i.subParser("makeMarkdown.pre")(p,b)+`

`);break;case"table":m||(k=i.subParser("makeMarkdown.table")(p,b)+`

`);break;case"code":k=i.subParser("makeMarkdown.codeSpan")(p,b);break;case"em":case"i":k=i.subParser("makeMarkdown.emphasis")(p,b);break;case"strong":case"b":k=i.subParser("makeMarkdown.strong")(p,b);break;case"del":k=i.subParser("makeMarkdown.strikethrough")(p,b);break;case"a":k=i.subParser("makeMarkdown.links")(p,b);break;case"img":k=i.subParser("makeMarkdown.image")(p,b);break;default:k=p.outerHTML+`

`}return k}),i.subParser("makeMarkdown.paragraph",function(p,b){var m="";if(p.hasChildNodes())for(var k=p.childNodes,C=k.length,v=0;v<C;++v)m+=i.subParser("makeMarkdown.node")(k[v],b);return m=m.trim(),m}),i.subParser("makeMarkdown.pre",function(p,b){var m=p.getAttribute("prenum");return"<pre>"+b.preList[m]+"</pre>"}),i.subParser("makeMarkdown.strikethrough",function(p,b){var m="";if(p.hasChildNodes()){m+="~~";for(var k=p.childNodes,C=k.length,v=0;v<C;++v)m+=i.subParser("makeMarkdown.node")(k[v],b);m+="~~"}return m}),i.subParser("makeMarkdown.strong",function(p,b){var m="";if(p.hasChildNodes()){m+="**";for(var k=p.childNodes,C=k.length,v=0;v<C;++v)m+=i.subParser("makeMarkdown.node")(k[v],b);m+="**"}return m}),i.subParser("makeMarkdown.table",function(p,b){var m="",k=[[],[]],C=p.querySelectorAll("thead>tr>th"),v=p.querySelectorAll("tbody>tr"),y,T;for(y=0;y<C.length;++y){var E=i.subParser("makeMarkdown.tableCell")(C[y],b),$="---";if(C[y].hasAttribute("style")){var R=C[y].getAttribute("style").toLowerCase().replace(/\s/g,"");switch(R){case"text-align:left;":$=":---";break;case"text-align:right;":$="---:";break;case"text-align:center;":$=":---:";break}}k[0][y]=E.trim(),k[1][y]=$}for(y=0;y<v.length;++y){var N=k.push([])-1,_=v[y].getElementsByTagName("td");for(T=0;T<C.length;++T){var W=" ";typeof _[T]!="undefined"&&(W=i.subParser("makeMarkdown.tableCell")(_[T],b)),k[N].push(W)}}var L=3;for(y=0;y<k.length;++y)for(T=0;T<k[y].length;++T){var I=k[y][T].length;I>L&&(L=I)}for(y=0;y<k.length;++y){for(T=0;T<k[y].length;++T)y===1?k[y][T].slice(-1)===":"?k[y][T]=i.helper.padEnd(k[y][T].slice(-1),L-1,"-")+":":k[y][T]=i.helper.padEnd(k[y][T],L,"-"):k[y][T]=i.helper.padEnd(k[y][T],L);m+="| "+k[y].join(" | ")+` |
`}return m.trim()}),i.subParser("makeMarkdown.tableCell",function(p,b){var m="";if(!p.hasChildNodes())return"";for(var k=p.childNodes,C=k.length,v=0;v<C;++v)m+=i.subParser("makeMarkdown.node")(k[v],b,!0);return m.trim()}),i.subParser("makeMarkdown.txt",function(p){var b=p.nodeValue;return b=b.replace(/ +/g," "),b=b.replace(/NBSP;/g," "),b=i.helper.unescapeHTMLEntities(b),b=b.replace(/([*_~|`])/g,"\\$1"),b=b.replace(/^(\s*)>/g,"\\$1>"),b=b.replace(/^#/gm,"\\#"),b=b.replace(/^(\s*)([-=]{3,})(\s*)$/,"$1\\$2$3"),b=b.replace(/^( {0,3}\d+)\./gm,"$1\\."),b=b.replace(/^( {0,3})([+-])/gm,"$1\\$2"),b=b.replace(/]([\s]*)\(/g,"\\]$1\\("),b=b.replace(/^ {0,3}\[([\S \t]*?)]:/gm,"\\[$1]:"),b});var M=this;r.exports?r.exports=i:M.showdown=i}).call(kte)})(yI);var wte=yI.exports;const Ci=lr("emailit"),hh=lr(void 0),uo=lr({to:"",subject:"",body:""}),Ob=lr(void 0),a$=lr(void 0),ts=lr(!1),is=lr(!1);function h$(r,e,t){const i=r.slice();return i[96]=e[t],i}function u$(r,e,t){const i=r.slice();return i[96]=e[t],i}function f$(r,e,t){const i=r.slice();return i[101]=e[t],i}function c$(r){let e,t,i,n,s,o,l,a,h,u,f,c,d,g,w,S,x,Q,M,p,b,m,k,C,v,y,T,E,$,R,N,_,W,L,I,j,X,Z,ie,G,J,ze,ve,_e,kt,Je,bt,Le,Bt;return{c(){e=B("div"),t=B("label"),t.textContent="Default:",i=F(),n=B("input"),s=F(),o=B("label"),o.textContent="Name of Account:",l=F(),a=B("input"),h=F(),u=B("label"),u.textContent="From Email:",f=F(),c=B("input"),d=F(),g=B("label"),g.textContent="Address of SMPT Server:",w=F(),S=B("input"),x=F(),Q=B("label"),Q.textContent="SMPT Server Port:",M=F(),p=B("input"),b=F(),m=B("label"),m.textContent="User Name:",k=F(),C=B("input"),v=F(),y=B("label"),y.textContent="Password:",T=F(),E=B("input"),$=F(),R=B("label"),R.textContent="Signiture:",N=F(),_=B("textarea"),W=F(),L=B("label"),L.textContent="Header HTML:",I=F(),j=B("textarea"),X=F(),Z=B("label"),Z.textContent="Footer HTML:",ie=F(),G=B("textarea"),J=F(),ze=B("div"),ve=B("button"),_e=ne("Save"),kt=F(),Je=B("button"),bt=ne("Cancel"),P(t,"for","accountDefaultInput"),P(t,"class","newAccountLabel svelte-1fv5snm"),P(n,"id","accountDefaultInput"),P(n,"type","checkbox"),P(n,"class","svelte-1fv5snm"),P(o,"for","accountNameInput"),P(o,"class","newAccountLabel svelte-1fv5snm"),P(a,"id","accountNameInput"),O(a,"background-color",r[28].textAreaColor),O(a,"color",r[28].textColor),O(a,"border-color",r[28].borderColor),P(a,"class","svelte-1fv5snm"),P(u,"for","accountFromInput"),P(u,"class","newAccountLabel svelte-1fv5snm"),P(c,"id","accountFromInput"),O(c,"background-color",r[28].textAreaColor),O(c,"color",r[28].textColor),O(c,"border-color",r[28].borderColor),P(c,"class","svelte-1fv5snm"),P(g,"for","accountSmptServerInput"),P(g,"class","newAccountLabel svelte-1fv5snm"),P(S,"id","accountSmptServerInput"),O(S,"background-color",r[28].textAreaColor),O(S,"color",r[28].textColor),O(S,"border-color",r[28].borderColor),P(S,"class","svelte-1fv5snm"),P(Q,"for","accountPortInput"),P(Q,"class","newAccountLabel svelte-1fv5snm"),P(p,"id","accountPortInput"),O(p,"background-color",r[28].textAreaColor),O(p,"color",r[28].textColor),O(p,"border-color",r[28].borderColor),P(p,"class","svelte-1fv5snm"),P(m,"for","accountUsernameInput"),P(m,"class","newAccountLabel svelte-1fv5snm"),P(C,"id","accountUsernameInput"),O(C,"background-color",r[28].textAreaColor),O(C,"color",r[28].textColor),O(C,"border-color",r[28].borderColor),P(C,"class","svelte-1fv5snm"),P(y,"for","accountPasswordInput"),P(y,"class","newAccountLabel svelte-1fv5snm"),P(E,"id","accountPasswordInput"),O(E,"background-color",r[28].textAreaColor),O(E,"color",r[28].textColor),O(E,"border-color",r[28].borderColor),P(E,"class","svelte-1fv5snm"),P(R,"for","accountSigInput"),P(R,"class","newAccountLabel svelte-1fv5snm"),P(_,"id","accountSigInput"),O(_,"background-color",r[28].textAreaColor),O(_,"color",r[28].textColor),O(_,"border-color",r[28].borderColor),P(_,"class","svelte-1fv5snm"),P(L,"for","accountHeaderHTMLInput"),P(L,"class","newAccountLabel svelte-1fv5snm"),P(j,"id","accountHeaderHTMLInput"),O(j,"background-color",r[28].textAreaColor),O(j,"color",r[28].textColor),O(j,"border-color",r[28].borderColor),P(j,"class","svelte-1fv5snm"),P(Z,"for","accountFooterHTMLInput"),P(Z,"class","newAccountLabel svelte-1fv5snm"),P(G,"id","accountFooterHTMLInput"),O(G,"background-color",r[28].textAreaColor),O(G,"color",r[28].textColor),O(G,"border-color",r[28].borderColor),P(G,"class","svelte-1fv5snm"),P(ve,"id","save"),O(ve,"background-color",r[28].textAreaColor),O(ve,"color",r[28].textColor),O(ve,"border-color",r[28].borderColor),P(ve,"class","svelte-1fv5snm"),P(Je,"id","cancel"),O(Je,"background-color",r[28].textAreaColor),O(Je,"color",r[28].textColor),O(Je,"border-color",r[28].borderColor),P(Je,"class","svelte-1fv5snm"),P(ze,"id","buttonrow"),O(ze,"grid-column","1 / span 2"),P(ze,"class","svelte-1fv5snm"),P(e,"id","newAccountDialog"),O(e,"background-color",r[28].backgroundColor),O(e,"color",r[28].textColor),O(e,"border-color",r[28].borderColor),P(e,"class","svelte-1fv5snm")},m(Pe,re){K(Pe,e,re),A(e,t),A(e,i),A(e,n),n.checked=r[16],A(e,s),A(e,o),A(e,l),A(e,a),Xe(a,r[8]),A(e,h),A(e,u),A(e,f),A(e,c),Xe(c,r[7]),A(e,d),A(e,g),A(e,w),A(e,S),Xe(S,r[10]),A(e,x),A(e,Q),A(e,M),A(e,p),Xe(p,r[12]),A(e,b),A(e,m),A(e,k),A(e,C),Xe(C,r[9]),A(e,v),A(e,y),A(e,T),A(e,E),Xe(E,r[11]),A(e,$),A(e,R),A(e,N),A(e,_),Xe(_,r[13]),A(e,W),A(e,L),A(e,I),A(e,j),Xe(j,r[14]),A(e,X),A(e,Z),A(e,ie),A(e,G),Xe(G,r[15]),A(e,J),A(e,ze),A(ze,ve),A(ve,_e),A(ze,kt),A(ze,Je),A(Je,bt),Le||(Bt=[U(n,"change",r[53]),U(a,"input",r[54]),U(c,"input",r[55]),U(S,"input",r[56]),U(p,"input",r[57]),U(C,"input",r[58]),U(E,"input",r[59]),U(_,"input",r[60]),U(j,"input",r[61]),U(G,"input",r[62]),U(ve,"click",r[43]),U(Je,"click",r[45])],Le=!0)},p(Pe,re){re[0]&65536&&(n.checked=Pe[16]),re[0]&268435456&&O(a,"background-color",Pe[28].textAreaColor),re[0]&268435456&&O(a,"color",Pe[28].textColor),re[0]&268435456&&O(a,"border-color",Pe[28].borderColor),re[0]&256&&a.value!==Pe[8]&&Xe(a,Pe[8]),re[0]&268435456&&O(c,"background-color",Pe[28].textAreaColor),re[0]&268435456&&O(c,"color",Pe[28].textColor),re[0]&268435456&&O(c,"border-color",Pe[28].borderColor),re[0]&128&&c.value!==Pe[7]&&Xe(c,Pe[7]),re[0]&268435456&&O(S,"background-color",Pe[28].textAreaColor),re[0]&268435456&&O(S,"color",Pe[28].textColor),re[0]&268435456&&O(S,"border-color",Pe[28].borderColor),re[0]&1024&&S.value!==Pe[10]&&Xe(S,Pe[10]),re[0]&268435456&&O(p,"background-color",Pe[28].textAreaColor),re[0]&268435456&&O(p,"color",Pe[28].textColor),re[0]&268435456&&O(p,"border-color",Pe[28].borderColor),re[0]&4096&&p.value!==Pe[12]&&Xe(p,Pe[12]),re[0]&268435456&&O(C,"background-color",Pe[28].textAreaColor),re[0]&268435456&&O(C,"color",Pe[28].textColor),re[0]&268435456&&O(C,"border-color",Pe[28].borderColor),re[0]&512&&C.value!==Pe[9]&&Xe(C,Pe[9]),re[0]&268435456&&O(E,"background-color",Pe[28].textAreaColor),re[0]&268435456&&O(E,"color",Pe[28].textColor),re[0]&268435456&&O(E,"border-color",Pe[28].borderColor),re[0]&2048&&E.value!==Pe[11]&&Xe(E,Pe[11]),re[0]&268435456&&O(_,"background-color",Pe[28].textAreaColor),re[0]&268435456&&O(_,"color",Pe[28].textColor),re[0]&268435456&&O(_,"border-color",Pe[28].borderColor),re[0]&8192&&Xe(_,Pe[13]),re[0]&268435456&&O(j,"background-color",Pe[28].textAreaColor),re[0]&268435456&&O(j,"color",Pe[28].textColor),re[0]&268435456&&O(j,"border-color",Pe[28].borderColor),re[0]&16384&&Xe(j,Pe[14]),re[0]&268435456&&O(G,"background-color",Pe[28].textAreaColor),re[0]&268435456&&O(G,"color",Pe[28].textColor),re[0]&268435456&&O(G,"border-color",Pe[28].borderColor),re[0]&32768&&Xe(G,Pe[15]),re[0]&268435456&&O(ve,"background-color",Pe[28].textAreaColor),re[0]&268435456&&O(ve,"color",Pe[28].textColor),re[0]&268435456&&O(ve,"border-color",Pe[28].borderColor),re[0]&268435456&&O(Je,"background-color",Pe[28].textAreaColor),re[0]&268435456&&O(Je,"color",Pe[28].textColor),re[0]&268435456&&O(Je,"border-color",Pe[28].borderColor),re[0]&268435456&&O(e,"background-color",Pe[28].backgroundColor),re[0]&268435456&&O(e,"color",Pe[28].textColor),re[0]&268435456&&O(e,"border-color",Pe[28].borderColor)},d(Pe){Pe&&Y(e),Le=!1,yt(Bt)}}}function d$(r){let e,t,i,n,s,o,l,a,h,u,f,c,d,g,w,S,x,Q,M,p,b,m,k;function C($,R){return $[27]!==void 0?vte:yte}let v=C(r),y=v(r),T=r[3],E=[];for(let $=0;$<T.length;$+=1)E[$]=p$(f$(r,T,$));return{c(){e=B("div"),t=B("h1"),t.textContent="Email It - Change Account",i=F(),y.c(),n=F(),s=B("div");for(let $=0;$<E.length;$+=1)E[$].c();o=F(),l=B("div"),a=B("button"),h=ne("Save"),u=F(),f=B("button"),c=ne("New"),d=F(),g=B("button"),w=ne("Edit"),S=F(),x=B("button"),Q=ne("Cancel"),M=F(),p=B("button"),b=ne("Delete"),P(t,"class","svelte-1fv5snm"),P(s,"id","AccountsList"),P(s,"class","svelte-1fv5snm"),P(a,"id","save"),O(a,"background-color",r[28].textAreaColor),O(a,"color",r[28].textColor),O(a,"border-color",r[28].borderColor),P(a,"class","svelte-1fv5snm"),P(f,"id","new"),O(f,"background-color",r[28].textAreaColor),O(f,"color",r[28].textColor),O(f,"border-color",r[28].borderColor),P(f,"class","svelte-1fv5snm"),P(g,"id","edit"),O(g,"background-color",r[28].textAreaColor),O(g,"color",r[28].textColor),O(g,"border-color",r[28].borderColor),P(g,"class","svelte-1fv5snm"),P(x,"id","cancel"),O(x,"background-color",r[28].textAreaColor),O(x,"color",r[28].textColor),O(x,"border-color",r[28].borderColor),P(x,"class","svelte-1fv5snm"),P(p,"id","delete"),O(p,"background-color",r[28].textAreaColor),O(p,"color",r[28].textColor),O(p,"border-color",r[28].borderColor),P(p,"class","svelte-1fv5snm"),P(l,"id","buttonrow"),P(l,"class","svelte-1fv5snm"),P(e,"id","accountsDiv"),O(e,"background-color",r[28].backgroundColor),O(e,"color",r[28].textColor),O(e,"border-color",r[28].borderColor),P(e,"class","svelte-1fv5snm")},m($,R){K($,e,R),A(e,t),A(e,i),y.m(e,null),A(e,n),A(e,s);for(let N=0;N<E.length;N+=1)E[N].m(s,null);A(e,o),A(e,l),A(l,a),A(a,h),A(l,u),A(l,f),A(f,c),A(l,d),A(l,g),A(g,w),A(l,S),A(l,x),A(x,Q),A(l,M),A(l,p),A(p,b),m||(k=[U(a,"click",r[35]),U(f,"click",r[36]),U(g,"click",r[46]),U(x,"click",r[37]),U(p,"click",r[44])],m=!0)},p($,R){if(v===(v=C($))&&y?y.p($,R):(y.d(1),y=v($),y&&(y.c(),y.m(e,n))),R[0]&268435464|R[1]&128){T=$[3];let N;for(N=0;N<T.length;N+=1){const _=f$($,T,N);E[N]?E[N].p(_,R):(E[N]=p$(_),E[N].c(),E[N].m(s,null))}for(;N<E.length;N+=1)E[N].d(1);E.length=T.length}R[0]&268435456&&O(a,"background-color",$[28].textAreaColor),R[0]&268435456&&O(a,"color",$[28].textColor),R[0]&268435456&&O(a,"border-color",$[28].borderColor),R[0]&268435456&&O(f,"background-color",$[28].textAreaColor),R[0]&268435456&&O(f,"color",$[28].textColor),R[0]&268435456&&O(f,"border-color",$[28].borderColor),R[0]&268435456&&O(g,"background-color",$[28].textAreaColor),R[0]&268435456&&O(g,"color",$[28].textColor),R[0]&268435456&&O(g,"border-color",$[28].borderColor),R[0]&268435456&&O(x,"background-color",$[28].textAreaColor),R[0]&268435456&&O(x,"color",$[28].textColor),R[0]&268435456&&O(x,"border-color",$[28].borderColor),R[0]&268435456&&O(p,"background-color",$[28].textAreaColor),R[0]&268435456&&O(p,"color",$[28].textColor),R[0]&268435456&&O(p,"border-color",$[28].borderColor),R[0]&268435456&&O(e,"background-color",$[28].backgroundColor),R[0]&268435456&&O(e,"color",$[28].textColor),R[0]&268435456&&O(e,"border-color",$[28].borderColor)},d($){$&&Y(e),y.d(),In(E,$),m=!1,yt(k)}}}function yte(r){let e;return{c(){e=B("h2"),e.textContent="Current Account: Please Create an Account",P(e,"class","svelte-1fv5snm")},m(t,i){K(t,e,i)},p:lt,d(t){t&&Y(e)}}}function vte(r){let e,t,i=r[27].name+"",n;return{c(){e=B("h2"),t=ne("Current Account: "),n=ne(i),P(e,"class","svelte-1fv5snm")},m(s,o){K(s,e,o),A(e,t),A(e,n)},p(s,o){o[0]&134217728&&i!==(i=s[27].name+"")&&tt(n,i)},d(s){s&&Y(e)}}}function p$(r){let e,t=r[101].name+"",i,n,s,o;function l(){return r[63](r[101])}return{c(){e=B("button"),i=ne(t),n=F(),O(e,"background-color",r[28].textAreaColor),O(e,"color",r[28].textColor),O(e,"border-color",r[28].borderColor),P(e,"class","svelte-1fv5snm")},m(a,h){K(a,e,h),A(e,i),A(e,n),s||(o=U(e,"click",l),s=!0)},p(a,h){r=a,h[0]&8&&t!==(t=r[101].name+"")&&tt(i,t),h[0]&268435456&&O(e,"background-color",r[28].textAreaColor),h[0]&268435456&&O(e,"color",r[28].textColor),h[0]&268435456&&O(e,"border-color",r[28].borderColor)},d(a){a&&Y(e),s=!1,o()}}}function g$(r){let e,t,i=r[20],n=[];for(let s=0;s<i.length;s+=1)n[s]=m$(u$(r,i,s));return{c(){e=B("div"),t=B("ul");for(let s=0;s<n.length;s+=1)n[s].c();P(t,"class","svelte-1fv5snm"),P(e,"id","elist"),O(e,"width",r[26].offsetWidth+"px"),O(e,"left",mm(r[26]).left+"px"),O(e,"top",mm(r[26]).top+40+"px"),O(e,"background-color",r[28].textAreaColor),O(e,"color",r[28].textColor),O(e,"border-color",r[28].borderColor),P(e,"class","svelte-1fv5snm")},m(s,o){K(s,e,o),A(e,t);for(let l=0;l<n.length;l+=1)n[l].m(t,null)},p(s,o){if(o[0]&68157440|o[1]&1){i=s[20];let l;for(l=0;l<i.length;l+=1){const a=u$(s,i,l);n[l]?n[l].p(a,o):(n[l]=m$(a),n[l].c(),n[l].m(t,null))}for(;l<n.length;l+=1)n[l].d(1);n.length=i.length}o[0]&67108864&&O(e,"width",s[26].offsetWidth+"px"),o[0]&67108864&&O(e,"left",mm(s[26]).left+"px"),o[0]&67108864&&O(e,"top",mm(s[26]).top+40+"px"),o[0]&268435456&&O(e,"background-color",s[28].textAreaColor),o[0]&268435456&&O(e,"color",s[28].textColor),o[0]&268435456&&O(e,"border-color",s[28].borderColor)},d(s){s&&Y(e),In(n,s)}}}function m$(r){let e,t=r[96]+"",i,n,s,o;function l(){return r[71](r[96])}return{c(){e=B("li"),i=ne(t),n=F(),P(e,"class","svelte-1fv5snm")},m(a,h){K(a,e,h),A(e,i),A(e,n),s||(o=U(e,"click",l),s=!0)},p(a,h){r=a,h[0]&1048576&&t!==(t=r[96]+"")&&tt(i,t)},d(a){a&&Y(e),s=!1,o()}}}function Ste(r){let e,t;return e=new lO({props:{height:"330px",width:"983px",config:r[29],initFinished:r[18],styling:"position: relative; margin-bottom: 20px; border: solid 1px transparent; border-radius: 20px; overflow: hidden;"}}),e.$on("textChange",r[73]),e.$on("editorChange",r[74]),{c(){Kt(e.$$.fragment)},m(i,n){Vt(e,i,n),t=!0},p(i,n){const s={};n[0]&262144&&(s.initFinished=i[18]),e.$set(s)},i(i){t||(Se(e.$$.fragment,i),t=!0)},o(i){Me(e.$$.fragment,i),t=!1},d(i){jt(e,i)}}}function xte(r){let e;return{c(){e=B("div"),P(e,"id","preview"),O(e,"border-color",r[28].textColor),P(e,"class","svelte-1fv5snm")},m(t,i){K(t,e,i),e.innerHTML=r[17]},p(t,i){i[0]&131072&&(e.innerHTML=t[17]),i[0]&268435456&&O(e,"border-color",t[28].textColor)},i:lt,o:lt,d(t){t&&Y(e)}}}function Cte(r){let e,t,i,n,s,o,l;return{c(){e=B("button"),t=ne("Edit"),i=F(),n=B("button"),s=ne("Send"),P(e,"id","edit"),O(e,"background-color",r[28].textAreaColor),O(e,"color",r[28].textColor),O(e,"border-color",r[28].borderColor),P(e,"class","svelte-1fv5snm"),P(n,"id","send"),O(n,"background-color",r[28].textAreaColor),O(n,"color",r[28].textColor),O(n,"border-color",r[28].borderColor),P(n,"class","svelte-1fv5snm")},m(a,h){K(a,e,h),A(e,t),K(a,i,h),K(a,n,h),A(n,s),o||(l=[U(e,"click",r[40]),U(n,"click",r[41])],o=!0)},p(a,h){h[0]&268435456&&O(e,"background-color",a[28].textAreaColor),h[0]&268435456&&O(e,"color",a[28].textColor),h[0]&268435456&&O(e,"border-color",a[28].borderColor),h[0]&268435456&&O(n,"background-color",a[28].textAreaColor),h[0]&268435456&&O(n,"color",a[28].textColor),h[0]&268435456&&O(n,"border-color",a[28].borderColor)},d(a){a&&Y(e),a&&Y(i),a&&Y(n),o=!1,yt(l)}}}function Ate(r){let e,t,i,n;return{c(){e=B("button"),t=ne("Preview"),P(e,"id","showPreview"),O(e,"background-color",r[28].textAreaColor),O(e,"color",r[28].textColor),O(e,"border-color",r[28].borderColor),P(e,"class","svelte-1fv5snm")},m(s,o){K(s,e,o),A(e,t),i||(n=U(e,"click",r[39]),i=!0)},p(s,o){o[0]&268435456&&O(e,"background-color",s[28].textAreaColor),o[0]&268435456&&O(e,"color",s[28].textColor),o[0]&268435456&&O(e,"border-color",s[28].borderColor)},d(s){s&&Y(e),i=!1,n()}}}function Tte(r){let e,t=r[27].name+"",i,n,s;return{c(){e=B("button"),i=ne(t),P(e,"id","account"),O(e,"background-color",r[28].textAreaColor),O(e,"color",r[28].textColor),O(e,"border-color",r[28].borderColor),P(e,"class","svelte-1fv5snm")},m(o,l){K(o,e,l),A(e,i),n||(s=U(e,"click",r[34]),n=!0)},p(o,l){l[0]&134217728&&t!==(t=o[27].name+"")&&tt(i,t),l[0]&268435456&&O(e,"background-color",o[28].textAreaColor),l[0]&268435456&&O(e,"color",o[28].textColor),l[0]&268435456&&O(e,"border-color",o[28].borderColor)},d(o){o&&Y(e),n=!1,s()}}}function Pte(r){let e,t,i,n;return{c(){e=B("button"),t=ne("Create a New Account"),P(e,"id","account"),O(e,"background-color",r[28].textAreaColor),O(e,"color",r[28].textColor),O(e,"border-color",r[28].borderColor),P(e,"class","svelte-1fv5snm")},m(s,o){K(s,e,o),A(e,t),i||(n=U(e,"click",r[36]),i=!0)},p(s,o){o[0]&268435456&&O(e,"background-color",s[28].textAreaColor),o[0]&268435456&&O(e,"color",s[28].textColor),o[0]&268435456&&O(e,"border-color",s[28].borderColor)},d(s){s&&Y(e),i=!1,n()}}}function b$(r){let e,t,i,n,s,o,l,a,h,u,f,c,d=r[19].length>0&&O$(r);return{c(){e=B("div"),t=B("h1"),i=ne(r[21]),n=F(),s=B("p"),o=ne(r[22]),l=F(),d&&d.c(),a=F(),h=B("button"),u=ne("Close"),P(t,"class","svelte-1fv5snm"),P(h,"class","alertbutton svelte-1fv5snm"),O(h,"background-color",r[28].textAreaColor),O(h,"color",r[28].textColor),O(h,"border-color",r[28].borderColor),O(h,"border-color",r[28].backgroundColor),P(e,"id","alert"),O(e,"background-color",r[28].textAreaColor),O(e,"color",r[28].textColor),O(e,"border-color",r[28].borderColor),P(e,"class","svelte-1fv5snm")},m(g,w){K(g,e,w),A(e,t),A(t,i),A(e,n),A(e,s),A(s,o),A(e,l),d&&d.m(e,null),A(e,a),A(e,h),A(h,u),f||(c=U(h,"click",r[75]),f=!0)},p(g,w){w[0]&2097152&&tt(i,g[21]),w[0]&4194304&&tt(o,g[22]),g[19].length>0?d?d.p(g,w):(d=O$(g),d.c(),d.m(e,a)):d&&(d.d(1),d=null),w[0]&268435456&&O(h,"background-color",g[28].textAreaColor),w[0]&268435456&&O(h,"color",g[28].textColor),w[0]&268435456&&O(h,"border-color",g[28].borderColor),w[0]&268435456&&O(h,"border-color",g[28].backgroundColor),w[0]&268435456&&O(e,"background-color",g[28].textAreaColor),w[0]&268435456&&O(e,"color",g[28].textColor),w[0]&268435456&&O(e,"border-color",g[28].borderColor)},d(g){g&&Y(e),d&&d.d(),f=!1,c()}}}function O$(r){let e,t=r[19],i=[];for(let n=0;n<t.length;n+=1)i[n]=k$(h$(r,t,n));return{c(){e=B("ul");for(let n=0;n<i.length;n+=1)i[n].c();P(e,"class","svelte-1fv5snm")},m(n,s){K(n,e,s);for(let o=0;o<i.length;o+=1)i[o].m(e,null)},p(n,s){if(s[0]&524288){t=n[19];let o;for(o=0;o<t.length;o+=1){const l=h$(n,t,o);i[o]?i[o].p(l,s):(i[o]=k$(l),i[o].c(),i[o].m(e,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=t.length}},d(n){n&&Y(e),In(i,n)}}}function k$(r){let e,t=r[96]+"",i;return{c(){e=B("li"),i=ne(t),P(e,"class","svelte-1fv5snm")},m(n,s){K(n,e,s),A(e,i)},p(n,s){s[0]&524288&&t!==(t=n[96]+"")&&tt(i,t)},d(n){n&&Y(e)}}}function w$(r){let e,t,i;function n(o){r[76](o)}let s={};return r[25]!==void 0&&(s.show=r[25]),e=new Ote({props:s}),sr.push(()=>I2(e,"show",n)),{c(){Kt(e.$$.fragment)},m(o,l){Vt(e,o,l),i=!0},p(o,l){const a={};!t&&l[0]&33554432&&(t=!0,a.show=o[25],N2(()=>t=!1)),e.$set(a)},i(o){i||(Se(e.$$.fragment,o),i=!0)},o(o){Me(e.$$.fragment,o),i=!1},d(o){jt(e,o)}}}function _te(r){let e,t,i,n,s,o,l,a,h,u,f,c,d,g,w,S,x,Q,M,p,b,m,k,C,v,y,T,E,$,R,N,_,W,L,I,j,X,Z,ie,G,J,ze,ve,_e=r[5]&&c$(r),kt=r[4]&&d$(r),Je=r[24]&&r[20].length>0&&g$(r);const bt=[xte,Ste],Le=[];function Bt(ae,Ee){return ae[6]?0:1}Q=Bt(r),M=Le[Q]=bt[Q](r);function Pe(ae,Ee){return ae[2]==="edit"?Ate:Cte}let re=Pe(r),qe=re(r);function Fi(ae,Ee){return ae[27]===void 0?Pte:Tte}let sn=Fi(r),Ft=sn(r),vt=r[23]&&b$(r),mt=r[25]&&w$(r);return{c(){e=B("div"),_e&&_e.c(),t=F(),kt&&kt.c(),i=F(),n=B("h1"),n.textContent="Email It",s=F(),o=B("div"),l=B("div"),a=B("label"),a.textContent="To:",h=F(),u=B("input"),f=F(),Je&&Je.c(),c=F(),d=B("div"),g=B("label"),g.textContent="Subject:",w=F(),S=B("input"),x=F(),M.c(),p=F(),b=B("div"),m=B("button"),k=ne("Notes"),C=F(),qe.c(),v=F(),Ft.c(),y=F(),T=B("button"),E=ne("Clear"),$=F(),R=B("button"),N=ne("Templates"),_=F(),W=B("button"),L=ne("Scripts"),I=F(),j=B("button"),X=ne("Address Book"),Z=F(),vt&&vt.c(),ie=F(),mt&&mt.c(),G=bn(),P(n,"class","svelte-1fv5snm"),P(a,"for","receiverInput"),P(a,"class","svelte-1fv5snm"),P(u,"id","receiverInput"),P(u,"class","receiverInput svelte-1fv5snm"),O(u,"background-color",r[28].textAreaColor),O(u,"color",r[28].textColor),O(u,"border-color",r[28].borderColor),P(l,"class","headerRow svelte-1fv5snm"),P(g,"for","subject"),P(g,"class","svelte-1fv5snm"),P(S,"id","subject"),O(S,"background-color",r[28].textAreaColor),O(S,"color",r[28].textColor),O(S,"border-color",r[28].borderColor),P(S,"class","svelte-1fv5snm"),P(d,"class","headerRow svelte-1fv5snm"),P(o,"id","header"),P(o,"class","svelte-1fv5snm"),O(m,"background-color",r[28].textAreaColor),O(m,"color",r[28].textColor),O(m,"border-color",r[28].borderColor),P(m,"class","svelte-1fv5snm"),P(T,"id","clear"),O(T,"background-color",r[28].textAreaColor),O(T,"color",r[28].textColor),O(T,"border-color",r[28].borderColor),P(T,"class","svelte-1fv5snm"),O(R,"background-color",r[28].textAreaColor),O(R,"color",r[28].textColor),O(R,"border-color",r[28].borderColor),P(R,"class","svelte-1fv5snm"),O(W,"background-color",r[28].textAreaColor),O(W,"color",r[28].textColor),O(W,"border-color",r[28].borderColor),P(W,"class","svelte-1fv5snm"),P(j,"id","addressBook"),O(j,"background-color",r[28].textAreaColor),O(j,"color",r[28].textColor),O(j,"border-color",r[28].borderColor),P(j,"class","svelte-1fv5snm"),P(b,"id","buttonrow"),P(b,"class","svelte-1fv5snm"),P(e,"id","main"),O(e,"background-color",r[28].backgroundColor),O(e,"font-family",r[28].font),O(e,"color",r[28].textColor),O(e,"font-size",r[28].fontSize),P(e,"class","svelte-1fv5snm")},m(ae,Ee){K(ae,e,Ee),_e&&_e.m(e,null),A(e,t),kt&&kt.m(e,null),A(e,i),A(e,n),A(e,s),A(e,o),A(o,l),A(l,a),A(l,h),A(l,u),Xe(u,r[0]),r[65](u),A(l,f),Je&&Je.m(l,null),A(o,c),A(o,d),A(d,g),A(d,w),A(d,S),r[72](S),A(e,x),Le[Q].m(e,null),A(e,p),A(e,b),A(b,m),A(m,k),A(b,C),qe.m(b,null),A(b,v),Ft.m(b,null),A(b,y),A(b,T),A(T,E),A(b,$),A(b,R),A(R,N),A(b,_),A(b,W),A(W,L),A(b,I),A(b,j),A(j,X),K(ae,Z,Ee),vt&&vt.m(ae,Ee),K(ae,ie,Ee),mt&&mt.m(ae,Ee),K(ae,G,Ee),J=!0,ze||(ve=[U(u,"input",r[64]),U(u,"blur",r[66]),U(u,"focus",r[67]),U(u,"keydown",r[68]),U(u,"keyup",r[69]),U(u,"change",r[70]),U(S,"blur",r[48]),U(m,"click",r[47]),U(T,"click",r[42]),U(R,"click",r[50]),U(W,"click",r[49]),U(j,"click",r[52])],ze=!0)},p(ae,Ee){ae[5]?_e?_e.p(ae,Ee):(_e=c$(ae),_e.c(),_e.m(e,t)):_e&&(_e.d(1),_e=null),ae[4]?kt?kt.p(ae,Ee):(kt=d$(ae),kt.c(),kt.m(e,i)):kt&&(kt.d(1),kt=null),(!J||Ee[0]&268435456)&&O(u,"background-color",ae[28].textAreaColor),(!J||Ee[0]&268435456)&&O(u,"color",ae[28].textColor),(!J||Ee[0]&268435456)&&O(u,"border-color",ae[28].borderColor),Ee[0]&1&&u.value!==ae[0]&&Xe(u,ae[0]),ae[24]&&ae[20].length>0?Je?Je.p(ae,Ee):(Je=g$(ae),Je.c(),Je.m(l,null)):Je&&(Je.d(1),Je=null),(!J||Ee[0]&268435456)&&O(S,"background-color",ae[28].textAreaColor),(!J||Ee[0]&268435456)&&O(S,"color",ae[28].textColor),(!J||Ee[0]&268435456)&&O(S,"border-color",ae[28].borderColor);let Dt=Q;Q=Bt(ae),Q===Dt?Le[Q].p(ae,Ee):(Bn(),Me(Le[Dt],1,1,()=>{Le[Dt]=null}),Nn(),M=Le[Q],M?M.p(ae,Ee):(M=Le[Q]=bt[Q](ae),M.c()),Se(M,1),M.m(e,p)),(!J||Ee[0]&268435456)&&O(m,"background-color",ae[28].textAreaColor),(!J||Ee[0]&268435456)&&O(m,"color",ae[28].textColor),(!J||Ee[0]&268435456)&&O(m,"border-color",ae[28].borderColor),re===(re=Pe(ae))&&qe?qe.p(ae,Ee):(qe.d(1),qe=re(ae),qe&&(qe.c(),qe.m(b,v))),sn===(sn=Fi(ae))&&Ft?Ft.p(ae,Ee):(Ft.d(1),Ft=sn(ae),Ft&&(Ft.c(),Ft.m(b,y))),(!J||Ee[0]&268435456)&&O(T,"background-color",ae[28].textAreaColor),(!J||Ee[0]&268435456)&&O(T,"color",ae[28].textColor),(!J||Ee[0]&268435456)&&O(T,"border-color",ae[28].borderColor),(!J||Ee[0]&268435456)&&O(R,"background-color",ae[28].textAreaColor),(!J||Ee[0]&268435456)&&O(R,"color",ae[28].textColor),(!J||Ee[0]&268435456)&&O(R,"border-color",ae[28].borderColor),(!J||Ee[0]&268435456)&&O(W,"background-color",ae[28].textAreaColor),(!J||Ee[0]&268435456)&&O(W,"color",ae[28].textColor),(!J||Ee[0]&268435456)&&O(W,"border-color",ae[28].borderColor),(!J||Ee[0]&268435456)&&O(j,"background-color",ae[28].textAreaColor),(!J||Ee[0]&268435456)&&O(j,"color",ae[28].textColor),(!J||Ee[0]&268435456)&&O(j,"border-color",ae[28].borderColor),(!J||Ee[0]&268435456)&&O(e,"background-color",ae[28].backgroundColor),(!J||Ee[0]&268435456)&&O(e,"font-family",ae[28].font),(!J||Ee[0]&268435456)&&O(e,"color",ae[28].textColor),(!J||Ee[0]&268435456)&&O(e,"font-size",ae[28].fontSize),ae[23]?vt?vt.p(ae,Ee):(vt=b$(ae),vt.c(),vt.m(ie.parentNode,ie)):vt&&(vt.d(1),vt=null),ae[25]?mt?(mt.p(ae,Ee),Ee[0]&33554432&&Se(mt,1)):(mt=w$(ae),mt.c(),Se(mt,1),mt.m(G.parentNode,G)):mt&&(Bn(),Me(mt,1,1,()=>{mt=null}),Nn())},i(ae){J||(Se(M),Se(mt),J=!0)},o(ae){Me(M),Me(mt),J=!1},d(ae){ae&&Y(e),_e&&_e.d(),kt&&kt.d(),r[65](null),Je&&Je.d(),r[72](null),Le[Q].d(),qe.d(),Ft.d(),ae&&Y(Z),vt&&vt.d(ae),ae&&Y(ie),mt&&mt.d(ae),ae&&Y(G),ze=!1,yt(ve)}}}function $te(r){return r.replace(/<hr>/gimu,`
`).replace(/<[/]*[^>]+>/gimu,"")}function Mte(r){if(r.includes("<")){const t=new RegExp(/^[^<]*\<([^\>]*)\>/);r=r.match(t)[1]}return new RegExp(/^[a-zA-Z0-9][\-_\.\+\!\#\$\%\&\'\*\/\=\?\^\`\{\|]{0,1}([a-zA-Z0-9][\-_\.\+\!\#\$\%\&\'\*\/\=\?\^\`\{\|]{0,1})*[a-zA-Z0-9]@[a-zA-Z0-9][-\.]{0,1}([a-zA-Z][-\.]{0,1})*[a-zA-Z0-9]\.[a-zA-Z0-9]{1,}([\.\-]{0,1}[a-zA-Z]){0,}[a-zA-Z0-9]{0,}$/i).test(r)}function Rte(r){fetch("http://localhost:9978/api/emailit/accounts",{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(r)})}function Qte(r){fetch("http://localhost:9978/api/emailit/accounts",{method:"DELETE",headers:{"Content-type":"application/json"},body:r})}function mm(r){var e=0,t=0;do e+=r.offsetTop||0,t+=r.offsetLeft||0,r=r.offsetParent;while(r);return{top:e,left:t}}function Dte(r,e,t){let i,n,s,o,l,a,h;Re(r,uo,le=>t(82,i=le)),Re(r,is,le=>t(83,n=le)),Re(r,ts,le=>t(84,s=le)),Re(r,Ob,le=>t(85,o=le)),Re(r,hh,le=>t(27,l=le)),Re(r,a$,le=>t(86,a=le)),Re(r,et,le=>t(28,h=le));let u="",f="",c="edit",d,g=!1,w=!1,S=!1,x,Q="",M="",p="",b="",m="",k="",C="",v="",y="",T=!1,E="",$="",R="",N=[],_={language:"markdown",lineNumbers:!1,lineWrapping:!0,lineHighlight:!0},W=!0,L=[],I=[],j="",X="",Z=!1,ie=!1,G=!1,J;Sr(()=>{Je(),qe(),t(2,c="edit"),R="edit",t(18,W=!0)}),jh(()=>{a!==void 0&&a!==""&&(t(0,u=a),fe(uo,i.to=a,i),fe(a$,a=void 0,a)),o!==null&&c==="edit"&&R==="preview"&&(o.setValue($),R="edit")});function ze(le){if(le!==void 0&&(le.key==="Escape"||le.key==="Tab"))t(24,ie=!1),le.key!=="Tab"&&le.preventDefault();else{var rt=u.toString().toLowerCase(),wt="",ur=rt.split(",");ur.length>1?(wt=ur[ur.length-1],t(20,I=N.filter(Bs=>Bs.toString().toLowerCase().includes(wt.trim())))):t(20,I=N.filter(Bs=>Bs.toString().toLowerCase().includes(rt)))}}function ve(le){var rt=u.split(",");rt.length>1?(t(0,u=rt.slice(0,rt.length-1).map(wt=>wt.trim()).join(",")+", "+le),t(26,J.selectionStart=u.length,J)):t(0,u=le)}function _e(le){fe(Ob,o=le,o)}function kt(le){fe(uo,i.body=le.value,i),$=le.value}function Je(le){fetch("http://localhost:9978/api/emailit/emails",{method:"GET",headers:{"Content-type":"application/json"}}).then(rt=>rt.json()).then(rt=>{N=rt.emails.map(wt=>wt.name===""?wt.email:`${wt.name.trim()} <${wt.email.trim()}>`),typeof le!="undefined"&&le()})}function bt(){x=l,t(4,g=!g)}function Le(){c==="preview"&&Ft(),t(4,g=!1)}function Bt(){t(8,M=""),t(16,T=!1),t(7,Q=""),t(9,p=""),t(10,b=""),t(11,m=""),t(12,k=""),t(13,C=""),t(14,v=""),t(15,y="")}function Pe(){Bt(),t(5,w=!0)}function re(){fe(hh,l=x,l),c==="edit"?$=o.getValue():Ft(),t(4,g=!1)}function qe(le){fetch("http://localhost:9978/api/emailit/accounts",{method:"GET",headers:{"Content-type":"application/json"}}).then(rt=>rt.json()).then(rt=>{t(3,d=rt),d.length>0&&l===void 0&&fe(hh,l=d.find(wt=>wt.default),l),typeof le!="undefined"&&le()})}function Fi(le){fe(hh,l=le,l),c==="edit"?$=o.getValue():Ft()}function sn(){var le;if(typeof i.to!="undefined")le=i.to;else{var rt=document.getElementById("receiverInput").value;le=rt}Ee(le)?($=o.getValue(),t(2,c="preview"),R=c,Ft(),t(6,S=!0)):ae()}function Ft(){var le=new wte.Converter({extensions:[]});le.setOption("tables",!0),t(17,E=le.makeHtml($+l.signiture)),typeof l.headerHTML!="undefined"&&t(17,E=l.headerHTML+E+l.footerHTML)}async function vt(){t(2,c="edit"),t(6,S=!1)}async function mt(){var le;if(typeof i.to!="undefined")le=i.to;else{var rt=document.getElementById("receiverInput").value;le=rt}if(Ee(le)){Dt(le);var wt=$+$te(l.signiture);t(6,S=!1),t(2,c="edit"),fetch("http://localhost:9978/api/emailit/send",{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify({acc:l,to:le,from:l.from,subject:f.value,text:wt,html:E})})}else ae()}function ae(){t(21,j="Invalid Emails"),t(22,X="Please fix these emails!"),t(23,Z=!0)}function Ee(le){var rt=!0;return t(19,L=[]),le.toString().split(",").forEach(wt=>{Mte(wt.trim())||(rt=!1,L.push(wt))}),rt}function Dt(le){le.toString().split(",").forEach(rt=>{var wt=rt,ur="";if(rt.includes("<")){const Bs=new RegExp(/^([^<]*)\<([^\>]*)\>/),vs=rt.match(Bs);ur=vs[1],wt=vs[2]}Hi(ur,wt)})}function Hi(le,rt){rt=rt.trim(),le=le.trim(),N=N.filter(wt=>wt.email!==rt),N.push({name:le,email:rt}),N=N,fetch("http://localhost:9978/api/emailit/addEmail",{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify({name:le,email:rt})})}function Ui(){var le=document.getElementById("receiverInput");le.value="",t(0,u=""),t(1,f.value="",f),o.setValue(""),$="",fe(uo,i.to="",i),fe(uo,i.subject="",i),fe(uo,i.body="",i),t(6,S=!1),t(2,c="edit"),R="edit"}function ar(){var le={name:M,default:T,from:Q,username:p,smtpserver:b,port:k,password:m,signiture:C,headerHTML:v,footerHTML:y};Rte(le),T&&t(3,d=d.map(wt=>(wt.default=!1,wt)));var rt=d.filter(wt=>wt.name===le.name);rt.length>0&&(t(3,d=d.filter(wt=>wt.name!==le.name)),d.push(le)),fe(hh,l=le,l),t(3,d),c==="preview"&&Ft(),Bt(),t(5,w=!1)}function Ht(){var le=l;t(3,d=d.filter(rt=>rt.name!==le.name)),d.length>0?(fe(hh,l=d[0],l),x=d[0],c==="preview"&&Ft()):(t(5,w=!1),fe(hh,l=void 0,l),x=void 0),Qte(le)}function Nr(){Bt(),t(5,w=!1)}function hr(){t(8,M=l.name),t(16,T=l.default),t(7,Q=l.from),t(9,p=l.username),t(10,b=l.smtpserver),t(11,m=l.password),t(12,k=l.port),t(13,C=l.signiture),t(14,v=l.headerHTML),t(15,y=l.footerHTML),t(5,w=!0)}function ks(){ws(),Ci.set("notes")}function ws(){if(o!==null){var le=document.getElementById("receiverInput");fe(uo,i.to=le.value,i),fe(uo,i.body=o.getValue(),i),fe(uo,i.subject=f.value,i)}}function Yi(){fe(ts,s=!s,s)}function D(){fe(is,n=!n,n)}function z(){fe(uo,i.to=u,i)}function H(){t(25,G=!G)}function q(){T=this.checked,t(16,T)}function te(){M=this.value,t(8,M)}function ee(){Q=this.value,t(7,Q)}function $e(){b=this.value,t(10,b)}function Qe(){k=this.value,t(12,k)}function We(){p=this.value,t(9,p)}function St(){m=this.value,t(11,m)}function pi(){C=this.value,t(13,C)}function el(){v=this.value,t(14,v)}function Ua(){y=this.value,t(15,y)}const iu=le=>{Fi(le)};function Ml(){u=this.value,t(0,u)}function nu(le){sr[le?"unshift":"push"](()=>{J=le,t(26,J)})}const Es=()=>{z()},Rl=()=>{t(24,ie=!0),ze(),t(26,J.selectionStart=u.length,J)},tl=le=>{ze(le)},Ql=le=>{ze(le)},Ya=()=>{ze()},ru=le=>{ve(le),J.focus()};function Dl(le){sr[le?"unshift":"push"](()=>{f=le,t(1,f)})}const su=le=>{kt(le.detail.data)},ys=le=>{_e(le.detail.data)},il=()=>{t(23,Z=!1)};function Ir(le){G=le,t(25,G)}return[u,f,c,d,g,w,S,Q,M,p,b,m,k,C,v,y,T,E,W,L,I,j,X,Z,ie,G,J,l,h,_,ze,ve,_e,kt,bt,Le,Pe,re,Fi,sn,vt,mt,Ui,ar,Ht,Nr,hr,ks,ws,Yi,D,z,H,q,te,ee,$e,Qe,We,St,pi,el,Ua,iu,Ml,nu,Es,Rl,tl,Ql,Ya,ru,Dl,su,ys,il,Ir]}class Ete extends _i{constructor(e){super(),Pi(this,e,Dte,_te,ki,{},null,[-1,-1,-1,-1])}}function y$(r){window.runtime.BrowserOpenURL(r)}function Bte(r){let e;return{c(){e=B("div"),P(e,"id","logItems"),P(e,"class","svelte-1p4g52i")},m(t,i){K(t,e,i),e.innerHTML=r[0],r[7](e)},p(t,i){i&1&&(e.innerHTML=t[0])},d(t){t&&Y(e),r[7](null)}}}function Nte(r){let e;return{c(){e=B("p"),e.textContent="No Logs"},m(t,i){K(t,e,i)},p:lt,d(t){t&&Y(e)}}}function Ite(r){let e,t,i,n,s,o,l,a,h,u,f,c,d,g,w,S;function x(p,b){return typeof p[0]=="undefined"?Nte:Bte}let Q=x(r),M=Q(r);return{c(){e=B("div"),M.c(),t=F(),i=B("div"),n=B("button"),s=ne("EmailIt"),o=F(),l=B("button"),a=ne("Notes"),h=F(),u=B("button"),f=ne("Node-Red"),c=F(),d=B("button"),g=ne("Node-Red Dashboard"),O(n,"background-color",r[2].textAreaColor),O(n,"color",r[2].textColor),O(n,"border-color",r[2].borderColor),P(n,"class","svelte-1p4g52i"),O(l,"background-color",r[2].textAreaColor),O(l,"color",r[2].textColor),O(l,"border-color",r[2].borderColor),P(l,"class","svelte-1p4g52i"),O(u,"background-color",r[2].textAreaColor),O(u,"color",r[2].textColor),O(u,"border-color",r[2].borderColor),P(u,"class","svelte-1p4g52i"),O(d,"background-color",r[2].textAreaColor),O(d,"color",r[2].textColor),O(d,"border-color",r[2].borderColor),P(d,"class","svelte-1p4g52i"),P(i,"id","buttonRow"),P(i,"class","svelte-1p4g52i"),P(e,"id","log"),O(e,"background-color",r[2].backgroundColor),O(e,"font-family",r[2].font),O(e,"color",r[2].textColor),O(e,"font-size",r[2].fontSize),P(e,"class","svelte-1p4g52i")},m(p,b){K(p,e,b),M.m(e,null),A(e,t),A(e,i),A(i,n),A(n,s),A(i,o),A(i,l),A(l,a),A(i,h),A(i,u),A(u,f),A(i,c),A(i,d),A(d,g),w||(S=[U(n,"click",r[3]),U(l,"click",r[4]),U(u,"click",r[5]),U(d,"click",r[6])],w=!0)},p(p,[b]){Q===(Q=x(p))&&M?M.p(p,b):(M.d(1),M=Q(p),M&&(M.c(),M.m(e,t))),b&4&&O(n,"background-color",p[2].textAreaColor),b&4&&O(n,"color",p[2].textColor),b&4&&O(n,"border-color",p[2].borderColor),b&4&&O(l,"background-color",p[2].textAreaColor),b&4&&O(l,"color",p[2].textColor),b&4&&O(l,"border-color",p[2].borderColor),b&4&&O(u,"background-color",p[2].textAreaColor),b&4&&O(u,"color",p[2].textColor),b&4&&O(u,"border-color",p[2].borderColor),b&4&&O(d,"background-color",p[2].textAreaColor),b&4&&O(d,"color",p[2].textColor),b&4&&O(d,"border-color",p[2].borderColor),b&4&&O(e,"background-color",p[2].backgroundColor),b&4&&O(e,"font-family",p[2].font),b&4&&O(e,"color",p[2].textColor),b&4&&O(e,"font-size",p[2].fontSize)},i:lt,o:lt,d(p){p&&Y(e),M.d(),w=!1,yt(S)}}}function Lte(r){var e="";return r.map(t=>e+="<p>"+t.replaceAll(" ","&nbsp;").replaceAll(`
`,"<br />").replaceAll("	","&nbsp;&nbsp;")+"</p>"),e}function zte(r,e,t){let i;Re(r,et,c=>t(2,i=c));let n,s;Sr(()=>{o()}),jh(()=>{typeof s!="undefined"&&t(1,s.scrollTop=s.scrollHeight,s)});function o(c){fetch("http://localhost:9978/api/messages",{method:"GET",headers:{"Content-type":"application/json"}}).then(d=>d.json()).then(d=>{t(0,n=Lte(d.data)),typeof c!="undefined"&&c()})}function l(){Ci.set("emailit")}function a(){Ci.set("notes")}async function h(){y$("http://localhost:9978/red/admin")}async function u(){y$("http://localhost:9978/red/api/ui")}function f(c){sr[c?"unshift":"push"](()=>{s=c,t(1,s)})}return[n,s,i,l,a,h,u,f]}class Wte extends _i{constructor(e){super(),Pi(this,e,zte,Ite,ki,{})}}const v$=lr(0),gw=lr(["","","","","","","","","",""]),mw=lr(["","","","","","","","","",""]),kb=lr(void 0);function S$(r,e,t){const i=r.slice();return i[27]=e[t],i[29]=t,i}function x$(r){let e,t,i,n;function s(){return r[15](r[29])}return{c(){e=B("div"),P(e,"class",t="noteButton "+(r[1]===r[2].buttons[r[29]].id?"selectedButton":"")+" svelte-yyde1d"),O(e,"background-color",r[2].buttons[r[29]].color)},m(o,l){K(o,e,l),i||(n=U(e,"click",s),i=!0)},p(o,l){r=o,l&6&&t!==(t="noteButton "+(r[1]===r[2].buttons[r[29]].id?"selectedButton":"")+" svelte-yyde1d")&&P(e,"class",t),l&4&&O(e,"background-color",r[2].buttons[r[29]].color)},d(o){o&&Y(e),i=!1,n()}}}function Vte(r){let e,t,i,n,s,o,l,a,h,u,f,c,d,g,w,S,x,Q,M,p,b,m,k,C,v,y,T;i=new lO({props:{height:"500px",width:"900px",config:r[3],initFinished:r[0]}}),i.$on("textChange",r[13]),i.$on("editorChange",r[14]);let E=r[2].buttons,$=[];for(let R=0;R<E.length;R+=1)$[R]=x$(S$(r,E,R));return{c(){e=B("div"),t=B("div"),Kt(i.$$.fragment),n=F(),s=B("div");for(let R=0;R<$.length;R+=1)$[R].c();o=F(),l=B("div"),a=B("button"),h=ne("EmailIt"),u=F(),f=B("button"),c=ne("Logs"),d=F(),g=B("button"),w=ne("Scripts"),S=F(),x=B("button"),Q=ne("Templates"),M=F(),p=B("button"),b=ne("Edit Scripts"),m=F(),k=B("button"),C=ne("Edit Templates"),P(s,"id","noteButtons"),P(s,"class","svelte-yyde1d"),P(t,"id","editorRow"),P(t,"class","svelte-yyde1d"),O(a,"background-color",r[2].textAreaColor),O(a,"color",r[2].textColor),O(a,"border-color",r[2].borderColor),P(a,"class","svelte-yyde1d"),O(f,"background-color",r[2].textAreaColor),O(f,"color",r[2].textColor),O(f,"border-color",r[2].borderColor),P(f,"class","svelte-yyde1d"),O(g,"background-color",r[2].textAreaColor),O(g,"color",r[2].textColor),O(g,"border-color",r[2].borderColor),P(g,"class","svelte-yyde1d"),O(x,"background-color",r[2].textAreaColor),O(x,"color",r[2].textColor),O(x,"border-color",r[2].borderColor),P(x,"class","svelte-yyde1d"),O(p,"background-color",r[2].textAreaColor),O(p,"color",r[2].textColor),O(p,"border-color",r[2].borderColor),P(p,"class","svelte-yyde1d"),O(k,"background-color",r[2].textAreaColor),O(k,"color",r[2].textColor),O(k,"border-color",r[2].borderColor),P(k,"class","svelte-yyde1d"),P(l,"id","buttonRow"),P(l,"class","svelte-yyde1d"),P(e,"id","notes"),O(e,"background-color",r[2].backgroundColor),O(e,"font-family",r[2].font),O(e,"color",r[2].textColor),O(e,"font-size",r[2].fontSize),P(e,"class","svelte-yyde1d")},m(R,N){K(R,e,N),A(e,t),Vt(i,t,null),A(t,n),A(t,s);for(let _=0;_<$.length;_+=1)$[_].m(s,null);A(e,o),A(e,l),A(l,a),A(a,h),A(l,u),A(l,f),A(f,c),A(l,d),A(l,g),A(g,w),A(l,S),A(l,x),A(x,Q),A(l,M),A(l,p),A(p,b),A(l,m),A(l,k),A(k,C),v=!0,y||(T=[U(a,"click",r[7]),U(f,"click",r[6]),U(g,"click",r[9]),U(x,"click",r[10]),U(p,"click",r[12]),U(k,"click",r[11])],y=!0)},p(R,[N]){const _={};if(N&1&&(_.initFinished=R[0]),i.$set(_),N&262){E=R[2].buttons;let W;for(W=0;W<E.length;W+=1){const L=S$(R,E,W);$[W]?$[W].p(L,N):($[W]=x$(L),$[W].c(),$[W].m(s,null))}for(;W<$.length;W+=1)$[W].d(1);$.length=E.length}(!v||N&4)&&O(a,"background-color",R[2].textAreaColor),(!v||N&4)&&O(a,"color",R[2].textColor),(!v||N&4)&&O(a,"border-color",R[2].borderColor),(!v||N&4)&&O(f,"background-color",R[2].textAreaColor),(!v||N&4)&&O(f,"color",R[2].textColor),(!v||N&4)&&O(f,"border-color",R[2].borderColor),(!v||N&4)&&O(g,"background-color",R[2].textAreaColor),(!v||N&4)&&O(g,"color",R[2].textColor),(!v||N&4)&&O(g,"border-color",R[2].borderColor),(!v||N&4)&&O(x,"background-color",R[2].textAreaColor),(!v||N&4)&&O(x,"color",R[2].textColor),(!v||N&4)&&O(x,"border-color",R[2].borderColor),(!v||N&4)&&O(p,"background-color",R[2].textAreaColor),(!v||N&4)&&O(p,"color",R[2].textColor),(!v||N&4)&&O(p,"border-color",R[2].borderColor),(!v||N&4)&&O(k,"background-color",R[2].textAreaColor),(!v||N&4)&&O(k,"color",R[2].textColor),(!v||N&4)&&O(k,"border-color",R[2].borderColor),(!v||N&4)&&O(e,"background-color",R[2].backgroundColor),(!v||N&4)&&O(e,"font-family",R[2].font),(!v||N&4)&&O(e,"color",R[2].textColor),(!v||N&4)&&O(e,"font-size",R[2].fontSize)},i(R){v||(Se(i.$$.fragment,R),v=!0)},o(R){Me(i.$$.fragment,R),v=!1},d(R){R&&Y(e),jt(i),In($,R),y=!1,yt(T)}}}function jte(r,e,t){let i,n,s,o,l,a,h,u;Re(r,Ci,R=>t(16,i=R)),Re(r,is,R=>t(17,n=R)),Re(r,ts,R=>t(18,s=R)),Re(r,kb,R=>t(19,o=R)),Re(r,v$,R=>t(1,l=R)),Re(r,mw,R=>t(20,a=R)),Re(r,gw,R=>t(21,h=R)),Re(r,et,R=>t(2,u=R));let f={language:"markdown",lineNumbers:!0,lineWrapping:!0,lineHighlight:!0},c=!1;Sr(()=>{d()});function d(){g(0),g(1),g(2),g(3),g(4),g(5),g(6),g(7),g(8),g(9,async()=>{t(0,c=!0),await B2(),m(l),Q()})}function g(R,N){fetch(`http://localhost:9978/api/note/${R}/w`,{method:"GET",headers:{"Content-type":"application/json"}}).then(_=>_.json()).then(_=>{fe(gw,h[R]=_.note,h),typeof N!="undefined"&&N()})}function w(R){var N=h[R];fetch(`http://localhost:9978/api/note/${R}/w`,{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify({note:N})})}function S(R){fe(kb,o=R,o)}function x(R){fe(gw,h[l]=R.value,h),fe(mw,a[l]=R.cursor,a),w(l)}function Q(){o!==null&&o.focus()}function M(){b(),fe(Ci,i="viewlog",i)}function p(){b(),fe(Ci,i="emailit",i)}function b(){fe(mw,a[l]=o.getCursor(),a)}function m(R){fe(v$,l=R,l),o.setValue(h[l]);var N=parseInt(a[l]);Number.isInteger(N)||(N=0),o.setCursor(N),Q()}function k(){fe(ts,s=!s,s)}function C(){fe(is,n=!n,n)}function v(){fe(Ci,i="templates",i)}function y(){fe(Ci,i="scripts",i)}return[c,l,u,f,S,x,M,p,m,k,C,v,y,R=>{x(R.detail.data)},R=>{S(R.detail.data)},R=>{m(R)}]}class Fte extends _i{constructor(e){super(),Pi(this,e,jte,Vte,ki,{})}}const Yd=lr([]),wb=lr(void 0),yb=lr(void 0);function C$(r,e,t){const i=r.slice();return i[20]=e[t],i[22]=t,i}function A$(r){let e,t=r[2],i=[];for(let n=0;n<t.length;n+=1)i[n]=T$(C$(r,t,n));return{c(){for(let n=0;n<i.length;n+=1)i[n].c();e=bn()},m(n,s){for(let o=0;o<i.length;o+=1)i[o].m(n,s);K(n,e,s)},p(n,s){if(s&212){t=n[2];let o;for(o=0;o<t.length;o+=1){const l=C$(n,t,o);i[o]?i[o].p(l,s):(i[o]=T$(l),i[o].c(),i[o].m(e.parentNode,e))}for(;o<i.length;o+=1)i[o].d(1);i.length=t.length}},d(n){In(i,n),n&&Y(e)}}}function T$(r){let e,t=r[20].name+"",i,n,s,o,l;function a(){return r[11](r[20])}return{c(){e=B("li"),i=ne(t),n=F(),O(e,"background-color",r[4]===r[22]?r[6].Purple:"transparent"),P(e,"data-key",s=r[22]),P(e,"class","svelte-n0htir")},m(h,u){K(h,e,u),A(e,i),A(e,n),o||(l=U(e,"click",a),o=!0)},p(h,u){r=h,u&4&&t!==(t=r[20].name+"")&&tt(i,t),u&80&&O(e,"background-color",r[4]===r[22]?r[6].Purple:"transparent")},d(h){h&&Y(e),o=!1,l()}}}function Hte(r){let e,t,i,n,s,o,l,a=typeof r[5]=="object"&&A$(r);return{c(){e=B("div"),t=B("input"),i=F(),n=B("div"),s=B("ul"),a&&a.c(),P(t,"type","text"),O(t,"background-color",r[6].textAreaColor),O(t,"font-family",r[6].font),O(t,"color",r[6].textColor),O(t,"font-size",r[6].fontSize),O(t,"border","solid 3px "+r[6].borderColor),P(t,"class","svelte-n0htir"),P(s,"class","svelte-n0htir"),P(n,"id","list"),P(n,"class","svelte-n0htir"),P(e,"id","scriptmenu"),O(e,"left",r[1]?"10px":"-900px"),O(e,"background-color",r[6].backgroundColor),O(e,"font-family",r[6].font),O(e,"color",r[6].textColor),O(e,"font-size",r[6].fontSize),O(e,"border","solid 3px "+r[6].borderColor),P(e,"class","svelte-n0htir")},m(h,u){K(h,e,u),A(e,t),Xe(t,r[0]),r[10](t),A(e,i),A(e,n),A(n,s),a&&a.m(s,null),o||(l=[U(t,"input",r[9]),U(t,"keydown",r[8])],o=!0)},p(h,[u]){u&64&&O(t,"background-color",h[6].textAreaColor),u&64&&O(t,"font-family",h[6].font),u&64&&O(t,"color",h[6].textColor),u&64&&O(t,"font-size",h[6].fontSize),u&64&&O(t,"border","solid 3px "+h[6].borderColor),u&1&&t.value!==h[0]&&Xe(t,h[0]),typeof h[5]=="object"?a?a.p(h,u):(a=A$(h),a.c(),a.m(s,null)):a&&(a.d(1),a=null),u&2&&O(e,"left",h[1]?"10px":"-900px"),u&64&&O(e,"background-color",h[6].backgroundColor),u&64&&O(e,"font-family",h[6].font),u&64&&O(e,"color",h[6].textColor),u&64&&O(e,"font-size",h[6].fontSize),u&64&&O(e,"border","solid 3px "+h[6].borderColor)},i:lt,o:lt,d(h){h&&Y(e),r[10](null),a&&a.d(),o=!1,yt(l)}}}function qte(r,e,t){let i,n,s,o,l,a,h,u;Re(r,ts,k=>t(1,i=k)),Re(r,wb,k=>t(13,n=k)),Re(r,Ci,k=>t(14,s=k)),Re(r,yb,k=>t(15,o=k)),Re(r,kb,k=>t(16,l=k)),Re(r,Ob,k=>t(17,a=k)),Re(r,Yd,k=>t(5,h=k)),Re(r,et,k=>t(6,u=k));let f="",c=[],d,g=!0,w=0;Sr(()=>{});function S(k){k&&(t(4,w=0),t(0,f=""),d.focus())}jh(()=>{i&&g&&(t(2,c=x(f)),g=!1,d.focus())});function x(k){var C=[];return k===""||k===void 0?C=h:(k=k.toLowerCase(),C=h.filter(v=>v!=null?v.name.toLowerCase().includes(k):!1)),C=C.sort((v,y)=>v.name.toLowerCase()>y.name.toLowerCase()),C}function Q(k){var C="",v=!1;s==="emailit"?a.somethingSelected()?(v=!0,C=a.getSelection()):C=a.getValue():s==="notes"?l.somethingSelected()?(v=!0,C=l.getSelection()):C=l.getValue():s==="scripts"?o.somethingSelected()?(v=!0,C=o.getSelection()):C=o.getValue():s==="templates"&&(n.somethingSelected()?(v=!0,C=n.getSelection()):C=n.getValue()),fetch("http://localhost:9978/api/script/run",{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify({script:k.name,text:C})}).then(y=>y.json()).then(y=>{s==="emailit"?(v?a.replaceSelection(y.text):k.insert?a.insertAtCursor(y.text):a.setValue(y.text),a.focus()):s==="notes"?(v?l.replaceSelection(y.text):k.insert?l.insertAtCursor(y.text):l.setValue(y.text),l.focus()):s==="scripts"?(v?o.replaceSelection(y.text):k.insert?o.insertAtCursor(y.text):o.setValue(y.text),o.focus()):s==="templates"&&(v?n.replaceSelection(y.text):k.insert?n.insertAtCursor(y.text):n.setValue(y.text),n.focus()),fe(ts,i=!1,i),t(0,f="")})}function M(k){switch(k.key){case"ArrowDown":k.preventDefault(),t(4,w+=1),w>=c.length&&t(4,w=c.length-1);break;case"ArrowUp":k.preventDefault(),t(4,w-=1),w<0&&t(4,w=0);break;case"Enter":k.preventDefault(),Q(c[w]);break;case"Escape":fe(ts,i=!1,i);break}}function p(){f=this.value,t(0,f)}function b(k){sr[k?"unshift":"push"](()=>{d=k,t(3,d)})}const m=k=>{Q(k)};return r.$$.update=()=>{r.$$.dirty&1&&t(2,c=x(f)),r.$$.dirty&2&&S(i)},[f,i,c,d,w,h,u,Q,M,p,b,m]}class Xte extends _i{constructor(e){super(),Pi(this,e,qte,Hte,ki,{})}}const Kd=lr([]);function P$(r,e,t){const i=r.slice();return i[20]=e[t],i[22]=t,i}function _$(r){let e,t=r[2],i=[];for(let n=0;n<t.length;n+=1)i[n]=$$(P$(r,t,n));return{c(){for(let n=0;n<i.length;n+=1)i[n].c();e=bn()},m(n,s){for(let o=0;o<i.length;o+=1)i[o].m(n,s);K(n,e,s)},p(n,s){if(s&212){t=n[2];let o;for(o=0;o<t.length;o+=1){const l=P$(n,t,o);i[o]?i[o].p(l,s):(i[o]=$$(l),i[o].c(),i[o].m(e.parentNode,e))}for(;o<i.length;o+=1)i[o].d(1);i.length=t.length}},d(n){In(i,n),n&&Y(e)}}}function $$(r){let e,t=r[20]+"",i,n,s,o,l;function a(){return r[11](r[20])}return{c(){e=B("li"),i=ne(t),n=F(),O(e,"background-color",r[4]===r[22]?r[6].Purple:"transparent"),P(e,"data-key",s=r[22]),P(e,"class","svelte-wbzyyy")},m(h,u){K(h,e,u),A(e,i),A(e,n),o||(l=U(e,"click",a),o=!0)},p(h,u){r=h,u&4&&t!==(t=r[20]+"")&&tt(i,t),u&80&&O(e,"background-color",r[4]===r[22]?r[6].Purple:"transparent")},d(h){h&&Y(e),o=!1,l()}}}function Zte(r){let e,t,i,n,s,o,l,a=typeof r[5]=="object"&&_$(r);return{c(){e=B("div"),t=B("input"),i=F(),n=B("div"),s=B("ul"),a&&a.c(),P(t,"type","text"),O(t,"background-color",r[6].textAreaColor),O(t,"font-family",r[6].font),O(t,"color",r[6].textColor),O(t,"font-size",r[6].fontSize),O(t,"border","solid 3px "+r[6].borderColor),P(t,"class","svelte-wbzyyy"),P(s,"class","svelte-wbzyyy"),P(n,"id","list"),P(n,"class","svelte-wbzyyy"),P(e,"id","templatemenu"),O(e,"left",r[1]?"10px":"-900px"),O(e,"background-color",r[6].backgroundColor),O(e,"font-family",r[6].font),O(e,"color",r[6].textColor),O(e,"font-size",r[6].fontSize),O(e,"border","solid 3px "+r[6].borderColor),P(e,"class","svelte-wbzyyy")},m(h,u){K(h,e,u),A(e,t),Xe(t,r[0]),r[10](t),A(e,i),A(e,n),A(n,s),a&&a.m(s,null),o||(l=[U(t,"input",r[9]),U(t,"keydown",r[8])],o=!0)},p(h,[u]){u&64&&O(t,"background-color",h[6].textAreaColor),u&64&&O(t,"font-family",h[6].font),u&64&&O(t,"color",h[6].textColor),u&64&&O(t,"font-size",h[6].fontSize),u&64&&O(t,"border","solid 3px "+h[6].borderColor),u&1&&t.value!==h[0]&&Xe(t,h[0]),typeof h[5]=="object"?a?a.p(h,u):(a=_$(h),a.c(),a.m(s,null)):a&&(a.d(1),a=null),u&2&&O(e,"left",h[1]?"10px":"-900px"),u&64&&O(e,"background-color",h[6].backgroundColor),u&64&&O(e,"font-family",h[6].font),u&64&&O(e,"color",h[6].textColor),u&64&&O(e,"font-size",h[6].fontSize),u&64&&O(e,"border","solid 3px "+h[6].borderColor)},i:lt,o:lt,d(h){h&&Y(e),r[10](null),a&&a.d(),o=!1,yt(l)}}}function Gte(r,e,t){let i,n,s,o,l,a,h,u;Re(r,is,k=>t(1,i=k)),Re(r,wb,k=>t(13,n=k)),Re(r,Ci,k=>t(14,s=k)),Re(r,yb,k=>t(15,o=k)),Re(r,kb,k=>t(16,l=k)),Re(r,Ob,k=>t(17,a=k)),Re(r,Kd,k=>t(5,h=k)),Re(r,et,k=>t(6,u=k));let f="",c=[],d,g=!0,w=0;Sr(()=>{});function S(k){k&&(t(4,w=0),t(0,f=""),d.focus())}jh(()=>{i&&g&&(t(2,c=x(f)),g=!1,d.focus())});function x(k){var C=[];return k===""||k===void 0?C=h:(k=k.toLowerCase(),C=h.filter(v=>v!=null?v.toLowerCase().includes(k):!1)),C=C.sort((v,y)=>v.toLowerCase()>y.toLowerCase()),C}function Q(k){var C="",v=!1;s==="emailit"?a.somethingSelected()?(v=!0,C=a.getSelection()):C=a.getValue():s==="notes"?l.somethingSelected()?(v=!0,C=l.getSelection()):C=l.getValue():s==="scripts"?o.somethingSelected()?(v=!0,C=o.getSelection()):C=o.getValue():s==="templates"&&(n.somethingSelected()?(v=!0,C=n.getSelection()):C=n.getValue()),fetch("http://localhost:9978/api/template/run",{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify({template:k,text:C})}).then(y=>y.json()).then(y=>{s==="emailit"?(v?a.replaceSelection(y.text):a.setValue(y.text),a.focus()):s==="notes"?(v?l.replaceSelection(y.text):l.setValue(y.text),l.focus()):s==="scripts"?(v?o.replaceSelection(y.text):o.setValue(y.text),o.focus()):s==="templates"&&(v?n.replaceSelection(y.text):n.setValue(y.text),n.focus()),fe(is,i=!1,i),t(0,f="")})}function M(k){switch(k.key){case"ArrowDown":k.preventDefault(),t(4,w+=1),w>=c.length&&t(4,w=c.length-1);break;case"ArrowUp":k.preventDefault(),t(4,w-=1),w<0&&t(4,w=0);break;case"Enter":k.preventDefault(),Q(c[w]);break;case"Escape":fe(is,i=!1,i);break}}function p(){f=this.value,t(0,f)}function b(k){sr[k?"unshift":"push"](()=>{d=k,t(3,d)})}const m=k=>{Q(k)};return r.$$.update=()=>{r.$$.dirty&1&&t(2,c=x(f)),r.$$.dirty&2&&S(i)},[f,i,c,d,w,h,u,Q,M,p,b,m]}class Ute extends _i{constructor(e){super(),Pi(this,e,Gte,Zte,ki,{})}}const Yte=r=>({noResultsText:r[0]&2048}),M$=r=>({noResultsText:r[11]}),Kte=r=>({createText:r[0]&8192}),R$=r=>({createText:r[13]}),Jte=r=>({loadingText:r[0]&4096}),Q$=r=>({loadingText:r[12]});function D$(r,e,t){const i=r.slice();return i[107]=e[t],i[109]=t,i}const eie=r=>({item:r[1]&1,label:r[1]&1}),E$=r=>({item:r[107].item,label:r[107].highlighted?r[107].highlighted.label:r[107].label});function B$(r,e,t){const i=r.slice();return i[110]=e[t],i}const tie=r=>({label:r[0]&2,item:r[0]&2}),N$=r=>({label:r[35](r[110]),item:r[110],unselectItem:r[42]});function I$(r,e,t){const i=r.slice();return i[109]=e[t],i}function iie(r){let e,t=r[1],i=[];for(let n=0;n<t.length;n+=1)i[n]=L$(I$(r,t,n));return{c(){for(let n=0;n<i.length;n+=1)i[n].c();e=bn()},m(n,s){for(let o=0;o<i.length;o+=1)i[o].m(n,s);K(n,e,s)},p(n,s){if(s[0]&18|s[1]&16){t=n[1];let o;for(o=0;o<t.length;o+=1){const l=I$(n,t,o);i[o]?i[o].p(l,s):(i[o]=L$(l),i[o].c(),i[o].m(e.parentNode,e))}for(;o<i.length;o+=1)i[o].d(1);i.length=t.length}},d(n){In(i,n),n&&Y(e)}}}function nie(r){let e,t;return{c(){e=B("option"),t=ne(r[3]),e.__value=r[2],e.value=e.__value,e.selected=!0,P(e,"class","svelte-xmtx21")},m(i,n){K(i,e,n),A(e,t)},p(i,n){n[0]&8&&tt(t,i[3]),n[0]&22&&(e.__value=i[2],e.value=e.__value)},d(i){i&&Y(e)}}}function L$(r){let e,t=r[35](r[109])+"",i,n,s;return{c(){e=B("option"),i=ne(t),n=F(),e.__value=s=r[4](r[109],!0),e.value=e.__value,e.selected=!0,P(e,"class","svelte-xmtx21")},m(o,l){K(o,e,l),A(e,i),A(e,n)},p(o,l){l[0]&2&&t!==(t=o[35](o[109])+"")&&tt(i,t),l[0]&18&&s!==(s=o[4](o[109],!0))&&(e.__value=s,e.value=e.__value)},d(o){o&&Y(e)}}}function z$(r){let e,t,i=r[1],n=[];for(let o=0;o<i.length;o+=1)n[o]=W$(B$(r,i,o));const s=o=>Me(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=bn()},m(o,l){for(let a=0;a<n.length;a+=1)n[a].m(o,l);K(o,e,l),t=!0},p(o,l){if(l[0]&2|l[1]&2064|l[2]&2048){i=o[1];let a;for(a=0;a<i.length;a+=1){const h=B$(o,i,a);n[a]?(n[a].p(h,l),Se(n[a],1)):(n[a]=W$(h),n[a].c(),Se(n[a],1),n[a].m(e.parentNode,e))}for(Bn(),a=i.length;a<n.length;a+=1)s(a);Nn()}},i(o){if(!t){for(let l=0;l<i.length;l+=1)Se(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)Me(n[l]);t=!1},d(o){In(n,o),o&&Y(e)}}}function rie(r){let e,t,i=r[35](r[110])+"",n,s,o,l,a,h;function u(){return r[76](r[110])}return{c(){e=B("div"),t=B("span"),n=ne(i),s=F(),o=B("span"),l=F(),P(t,"class","tag svelte-xmtx21"),P(o,"class","tag is-delete svelte-xmtx21"),P(e,"class","tags has-addons svelte-xmtx21")},m(f,c){K(f,e,c),A(e,t),A(t,n),A(e,s),A(e,o),K(f,l,c),a||(h=U(o,"click",_I(u)),a=!0)},p(f,c){r=f,c[0]&2&&i!==(i=r[35](r[110])+"")&&tt(n,i)},d(f){f&&Y(e),f&&Y(l),a=!1,h()}}}function W$(r){let e;const t=r[74].tag,i=Jd(t,r,r[73],N$),n=i||rie(r);return{c(){n&&n.c()},m(s,o){n&&n.m(s,o),e=!0},p(s,o){i?i.p&&(!e||o[0]&2|o[2]&2048)&&tp(i,t,s,s[73],e?ep(t,s[73],o,tie):ip(s[73]),N$):n&&n.p&&(!e||o[0]&2)&&n.p(s,e?o:[-1,-1,-1,-1])},i(s){e||(Se(n,s),e=!0)},o(s){Me(n,s),e=!1},d(s){n&&n.d(s)}}}function V$(r){let e,t,i;return{c(){e=B("span"),e.textContent="\u2716",P(e,"class","autocomplete-clear-button svelte-xmtx21")},m(n,s){K(n,e,s),t||(i=U(e,"click",r[46]),t=!0)},p:lt,d(n){n&&Y(e),t=!1,i()}}}function sie(r){let e,t;const i=r[74]["no-results"],n=Jd(i,r,r[73],M$),s=n||hie(r);return{c(){e=B("div"),s&&s.c(),P(e,"class","autocomplete-list-item-no-results svelte-xmtx21")},m(o,l){K(o,e,l),s&&s.m(e,null),t=!0},p(o,l){n?n.p&&(!t||l[0]&2048|l[2]&2048)&&tp(n,i,o,o[73],t?ep(i,o[73],l,Yte):ip(o[73]),M$):s&&s.p&&(!t||l[0]&2048)&&s.p(o,t?l:[-1,-1,-1,-1])},i(o){t||(Se(s,o),t=!0)},o(o){Me(s,o),t=!1},d(o){o&&Y(e),s&&s.d(o)}}}function oie(r){let e,t,i,n;const s=r[74].create,o=Jd(s,r,r[73],R$),l=o||uie(r);return{c(){e=B("div"),l&&l.c(),P(e,"class","autocomplete-list-item-create svelte-xmtx21")},m(a,h){K(a,e,h),l&&l.m(e,null),t=!0,i||(n=U(e,"click",r[36]),i=!0)},p(a,h){o?o.p&&(!t||h[0]&8192|h[2]&2048)&&tp(o,s,a,a[73],t?ep(s,a[73],h,Kte):ip(a[73]),R$):l&&l.p&&(!t||h[0]&8192)&&l.p(a,t?h:[-1,-1,-1,-1])},i(a){t||(Se(l,a),t=!0)},o(a){Me(l,a),t=!1},d(a){a&&Y(e),l&&l.d(a),i=!1,n()}}}function lie(r){let e,t;const i=r[74].loading,n=Jd(i,r,r[73],Q$),s=n||fie(r);return{c(){e=B("div"),s&&s.c(),P(e,"class","autocomplete-list-item-loading svelte-xmtx21")},m(o,l){K(o,e,l),s&&s.m(e,null),t=!0},p(o,l){n?n.p&&(!t||l[0]&4096|l[2]&2048)&&tp(n,i,o,o[73],t?ep(i,o[73],l,Jte):ip(o[73]),Q$):s&&s.p&&(!t||l[0]&4096)&&s.p(o,t?l:[-1,-1,-1,-1])},i(o){t||(Se(s,o),t=!0)},o(o){Me(s,o),t=!1},d(o){o&&Y(e),s&&s.d(o)}}}function aie(r){let e,t,i,n=r[31],s=[];for(let a=0;a<n.length;a+=1)s[a]=H$(D$(r,n,a));const o=a=>Me(s[a],1,1,()=>{s[a]=null});let l=r[5]>0&&r[31].length>r[5]&&q$(r);return{c(){for(let a=0;a<s.length;a+=1)s[a].c();e=F(),l&&l.c(),t=bn()},m(a,h){for(let u=0;u<s.length;u+=1)s[u].m(a,h);K(a,e,h),l&&l.m(a,h),K(a,t,h),i=!0},p(a,h){if(h[0]&1073741856|h[1]&131137|h[2]&2048){n=a[31];let u;for(u=0;u<n.length;u+=1){const f=D$(a,n,u);s[u]?(s[u].p(f,h),Se(s[u],1)):(s[u]=H$(f),s[u].c(),Se(s[u],1),s[u].m(e.parentNode,e))}for(Bn(),u=n.length;u<s.length;u+=1)o(u);Nn()}a[5]>0&&a[31].length>a[5]?l?l.p(a,h):(l=q$(a),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},i(a){if(!i){for(let h=0;h<n.length;h+=1)Se(s[h]);i=!0}},o(a){s=s.filter(Boolean);for(let h=0;h<s.length;h+=1)Me(s[h]);i=!1},d(a){In(s,a),a&&Y(e),l&&l.d(a),a&&Y(t)}}}function hie(r){let e;return{c(){e=ne(r[11])},m(t,i){K(t,e,i)},p(t,i){i[0]&2048&&tt(e,t[11])},d(t){t&&Y(e)}}}function uie(r){let e;return{c(){e=ne(r[13])},m(t,i){K(t,e,i)},p(t,i){i[0]&8192&&tt(e,t[13])},d(t){t&&Y(e)}}}function fie(r){let e;return{c(){e=ne(r[12])},m(t,i){K(t,e,i)},p(t,i){i[0]&4096&&tt(e,t[12])},d(t){t&&Y(e)}}}function j$(r){let e,t,i=r[107]&&F$(r);return{c(){i&&i.c(),e=bn()},m(n,s){i&&i.m(n,s),K(n,e,s),t=!0},p(n,s){n[107]?i?(i.p(n,s),s[1]&1&&Se(i,1)):(i=F$(n),i.c(),Se(i,1),i.m(e.parentNode,e)):i&&(Bn(),Me(i,1,1,()=>{i=null}),Nn())},i(n){t||(Se(i),t=!0)},o(n){Me(i),t=!1},d(n){i&&i.d(n),n&&Y(e)}}}function F$(r){let e,t,i,n,s;const o=r[74].item,l=Jd(o,r,r[73],E$),a=l||pie(r);function h(){return r[79](r[107])}function u(){return r[80](r[109])}return{c(){e=B("div"),a&&a.c(),P(e,"class",t="autocomplete-list-item "+(r[109]===r[30]?"selected":"")+" svelte-xmtx21"),Tu(e,"confirmed",r[48](r[107].item))},m(f,c){K(f,e,c),a&&a.m(e,null),i=!0,n||(s=[U(e,"click",h),U(e,"pointerenter",u)],n=!0)},p(f,c){r=f,l?l.p&&(!i||c[1]&1|c[2]&2048)&&tp(l,o,r,r[73],i?ep(o,r[73],c,eie):ip(r[73]),E$):a&&a.p&&(!i||c[1]&1)&&a.p(r,i?c:[-1,-1,-1,-1]),(!i||c[0]&1073741824&&t!==(t="autocomplete-list-item "+(r[109]===r[30]?"selected":"")+" svelte-xmtx21"))&&P(e,"class",t),c[0]&1073741824|c[1]&131073&&Tu(e,"confirmed",r[48](r[107].item))},i(f){i||(Se(a,f),i=!0)},o(f){Me(a,f),i=!1},d(f){f&&Y(e),a&&a.d(f),n=!1,yt(s)}}}function cie(r){let e,t=r[107].label+"",i;return{c(){e=new v4(!1),i=bn(),e.a=i},m(n,s){e.m(t,n,s),K(n,i,s)},p(n,s){s[1]&1&&t!==(t=n[107].label+"")&&e.p(t)},d(n){n&&Y(i),n&&e.d()}}}function die(r){let e,t=r[107].highlighted.label+"",i;return{c(){e=new v4(!1),i=bn(),e.a=i},m(n,s){e.m(t,n,s),K(n,i,s)},p(n,s){s[1]&1&&t!==(t=n[107].highlighted.label+"")&&e.p(t)},d(n){n&&Y(i),n&&e.d()}}}function pie(r){let e;function t(s,o){return s[107].highlighted?die:cie}let i=t(r),n=i(r);return{c(){n.c(),e=bn()},m(s,o){n.m(s,o),K(s,e,o)},p(s,o){i===(i=t(s))&&n?n.p(s,o):(n.d(1),n=i(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){n.d(s),s&&Y(e)}}}function H$(r){let e,t,i=r[107]&&(r[5]<=0||r[109]<r[5])&&j$(r);return{c(){i&&i.c(),e=bn()},m(n,s){i&&i.m(n,s),K(n,e,s),t=!0},p(n,s){n[107]&&(n[5]<=0||n[109]<n[5])?i?(i.p(n,s),s[0]&32|s[1]&1&&Se(i,1)):(i=j$(n),i.c(),Se(i,1),i.m(e.parentNode,e)):i&&(Bn(),Me(i,1,1,()=>{i=null}),Nn())},i(n){t||(Se(i),t=!0)},o(n){Me(i),t=!1},d(n){i&&i.d(n),n&&Y(e)}}}function q$(r){let e,t,i=r[31].length-r[5]+"",n,s;return{c(){e=B("div"),t=ne("..."),n=ne(i),s=ne(" results not shown"),P(e,"class","autocomplete-list-item-no-results svelte-xmtx21")},m(o,l){K(o,e,l),A(e,t),A(e,n),A(e,s)},p(o,l){l[0]&32|l[1]&1&&i!==(i=o[31].length-o[5]+"")&&tt(n,i)},d(o){o&&Y(e)}}}function gie(r){let e,t,i,n,s,o,l,a,h,u,f,c,d,g,w,S,x,Q,M,p;function b($,R){if(!$[6]&&$[2])return nie;if($[6]&&$[1])return iie}let m=b(r),k=m&&m(r),C=r[6]&&r[1]&&z$(r),v=r[32]&&V$(r);const y=[aie,lie,oie,sie],T=[];function E($,R){return $[31]&&$[31].length>0?0:$[29]&&$[12]?1:$[7]?2:$[11]?3:-1}return~(g=E(r))&&(w=T[g]=y[g](r)),{c(){e=B("div"),t=B("select"),k&&k.c(),i=F(),n=B("div"),C&&C.c(),s=F(),o=B("input"),f=F(),v&&v.c(),c=F(),d=B("div"),w&&w.c(),P(t,"name",r[19]),P(t,"id",r[20]),P(t,"class","svelte-xmtx21"),r[2]===void 0&&Gu(()=>r[75].call(t)),P(o,"type","text"),P(o,"class",l=(r[16]?r[16]:"")+" input autocomplete-input svelte-xmtx21"),P(o,"id",a=r[17]?r[17]:""),P(o,"autocomplete",h=r[22]?"on":"off"),P(o,"placeholder",r[14]),P(o,"name",r[18]),o.disabled=r[25],P(o,"title",r[21]),o.readOnly=u=r[23]||r[8]&&r[1],O(o,"background-color",r[26].textAreaColor),O(o,"color",r[26].textColor),O(o,"border-color",r[26].borderColor),P(n,"class","input-container svelte-xmtx21"),P(d,"class",S=(r[24]?r[24]:"")+" autocomplete-list "+(r[33]?"":"hidden")+" is-fullwidth svelte-xmtx21"),O(d,"background-color",r[26].textAreaColor),O(d,"color",r[26].textColor),O(d,"border-color",r[26].borderColor),P(e,"class",x=(r[15]?r[15]:"")+" "+(r[9]||!r[0].length?"hide-arrow":"")+" "+(r[6]?"is-multiple":"")+" autocomplete select is-fullwidth "+r[34]+" svelte-xmtx21"),Tu(e,"show-clear",r[32]),Tu(e,"is-loading",r[10]&&r[29])},m($,R){K($,e,R),A(e,t),k&&k.m(t,null),Zu(t,r[2]),A(e,i),A(e,n),C&&C.m(n,null),A(n,s),A(n,o),r[77](o),Xe(o,r[3]),A(n,f),v&&v.m(n,null),A(e,c),A(e,d),~g&&T[g].m(d,null),r[81](d),Q=!0,M||(p=[U(window,"click",r[38]),U(t,"change",r[75]),TI(r[47].call(null,t)),U(o,"input",r[78]),U(o,"input",r[41]),U(o,"focus",r[44]),U(o,"blur",r[45]),U(o,"keydown",r[39]),U(o,"click",r[43]),U(o,"keypress",r[40])],M=!0)},p($,R){m===(m=b($))&&k?k.p($,R):(k&&k.d(1),k=m&&m($),k&&(k.c(),k.m(t,null))),(!Q||R[0]&524288)&&P(t,"name",$[19]),(!Q||R[0]&1048576)&&P(t,"id",$[20]),R[0]&22&&Zu(t,$[2]),$[6]&&$[1]?C?(C.p($,R),R[0]&66&&Se(C,1)):(C=z$($),C.c(),Se(C,1),C.m(n,s)):C&&(Bn(),Me(C,1,1,()=>{C=null}),Nn()),(!Q||R[0]&65536&&l!==(l=($[16]?$[16]:"")+" input autocomplete-input svelte-xmtx21"))&&P(o,"class",l),(!Q||R[0]&131072&&a!==(a=$[17]?$[17]:""))&&P(o,"id",a),(!Q||R[0]&4194304&&h!==(h=$[22]?"on":"off"))&&P(o,"autocomplete",h),(!Q||R[0]&16384)&&P(o,"placeholder",$[14]),(!Q||R[0]&262144)&&P(o,"name",$[18]),(!Q||R[0]&33554432)&&(o.disabled=$[25]),(!Q||R[0]&2097152)&&P(o,"title",$[21]),(!Q||R[0]&8388866&&u!==(u=$[23]||$[8]&&$[1]))&&(o.readOnly=u),(!Q||R[0]&67108864)&&O(o,"background-color",$[26].textAreaColor),(!Q||R[0]&67108864)&&O(o,"color",$[26].textColor),(!Q||R[0]&67108864)&&O(o,"border-color",$[26].borderColor),R[0]&8&&o.value!==$[3]&&Xe(o,$[3]),$[32]?v?v.p($,R):(v=V$($),v.c(),v.m(n,null)):v&&(v.d(1),v=null);let N=g;g=E($),g===N?~g&&T[g].p($,R):(w&&(Bn(),Me(T[N],1,1,()=>{T[N]=null}),Nn()),~g?(w=T[g],w?w.p($,R):(w=T[g]=y[g]($),w.c()),Se(w,1),w.m(d,null)):w=null),(!Q||R[0]&16777216|R[1]&4&&S!==(S=($[24]?$[24]:"")+" autocomplete-list "+($[33]?"":"hidden")+" is-fullwidth svelte-xmtx21"))&&P(d,"class",S),(!Q||R[0]&67108864)&&O(d,"background-color",$[26].textAreaColor),(!Q||R[0]&67108864)&&O(d,"color",$[26].textColor),(!Q||R[0]&67108864)&&O(d,"border-color",$[26].borderColor),(!Q||R[0]&33345&&x!==(x=($[15]?$[15]:"")+" "+($[9]||!$[0].length?"hide-arrow":"")+" "+($[6]?"is-multiple":"")+" autocomplete select is-fullwidth "+$[34]+" svelte-xmtx21"))&&P(e,"class",x),R[0]&33345|R[1]&2&&Tu(e,"show-clear",$[32]),R[0]&536905281&&Tu(e,"is-loading",$[10]&&$[29])},i($){Q||(Se(C),Se(w),Q=!0)},o($){Me(C),Me(w),Q=!1},d($){$&&Y(e),k&&k.d(),C&&C.d(),r[77](null),v&&v.d(),~g&&T[g].d(),r[81](null),M=!1,yt(p)}}}function bw(r,e){typeof r!="function"&&console.error("Not a function: "+r+", argument: "+e);let t;try{t=r(e)}catch{console.warn("Error executing Autocomplete function on value: "+e+" function: "+r)}let i=t;return i==null&&(i=""),typeof i!="string"&&(i=i.toString()),i}function Ow(r,e){if(!r)return 0;const t=r.keywords;let i=0;return e.forEach(n=>{t.includes(n)&&i++}),i}function X$(r){return r.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function mie(r,e,t){let i,n,{$$slots:s={},$$scope:o}=e,{items:l=[]}=e,{searchFunction:a=!1}=e,{labelFieldName:h=void 0}=e,{keywordsFieldName:u=h}=e,{valueFieldName:f=void 0}=e,{labelFunction:c=function(V){return V==null?"":h?V[h]:V}}=e,{keywordsFunction:d=function(V){return V==null?"":u?V[u]:c(V)}}=e,{valueFunction:g=function(V,Ze=!1){return V==null?V:!v||Ze?f?V[f]:V:V.map(pt=>f?pt[f]:pt)}}=e,{keywordsCleanFunction:w=function(V){return V}}=e,{textCleanFunction:S=function(V){return V}}=e,{beforeChange:x=function(V,Ze){return!0}}=e,{onChange:Q=function(V){}}=e,{onFocus:M=function(){}}=e,{onBlur:p=function(){}}=e,{onCreate:b=function(V){re&&console.log("onCreate: "+V)}}=e,{selectFirstIfEmpty:m=!1}=e,{minCharactersToSearch:k=1}=e,{maxItemsToShowInList:C=0}=e,{multiple:v=!1}=e,{create:y=!1}=e,{ignoreAccents:T=!0}=e,{matchAllKeywords:E=!0}=e,{sortByMatchedKeywords:$=!1}=e,{lock:R=!1}=e,{delay:N=0}=e,{localFiltering:_=!0}=e,{hideArrow:W=!1}=e,{showClear:L=!1}=e,{showLoadingIndicator:I=!1}=e,{noResultsText:j="No results found"}=e,{loadingText:X="Loading results..."}=e,{createText:Z="Not found, add anyway?"}=e,{placeholder:ie=void 0}=e,{className:G=void 0}=e,{inputClassName:J=void 0}=e,{inputId:ze=void 0}=e,{name:ve=void 0}=e,{selectName:_e=void 0}=e,{selectId:kt=void 0}=e,{title:Je=void 0}=e,{html5autocomplete:bt=void 0}=e,{readonly:Le=void 0}=e,{dropdownClassName:Bt=void 0}=e,{disabled:Pe=!1}=e,{debug:re=!1}=e,{selectedItem:qe=void 0}=e,{value:Fi=void 0}=e,{theme:sn=void 0}=e;const Ft="sautocomplete-"+Math.floor(Math.random()*1e3);let vt,mt,ae=!1,Ee=!1,Dt=-1,{text:Hi}=e,Ui=0,ar,Ht=[],Nr=0,hr=0,ks;function ws(){t(2,Fi=g(qe)),t(3,Hi=v?"":Yi(qe)),Q(qe)}function Yi(V){return bw(c,V)}function D(V){const Ze=bw(d,V);let pt=bw(w,Ze);return pt=pt.toLowerCase().trim(),T&&(pt=X$(pt)),re&&console.log("Extracted keywords: '"+pt+"' from item: "+JSON.stringify(V)),pt}function z(){let V;re&&(V=`Autocomplete prepare list ${ze?`(id: ${ze})`:""})`,console.time(V),console.log("Prepare items to search"),console.log("items: "+JSON.stringify(l))),Array.isArray(l)||(console.warn("Autocomplete items / search function did not return array but",l),t(0,l=[]));const Ze=l?l.length:0;Ht=new Array(Ze),Ze>0&&l.forEach((pt,Jt)=>{const qi=H(pt);qi==null&&console.log("Undefined item for: ",pt),Ht[Jt]=qi}),re&&(console.log(Ht.length+" items to search"),console.timeEnd(V))}function H(V){return{keywords:D(V),label:Yi(V),item:V}}function q(V){if(V==null)return"";const Ze=V.replace(/[&/\\#,+()$~%.'":*?<>{}]/g," ").trim();if(t(72,Ui=Ze.length),k>1&&Ui<k)return"";const Jt=S(Ze).toLowerCase().trim();return re&&console.log("Change user entered text '"+V+"' into '"+Jt+"'"),Jt}async function te(){let V;re&&(V=`Autocomplete search ${ze?`(id: ${ze})`:""})`,console.time(V),console.log("Searching user entered text: '"+Hi+"'"));const Ze=q(Hi);if(Ze===""){a?(t(0,l=[]),re&&console.log("User entered text is empty clear list of items")):(t(31,ar=Ht),re&&console.log("User entered text is empty set the list of items to all items")),rt(),re&&console.timeEnd(V);return}if(!a)ee(Ze);else{Nr=Nr+1;const pt=Nr;t(29,Ee=!0);const Jt=async function*(){}.constructor;if(a instanceof Jt)for await(const qi of a(Ze)){if(pt<hr)return!1;pt>hr&&t(0,l=[]),hr=pt,t(0,l=[...l,...qi]),ee(Ze)}else{let qi=await a(Ze);if(pt<hr)return!1;hr=pt,t(0,l=qi),ee(Ze)}t(29,Ee=!1)}re&&(console.timeEnd(V),console.log("Search found "+ar.length+" items"))}function ee(V){z();let Ze;if(_){var pt=V.split(" ");T&&(pt=pt.map(Ns=>X$(Ns))),Ze=Ht.filter(Ns=>{var Ss=Ow(Ns,pt);return E?Ss>=pt.length:Ss>0}),$&&(Ze=Ze.sort((Ns,Ss)=>Ow(Ss,pt)-Ow(Ns,pt)))}else Ze=Ht;const Jt=ur(V,["label"]),qi=Ze.map(Jt);return t(31,ar=qi),rt(),!0}function $e(V){if(re&&console.log("selectListItem"),typeof V=="undefined")return y?(b(Hi),!0):(re&&console.log("listItem is undefined. Can not select."),!1);const Ze=V.item;return x(qe,Ze)&&(v?qe?qe.includes(Ze)?t(1,qe=qe.filter(pt=>pt!==Ze)):t(1,qe=[...qe,Ze]):t(1,qe=[Ze]):t(1,qe=Ze)),!0}function Qe(){re&&console.log("selectItem");const V=ar[Dt];$e(V)&&(Ir(),v&&vt.focus())}function We(){re&&console.log("up"),il(),Dt>0&&t(30,Dt--,Dt),pi()}function St(){re&&console.log("down"),il(),Dt<ar.length-1&&t(30,Dt++,Dt),pi()}function pi(){re&&console.log("highlight");const V=".selected";re&&console.log("Seaching DOM element: "+V+" in "+mt);const Ze=mt&&mt.querySelector(V);Ze?typeof Ze.scrollIntoViewIfNeeded=="function"?(re&&console.log("Scrolling selected item into view"),Ze.scrollIntoViewIfNeeded()):re&&console.warn("Could not scroll selected item into view, scrollIntoViewIfNeeded not supported"):re&&console.warn("Selected item not found to scroll into view")}function el(V){re&&console.log("onListItemClick"),$e(V)&&(Ir(),v&&vt.focus())}function Ua(V){re&&console.log("onDocumentClick: "+JSON.stringify(V.target)),V.target.closest("."+Ft)?(re&&console.log("onDocumentClick inside"),pi()):(re&&console.log("onDocumentClick outside"),Ir())}function iu(V){re&&console.log("onKeyDown");let Ze=V.key;Ze==="Tab"&&V.shiftKey&&(Ze="ShiftTab");const Jt={Tab:ae?St.bind(this):null,ShiftTab:ae?We.bind(this):null,ArrowDown:St.bind(this),Escape:Ya.bind(this),Backspace:v&&qe&&qe.length&&!Hi?ru.bind(this):null}[Ze];typeof Jt=="function"&&(V.preventDefault(),Jt(V))}function Ml(V){re&&console.log("onKeyPress"),V.key==="Enter"&&ae&&(V.preventDefault(),nu())}function nu(){Qe()}function Es(V){re&&console.log("onInput"),t(3,Hi=V.target.value),ks&&clearTimeout(ks),N?ks=setTimeout(tl,N):tl()}function Rl(V){re&&console.log("unselectItem",V),t(1,qe=qe.filter(Ze=>Ze!==V)),vt.focus()}function tl(){te()&&(t(30,Dt=0),il())}function Ql(){re&&console.log("onInputClick"),ys()}function Ya(V){re&&console.log("onEsc"),V.stopPropagation(),ae&&(vt.focus(),Ir())}function ru(V){re&&console.log("onBackspace"),Rl(qe[qe.length-1])}function Dl(){re&&console.log("onFocus"),M(),ys()}function su(){re&&console.log("onBlur"),p()}function ys(){if(re&&console.log("resetListToAllItemsAndOpen"),Hi?!Ht.length&&qe&&a&&te():t(31,ar=Ht),il(),qe){re&&console.log("Searching currently selected item: "+JSON.stringify(qe));for(let V=0;V<Ht.length;V++){const Ze=Ht[V];if(typeof Ze=="undefined"){re&&console.log(`listItem ${V} is undefined. Skipping.`);continue}if(re&&console.log("Item "+V+": "+JSON.stringify(Ze)),qe==Ze.item){t(30,Dt=V),re&&console.log("Found selected item: "+V+": "+JSON.stringify(Ze)),pi();break}}}}function il(){re&&console.log("open"),!le()&&t(71,ae=!0)}function Ir(){re&&console.log("close"),t(71,ae=!1),t(29,Ee=!1),!Hi&&m&&(ur=0,Qe())}function le(){return k>1&&Ui<k}function rt(){le()&&Ir()}function wt(){re&&console.log("clear"),t(3,Hi=""),t(1,qe=void 0),setTimeout(()=>{vt.focus(),Ir()})}function ur(V,Ze){return V=V.split(/\s+/g),pt=>{const Jt=Object.assign({highlighted:{}},pt);return Ze&&Ze.forEach(qi=>{Jt[qi]&&!Jt.highlighted[qi]&&(Jt.highlighted[qi]=Jt[qi]),Jt.highlighted[qi]&&V.forEach(Ns=>{const Ss=new RegExp("("+Ns+")","ig");Jt.highlighted[qi]=Jt.highlighted[qi].replace(Ss,"<b>$1</b>")})}),Jt}}function Bs(V){V.multiple=v}function vs(V){return qe?v?qe.includes(V):V==qe:!1}function xp(){Fi=D2(this),t(2,Fi),t(4,g),t(1,qe)}const ou=V=>{Rl(V)};function lu(V){sr[V?"unshift":"push"](()=>{vt=V,t(27,vt)})}function Zf(){Hi=this.value,t(3,Hi)}const Cp=V=>el(V),au=V=>{t(30,Dt=V)};function Ap(V){sr[V?"unshift":"push"](()=>{mt=V,t(28,mt)})}return r.$$set=V=>{"items"in V&&t(0,l=V.items),"searchFunction"in V&&t(49,a=V.searchFunction),"labelFieldName"in V&&t(50,h=V.labelFieldName),"keywordsFieldName"in V&&t(51,u=V.keywordsFieldName),"valueFieldName"in V&&t(52,f=V.valueFieldName),"labelFunction"in V&&t(53,c=V.labelFunction),"keywordsFunction"in V&&t(54,d=V.keywordsFunction),"valueFunction"in V&&t(4,g=V.valueFunction),"keywordsCleanFunction"in V&&t(55,w=V.keywordsCleanFunction),"textCleanFunction"in V&&t(56,S=V.textCleanFunction),"beforeChange"in V&&t(57,x=V.beforeChange),"onChange"in V&&t(58,Q=V.onChange),"onFocus"in V&&t(59,M=V.onFocus),"onBlur"in V&&t(60,p=V.onBlur),"onCreate"in V&&t(61,b=V.onCreate),"selectFirstIfEmpty"in V&&t(62,m=V.selectFirstIfEmpty),"minCharactersToSearch"in V&&t(63,k=V.minCharactersToSearch),"maxItemsToShowInList"in V&&t(5,C=V.maxItemsToShowInList),"multiple"in V&&t(6,v=V.multiple),"create"in V&&t(7,y=V.create),"ignoreAccents"in V&&t(64,T=V.ignoreAccents),"matchAllKeywords"in V&&t(65,E=V.matchAllKeywords),"sortByMatchedKeywords"in V&&t(66,$=V.sortByMatchedKeywords),"lock"in V&&t(8,R=V.lock),"delay"in V&&t(67,N=V.delay),"localFiltering"in V&&t(68,_=V.localFiltering),"hideArrow"in V&&t(9,W=V.hideArrow),"showClear"in V&&t(69,L=V.showClear),"showLoadingIndicator"in V&&t(10,I=V.showLoadingIndicator),"noResultsText"in V&&t(11,j=V.noResultsText),"loadingText"in V&&t(12,X=V.loadingText),"createText"in V&&t(13,Z=V.createText),"placeholder"in V&&t(14,ie=V.placeholder),"className"in V&&t(15,G=V.className),"inputClassName"in V&&t(16,J=V.inputClassName),"inputId"in V&&t(17,ze=V.inputId),"name"in V&&t(18,ve=V.name),"selectName"in V&&t(19,_e=V.selectName),"selectId"in V&&t(20,kt=V.selectId),"title"in V&&t(21,Je=V.title),"html5autocomplete"in V&&t(22,bt=V.html5autocomplete),"readonly"in V&&t(23,Le=V.readonly),"dropdownClassName"in V&&t(24,Bt=V.dropdownClassName),"disabled"in V&&t(25,Pe=V.disabled),"debug"in V&&t(70,re=V.debug),"selectedItem"in V&&t(1,qe=V.selectedItem),"value"in V&&t(2,Fi=V.value),"theme"in V&&t(26,sn=V.theme),"text"in V&&t(3,Hi=V.text),"$$scope"in V&&t(73,o=V.$$scope)},r.$$.update=()=>{r.$$.dirty[0]&2&&ws(),r.$$.dirty[0]&1|r.$$.dirty[2]&1536&&t(33,i=ae&&(l&&l.length>0||Ui>0)),r.$$.dirty[0]&322|r.$$.dirty[2]&128&&t(32,n=L||(R||v)&&qe),r.$$.dirty[0]&1&&z()},[l,qe,Fi,Hi,g,C,v,y,R,W,I,j,X,Z,ie,G,J,ze,ve,_e,kt,Je,bt,Le,Bt,Pe,sn,vt,mt,Ee,Dt,ar,n,i,Ft,Yi,Qe,el,Ua,iu,Ml,Es,Rl,Ql,Dl,su,wt,Bs,vs,a,h,u,f,c,d,w,S,x,Q,M,p,b,m,k,T,E,$,N,_,L,re,ae,Ui,o,s,xp,ou,lu,Zf,Cp,au,Ap]}class vI extends _i{constructor(e){super(),Pi(this,e,mie,gie,ki,{items:0,searchFunction:49,labelFieldName:50,keywordsFieldName:51,valueFieldName:52,labelFunction:53,keywordsFunction:54,valueFunction:4,keywordsCleanFunction:55,textCleanFunction:56,beforeChange:57,onChange:58,onFocus:59,onBlur:60,onCreate:61,selectFirstIfEmpty:62,minCharactersToSearch:63,maxItemsToShowInList:5,multiple:6,create:7,ignoreAccents:64,matchAllKeywords:65,sortByMatchedKeywords:66,lock:8,delay:67,localFiltering:68,hideArrow:9,showClear:69,showLoadingIndicator:10,noResultsText:11,loadingText:12,createText:13,placeholder:14,className:15,inputClassName:16,inputId:17,name:18,selectName:19,selectId:20,title:21,html5autocomplete:22,readonly:23,dropdownClassName:24,disabled:25,debug:70,selectedItem:1,value:2,theme:26,text:3},null,[-1,-1,-1,-1])}}function bie(r){let e,t,i,n,s,o,l,a,h,u,f,c,d,g,w,S,x,Q,M,p,b,m,k,C,v,y,T,E,$,R,N,_,W,L,I,j,X;function Z(G){r[19](G)}let ie={inputId:"scriptName",items:r[6],inputClassName:"scriptInput",className:"scriptDiv",create:"true",theme:r[8],onChange:r[17],onCreate:r[18]};return r[2]!==void 0&&(ie.selectedItem=r[2]),o=new vI({props:ie}),sr.push(()=>I2(o,"selectedItem",Z)),Q=new lO({props:{height:"380px",width:"980px",config:r[9],initFinished:r[0]}}),Q.$on("textChange",r[22]),Q.$on("editorChange",r[23]),{c(){e=B("div"),t=B("div"),i=B("div"),n=B("label"),n.textContent="Name:",s=F(),Kt(o.$$.fragment),a=F(),h=B("label"),h.textContent="Insert?",u=F(),f=B("input"),c=F(),d=B("div"),g=B("label"),g.textContent="Description:",w=F(),S=B("input"),x=F(),Kt(Q.$$.fragment),M=F(),p=B("div"),b=B("button"),m=ne("Save Script"),k=F(),C=B("button"),v=ne("Delete Script"),y=F(),T=B("button"),E=ne("Notes"),$=F(),R=B("button"),N=ne("Scripts Menu"),_=F(),W=B("button"),L=ne("Templates Menu"),P(n,"for","scriptName"),P(n,"class","svelte-1nkhnrz"),P(h,"id","insertChkLab"),P(h,"for","insertChk"),P(h,"class","svelte-1nkhnrz"),P(f,"id","insertChk"),P(f,"name","insertChk"),P(f,"type","checkbox"),O(f,"background-color",r[8].textAreaColor),O(f,"color",r[8].textColor),O(f,"border-color",r[8].borderColor),P(f,"class","svelte-1nkhnrz"),P(i,"class","headerRow svelte-1nkhnrz"),P(g,"for","description"),P(g,"class","svelte-1nkhnrz"),P(S,"id","description"),O(S,"background-color",r[8].textAreaColor),O(S,"color",r[8].textColor),O(S,"border-color",r[8].borderColor),O(S,"font-size",r[8].fontSize),P(S,"class","svelte-1nkhnrz"),P(d,"class","headerRow svelte-1nkhnrz"),P(t,"id","header"),P(t,"class","svelte-1nkhnrz"),O(b,"background-color",r[8].textAreaColor),O(b,"color",r[8].textColor),O(b,"border-color",r[8].borderColor),P(b,"class","svelte-1nkhnrz"),O(C,"background-color",r[8].textAreaColor),O(C,"color",r[8].textColor),O(C,"border-color",r[8].borderColor),P(C,"class","svelte-1nkhnrz"),O(T,"background-color",r[8].textAreaColor),O(T,"color",r[8].textColor),O(T,"border-color",r[8].borderColor),P(T,"class","svelte-1nkhnrz"),O(R,"background-color",r[8].textAreaColor),O(R,"color",r[8].textColor),O(R,"border-color",r[8].borderColor),P(R,"class","svelte-1nkhnrz"),O(W,"background-color",r[8].textAreaColor),O(W,"color",r[8].textColor),O(W,"border-color",r[8].borderColor),P(W,"class","svelte-1nkhnrz"),P(p,"id","buttonRow"),P(p,"class","svelte-1nkhnrz"),P(e,"id","scripts"),O(e,"background-color",r[8].backgroundColor),O(e,"font-family",r[8].font),O(e,"color",r[8].textColor),O(e,"font-size",r[8].fontSize),P(e,"class","svelte-1nkhnrz")},m(G,J){K(G,e,J),A(e,t),A(t,i),A(i,n),A(i,s),Vt(o,i,null),A(i,a),A(i,h),A(i,u),A(i,f),f.checked=r[5],A(t,c),A(t,d),A(d,g),A(d,w),A(d,S),Xe(S,r[4]),A(e,x),Vt(Q,e,null),A(e,M),A(e,p),A(p,b),A(b,m),A(p,k),A(p,C),A(C,v),A(p,y),A(p,T),A(T,E),A(p,$),A(p,R),A(R,N),A(p,_),A(p,W),A(W,L),I=!0,j||(X=[U(f,"change",r[20]),U(S,"input",r[21]),U(b,"click",r[10]),U(C,"click",r[11]),U(T,"click",r[14]),U(R,"click",r[15]),U(W,"click",r[16])],j=!0)},p(G,J){const ze={};J[0]&64&&(ze.items=G[6]),J[0]&256&&(ze.theme=G[8]),J[0]&154&&(ze.onCreate=G[18]),!l&&J[0]&4&&(l=!0,ze.selectedItem=G[2],N2(()=>l=!1)),o.$set(ze),(!I||J[0]&256)&&O(f,"background-color",G[8].textAreaColor),(!I||J[0]&256)&&O(f,"color",G[8].textColor),(!I||J[0]&256)&&O(f,"border-color",G[8].borderColor),J[0]&32&&(f.checked=G[5]),(!I||J[0]&256)&&O(S,"background-color",G[8].textAreaColor),(!I||J[0]&256)&&O(S,"color",G[8].textColor),(!I||J[0]&256)&&O(S,"border-color",G[8].borderColor),(!I||J[0]&256)&&O(S,"font-size",G[8].fontSize),J[0]&16&&S.value!==G[4]&&Xe(S,G[4]);const ve={};J[0]&1&&(ve.initFinished=G[0]),Q.$set(ve),(!I||J[0]&256)&&O(b,"background-color",G[8].textAreaColor),(!I||J[0]&256)&&O(b,"color",G[8].textColor),(!I||J[0]&256)&&O(b,"border-color",G[8].borderColor),(!I||J[0]&256)&&O(C,"background-color",G[8].textAreaColor),(!I||J[0]&256)&&O(C,"color",G[8].textColor),(!I||J[0]&256)&&O(C,"border-color",G[8].borderColor),(!I||J[0]&256)&&O(T,"background-color",G[8].textAreaColor),(!I||J[0]&256)&&O(T,"color",G[8].textColor),(!I||J[0]&256)&&O(T,"border-color",G[8].borderColor),(!I||J[0]&256)&&O(R,"background-color",G[8].textAreaColor),(!I||J[0]&256)&&O(R,"color",G[8].textColor),(!I||J[0]&256)&&O(R,"border-color",G[8].borderColor),(!I||J[0]&256)&&O(W,"background-color",G[8].textAreaColor),(!I||J[0]&256)&&O(W,"color",G[8].textColor),(!I||J[0]&256)&&O(W,"border-color",G[8].borderColor),(!I||J[0]&256)&&O(e,"background-color",G[8].backgroundColor),(!I||J[0]&256)&&O(e,"font-family",G[8].font),(!I||J[0]&256)&&O(e,"color",G[8].textColor),(!I||J[0]&256)&&O(e,"font-size",G[8].fontSize)},i(G){I||(Se(o.$$.fragment,G),Se(Q.$$.fragment,G),I=!0)},o(G){Me(o.$$.fragment,G),Me(Q.$$.fragment,G),I=!1},d(G){G&&Y(e),jt(o),jt(Q),j=!1,yt(X)}}}function Oie(r,e,t){let i,n,s,o,l,a;Re(r,is,L=>t(24,i=L)),Re(r,ts,L=>t(25,n=L)),Re(r,Ci,L=>t(26,s=L)),Re(r,yb,L=>t(7,o=L)),Re(r,Yd,L=>t(27,l=L)),Re(r,et,L=>t(8,a=L));let h={language:"javascript",lineNumbers:!0,lineWrapping:!0,lineHighlight:!0},u=!1,f,c="",d="",g="",w=!1,S;Sr(()=>{t(0,u=!0),x(()=>{})});function x(L){fetch("http://localhost:9978/api/scripts/user",{method:"GET",headers:{"Content-type":"application/json"}}).then(I=>I.json()).then(I=>{t(6,S=I.scripts.sort()),typeof L!="undefined"&&L()})}function Q(L,I){L!==void 0&&L!==""&&fetch(`http://localhost:9978/api/scripts/${L}`,{method:"GET",headers:{"Content-type":"application/json"}}).then(j=>j.json()).then(j=>{t(3,d=j.script.name),t(1,f=j.script.script),t(4,g=j.script.description),t(5,w=j.script.insert=="true"),o.setValue(f),typeof I!="undefined"&&I()})}function M(){d!==void 0&&d!==""&&fetch(`http://localhost:9978/api/scripts/${d}`,{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify({script:{name:d,insert:w,description:g,script:f}})}).then(()=>{t(2,c=""),t(3,d=""),t(5,w=!0),t(4,g=""),t(1,f=""),o.setValue(f),p(),x()})}function p(L){fetch("http://localhost:9978/api/scripts/list",{method:"GET",headers:{"Content-type":"application/json"}}).then(I=>I.json()).then(I=>{fe(Yd,l=I.data,l),typeof L!="undefined"&&L()})}function b(){d!==void 0&&d!==""&&fetch(`http://localhost:9978/api/scripts/${d}`,{method:"DELETE",headers:{"Content-type":"application/json"}}).then(()=>{t(3,d=""),t(5,w=!0),t(4,g=""),t(1,f=""),t(2,c=""),o.setValue(f),p(),x()})}function m(L){fe(yb,o=L,o)}function k(L){t(1,f=L.value)}function C(){fe(Ci,s="notes",s)}function v(){fe(ts,n=!n,n)}function y(){fe(is,i=!i,i)}function T(L){L!==void 0&&L!==""&&(t(3,d=L),Q(d))}const E=L=>{L!==void 0&&L!==""&&(t(3,d=L),t(4,g=""),t(1,f=""),o.setValue(f))};function $(L){c=L,t(2,c)}function R(){w=this.checked,t(5,w)}function N(){g=this.value,t(4,g)}return[u,f,c,d,g,w,S,o,a,h,M,b,m,k,C,v,y,T,E,$,R,N,L=>{k(L.detail.data)},L=>{m(L.detail.data)}]}class kie extends _i{constructor(e){super(),Pi(this,e,Oie,bie,ki,{},null,[-1,-1])}}function Z$(r){let e,t,i,n;return{c(){e=B("button"),t=ne("Delete Template"),O(e,"background-color",r[7].textAreaColor),O(e,"color",r[7].textColor),O(e,"border-color",r[7].borderColor),P(e,"class","svelte-2ihs3u")},m(s,o){K(s,e,o),A(e,t),i||(n=U(e,"click",r[10]),i=!0)},p(s,o){o&128&&O(e,"background-color",s[7].textAreaColor),o&128&&O(e,"color",s[7].textColor),o&128&&O(e,"border-color",s[7].borderColor)},d(s){s&&Y(e),i=!1,n()}}}function wie(r){let e,t,i,n,s,o,l,a,h,u,f,c,d,g,w,S,x,Q,M,p,b,m,k,C,v,y,T,E,$,R,N;function _(I){r[18](I)}let W={inputId:"templateName",items:r[5],inputClassName:"templateInput",className:"templateDiv",create:"true",theme:r[7],onChange:r[16],onCreate:r[17]};r[4]!==void 0&&(W.selectedItem=r[4]),o=new vI({props:W}),sr.push(()=>I2(o,"selectedItem",_)),g=new lO({props:{height:"375px",width:"980px",config:r[8],initFinished:r[0]}}),g.$on("textChange",r[20]),g.$on("editorChange",r[21]);let L=r[3]!=="Defaults"&&Z$(r);return{c(){e=B("div"),t=B("div"),i=B("div"),n=B("label"),n.textContent="Name:",s=F(),Kt(o.$$.fragment),a=F(),h=B("div"),u=B("label"),u.textContent="Description:",f=F(),c=B("input"),d=F(),Kt(g.$$.fragment),w=F(),S=B("div"),x=B("button"),Q=ne("Save Template"),M=F(),L&&L.c(),p=F(),b=B("button"),m=ne("Notes"),k=F(),C=B("button"),v=ne("Scripts Menu"),y=F(),T=B("button"),E=ne("Templates Menu"),P(n,"for","templateName"),P(n,"class","svelte-2ihs3u"),P(i,"class","headerRow svelte-2ihs3u"),P(u,"for","description"),P(u,"class","svelte-2ihs3u"),P(c,"id","description"),O(c,"background-color",r[7].textAreaColor),O(c,"color",r[7].textColor),O(c,"border-color",r[7].borderColor),P(c,"class","svelte-2ihs3u"),P(h,"class","headerRow svelte-2ihs3u"),P(t,"id","header"),P(t,"class","svelte-2ihs3u"),O(x,"background-color",r[7].textAreaColor),O(x,"color",r[7].textColor),O(x,"border-color",r[7].borderColor),P(x,"class","svelte-2ihs3u"),O(b,"background-color",r[7].textAreaColor),O(b,"color",r[7].textColor),O(b,"border-color",r[7].borderColor),P(b,"class","svelte-2ihs3u"),O(C,"background-color",r[7].textAreaColor),O(C,"color",r[7].textColor),O(C,"border-color",r[7].borderColor),P(C,"class","svelte-2ihs3u"),O(T,"background-color",r[7].textAreaColor),O(T,"color",r[7].textColor),O(T,"border-color",r[7].borderColor),P(T,"class","svelte-2ihs3u"),P(S,"id","buttonRow"),P(S,"class","svelte-2ihs3u"),P(e,"id","templates"),O(e,"background-color",r[7].backgroundColor),O(e,"font-family",r[7].font),O(e,"color",r[7].textColor),O(e,"font-size",r[7].fontSize),P(e,"class","svelte-2ihs3u")},m(I,j){K(I,e,j),A(e,t),A(t,i),A(i,n),A(i,s),Vt(o,i,null),A(t,a),A(t,h),A(h,u),A(h,f),A(h,c),Xe(c,r[2]),A(e,d),Vt(g,e,null),A(e,w),A(e,S),A(S,x),A(x,Q),A(S,M),L&&L.m(S,null),A(S,p),A(S,b),A(b,m),A(S,k),A(S,C),A(C,v),A(S,y),A(S,T),A(T,E),$=!0,R||(N=[U(c,"input",r[19]),U(x,"click",r[9]),U(b,"click",r[13]),U(C,"click",r[14]),U(T,"click",r[15])],R=!0)},p(I,[j]){const X={};j&32&&(X.items=I[5]),j&128&&(X.theme=I[7]),j&78&&(X.onCreate=I[17]),!l&&j&16&&(l=!0,X.selectedItem=I[4],N2(()=>l=!1)),o.$set(X),(!$||j&128)&&O(c,"background-color",I[7].textAreaColor),(!$||j&128)&&O(c,"color",I[7].textColor),(!$||j&128)&&O(c,"border-color",I[7].borderColor),j&4&&c.value!==I[2]&&Xe(c,I[2]);const Z={};j&1&&(Z.initFinished=I[0]),g.$set(Z),(!$||j&128)&&O(x,"background-color",I[7].textAreaColor),(!$||j&128)&&O(x,"color",I[7].textColor),(!$||j&128)&&O(x,"border-color",I[7].borderColor),I[3]!=="Defaults"?L?L.p(I,j):(L=Z$(I),L.c(),L.m(S,p)):L&&(L.d(1),L=null),(!$||j&128)&&O(b,"background-color",I[7].textAreaColor),(!$||j&128)&&O(b,"color",I[7].textColor),(!$||j&128)&&O(b,"border-color",I[7].borderColor),(!$||j&128)&&O(C,"background-color",I[7].textAreaColor),(!$||j&128)&&O(C,"color",I[7].textColor),(!$||j&128)&&O(C,"border-color",I[7].borderColor),(!$||j&128)&&O(T,"background-color",I[7].textAreaColor),(!$||j&128)&&O(T,"color",I[7].textColor),(!$||j&128)&&O(T,"border-color",I[7].borderColor),(!$||j&128)&&O(e,"background-color",I[7].backgroundColor),(!$||j&128)&&O(e,"font-family",I[7].font),(!$||j&128)&&O(e,"color",I[7].textColor),(!$||j&128)&&O(e,"font-size",I[7].fontSize)},i(I){$||(Se(o.$$.fragment,I),Se(g.$$.fragment,I),$=!0)},o(I){Me(o.$$.fragment,I),Me(g.$$.fragment,I),$=!1},d(I){I&&Y(e),jt(o),jt(g),L&&L.d(),R=!1,yt(N)}}}function yie(r,e,t){let i,n,s,o,l,a;Re(r,is,_=>t(22,i=_)),Re(r,ts,_=>t(23,n=_)),Re(r,Ci,_=>t(24,s=_)),Re(r,wb,_=>t(6,o=_)),Re(r,Kd,_=>t(25,l=_)),Re(r,et,_=>t(7,a=_));let h={language:"javascript",lineNumbers:!0,lineWrapping:!0,lineHighlight:!0},u=!1,f="",c="",d="",g,w;Sr(()=>{S(()=>{t(0,u=!0)})});function S(_){fetch("http://localhost:9978/api/template/user",{method:"GET",headers:{"Content-type":"application/json"}}).then(W=>W.json()).then(W=>{t(5,w=W.templates.sort()),typeof _!="undefined"&&_()})}function x(_,W){_!==void 0&&_!==""&&fetch(`http://localhost:9978/api/template/${_}`,{method:"GET",headers:{"Content-type":"application/json"}}).then(L=>L.json()).then(L=>{t(1,f=L.text.template),o.setValue(f),t(2,c=L.text.description),typeof W!="undefined"&&W()})}function Q(){d!==void 0&&d!==""&&fetch(`http://localhost:9978/api/template/${d}`,{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify({template:{name:d,description:c,template:f}})}).then(()=>{t(1,f=""),t(3,d=""),t(2,c=""),t(4,g=""),o.setValue(f),M(),S()})}function M(_){fetch("http://localhost:9978/api/template/list",{method:"GET",headers:{"Content-type":"application/json"}}).then(W=>W.json()).then(W=>{fe(Kd,l=W.templates,l),typeof _!="undefined"&&_()})}function p(){d!==void 0&&d!==""&&fetch(`http://localhost:9978/api/template/${d}`,{method:"DELETE",headers:{"Content-type":"application/json"}}).then(()=>{t(1,f=""),t(3,d=""),t(2,c=""),t(4,g=""),o.setValue(f),M(),S()})}function b(_){fe(wb,o=_,o)}function m(_){t(1,f=_.value)}function k(){fe(Ci,s="notes",s)}function C(){fe(ts,n=!n,n)}function v(){fe(is,i=!i,i)}function y(_){_!==void 0&&(t(3,d=_),x(d))}const T=_=>{_!==void 0&&(t(3,d=_),t(2,c=""),t(1,f=""),o.setValue(f))};function E(_){g=_,t(4,g)}function $(){c=this.value,t(2,c)}return[u,f,c,d,g,w,o,a,h,Q,p,b,m,k,C,v,y,T,E,$,_=>{m(_.detail.data)},_=>{b(_.detail.data)}]}class vie extends _i{constructor(e){super(),Pi(this,e,yie,wie,ki,{})}}function Sie(r){let e,t,i,n,s,o,l,a,h,u,f,c;return{c(){e=B("div"),t=B("div"),i=B("label"),i.textContent="Auto Launch Node-Red?",n=F(),s=B("input"),o=F(),l=B("div"),a=B("label"),a.textContent="Dashboard configured?",h=F(),u=B("input"),P(i,"class","styleLabel svelte-n1ihpd"),P(s,"class","PrefCheck svelte-n1ihpd"),P(s,"type","checkbox"),P(t,"class","labelRadialHolder svelte-n1ihpd"),P(a,"class","styleLabel svelte-n1ihpd"),P(u,"class","PrefCheck svelte-n1ihpd"),P(u,"type","checkbox"),P(l,"class","labelRadialHolder svelte-n1ihpd")},m(d,g){K(d,e,g),A(e,t),A(t,i),A(t,n),A(t,s),s.checked=r[0].REDAuto,A(e,o),A(e,l),A(l,a),A(l,h),A(l,u),u.checked=r[0].REDDashboard,f||(c=[U(s,"change",r[2]),U(s,"change",r[3]),U(u,"change",r[4]),U(u,"change",r[5])],f=!0)},p(d,[g]){g&1&&(s.checked=d[0].REDAuto),g&1&&(u.checked=d[0].REDDashboard)},i:lt,o:lt,d(d){d&&Y(e),f=!1,yt(c)}}}function xie(r,e,t){const i=Xa();var n={REDAuto:!0,REDDashboard:!0};function s(f,c){i(f,{data:c})}function o(){s("changeTodos",{auto:n.REDAuto,dashboard:n.REDDashboard})}function l(){n.REDAuto=this.checked,t(0,n)}const a=()=>{o()};function h(){n.REDDashboard=this.checked,t(0,n)}return[n,o,l,a,h,()=>{o()}]}class Cie extends _i{constructor(e){super(),Pi(this,e,xie,Sie,ki,{})}}function Aie(r){let e;return{c(){e=B("div"),O(e,"background-color",r[0].backgroundColor)},m(t,i){K(t,e,i)},p(t,[i]){i&1&&O(e,"background-color",t[0].backgroundColor)},i:lt,o:lt,d(t){t&&Y(e)}}}function Tie(r,e,t){let i;return Re(r,et,n=>t(0,i=n)),[i]}class Pie extends _i{constructor(e){super(),Pi(this,e,Tie,Aie,ki,{})}}/**
 * @category  html5 widgets
 * @package   Kelly
 * @author    Rubchuk Vladimir <torrenttvi@gmail.com>
 * @copyright 2015-2017 Rubchuk Vladimir
 * @license   GPLv3
 * @version   1.19
 *
 * Usage example :
 *
 *   new KellyColorPicker({place : 'color-picker'});
 *
 * ToDo :
 * 
 * Add switch color in colorsavers button (analog of X button in Photoshop)
 *
 **/function Et(r){var e=Math.PI,t,i=!0,n=new Object;n.radius=4;var s=!1,o=!1,l="quad",a=!1,h=!1,u=!0,f=new Array,c=new Array,d=document.createElement("canvas"),g=!1,w=!1,S=null,x=!1,Q=!0,M="mixed",p=new Object;p.tag=!1,p.margin=6;var b=!1,m=this,k=2,C,v=200,y,T,E,$="#000000",R=1,N=!1,_=!1,W=new Array,L=!1,I=new Array;function j(){L=new Object,L.size,L.sizePercentage=10,L.position,L.paddingY=4,L.paddingX=4,L.imageData=new Array,L.lineWidth=2,L.color="#c1ebf5",L.updateSize=function(){this.size=parseInt(v-v/100*(100-this.sizePercentage)),this.size<16&&(this.size=16),this.position={x:this.paddingX,y:this.paddingY}},L.draw=function(){if(this.imageData[l]){o.putImageData(this.imageData[l],this.position.x,this.position.y);return}var D=re(this.color);d.width=this.size,d.height=this.size,g.clearRect(0,0,this.size,this.size),g.beginPath();var z="triangle";if(l=="triangle"&&(z="quad"),g.beginPath(),this.size<35)var H=d.width/2,q=H;else{var H=d.width/2-this.lineWidth;g.arc(this.size/2,this.size/2,H,0,e*2),g.strokeStyle="rgba(0, 0, 0, 0.4)",g.lineWidth=this.lineWidth,g.stroke();var q=H-6;g.closePath(),g.beginPath(),g.arc(this.size/2,this.size/2,q,0,e*2),g.strokeStyle="rgba(0, 0, 0, 0.4)",g.lineWidth=this.lineWidth,g.stroke(),g.closePath()}g.beginPath();var te;if(z=="quad"){var ee=q*2-4;te=Math.floor(ee/Math.sqrt(2));var $e=(this.size-te)/2,Qe={x:$e+te,y:$e+te/2};Qe.y=Qe.y-te/2,g.moveTo(Qe.x,Qe.y),g.lineTo(Qe.x-te,Qe.y),g.lineTo(Qe.x-te,Qe.y+te),g.lineTo(Qe.x,Qe.y+te)}else{te=Math.floor((2*q-4)*Math.sin(Fi(60)));var Qe={x:q*2+(H-q),y:this.size/2},We=Math.sqrt(3)/2*te;g.moveTo(Qe.x,Qe.y),g.lineTo(Qe.x-We,Qe.y-te/2),g.lineTo(Qe.x-We,Qe.y+te/2),g.lineTo(Qe.x,Qe.y)}g.lineTo(Qe.x,Qe.y),g.fillStyle="rgba("+D.r+","+D.g+","+D.b+", 1)",g.fill(),g.lineWidth=this.lineWidth,g.strokeStyle="rgba(0, 0, 0, 0.6)",g.stroke(),g.closePath(),this.imageData[l]=g.getImageData(0,0,d.width,d.width),o.drawImage(d,this.position.x,this.position.y)},L.isDotIn=function(D){return D.x>=this.position.x&&D.x<=this.position.x+this.size&&D.y>=this.position.y&&D.y<=this.position.y+this.size}}function X(D,z,H){z?z=!0:z=!1;var q=new Object;q.width,q.widthPercentage=22,q.imageData=null,q.align=D,q.selected=z,q.color="#ffffff",q.position,q.paddingY=-4,q.paddingX=4,q.lineWidth=1,q.selectSize=4,D=="right"&&(q.paddingX=q.paddingX*-1),q.selected&&(q.color=$),H&&(q.color=H),q.updateSize=function(){this.width=parseInt(v-v/100*(100-this.widthPercentage)),this.align=="left"?this.position={x:0,y:v-this.width}:this.align=="right"&&(this.position={x:v-this.width,y:v-this.width})},q.calcS=function(ee){return Math.abs((ee[1].x-ee[0].x)*(ee[2].y-ee[0].y)-(ee[2].x-ee[0].x)*(ee[1].y-ee[0].y))/2},q.isDotIn=function(ee){var $e=new Array;this.align=="left"?($e[0]={x:this.position.x,y:this.position.y},$e[1]={x:this.position.x,y:this.position.y+this.width},$e[2]={x:this.position.x+this.width,y:this.position.y+this.width}):($e[0]={x:this.position.x+this.width,y:this.position.y},$e[1]={x:$e[0].x,y:$e[0].y+this.width},$e[2]={x:$e[0].x-this.width,y:this.position.y+this.width});for(var Qe=0;Qe<=$e.length-1;++Qe)$e[Qe].x+=this.paddingX,$e[Qe].y+=this.paddingY;var We=this.calcS($e),St=[{x:$e[0].x,y:$e[0].y},{x:$e[1].x,y:$e[1].y},{x:ee.x,y:ee.y}],pi=this.calcS(St);return St[1]={x:$e[2].x,y:$e[2].y},pi+=this.calcS(St),St[0]={x:$e[1].x,y:$e[1].y},pi+=this.calcS(St),Math.ceil(pi)==Math.ceil(We)},q.draw=function(){d.width=this.width,d.height=this.width,g.clearRect(0,0,this.width,this.width),g.beginPath(),this.align=="left"&&(g.moveTo(this.lineWidth/2,this.width-this.lineWidth),g.lineTo(this.width,this.width-this.lineWidth),g.lineTo(this.lineWidth,this.lineWidth),g.lineTo(this.lineWidth,this.width-this.lineWidth)),this.align=="right"&&(g.moveTo(this.lineWidth/2,this.width-this.lineWidth),g.lineTo(this.width-this.lineWidth,this.width-this.lineWidth),g.lineTo(this.width-this.lineWidth,this.lineWidth),g.lineTo(this.lineWidth,this.width-this.lineWidth)),this.selected&&(g.fillStyle="rgba(255,255,255, 1)",g.fill(),g.strokeStyle="rgba(0, 0, 0, 1)",g.stroke(),g.closePath(),g.beginPath(),g.lineWidth=this.lineWidth,this.align=="left"&&(g.moveTo(this.selectSize,this.width-this.selectSize),g.lineTo(this.width-this.selectSize*2,this.width-this.selectSize),g.lineTo(this.selectSize,this.selectSize*2),g.lineTo(this.selectSize,this.width-this.selectSize)),this.align=="right"&&(g.moveTo(this.selectSize*2,this.width-this.selectSize),g.lineTo(this.width-this.selectSize,this.width-this.selectSize),g.lineTo(this.width-this.selectSize,this.selectSize*2),g.lineTo(this.selectSize*2,this.width-this.selectSize)));var ee=re(this.color);g.fillStyle="rgba("+ee.r+","+ee.g+","+ee.b+", 1)",g.fill(),g.strokeStyle="rgba(0, 0, 0, 1)",g.stroke(),this.imageData=g.getImageData(0,0,this.width,this.width),o.drawImage(d,this.position.x+this.paddingX,this.position.y+this.paddingY)};var te=W.length;W[te]=q}var Z=new Object;Z.width=18,Z.imageData=null,Z.innerRadius,Z.startAngle=0,Z.outerRadius,Z.outerStrokeStyle="rgba(0,0,0,0.2)",Z.innerStrokeStyle="rgba(0,0,0,0.2)",Z.pos,Z.draw=function(){if(this.imageData)o.putImageData(this.imageData,0,0);else{for(var D=this.startAngle,z=0;z<=360;z++){var H=Fi(z-2),q=Fi(z);o.beginPath(),o.moveTo(y,y),o.arc(y,y,this.outerRadius,H,q,!1),o.closePath();var te=Bt(D/360,1,1);o.fillStyle="rgb("+te.r+", "+te.g+", "+te.b+")",o.fill(),D++,D>=360&&(D=0)}o.globalCompositeOperation="destination-out",o.beginPath(),o.arc(y,y,this.innerRadius,0,e*2),o.fill(),o.globalCompositeOperation="source-over",o.strokeStyle=this.innerStrokeStyle,o.lineWidth=2,o.stroke(),o.closePath(),o.beginPath(),o.arc(y,y,this.outerRadius,0,e*2),o.strokeStyle=this.outerStrokeStyle,o.lineWidth=2,o.stroke(),o.closePath(),this.imageData=o.getImageData(0,0,v,v)}},Z.isDotIn=function(D){return Math.pow(this.pos.x-D.x,2)+Math.pow(this.pos.y-D.y,2)<Math.pow(this.outerRadius,2)&&Math.pow(this.pos.x-D.x,2)+Math.pow(this.pos.y-D.y,2)>Math.pow(this.innerRadius,2)};var ie=new Object;ie.lineWeight=2,ie.height=4,ie.paddingX=2,ie.path;var G=new Object;G.width=18,G.padding=4,G.outerStrokeStyle="rgba(0,0,0,0.2)",G.innerStrokeStyle="rgba(0,0,0,0.2)",G.height,G.pos,G.updateSize=function(){this.pos={x:v+G.padding,y:G.padding},this.height=v-G.padding*2},G.draw=function(){var D=o.createLinearGradient(0,0,0,this.height),z=Bt(T.h,1,1);D.addColorStop(0,"rgba("+z.r+","+z.g+","+z.b+",1)"),D.addColorStop(1,"rgba("+z.r+","+z.g+","+z.b+",0)"),o.beginPath(),o.rect(this.pos.x,this.pos.y,this.width,this.height),o.fillStyle="white",o.fill(),o.fillStyle=D,o.fill(),o.strokeStyle="rgba(0,0,0, 0.2)",o.lineWidth=2,o.stroke(),o.closePath()},G.dotToAlpha=function(D){return 1-Math.abs(this.pos.y-D.y)/this.height},G.alphaToDot=function(D){return{x:0,y:this.height-this.height*D}},G.limitDotPosition=function(D){var z=D.y;return z<this.pos.y&&(z=this.pos.y),z>this.pos.y+this.height&&(z=this.pos.y+this.height),{x:this.pos.x,y:z}},G.isDotIn=function(D){return!(D.x<this.pos.x||D.x>this.pos.x+G.width||D.y<this.pos.y||D.y>this.pos.y+this.height)};var J=new Object;J.svCursorData=null,J.stCursor=null,J.curType=0,J.size=16,J.cEl=document.body,J.initSvCursor=function(){if(!s)return!1;if(this.curType=1,this.stCursor||(this.stCursor=window.getComputedStyle(this.cEl).cursor,this.stCursor||(this.stCursor="auto")),this.svCursorData)return this.cEl.style.cursor=this.svCursorData,!0;if(!d)return!1;var D=this.size+2;d.width=D,d.height=D,g.clearRect(0,0,this.size,this.size),g.strokeStyle="rgba(255, 255, 255, 1)",g.beginPath(),g.lineWidth=2,g.arc(D/2,D/2,this.size/2,0,e*2),g.stroke(),g.closePath();var z=D,H=d.toDataURL();return this.svCursorData="url("+H+") "+z/2+" "+z/2+", auto",this.svCursorData?(this.cEl.style.cursor=this.svCursorData,this.cEl.style.cursor.indexOf(H)===-1&&(this.svCursorData="crosshair",this.cEl.style.cursor="crosshair"),!0):!1},J.initStandartCursor=function(){!this.stCursor||(J.curType=0,this.cEl.style.cursor=this.stCursor)},J.updateCursor=function(D){!i||Et.cursorLock||(t.isDotIn(D)?J.initSvCursor():J.initStandartCursor())};function ze(D){var z="",H="";if(D.alpha_slider!==void 0&&(D.alphaSlider=D.alpha_slider),D.input_color!==void 0&&(D.inputColor=D.input_color),D.input_format!==void 0&&(D.inputFormat=D.input_format),D.input&&typeof D.input!="object"?(D.input=document.getElementById(D.input),x=D.input):typeof D.input=="object"&&(x=D.input),D.changeCursor!==void 0&&(i=D.changeCursor),D.alpha!==void 0&&(R=D.alpha),D.alphaSlider!==void 0&&(a=D.alphaSlider),D.inputColor!==void 0&&(Q=D.inputColor),D.inputFormat!==void 0&&(M=D.inputFormat),D.userEvents&&(c=D.userEvents),D.place&&typeof D.place!="object"&&(H=D.place,D.place=document.getElementById(D.place)),D.place)b=D.place;else if(x){p.tag=document.createElement("div"),p.tag.className="popup-kelly-color",D.popupClass?p.tag.className=D.popupClass:(p.tag.className="popup-kelly-color",p.tag.style.position="absolute",p.tag.style.bottom="0px",p.tag.style.left="0px",p.tag.style.display="none",p.tag.style.backgroundColor="#e1e1e1",p.tag.style.border="1px solid #bfbfbf",p.tag.style.boxShadow="7px 7px 14px -3px rgba(0,0,0,0.24)",p.tag.style.borderTopLeftRadius="4px",p.tag.style.borderTopRightRadius="4px",p.tag.style.borderBottomLeftRadius="4px",p.tag.style.borderBottomRightRadius="4px",p.tag.style.padding="12px",p.tag.style.boxSizing="content-box"),b=p.tag;var q=document.getElementsByTagName("body")[0];q.appendChild(p.tag),bt(x,"click",function(Qe){return m.popUpShow(Qe)},"popup_")}else z+='| "place" ('+H+") not not found";var te=!1;if(D.color?te=_e(D.color):x&&x.value&&(te=_e(x.value)),te&&($=te.h,a&&(R=te.a)),D.method&&(D.method=="triangle"||D.method=="quad")&&(l=D.method),Hi()||(z+=" | cant init canvas context"),D.resizeWith&&(typeof D.resizeWith!="object"&&typeof D.resizeWith!="boolean"&&(D.resizeWith=document.getElementById(D.resizeWith)),D.resizeWith===!0?N=s:N=D.resizeWith,D.resizeSide&&(_=D.resizeSide),N)){var ee=ve(N);ee&&(D.size=ve(N)),bt(window,"resize",function(Qe){return m.syncSize(Qe)},"canvas_")}if(D.size&&D.size>0&&(v=D.size),z){typeof console!="undefined"&&console.log("KellyColorPicker : "+z);return}if(l=="quad"&&(t=kt()),l=="triangle"&&(t=Je()),x){var $e=function(We){var We=We||window.event;We.target||(We.target=We.srcElement),m.setColorByHex(We.target.value,!0)};bt(x,"click",$e,"input_edit_"),bt(x,"change",$e,"input_edit_"),bt(x,"keyup",$e,"input_edit_"),bt(x,"keypress",$e,"input_edit_")}D.colorSaver&&(X("left",!0),X("right")),D.methodSwitch&&j(),Ui(),Ee(),m.setColorByHex(!1)}function ve(D){var z=D.getBoundingClientRect(),H=0,q=0;return a&&(q=G.width+G.padding*2),D===s?z.width<=z.height?H=z.height:z.height<z.width&&(H=z.width):_?_=="height"?H=z.height:_=="width"&&(H=z.width):z.width>z.height?H=z.height:z.height>=z.width&&(H=z.width),H=parseInt(H),a&&(H-=q),H<=0?!1:H}function _e(D,z){var H=1,q=!1;if(D=D.trim(D),D.length<=7)D.charAt(0)=="#"&&(D=D.slice(1)),D.length==3?q=D+D:D.length==6&&(q=D);else if(D.substring(0,3)=="rgb"){var te=D.split(",");if(te.length>=3&&te.length<=4){te[0]=te[0].replace("rgba(",""),te[0]=te[0].replace("rgb(","");var ee={r:parseInt(te[0]),g:parseInt(te[1]),b:parseInt(te[2])};ee.r<=255&&ee.g<=255&&ee.b<=255&&(q=qe(ee),te.length==4&&(H=parseFloat(te[3]),(!H||H<0)&&(H=0),H>1&&(H=1)))}}return q===!1&&z?!1:(q===!1&&(q="000000"),q.charAt(0)!="#"&&(q="#"+q),{h:q,a:H})}function kt(){if(I.quad)return I.quad;var D=new Object;return D.size,D.padding=2,D.path,D.imageData=null,D.dotToSv=function(z){return{s:Math.abs(this.path[3].x-z.x)/this.size,v:Math.abs(this.path[3].y-z.y)/this.size}},D.svToDot=function(z){var H=this.path[0].x,q=this.path[0].y,te=.02;v<150?te=.07:v<100&&(te=.16);for(var ee=0;ee<this.size;ee++)for(var $e=0;$e<this.size;$e++){var Qe={x:$e+H,y:ee+q},We=this.dotToSv(Qe),St=Math.abs(We.s-z.s),pi=Math.abs(We.v-z.v);if(St<te&&pi<te)return Qe}return{x:0,y:0}},D.limitDotPosition=function(z){var H=z.x,q=z.y;return H<this.path[0].x&&(H=this.path[0].x),H>this.path[0].x+this.size&&(H=this.path[0].x+this.size),q<this.path[0].y&&(q=this.path[0].y),q>this.path[0].y+this.size&&(q=this.path[0].y+this.size),{x:H,y:q}},D.draw=function(){this.imageData||(this.imageData=o.createImageData(this.size,this.size));for(var z=0,H=this.path[0].x,q=this.path[0].y,te=0;te<this.size;te++)for(var ee=0;ee<this.size;ee++){var $e={x:ee+H,y:te+q},Qe=this.dotToSv($e),We=Bt(T.h,Qe.s,Qe.v);this.imageData.data[z+0]=We.r,this.imageData.data[z+1]=We.g,this.imageData.data[z+2]=We.b,this.imageData.data[z+3]=255,z+=4}o.putImageData(this.imageData,H,q),o.beginPath(),o.strokeStyle="rgba(0,0,0, 0.2)",o.lineWidth=2;for(var z=0;z<=this.path.length-1;++z)z==0?o.moveTo(this.path[z].x,this.path[z].y):o.lineTo(this.path[z].x,this.path[z].y);o.stroke(),o.closePath()},D.updateSize=function(){var z=Z.innerRadius*2-ie.paddingX*2-this.padding*2;this.size=Math.floor(z/Math.sqrt(2)),this.path=new Array,this.path[0]={x:-1*(this.size/2),y:-1*(this.size/2)},this.path[1]={x:this.path[0].x+this.size,y:this.path[0].y},this.path[2]={x:this.path[1].x,y:this.path[1].y+this.size},this.path[3]={x:this.path[2].x-this.size,y:this.path[2].y},this.path[4]={x:this.path[0].x,y:this.path[0].y};for(var H=0;H<=this.path.length-1;++H)this.path[H].x+=Z.pos.x,this.path[H].y+=Z.pos.y},D.isDotIn=function(z){return!(z.x<this.path[0].x||z.x>this.path[0].x+this.size||z.y<this.path[0].y||z.y>this.path[0].y+this.size)},I.quad=D,D}function Je(){if(I.triangle)return I.triangle;var D=new Object;return D.size,D.padding=2,D.path,D.imageData=null,D.followWheel=!0,D.s,D.sOnTop=!1,D.outerRadius,D.limitDotPosition=function(z){var H=z.x,q=z.y,te=this.path[0].x,ee=this.path[2].x,$e=H,Qe=q;$e=Math.min(Math.max(ee,$e),te);var We=(this.path[0].y-this.path[1].y)/(this.path[0].x-this.path[1].x),St=Math.ceil(this.path[1].y+We*($e-this.path[1].x));We=(this.path[0].y-this.path[2].y)/(this.path[0].x-this.path[2].x);var pi=Math.floor(this.path[2].y+We*($e-this.path[2].x));return H<ee&&((Z.pos.y-q)/(Z.pos.x-H),Qe=q),Qe=Math.min(Math.max(St,Qe),pi),{x:$e,y:Qe}},D.svToDot=function(z){var H=.02;v<150?H=.07:v<100&&(H=.16);for(var q=0;q<this.size;q++)for(var te=0;te<this.size;te++){var ee={x:this.path[1].x+te,y:this.path[1].y+q};if(t.isDotIn(ee)){var $e=this.dotToSv(ee),Qe=Math.abs($e.s-z.s),We=Math.abs($e.v-z.v);if(Qe<H&&We<H)return ee}}return{x:0,y:0}},D.draw=function(){this.imageData||(this.imageData=g.createImageData(this.size,this.size)),d.width=this.size,d.height=this.size;for(var z=this.path[1].x,H=this.path[1].y,q=0,te=0;te<this.size;te++)for(var ee=0;ee<this.size;ee++){var $e={x:this.path[1].x+ee,y:this.path[1].y+te};if(!t.isDotIn($e))this.imageData.data[q+0]=0,this.imageData.data[q+1]=0,this.imageData.data[q+2]=0,this.imageData.data[q+3]=0;else{var Qe=this.dotToSv($e),We=Bt(T.h,Qe.s,Qe.v);this.imageData.data[q+0]=We.r,this.imageData.data[q+1]=We.g,this.imageData.data[q+2]=We.b,this.imageData.data[q+3]=255}q+=4}g.putImageData(this.imageData,0,0),o.drawImage(d,z,H),o.beginPath(),o.strokeStyle="rgba(0, 0, 0, 0.3)",o.lineWidth=2;for(var St=this.path,q=0;q<=St.length-1;++q)q==0?o.moveTo(St[q].x,St[q].y):o.lineTo(St[q].x,St[q].y);o.stroke(),o.closePath()},D.calcS=function(z){return Math.abs((z[1].x-z[0].x)*(z[2].y-z[0].y)-(z[2].x-z[0].x)*(z[1].y-z[0].y))/2},D.dotToSv=function(z){var H=vt({x:z.x,y:z.y},this.vol),q=sn(H,this.vol[0]);q<1&&(q=Math.floor(q)),q>this.h-1&&(q=this.h);var te=q/this.h,ee=Math.abs(mt(z,this.sSide));return ee<30&&(ee=30),ee-=30,ee=60-ee,ee=ee/60,{s:ee,v:te}},D.isDotIn=function(z){var H=[{x:this.path[0].x,y:this.path[0].y},{x:this.path[1].x,y:this.path[1].y},{x:z.x,y:z.y}],q=this.calcS(H);return H[1]={x:this.path[2].x,y:this.path[2].y},q+=this.calcS(H),H[0]={x:this.path[1].x,y:this.path[1].y},q+=this.calcS(H),Math.ceil(q)==Math.ceil(this.s)},D.updateSize=function(){this.outerRadius=Z.innerRadius-ie.paddingX-this.padding,this.size=Math.floor(2*this.outerRadius*Math.sin(Fi(60)));var z=Math.sqrt(3)/2*this.size;this.h=Math.sqrt(3)/2*this.size,this.path=new Array,this.path[0]={x:this.outerRadius,y:0},this.path[1]={x:this.path[0].x-z,y:-1*(this.size/2)},this.path[2]={x:this.path[1].x,y:this.size/2},this.path[3]={x:this.path[0].x,y:this.path[0].y};for(var H=0;H<=this.path.length-1;++H)this.path[H].x+=Z.pos.x,this.path[H].y+=Z.pos.y;if(this.vol=new Array,this.s=this.calcS(this.path),this.sOnTop){var q=Ft(this.path[0],this.path[2]);this.vol[0]={x:this.path[1].x,y:this.path[1].y},this.vol[1]={x:q.x,y:q.y},this.sSide=this.path[1]}else{var q=Ft(this.path[0],this.path[1]);this.vol[0]={x:this.path[2].x,y:this.path[2].y},this.vol[1]={x:q.x,y:q.y},this.sSide=this.path[2]}},I.triangle=D,D}function bt(D,z,H,q){return typeof D!="object"&&(D=document.getElementById(D)),D?(q||(q=""),f[q+z]=H,D.addEventListener?D.addEventListener(z,f[q+z]):D.attachEvent("on"+z,f[q+z]),!0):!1}function Le(D,z,H){return typeof D!="object"&&(D=document.getElementById(D)),!D||(H||(H=""),!f[H+z])?!1:(D.removeEventListener?D.removeEventListener(z,f[H+z]):D.detachEvent("on"+z,f[H+z]),f[H+z]=null,!0)}function Bt(D,z,H){var q,te,ee,$e,Qe,We,St,pi;switch(D&&z===void 0&&H===void 0&&(z=D.s,H=D.v,D=D.h),$e=Math.floor(D*6),Qe=D*6-$e,We=H*(1-z),St=H*(1-Qe*z),pi=H*(1-(1-Qe)*z),$e%6){case 0:q=H,te=pi,ee=We;break;case 1:q=St,te=H,ee=We;break;case 2:q=We,te=H,ee=pi;break;case 3:q=We,te=St,ee=H;break;case 4:q=pi,te=We,ee=H;break;case 5:q=H,te=We,ee=St;break}return{r:Math.floor(q*255),g:Math.floor(te*255),b:Math.floor(ee*255)}}function Pe(D,z,H){D&&z===void 0&&H===void 0&&(z=D.g,H=D.b,D=D.r),D=D/255,z=z/255,H=H/255;var q=Math.max(D,z,H),te=Math.min(D,z,H),ee,$e,Qe=q,We=q-te;if($e=q==0?0:We/q,q==te)ee=0;else{switch(q){case D:ee=(z-H)/We+(z<H?6:0);break;case z:ee=(H-D)/We+2;break;case H:ee=(D-z)/We+4;break}ee/=6}return{h:ee,s:$e,v:Qe}}function re(D){var z=parseInt(D.charAt(0)=="#"?D.slice(1):D,16);return{r:z>>16,g:z>>8&255,b:z&255}}function qe(D){var z=function(H){var q=H.toString(16);return q.length===1?"0"+q:q};return"#"+z(D.r)+z(D.g)+z(D.b)}function Fi(D){return D*(e/180)}function sn(D,z){return Math.sqrt(Math.pow(D.x-z.x,2)+Math.pow(D.y-z.y,2))}function Ft(D,z){return{x:(D.x+z.x)/2,y:(D.y+z.y)/2}}function vt(D,z){var H=(z[0].x-z[1].x)*(z[0].x-z[1].x)+(z[0].y-z[1].y)*(z[0].y-z[1].y),q=(D.x-z[0].x)*(z[1].x-z[0].x)+(D.y-z[0].y)*(z[1].y-z[0].y),te=!0,ee=q/H;return ee<0&&(ee=0,te=!1),ee>1&&(ee=1,te=!1),{x:z[0].x+ee*(z[1].x-z[0].x),y:z[0].y+ee*(z[1].y-z[0].y),pt:te}}function mt(D,z,H){z||(z={x:0,y:0});var q=D.x-z.x,te=D.y-z.y,ee=Math.atan2(te,q)*180/e;return H&&ee<0&&(ee=360+ee),ee}function ae(D,z){z=Fi(z);for(var H=new Array,q=0;q<=D.length-1;++q)H[q]={x:D[q].x*Math.cos(z)-D[q].y*Math.sin(z),y:D[q].x*Math.sin(z)+D[q].y*Math.cos(z)};return H}function Ee(){C=k+ie.paddingX,w=!1,Z.imageData=null,y=v/2,Z.pos={x:y,y},Z.outerRadius=y-C,Z.innerRadius=Z.outerRadius-Z.width,ie.path=[{x:Z.innerRadius-ie.paddingX,y:ie.height*-1},{x:Z.outerRadius+ie.paddingX,y:ie.height*-1},{x:Z.outerRadius+ie.paddingX,y:ie.height},{x:Z.innerRadius-ie.paddingX,y:ie.height},{x:Z.innerRadius-ie.paddingX,y:ie.height*-1}];var D=v;a&&(D+=G.width+G.padding*2),b.tagName!="CANVAS"&&(b.style.width=D+"px",b.style.height=v+"px"),s.width=D,s.height=v,N!=s&&(s.style.width=D+"px",s.style.height=v+"px");for(var z=0;z<=W.length-1;++z)W[z].updateSize();L&&(L.imageData.triangle=null,L.imageData.quad=null,L.updateSize()),t.updateSize(),a&&G.updateSize()}function Dt(D){if(!!x){if(c.updateinput){var z=c.updateinput;if(!z(m,x,D))return}var H="rgba("+E.r+", "+E.g+", "+E.b+", "+R.toFixed(2)+")";D||(R<1&&M==="mixed"?x.value=H:M==="hex"||M==="mixed"?x.value=$:x.value=H),Q&&(T.v<.5?x.style.color="#FFF":x.style.color="#000",x.style.background=H)}}function Hi(){return b?(b.tagName!="CANVAS"?(s=document.createElement("CANVAS"),b.appendChild(s)):s=b,typeof window.G_vmlCanvasManager!="undefined"&&(s=window.G_vmlCanvasManager.initElement(s),d=window.G_vmlCanvasManager.initElement(d)),s.getContext&&s.getContext("2d")?(o=s.getContext("2d"),g=d.getContext("2d"),!0):!1):!1}function Ui(){bt(s,"mousedown",function(D){m.mouseDownEvent(D)},"wait_action_"),bt(s,"touchstart",function(D){m.mouseDownEvent(D)},"wait_action_"),bt(s,"mouseout",function(D){m.mouseOutEvent(D)},"wait_action_"),bt(window,"touchmove",function(D){m.touchMoveEvent(D)},"wait_action_"),bt(s,"mousemove",function(D){m.mouseMoveRest(D)},"wait_action_")}function ar(){Le(s,"mousedown","wait_action_"),Le(s,"touchstart","wait_action_"),Le(s,"mouseout","wait_action_"),Le(window,"touchmove","wait_action_"),Le(s,"mousemove","wait_action_")}function Ht(D){D=D||window.event;var z,H,q=document.body.scrollLeft+document.documentElement.scrollLeft,te=document.body.scrollTop+document.documentElement.scrollTop;D.type=="touchend"?(z=D.changedTouches[0].clientX+q,H=D.changedTouches[0].clientY+te):D.type=="touchmove"||D.touches?(z=D.touches[0].clientX+q,H=D.touches[0].clientY+te):(z=D.clientX+q,H=D.clientY+te);var ee=s.getBoundingClientRect();return z-=ee.left+q,H-=ee.top+te,{x:z,y:H}}function Nr(D){for(var z=!1,H=0;H<=W.length-1;++H)W[H].selected&&(z=H),W[H].selected=!1;for(var q=!1,H=0;H<=W.length-1;++H)if(H==D){W[H].selected=!0,m.setColorByHex(W[H].color),q=!0;break}if(q&&c.selectcolorsaver){var te=c.selectcolorsaver;te(m,W[D])}return!q&&z!==!1&&(W[z].selected=!0),q}function hr(){for(var D=0;D<=W.length-1;++D)W[D].selected&&(W[D].color=$)}function ks(){if(W.length)for(var D=0;D<=W.length-1;++D)W[D].draw()}function ws(){return o?(o.clearRect(0,0,s.width,s.height),w?(o.putImageData(S,0,0),ks(),!0):(Z.draw(),t.draw(),a&&G.draw(),ks(),L&&L.draw(),h||(S=o.getImageData(0,0,s.width,s.height),w=!0),!0)):!1}function Yi(){if(!ws())return!1;var D=T.h*360-Z.startAngle;if(a){o.beginPath();var z=2,H=2,q=G.height*(1-R);o.rect(G.pos.x-H,G.padding+q-z/2,G.width+H*2,z),o.strokeStyle="rgba(0,0,0, 0.8)",o.lineWidth=2,o.stroke(),o.closePath()}o.beginPath();for(var te=ae(ie.path,D,{x:Z.pos.x,y:Z.pos.y}),ee=0;ee<=te.length-1;++ee)te[ee].x+=Z.pos.x,te[ee].y+=Z.pos.y,ee==0?o.moveTo(te[ee].x,te[ee].y):o.lineTo(te[ee].x,te[ee].y);return o.strokeStyle="rgba(0,0,0,0.8)",o.lineWidth=ie.lineWeight,o.stroke(),o.closePath(),T.v>.5&&T.s<.5?o.strokeStyle="rgba(0, 0, 0, 1)":o.strokeStyle="rgba(255, 255, 255, 1)",o.beginPath(),o.lineWidth=2,o.arc(T.x,T.y,n.radius,0,e*2),o.stroke(),o.closePath(),!1}this.popUpClose=function(D){if(p.tag!==!1){if(D&&(D.target==x||D.target==s||D.target==p.tag))return!1;p.tag.style.display="none",Et.activePopUp==m&&(Et.activePopUp=!1)}},this.popUpShow=function(D){if(p.tag!==!1){if(c.popupshow){var z=c.popupshow;if(!z(m,D))return}Et.popupEventsInclude||(bt(document,"click",function(St){return Et.activePopUp?Et.activePopUp.popUpClose(St):!1},"popup_close_"),bt(window,"resize",function(St){if(Et.activePopUp)return Et.activePopUp.popUpShow(St)},"popup_resize_"),Et.popupEventsInclude=!0),Et.activePopUp&&Et.activePopUp.popUpClose(!1);var H=m.getCanvas().width,q=m.getAlphaFig();q&&(H-=q.width+q.padding);var te=window.getComputedStyle(p.tag),ee=parseInt(te.paddingBottom)+parseInt(te.paddingTop);ee<=0&&(ee=0);var $e=x.getBoundingClientRect(),Qe=$e.top+(window.scrollY||window.pageYOffset||document.body.scrollTop)-ee,We=$e.left+(window.scrollX||window.pageXOffset||document.body.scrollLeft);return p.tag.style.top=Qe-H-p.margin+"px",p.tag.style.left=We+"px",p.tag.style.display="block",Et.activePopUp=m,!1}},this.setHueByDot=function(D){var z=mt(D,Z.pos)+Z.startAngle;if(z<0&&(z=360+z),T.h=z/360,E=Bt(T.h,T.s,T.v),$=qe(E),hr(),c.change){var H=c.change;H(m)}Dt(),w=!1,Yi()},this.setColorForColorSaver=function(D,z){var H=_e(D,!0);if(!!H){var q=m.getColorSaver(z);return q.selected?this.setColorByHex(D,!1):(q.color=H.h,Yi()),!0}},this.setColor=function(D,z){m.setColorByHex(D,z)},this.setColorByHex=function(D,z){z||(z=!1);var H=R;if(D!==!1){if(!D||!D.length)return;var q=_e(D,!0);if(!q)return;D=q.h,a&&(H=q.a)}else D=$;if(a&&D==$&&w&&H!=R){R=H,Yi();return}if(!($&&D==$&&w)){R=H,E=re(D),$=D,T=Pe(E);var te=t.svToDot(T);if(T.x=te.x,T.y=te.y,w=!1,hr(),Yi(),c.change){var ee=c.change;ee(m)}Dt(z)}},this.setAlphaByDot=function(D){if(R=G.dotToAlpha(D),c.change){var z=c.change;z(m)}Dt(),Yi()},this.setAlpha=function(D){R=D,Dt(),Yi()},this.setColorByDot=function(D){var z=t.dotToSv(D);if(T.s=z.s,T.v=z.v,T.x=D.x,T.y=D.y,T.s>1&&(T.s=1),T.s<0&&(T.s=0),T.v>1&&(T.v=1),T.v<0&&(T.v=0),E=Bt(T.h,T.s,T.v),$=qe(E),hr(),c.change){var H=c.change;H(m)}Dt(),Yi()},this.mouseOutEvent=function(D){J.curType>0&&!Et.cursorLock&&J.initStandartCursor()},this.mouseMoveRest=function(D){if(!h&&!!u){u=!1;var z=Ht(D);if(J.updateCursor(z),requestAnimationFrame(function(){u=!0}),c.mousemoverest){var H=c.mousemoverest;H(D,m,z)}}},this.touchMoveEvent=function(D){h&&event.preventDefault()},this.mouseDownEvent=function(D){D.preventDefault();var z,H=!1,q=Ht(D);if(Z.isDotIn(q))h="wheel",m.setHueByDot(q),z=function(ee){m.wheelMouseMove(ee,q)},H=function(ee){Et.cursorLock=!1,m.wheelMouseUp(ee,q)};else if(t.isDotIn(q))h="sv",m.setColorByDot(q),z=function(ee){m.svMouseMove(ee,q)},H=function(ee){Et.cursorLock=!1,m.svMouseUp(ee,q)};else if(a&&G.isDotIn(q))h="alpha",m.setAlphaByDot(q),z=function(ee){m.alphaMouseMove(ee,q)},H=function(ee){Et.cursorLock=!1,m.alphaMouseUp(ee,q)};else if(L&&L.isDotIn(q))m.setMethod();else if(W.length){for(var te=0;te<=W.length-1;++te)if(W[te].isDotIn(q)){Nr(te);break}}z&&H&&(ar(),Et.cursorLock=m,bt(document,"mouseup",H,"action_process_"),bt(document,"mousemove",z,"action_process_"),bt(document,"touchend",H,"action_process_"),bt(document,"touchmove",z,"action_process_"))},this.wheelMouseMove=function(D,z){if(D.preventDefault(),!!h&&!!u){u=!1;var H=Ht(D);if(requestAnimationFrame(function(){u=!0}),m.setHueByDot(H),c.mousemoveh){var q=c.mousemoveh;q(D,m,H)}}},this.wheelMouseUp=function(D,z){if(D.preventDefault(),!!h){Le(document,"mouseup","action_process_"),Le(document,"mousemove","action_process_"),Le(document,"touchend","action_process_"),Le(document,"touchmove","action_process_"),Ui(),h=!1,w=!1,Yi();var H=Ht(D);if(J.updateCursor(H),c.mouseuph){var q=c.mouseuph;q(D,m,H)}}},this.alphaMouseMove=function(D,z){if(D.preventDefault(),!!h&&!!u){u=!1;var H=Ht(D);if(H=G.limitDotPosition(H),requestAnimationFrame(function(){u=!0}),m.setAlphaByDot(H),c.mousemovealpha){var q=c.mousemovealpha;q(D,m,H)}}},this.alphaMouseUp=function(D,z){if(D.preventDefault(),!!h){Le(document,"mouseup","action_process_"),Le(document,"mousemove","action_process_"),Le(document,"touchend","action_process_"),Le(document,"touchmove","action_process_"),Ui(),h=!1;var H=Ht(D);if(J.updateCursor(H),c.mouseupalpha){var q=c.mouseupalpha;q(D,m,H)}}},this.svMouseMove=function(D,z){if(D.preventDefault(),!!h&&!!u){u=!1;var H=Ht(D);if(H=t.limitDotPosition(H),requestAnimationFrame(function(){u=!0}),m.setColorByDot(H),c.mousemovesv){var q=c.mousemovesv;q(D,m,H)}}},this.svMouseUp=function(D,z){if(D.preventDefault(),!!h){Le(document,"mouseup","action_process_"),Le(document,"mousemove","action_process_"),Le(document,"touchend","action_process_"),Le(document,"touchmove","action_process_"),Ui(),h=!1;var H=Ht(D);if(J.updateCursor(H),a&&(w=!1,Yi()),c.mouseupsv){var q=c.mouseupsv;q(D,m,H)}}},this.addUserEvent=function(D,z){return c[D]=z,!0},this.removeUserEvent=function(D){return c[D]?(c[D]=null,!0):!1},this.getCanvas=function(){return o?s:!1},this.getCtx=function(){return o||!1},this.getInput=function(){return x},this.getSvFig=function(){return t},this.getSvFigCursor=function(){return n},this.getWheel=function(){return Z},this.getWheelCursor=function(){return ie},this.getCurColorHsv=function(){return T},this.getCurColorRgb=function(){return E},this.getCurColorHex=function(){return $},this.getCurColorRgba=function(){return{r:E.r,g:E.g,b:E.b,a:R}},this.getCurAlpha=function(){return R},this.getAlphaFig=function(){return a?G:!1},this.getPopup=function(){return p},this.getSize=function(){return v},this.getColorSaver=function(D){for(var z=0;z<=W.length-1;++z)if(!D&&W[z].selected||W[z].align==D)return W[z].rgb=re(W[z].color),W[z].hsv=Pe(W[z].rgb.r,W[z].rgb.g,W[z].rgb.b),W[z]},this.setColorSaver=function(D){if(!D)return!1;for(var z=0;z<=W.length-1;++z)if(W[z].align==D)return Nr(z),W[z]},this.updateView=function(D){return o?(D&&(Z.imageData=null,t.imageData=null,S=null),w=!1,Ee(),Yi(),!0):!1},this.resize=function(D,z){return o?D==v&&!z?!0:(w=!1,Z.imageData=null,t.imageData=null,S=null,v=D,Ee(),m.setColorByHex(!1),!1):!1},this.syncSize=function(D){if(!N)return!1;var z=ve(N);return z&&m.resize(z),!1},this.setMethod=function(D){if(D||(D="triangle",l=="triangle"&&(D="quad")),D==l||l!="quad"&&l!="triangle")return!1;if(l=D,l=="quad"&&(t=kt()),l=="triangle"&&(t=Je()),m.resize(v,!0),c.setmethod){var z=c.setmethod;z(m,l)}return!0},this.destroy=function(){if(!m)return!1;J.curType>0&&(Et.cursorLock=!1,J.initStandartCursor()),h&&(Le(document,"mouseup","action_process_"),Le(document,"mousemove","action_process_"),Le(document,"touchend","action_process_"),Le(document,"touchmove","action_process_"),h=!1),p.tag&&Le(x,"click","popup_"),x&&(Le(x,"click","input_edit_"),Le(x,"change","input_edit_"),Le(x,"keyup","input_edit_"),Le(x,"keypress","input_edit_")),Et.popupEventsInclude&&f.popup_close_click&&(Et.activePopUp&&Et.activePopUp.popUpClose(!1),Le(document,"click","popup_close_"),Le(window,"resize","popup_resize_"),Et.popupEventsInclude=!1),Z.imageData=null,t.imageData=null,S=null,d=null,b&&b.parentNode&&b.parentNode.removeChild(b),N&&Le(window,"resize","canvas_"),ar(),m=null},ze(r)}Et.cursorLock=!1;Et.activePopUp=!1;Et.popupEventsInclude=!1;Et.attachToInputByClass=function(r,e){for(var t=new Array,i=document.getElementsByClassName(r),n=0;n<i.length;n++)e?e.input=i[n]:e={input:i[n],size:150},t.push(new Et(e));return t};function G$(r){let e,t,i,n,s,o,l,a,h,u,f,c,d,g,w,S,x,Q;return{c(){e=B("div"),t=B("p"),i=ne("The color for "),n=ne(r[2]),s=ne(":"),o=F(),l=B("canvas"),a=B("br"),h=F(),u=B("input"),f=F(),c=B("button"),d=ne("Select"),g=F(),w=B("button"),S=ne("Quit"),P(l,"id","picker"),P(u,"id","color"),u.value=r[0],O(c,"background-color",r[5].textAreaColor),O(c,"font-family",r[5].font),O(c,"color",r[5].textColor),O(c,"font-size",r[5].fontSize),P(c,"class","svelte-6rjn91"),O(w,"background-color",r[5].textAreaColor),O(w,"font-family",r[5].font),O(w,"color",r[5].textColor),O(w,"font-size",r[5].fontSize),P(w,"class","svelte-6rjn91"),P(e,"id","colorPicker"),O(e,"background-color",r[5].backgroundColor),O(e,"font-family",r[5].font),O(e,"color",r[5].textColor),O(e,"font-size",r[5].fontSize),P(e,"class","svelte-6rjn91")},m(M,p){K(M,e,p),A(e,t),A(t,i),A(t,n),A(t,s),A(e,o),A(e,l),r[11](l),A(e,a),A(e,h),A(e,u),r[12](u),A(e,f),A(e,c),A(c,d),A(e,g),A(e,w),A(w,S),x||(Q=[U(u,"keyup",r[13]),U(c,"click",r[14]),U(w,"click",r[15])],x=!0)},p(M,p){p&4&&tt(n,M[2]),p&1&&u.value!==M[0]&&(u.value=M[0]),p&32&&O(c,"background-color",M[5].textAreaColor),p&32&&O(c,"font-family",M[5].font),p&32&&O(c,"color",M[5].textColor),p&32&&O(c,"font-size",M[5].fontSize),p&32&&O(w,"background-color",M[5].textAreaColor),p&32&&O(w,"font-family",M[5].font),p&32&&O(w,"color",M[5].textColor),p&32&&O(w,"font-size",M[5].fontSize),p&32&&O(e,"background-color",M[5].backgroundColor),p&32&&O(e,"font-family",M[5].font),p&32&&O(e,"color",M[5].textColor),p&32&&O(e,"font-size",M[5].fontSize)},d(M){M&&Y(e),r[11](null),r[12](null),x=!1,yt(Q)}}}function _ie(r){let e,t=r[1]&&G$(r);return{c(){t&&t.c(),e=bn()},m(i,n){t&&t.m(i,n),K(i,e,n)},p(i,[n]){i[1]?t?t.p(i,n):(t=G$(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:lt,o:lt,d(i){t&&t.d(i),i&&Y(e)}}}function $ie(r,e,t){let i;Re(r,et,b=>t(5,i=b));let{color:n=""}=e,{id:s=0}=e,{show:o=!1}=e,{item:l="circle"}=e,{explainText:a=""}=e,h,u;const f=Xa();jh(()=>{o&&new Et({place:h,input:u,colorSaver:!0,methodSwitch:!0})});function c(b,m){f(b,{data:m})}function d(){c("quitColorPicker",{})}function g(){document.body.style.cursor="default",c("colorChanged",{color:u.value,id:s})}function w(b){b.key==="Enter"&&(b.preventDefault(),b.stopPropagation(),g())}function S(b){sr[b?"unshift":"push"](()=>{h=b,t(3,h)})}function x(b){sr[b?"unshift":"push"](()=>{u=b,t(4,u)})}const Q=b=>{w(b)},M=b=>{g()},p=b=>{d()};return r.$$set=b=>{"color"in b&&t(0,n=b.color),"id"in b&&t(9,s=b.id),"show"in b&&t(1,o=b.show),"item"in b&&t(10,l=b.item),"explainText"in b&&t(2,a=b.explainText)},[n,o,a,h,u,i,d,g,w,s,l,S,x,Q,M,p]}class Mie extends _i{constructor(e){super(),Pi(this,e,$ie,_ie,ki,{color:0,id:9,show:1,item:10,explainText:2})}}function U$(r,e,t){const i=r.slice();return i[40]=e[t],i[42]=t,i}function Y$(r,e,t){const i=r.slice();return i[43]=e[t],i}function Rie(r){let e,t,i,n,s,o,l,a,h,u,f=r[7]!==void 0&&K$(r);return{c(){e=B("select"),f&&f.c(),t=B("option"),t.textContent="New",i=F(),n=B("button"),s=ne("Update Theme"),o=F(),l=B("button"),a=ne("Delete Theme"),t.__value="New",t.value=t.__value,P(e,"class","prefSelector svelte-1igofh5"),O(e,"background-color",r[8].textAreaColor),O(e,"color",r[8].textColor),r[5]===void 0&&Gu(()=>r[17].call(e)),O(n,"background-color",r[8].textAreaColor),O(n,"font-family",r[8].font),O(n,"color",r[8].textColor),O(n,"font-size",r[8].fontSize),P(n,"class","svelte-1igofh5"),O(l,"background-color",r[8].textAreaColor),O(l,"font-family",r[8].font),O(l,"color",r[8].textColor),O(l,"font-size",r[8].fontSize),P(l,"class","svelte-1igofh5")},m(c,d){K(c,e,d),f&&f.m(e,null),A(e,t),Zu(e,r[5]),K(c,i,d),K(c,n,d),A(n,s),K(c,o,d),K(c,l,d),A(l,a),h||(u=[U(e,"change",r[17]),U(e,"change",r[18]),U(n,"click",r[13]),U(l,"click",r[14])],h=!0)},p(c,d){c[7]!==void 0?f?f.p(c,d):(f=K$(c),f.c(),f.m(e,t)):f&&(f.d(1),f=null),d[0]&256&&O(e,"background-color",c[8].textAreaColor),d[0]&256&&O(e,"color",c[8].textColor),d[0]&160&&Zu(e,c[5]),d[0]&256&&O(n,"background-color",c[8].textAreaColor),d[0]&256&&O(n,"font-family",c[8].font),d[0]&256&&O(n,"color",c[8].textColor),d[0]&256&&O(n,"font-size",c[8].fontSize),d[0]&256&&O(l,"background-color",c[8].textAreaColor),d[0]&256&&O(l,"font-family",c[8].font),d[0]&256&&O(l,"color",c[8].textColor),d[0]&256&&O(l,"font-size",c[8].fontSize)},d(c){c&&Y(e),f&&f.d(),c&&Y(i),c&&Y(n),c&&Y(o),c&&Y(l),h=!1,yt(u)}}}function Qie(r){let e,t,i,n,s,o;return{c(){e=B("input"),t=F(),i=B("button"),n=ne("Save New"),P(e,"class","prefInput svelte-1igofh5"),O(e,"background-color",r[8].textAreaColor),O(e,"color",r[8].textColor),O(i,"background-color",r[8].textAreaColor),O(i,"font-family",r[8].font),O(i,"color",r[8].textColor),O(i,"font-size",r[8].fontSize),P(i,"class","svelte-1igofh5")},m(l,a){K(l,e,a),Xe(e,r[5]),K(l,t,a),K(l,i,a),A(i,n),s||(o=[U(e,"input",r[15]),U(e,"change",r[16]),U(i,"click",r[12])],s=!0)},p(l,a){a[0]&256&&O(e,"background-color",l[8].textAreaColor),a[0]&256&&O(e,"color",l[8].textColor),a[0]&160&&e.value!==l[5]&&Xe(e,l[5]),a[0]&256&&O(i,"background-color",l[8].textAreaColor),a[0]&256&&O(i,"font-family",l[8].font),a[0]&256&&O(i,"color",l[8].textColor),a[0]&256&&O(i,"font-size",l[8].fontSize)},d(l){l&&Y(e),l&&Y(t),l&&Y(i),s=!1,yt(o)}}}function K$(r){let e,t=r[7],i=[];for(let n=0;n<t.length;n+=1)i[n]=J$(Y$(r,t,n));return{c(){for(let n=0;n<i.length;n+=1)i[n].c();e=bn()},m(n,s){for(let o=0;o<i.length;o+=1)i[o].m(n,s);K(n,e,s)},p(n,s){if(s[0]&128){t=n[7];let o;for(o=0;o<t.length;o+=1){const l=Y$(n,t,o);i[o]?i[o].p(l,s):(i[o]=J$(l),i[o].c(),i[o].m(e.parentNode,e))}for(;o<i.length;o+=1)i[o].d(1);i.length=t.length}},d(n){In(i,n),n&&Y(e)}}}function J$(r){let e,t=r[43]+"",i,n;return{c(){e=B("option"),i=ne(t),e.__value=n=r[43],e.value=e.__value},m(s,o){K(s,e,o),A(e,i)},p(s,o){o[0]&128&&t!==(t=s[43]+"")&&tt(i,t),o[0]&128&&n!==(n=s[43])&&(e.__value=n,e.value=e.__value)},d(s){s&&Y(e)}}}function e4(r){let e,t,i,n,s,o,l,a,h=r[40].color+"",u,f,c,d;function g(...w){return r[19](r[40],...w)}return{c(){e=B("div"),t=B("label"),i=ne("#"),n=ne(r[42]),s=F(),o=B("div"),l=F(),a=B("label"),u=ne(h),f=F(),P(t,"class","circlePickerLabel svelte-1igofh5"),P(o,"class","circlePicker svelte-1igofh5"),O(o,"background-color",r[40].color),P(a,"class","circlePickerLabel svelte-1igofh5"),P(e,"class","circlePickerWrap svelte-1igofh5")},m(w,S){K(w,e,S),A(e,t),A(t,i),A(t,n),A(e,s),A(e,o),A(e,l),A(e,a),A(a,u),A(e,f),c||(d=U(o,"click",g),c=!0)},p(w,S){r=w,S[0]&256&&O(o,"background-color",r[40].color),S[0]&256&&h!==(h=r[40].color+"")&&tt(u,h)},d(w){w&&Y(e),c=!1,d()}}}function t4(r){let e,t;return e=new Mie({props:{item:r[4],explainText:r[6],color:r[0],id:r[1],show:r[2]}}),e.$on("colorChanged",r[37]),e.$on("quitColorPicker",r[38]),{c(){Kt(e.$$.fragment)},m(i,n){Vt(e,i,n),t=!0},p(i,n){const s={};n[0]&16&&(s.item=i[4]),n[0]&64&&(s.explainText=i[6]),n[0]&1&&(s.color=i[0]),n[0]&2&&(s.id=i[1]),n[0]&4&&(s.show=i[2]),e.$set(s)},i(i){t||(Se(e.$$.fragment,i),t=!0)},o(i){Me(e.$$.fragment,i),t=!1},d(i){jt(e,i)}}}function Die(r){let e,t,i,n,s,o,l,a,h,u,f,c,d,g,w,S,x=r[8].textAreaColor+"",Q,M,p,b,m,k,C,v=r[8].backgroundColor+"",y,T,E,$,R,N,_,W=r[8].textColor+"",L,I,j,X,Z,ie,G,J=r[8].borderColor+"",ze,ve,_e,kt,Je,bt,Le,Bt=r[8].functionColor+"",Pe,re,qe,Fi,sn,Ft,vt,mt=r[8].stringColor+"",ae,Ee,Dt,Hi,Ui,ar,Ht,Nr=r[8].constantColor+"",hr,ks,ws,Yi,D,z,H,q=r[8].keywordColor+"",te,ee,$e,Qe,We,St,pi,el=r[8].highlightBackgroundColor+"",Ua,iu,Ml,nu,Es,Rl,tl,Ql=r[8].selectionColor+"",Ya,ru,Dl,su,ys,il,Ir,le=r[8].Cyan+"",rt,wt,ur,Bs,vs,xp,ou,lu=r[8].Green+"",Zf,Cp,au,Ap,V,Ze,pt,Jt=r[8].Orange+"",qi,Ns,Ss,Rx,hu,Qx,Tp,Pp=r[8].Pink+"",aO,Dx,_p,Ex,uu,Bx,$p,Mp=r[8].Purple+"",hO,Nx,Rp,Ix,fu,Lx,Qp,Dp=r[8].Red+"",uO,zx,Ep,Wx,cu,Vx,Bp,Np=r[8].Yellow+"",fO,cO,Gf,at,dO,jx;function Fx(ue,je){return ue[3]?Qie:Rie}let Ip=Fx(r),Is=Ip(r),du=r[8].buttons,xr=[];for(let ue=0;ue<du.length;ue+=1)xr[ue]=e4(U$(r,du,ue));let on=r[8]!==void 0&&t4(r);return{c(){e=B("div"),t=B("label"),t.textContent="Name of theme:",i=F(),Is.c(),n=F(),s=B("h3"),s.textContent="Circle Colors",o=F(),l=B("div");for(let ue=0;ue<xr.length;ue+=1)xr[ue].c();a=F(),h=B("h3"),h.textContent="Various Other Colors",u=F(),f=B("div"),c=B("label"),c.textContent="textAreaColor",d=F(),g=B("div"),w=F(),S=B("label"),Q=ne(x),M=F(),p=B("label"),p.textContent="backgroundColor",b=F(),m=B("div"),k=F(),C=B("label"),y=ne(v),T=F(),E=B("label"),E.textContent="textColor",$=F(),R=B("div"),N=F(),_=B("label"),L=ne(W),I=F(),j=B("label"),j.textContent="borderColor",X=F(),Z=B("div"),ie=F(),G=B("label"),ze=ne(J),ve=F(),_e=B("label"),_e.textContent="functionColor",kt=F(),Je=B("div"),bt=F(),Le=B("label"),Pe=ne(Bt),re=F(),qe=B("label"),qe.textContent="stringColor",Fi=F(),sn=B("div"),Ft=F(),vt=B("label"),ae=ne(mt),Ee=F(),Dt=B("label"),Dt.textContent="constantColor",Hi=F(),Ui=B("div"),ar=F(),Ht=B("label"),hr=ne(Nr),ks=F(),ws=B("label"),ws.textContent="keywordColor",Yi=F(),D=B("div"),z=F(),H=B("label"),te=ne(q),ee=F(),$e=B("label"),$e.textContent="highlightBackgroundColor",Qe=F(),We=B("div"),St=F(),pi=B("label"),Ua=ne(el),iu=F(),Ml=B("label"),Ml.textContent="selectionColor",nu=F(),Es=B("div"),Rl=F(),tl=B("label"),Ya=ne(Ql),ru=F(),Dl=B("label"),Dl.textContent="Cyan",su=F(),ys=B("div"),il=F(),Ir=B("label"),rt=ne(le),wt=F(),ur=B("label"),ur.textContent="Green",Bs=F(),vs=B("div"),xp=F(),ou=B("label"),Zf=ne(lu),Cp=F(),au=B("label"),au.textContent="Orange",Ap=F(),V=B("div"),Ze=F(),pt=B("label"),qi=ne(Jt),Ns=F(),Ss=B("label"),Ss.textContent="Pink",Rx=F(),hu=B("div"),Qx=F(),Tp=B("label"),aO=ne(Pp),Dx=F(),_p=B("label"),_p.textContent="Purple",Ex=F(),uu=B("div"),Bx=F(),$p=B("label"),hO=ne(Mp),Nx=F(),Rp=B("label"),Rp.textContent="Red",Ix=F(),fu=B("div"),Lx=F(),Qp=B("label"),uO=ne(Dp),zx=F(),Ep=B("label"),Ep.textContent="Yellow",Wx=F(),cu=B("div"),Vx=F(),Bp=B("label"),fO=ne(Np),cO=F(),on&&on.c(),Gf=bn(),P(e,"id","themeName"),P(e,"class","svelte-1igofh5"),P(l,"class","circlePickersWrap svelte-1igofh5"),P(c,"class","variousPickerLabel1 svelte-1igofh5"),P(g,"class","circlePicker svelte-1igofh5"),O(g,"background-color",r[8].textAreaColor),P(S,"class","variousPickerLabel2 svelte-1igofh5"),P(p,"class","variousPickerLabel1 svelte-1igofh5"),P(m,"class","circlePicker svelte-1igofh5"),O(m,"background-color",r[8].backgroundColor),P(C,"class","variousPickerLabel2 svelte-1igofh5"),P(E,"class","variousPickerLabel1 svelte-1igofh5"),P(R,"class","circlePicker svelte-1igofh5"),O(R,"background-color",r[8].textColor),P(_,"class","variousPickerLabel2 svelte-1igofh5"),P(j,"class","variousPickerLabel1 svelte-1igofh5"),P(Z,"class","circlePicker svelte-1igofh5"),O(Z,"background-color",r[8].borderColor),P(G,"class","variousPickerLabel2 svelte-1igofh5"),P(_e,"class","variousPickerLabel1 svelte-1igofh5"),P(Je,"class","circlePicker svelte-1igofh5"),O(Je,"background-color",r[8].functionColor),P(Le,"class","variousPickerLabel2 svelte-1igofh5"),P(qe,"class","variousPickerLabel1 svelte-1igofh5"),P(sn,"class","circlePicker svelte-1igofh5"),O(sn,"background-color",r[8].stringColor),P(vt,"class","variousPickerLabel2 svelte-1igofh5"),P(Dt,"class","variousPickerLabel1 svelte-1igofh5"),P(Ui,"class","circlePicker svelte-1igofh5"),O(Ui,"background-color",r[8].constantColor),P(Ht,"class","variousPickerLabel2 svelte-1igofh5"),P(ws,"class","variousPickerLabel1 svelte-1igofh5"),P(D,"class","circlePicker svelte-1igofh5"),O(D,"background-color",r[8].keywordColor),P(H,"class","variousPickerLabel2 svelte-1igofh5"),P($e,"class","variousPickerLabel1 svelte-1igofh5"),P(We,"class","circlePicker svelte-1igofh5"),O(We,"background-color",r[8].highlightBackgroundColor),P(pi,"class","variousPickerLabel2 svelte-1igofh5"),P(Ml,"class","variousPickerLabel1 svelte-1igofh5"),P(Es,"class","circlePicker svelte-1igofh5"),O(Es,"background-color",r[8].selectionColor),P(tl,"class","variousPickerLabel2 svelte-1igofh5"),P(Dl,"class","variousPickerLabel1 svelte-1igofh5"),P(ys,"class","circlePicker svelte-1igofh5"),O(ys,"background-color",r[8].Cyan),P(Ir,"class","variousPickerLabel2 svelte-1igofh5"),P(ur,"class","variousPickerLabel1 svelte-1igofh5"),P(vs,"class","circlePicker svelte-1igofh5"),O(vs,"background-color",r[8].Green),P(ou,"class","variousPickerLabel2 svelte-1igofh5"),P(au,"class","variousPickerLabel1 svelte-1igofh5"),P(V,"class","circlePicker svelte-1igofh5"),O(V,"background-color",r[8].Orange),P(pt,"class","variousPickerLabel2 svelte-1igofh5"),P(Ss,"class","variousPickerLabel1 svelte-1igofh5"),P(hu,"class","circlePicker svelte-1igofh5"),O(hu,"background-color",r[8].Pink),P(Tp,"class","variousPickerLabel2 svelte-1igofh5"),P(_p,"class","variousPickerLabel1 svelte-1igofh5"),P(uu,"class","circlePicker svelte-1igofh5"),O(uu,"background-color",r[8].Purple),P($p,"class","variousPickerLabel2 svelte-1igofh5"),P(Rp,"class","variousPickerLabel1 svelte-1igofh5"),P(fu,"class","circlePicker svelte-1igofh5"),O(fu,"background-color",r[8].Red),P(Qp,"class","variousPickerLabel2 svelte-1igofh5"),P(Ep,"class","variousPickerLabel1 svelte-1igofh5"),P(cu,"class","circlePicker svelte-1igofh5"),O(cu,"background-color",r[8].Yellow),P(Bp,"class","variousPickerLabel2 svelte-1igofh5"),P(f,"id","variousOtherColorsDiv"),P(f,"class","svelte-1igofh5")},m(ue,je){K(ue,e,je),A(e,t),A(e,i),Is.m(e,null),K(ue,n,je),K(ue,s,je),K(ue,o,je),K(ue,l,je);for(let Ln=0;Ln<xr.length;Ln+=1)xr[Ln].m(l,null);K(ue,a,je),K(ue,h,je),K(ue,u,je),K(ue,f,je),A(f,c),A(f,d),A(f,g),A(f,w),A(f,S),A(S,Q),A(f,M),A(f,p),A(f,b),A(f,m),A(f,k),A(f,C),A(C,y),A(f,T),A(f,E),A(f,$),A(f,R),A(f,N),A(f,_),A(_,L),A(f,I),A(f,j),A(f,X),A(f,Z),A(f,ie),A(f,G),A(G,ze),A(f,ve),A(f,_e),A(f,kt),A(f,Je),A(f,bt),A(f,Le),A(Le,Pe),A(f,re),A(f,qe),A(f,Fi),A(f,sn),A(f,Ft),A(f,vt),A(vt,ae),A(f,Ee),A(f,Dt),A(f,Hi),A(f,Ui),A(f,ar),A(f,Ht),A(Ht,hr),A(f,ks),A(f,ws),A(f,Yi),A(f,D),A(f,z),A(f,H),A(H,te),A(f,ee),A(f,$e),A(f,Qe),A(f,We),A(f,St),A(f,pi),A(pi,Ua),A(f,iu),A(f,Ml),A(f,nu),A(f,Es),A(f,Rl),A(f,tl),A(tl,Ya),A(f,ru),A(f,Dl),A(f,su),A(f,ys),A(f,il),A(f,Ir),A(Ir,rt),A(f,wt),A(f,ur),A(f,Bs),A(f,vs),A(f,xp),A(f,ou),A(ou,Zf),A(f,Cp),A(f,au),A(f,Ap),A(f,V),A(f,Ze),A(f,pt),A(pt,qi),A(f,Ns),A(f,Ss),A(f,Rx),A(f,hu),A(f,Qx),A(f,Tp),A(Tp,aO),A(f,Dx),A(f,_p),A(f,Ex),A(f,uu),A(f,Bx),A(f,$p),A($p,hO),A(f,Nx),A(f,Rp),A(f,Ix),A(f,fu),A(f,Lx),A(f,Qp),A(Qp,uO),A(f,zx),A(f,Ep),A(f,Wx),A(f,cu),A(f,Vx),A(f,Bp),A(Bp,fO),K(ue,cO,je),on&&on.m(ue,je),K(ue,Gf,je),at=!0,dO||(jx=[U(g,"click",r[20]),U(m,"click",r[21]),U(R,"click",r[22]),U(Z,"click",r[23]),U(Je,"click",r[24]),U(sn,"click",r[25]),U(Ui,"click",r[26]),U(D,"click",r[27]),U(We,"click",r[28]),U(Es,"click",r[29]),U(ys,"click",r[30]),U(vs,"click",r[31]),U(V,"click",r[32]),U(hu,"click",r[33]),U(uu,"click",r[34]),U(fu,"click",r[35]),U(cu,"click",r[36])],dO=!0)},p(ue,je){if(Ip===(Ip=Fx(ue))&&Is?Is.p(ue,je):(Is.d(1),Is=Ip(ue),Is&&(Is.c(),Is.m(e,null))),je[0]&2304){du=ue[8].buttons;let Ln;for(Ln=0;Ln<du.length;Ln+=1){const Hx=U$(ue,du,Ln);xr[Ln]?xr[Ln].p(Hx,je):(xr[Ln]=e4(Hx),xr[Ln].c(),xr[Ln].m(l,null))}for(;Ln<xr.length;Ln+=1)xr[Ln].d(1);xr.length=du.length}(!at||je[0]&256)&&O(g,"background-color",ue[8].textAreaColor),(!at||je[0]&256)&&x!==(x=ue[8].textAreaColor+"")&&tt(Q,x),(!at||je[0]&256)&&O(m,"background-color",ue[8].backgroundColor),(!at||je[0]&256)&&v!==(v=ue[8].backgroundColor+"")&&tt(y,v),(!at||je[0]&256)&&O(R,"background-color",ue[8].textColor),(!at||je[0]&256)&&W!==(W=ue[8].textColor+"")&&tt(L,W),(!at||je[0]&256)&&O(Z,"background-color",ue[8].borderColor),(!at||je[0]&256)&&J!==(J=ue[8].borderColor+"")&&tt(ze,J),(!at||je[0]&256)&&O(Je,"background-color",ue[8].functionColor),(!at||je[0]&256)&&Bt!==(Bt=ue[8].functionColor+"")&&tt(Pe,Bt),(!at||je[0]&256)&&O(sn,"background-color",ue[8].stringColor),(!at||je[0]&256)&&mt!==(mt=ue[8].stringColor+"")&&tt(ae,mt),(!at||je[0]&256)&&O(Ui,"background-color",ue[8].constantColor),(!at||je[0]&256)&&Nr!==(Nr=ue[8].constantColor+"")&&tt(hr,Nr),(!at||je[0]&256)&&O(D,"background-color",ue[8].keywordColor),(!at||je[0]&256)&&q!==(q=ue[8].keywordColor+"")&&tt(te,q),(!at||je[0]&256)&&O(We,"background-color",ue[8].highlightBackgroundColor),(!at||je[0]&256)&&el!==(el=ue[8].highlightBackgroundColor+"")&&tt(Ua,el),(!at||je[0]&256)&&O(Es,"background-color",ue[8].selectionColor),(!at||je[0]&256)&&Ql!==(Ql=ue[8].selectionColor+"")&&tt(Ya,Ql),(!at||je[0]&256)&&O(ys,"background-color",ue[8].Cyan),(!at||je[0]&256)&&le!==(le=ue[8].Cyan+"")&&tt(rt,le),(!at||je[0]&256)&&O(vs,"background-color",ue[8].Green),(!at||je[0]&256)&&lu!==(lu=ue[8].Green+"")&&tt(Zf,lu),(!at||je[0]&256)&&O(V,"background-color",ue[8].Orange),(!at||je[0]&256)&&Jt!==(Jt=ue[8].Orange+"")&&tt(qi,Jt),(!at||je[0]&256)&&O(hu,"background-color",ue[8].Pink),(!at||je[0]&256)&&Pp!==(Pp=ue[8].Pink+"")&&tt(aO,Pp),(!at||je[0]&256)&&O(uu,"background-color",ue[8].Purple),(!at||je[0]&256)&&Mp!==(Mp=ue[8].Purple+"")&&tt(hO,Mp),(!at||je[0]&256)&&O(fu,"background-color",ue[8].Red),(!at||je[0]&256)&&Dp!==(Dp=ue[8].Red+"")&&tt(uO,Dp),(!at||je[0]&256)&&O(cu,"background-color",ue[8].Yellow),(!at||je[0]&256)&&Np!==(Np=ue[8].Yellow+"")&&tt(fO,Np),ue[8]!==void 0?on?(on.p(ue,je),je[0]&256&&Se(on,1)):(on=t4(ue),on.c(),Se(on,1),on.m(Gf.parentNode,Gf)):on&&(Bn(),Me(on,1,1,()=>{on=null}),Nn())},i(ue){at||(Se(on),at=!0)},o(ue){Me(on),at=!1},d(ue){ue&&Y(e),Is.d(),ue&&Y(n),ue&&Y(s),ue&&Y(o),ue&&Y(l),In(xr,ue),ue&&Y(a),ue&&Y(h),ue&&Y(u),ue&&Y(f),ue&&Y(cO),on&&on.d(ue),ue&&Y(Gf),dO=!1,yt(jx)}}}async function i4(r){let t=await(await fetch(`http://localhost:9978/api/theme/${r}`,{method:"GET",headers:{"Content-type":"application/json"}})).json();return t.theme.name=r,t.theme}async function kw(){return(await(await fetch("http://localhost:9978/api/theme/list",{method:"GET",headers:{"Content-type":"application/json"}})).json()).themes}function Eie(r,e,t){let i;Re(r,et,ve=>t(8,i=ve));let n="",s=0,o=!1,l=!1,a=!1,h="",u="Default",f,c;Sr(async()=>{t(7,c=await kw())});async function d(){u==="New"?(t(3,a=!0),fe(et,i.name=u,i)):(fe(et,i=await i4(u),i),fe(et,i.name=u,i))}function g(ve,_e){if(l)fe(et,i.buttons[ve].color=_e,i);else switch(ve){case"textAreaColor":fe(et,i.textAreaColor=_e,i);break;case"backgroundColor":fe(et,i.backgroundColor=_e,i);break;case"textColor":fe(et,i.textColor=_e,i);break;case"borderColor":fe(et,i.borderColor=_e,i);break;case"Cyan":fe(et,i.Cyan=_e,i);break;case"Green":fe(et,i.Green=_e,i);break;case"Orange":fe(et,i.Orange=_e,i);break;case"Pink":fe(et,i.Pink=_e,i);break;case"Purple":fe(et,i.Purple=_e,i);break;case"Red":fe(et,i.Red=_e,i);break;case"Yellow":fe(et,i.Yellow=_e,i);break;case"functionColor":fe(et,i.functionColor=_e,i);break;case"stringColor":fe(et,i.stringColor=_e,i);break;case"constantColor":fe(et,i.constantColor=_e,i);break;case"keywordColor":fe(et,i.keywordColor=_e,i);break;case"highlightBackgroundColor":fe(et,i.highlightBackgroundColor=_e,i);break;case"selectionColor":fe(et,i.selectionColor=_e,i);break;default:console.log("Invalid id.");break}t(2,o=!1),l=!1}function w(ve){t(0,n=ve.color),t(1,s=ve.id),t(2,o=!0),isNaN(s)?(l=!1,t(4,h=s),t(6,f=`${s}`)):(l=!0,t(4,h="Circle"),t(6,f=`#${s} Circle`))}function S(){t(3,a=!1),x()}async function x(){fe(et,i.name=u,i),await fetch(`http://localhost:9978/api/theme/${u}`,{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(i)}),t(7,c=await kw())}async function Q(){await fetch(`http://localhost:9978/api/theme/${u}`,{method:"DELETE",headers:{"Content-type":"application/json"},body:JSON.stringify(i)}),t(7,c=await kw()),t(5,u="Default"),fe(et,i=await i4(u),i)}function M(){u=this.value,t(5,u),t(7,c)}const p=()=>{t(3,a=!0)};function b(){u=D2(this),t(5,u),t(7,c)}return[n,s,o,a,h,u,f,c,i,d,g,w,S,x,Q,M,p,b,()=>{d()},(ve,_e)=>{w(ve)},ve=>{w({id:"textAreaColor",color:i.textAreaColor})},ve=>{w({id:"backgroundColor",color:i.backgroundColor})},ve=>{w({id:"textColor",color:i.textColor})},ve=>{w({id:"borderColor",color:i.borderColor})},ve=>{w({id:"functionColor",color:i.functionColor})},ve=>{w({id:"stringColor",color:i.stringColor})},ve=>{w({id:"constantColor",color:i.constantColor})},ve=>{w({id:"keywordColor",color:i.keywordColor})},ve=>{w({id:"highlightBackgroundColor",color:i.highlightBackgroundColor})},ve=>{w({id:"selectionColor",color:i.selectionColor})},ve=>{w({id:"Cyan",color:i.Cyan})},ve=>{w({id:"Green",color:i.Green})},ve=>{w({id:"Orange",color:i.Orange})},ve=>{w({id:"Pink",color:i.Pink})},ve=>{w({id:"Purple",color:i.Purple})},ve=>{w({id:"Red",color:i.Red})},ve=>{w({id:"Yellow",color:i.Yellow})},ve=>{g(ve.detail.data.id,ve.detail.data.color)},ve=>{t(2,o=!1)}]}class Bie extends _i{constructor(e){super(),Pi(this,e,Eie,Die,ki,{},null,[-1,-1])}}function n4(r,e,t){const i=r.slice();return i[6]=e[t],i}function r4(r){let e,t,i=r[6]+"",n,s,o,l;function a(){return r[4](r[6])}return{c(){e=B("li"),t=B("span"),n=ne(i),s=F(),P(t,"class","scriptName svelte-xv3rwd")},m(h,u){K(h,e,u),A(e,t),A(t,n),A(e,s),o||(l=U(t,"click",a),o=!0)},p(h,u){r=h,u&1&&i!==(i=r[6]+"")&&tt(n,i)},d(h){h&&Y(e),o=!1,l()}}}function Nie(r){let e,t,i,n,s,o,l,a,h,u,f=r[0],c=[];for(let d=0;d<f.length;d+=1)c[d]=r4(n4(r,f,d));return{c(){e=B("div"),t=B("h2"),t.textContent="External Scripts",i=F(),n=B("ol");for(let d=0;d<c.length;d+=1)c[d].c();s=F(),o=B("div"),l=B("button"),a=ne("New Script"),P(t,"class","svelte-xv3rwd"),P(n,"class","svelte-xv3rwd"),P(l,"id","new"),P(l,"class","buttonStyle svelte-xv3rwd"),P(l,"type","button"),O(l,"background-color",r[1].textAreaColor),O(l,"color",r[1].textColor),O(l,"font-name",r[1].font),O(l,"font-size",r[1].fontSize),P(o,"id","buttonRow"),P(o,"class","svelte-xv3rwd"),P(e,"id","scriptlist"),P(e,"class","svelte-xv3rwd")},m(d,g){K(d,e,g),A(e,t),A(e,i),A(e,n);for(let w=0;w<c.length;w+=1)c[w].m(n,null);A(e,s),A(e,o),A(o,l),A(l,a),h||(u=U(l,"click",r[3]),h=!0)},p(d,[g]){if(g&5){f=d[0];let w;for(w=0;w<f.length;w+=1){const S=n4(d,f,w);c[w]?c[w].p(S,g):(c[w]=r4(S),c[w].c(),c[w].m(n,null))}for(;w<c.length;w+=1)c[w].d(1);c.length=f.length}g&2&&O(l,"background-color",d[1].textAreaColor),g&2&&O(l,"color",d[1].textColor),g&2&&O(l,"font-name",d[1].font),g&2&&O(l,"font-size",d[1].fontSize)},i:lt,o:lt,d(d){d&&Y(e),In(c,d),h=!1,u()}}}async function Iie(){return await(await fetch("http://localhost:9978/api/scripts/ext/list",{headers:{"Content-type":"application/json"}})).json()}function Lie(r,e,t){let i;Re(r,et,h=>t(1,i=h));let n=[];const s=Xa();Sr(async()=>{t(0,n=await Iie())});function o(h){s("changeView",{view:"script",config:{script:h}})}function l(){s("changeView",{view:"script",config:{script:"new"}})}return[n,i,o,l,h=>{o(h)}]}class zie extends _i{constructor(e){super(),Pi(this,e,Lie,Nie,ki,{})}}function s4(r,e,t){const i=r.slice();return i[13]=e[t],i}function o4(r){let e,t,i,n,s,o,l,a,h,u,f,c,d,g,w,S,x,Q=r[1],M=[];for(let p=0;p<Q.length;p+=1)M[p]=l4(s4(r,Q,p));return{c(){e=B("label"),e.textContent="Name of Script",t=F(),i=B("input"),n=F(),s=B("label"),s.textContent="What is the name of the Script file?",o=F(),l=B("input"),a=F(),h=B("label"),h.textContent="What is the directory for the script?",u=F(),f=B("input"),c=F(),d=B("label"),d.textContent="What is the environment for the script?",g=F(),w=B("select");for(let p=0;p<M.length;p+=1)M[p].c();P(e,"id","scriptName"),P(e,"for","scriptName"),P(e,"class","svelte-1vxe7fa"),P(i,"id","scriptName"),P(i,"name","scriptName"),O(i,"border-radius","5px"),O(i,"border-color","$"+r[2].borderColor),O(i,"background-color",r[2].textAreaColor),O(i,"color",r[2].textColor),O(i,"font-name",r[2].font),O(i,"font-size",r[2].fontSize),P(s,"id","scriptScript"),P(s,"for","scriptScript"),P(s,"class","svelte-1vxe7fa"),P(l,"id","scriptScript"),P(l,"name","scriptScript"),O(l,"border-radius","5px"),O(l,"border-color","$"+r[2].borderColor),O(l,"background-color",r[2].textAreaColor),O(l,"color",r[2].textColor),O(l,"font-name",r[2].font),O(l,"font-size",r[2].fontSize),P(h,"id","scriptPath"),P(h,"for","scriptPath"),P(h,"class","svelte-1vxe7fa"),P(f,"id","scriptPath"),P(f,"name","scriptPath"),O(f,"border-radius","5px"),O(f,"border-color","$"+r[2].borderColor),O(f,"background-color",r[2].textAreaColor),O(f,"color",r[2].textColor),O(f,"font-name",r[2].font),O(f,"font-size",r[2].fontSize),P(d,"id","scriptEnv"),P(d,"for","scriptEnv"),P(d,"class","svelte-1vxe7fa"),P(w,"id","scriptEnv"),P(w,"name","scriptEnv"),O(w,"border-radius","5px"),O(w,"border-color","$"+r[2].borderColor),O(w,"background-color",r[2].textAreaColor),O(w,"color",r[2].textColor),O(w,"font-name",r[2].font),O(w,"font-size",r[2].fontSize),P(w,"class","svelte-1vxe7fa"),r[0].env===void 0&&Gu(()=>r[10].call(w))},m(p,b){K(p,e,b),K(p,t,b),K(p,i,b),Xe(i,r[0].name),K(p,n,b),K(p,s,b),K(p,o,b),K(p,l,b),Xe(l,r[0].script),K(p,a,b),K(p,h,b),K(p,u,b),K(p,f,b),Xe(f,r[0].path),K(p,c,b),K(p,d,b),K(p,g,b),K(p,w,b);for(let m=0;m<M.length;m+=1)M[m].m(w,null);Zu(w,r[0].env),S||(x=[U(i,"blur",r[3]),U(i,"input",r[7]),U(l,"blur",r[3]),U(l,"input",r[8]),U(f,"blur",r[3]),U(f,"input",r[9]),U(w,"blur",r[3]),U(w,"change",r[10])],S=!0)},p(p,b){if(b&4&&O(i,"border-color","$"+p[2].borderColor),b&4&&O(i,"background-color",p[2].textAreaColor),b&4&&O(i,"color",p[2].textColor),b&4&&O(i,"font-name",p[2].font),b&4&&O(i,"font-size",p[2].fontSize),b&3&&i.value!==p[0].name&&Xe(i,p[0].name),b&4&&O(l,"border-color","$"+p[2].borderColor),b&4&&O(l,"background-color",p[2].textAreaColor),b&4&&O(l,"color",p[2].textColor),b&4&&O(l,"font-name",p[2].font),b&4&&O(l,"font-size",p[2].fontSize),b&3&&l.value!==p[0].script&&Xe(l,p[0].script),b&4&&O(f,"border-color","$"+p[2].borderColor),b&4&&O(f,"background-color",p[2].textAreaColor),b&4&&O(f,"color",p[2].textColor),b&4&&O(f,"font-name",p[2].font),b&4&&O(f,"font-size",p[2].fontSize),b&3&&f.value!==p[0].path&&Xe(f,p[0].path),b&2){Q=p[1];let m;for(m=0;m<Q.length;m+=1){const k=s4(p,Q,m);M[m]?M[m].p(k,b):(M[m]=l4(k),M[m].c(),M[m].m(w,null))}for(;m<M.length;m+=1)M[m].d(1);M.length=Q.length}b&4&&O(w,"border-color","$"+p[2].borderColor),b&4&&O(w,"background-color",p[2].textAreaColor),b&4&&O(w,"color",p[2].textColor),b&4&&O(w,"font-name",p[2].font),b&4&&O(w,"font-size",p[2].fontSize),b&3&&Zu(w,p[0].env)},d(p){p&&Y(e),p&&Y(t),p&&Y(i),p&&Y(n),p&&Y(s),p&&Y(o),p&&Y(l),p&&Y(a),p&&Y(h),p&&Y(u),p&&Y(f),p&&Y(c),p&&Y(d),p&&Y(g),p&&Y(w),In(M,p),S=!1,yt(x)}}}function l4(r){let e,t=r[13]+"",i,n;return{c(){e=B("option"),i=ne(t),e.__value=n=r[13],e.value=e.__value},m(s,o){K(s,e,o),A(e,i)},p(s,o){o&2&&t!==(t=s[13]+"")&&tt(i,t),o&2&&n!==(n=s[13])&&(e.__value=n,e.value=e.__value)},d(s){s&&Y(e)}}}function Wie(r){let e,t,i,n,s,o,l,a,h,u,f=typeof r[0]!="undefined"&&typeof r[1]!="undefined"&&o4(r);return{c(){e=B("div"),f&&f.c(),t=F(),i=B("div"),n=B("button"),s=ne("Return"),o=F(),l=B("button"),a=ne("Delete"),P(n,"class","buttonStyle svelte-1vxe7fa"),P(n,"type","button"),O(n,"border-radius","5px"),O(n,"border-color","$"+r[2].borderColor),O(n,"background-color",r[2].textAreaColor),O(n,"color",r[2].textColor),O(n,"font-name",r[2].font),O(n,"font-size",r[2].fontSize),P(l,"class","buttonStyle svelte-1vxe7fa"),P(l,"type","button"),O(l,"border-radius","5px"),O(l,"border-color","$"+r[2].borderColor),O(l,"background-color",r[2].textAreaColor),O(l,"color",r[2].textColor),O(l,"font-name",r[2].font),O(l,"font-size",r[2].fontSize),P(i,"id","buttonRow"),P(i,"class","svelte-1vxe7fa"),P(e,"id","script"),O(e,"color",r[2].textColor),O(e,"font-name",r[2].font),O(e,"font-size",r[2].fontSize),P(e,"class","svelte-1vxe7fa")},m(c,d){K(c,e,d),f&&f.m(e,null),A(e,t),A(e,i),A(i,n),A(n,s),A(i,o),A(i,l),A(l,a),h||(u=[U(n,"click",r[11]),U(l,"click",r[4])],h=!0)},p(c,[d]){typeof c[0]!="undefined"&&typeof c[1]!="undefined"?f?f.p(c,d):(f=o4(c),f.c(),f.m(e,t)):f&&(f.d(1),f=null),d&4&&O(n,"border-color","$"+c[2].borderColor),d&4&&O(n,"background-color",c[2].textAreaColor),d&4&&O(n,"color",c[2].textColor),d&4&&O(n,"font-name",c[2].font),d&4&&O(n,"font-size",c[2].fontSize),d&4&&O(l,"border-color","$"+c[2].borderColor),d&4&&O(l,"background-color",c[2].textAreaColor),d&4&&O(l,"color",c[2].textColor),d&4&&O(l,"font-name",c[2].font),d&4&&O(l,"font-size",c[2].fontSize),d&4&&O(e,"color",c[2].textColor),d&4&&O(e,"font-name",c[2].font),d&4&&O(e,"font-size",c[2].fontSize)},i:lt,o:lt,d(c){c&&Y(e),f&&f.d(),h=!1,yt(u)}}}async function Vie(r){return await(await fetch(`http://localhost:9978/api/scripts/ext/${r}`,{headers:{"Content-type":"application/json"}})).json()}async function jie(){return await(await fetch("http://localhost:9978/api/scripts/env/list",{headers:{"Content-type":"application/json"}})).json()}function Fie(r,e,t){let i;Re(r,et,S=>t(2,i=S));let{config:n}=e,s,o;const l=Xa();Sr(async()=>{n.script!=="new"?t(0,s=await Vie(n.script)):t(0,s={name:"new",script:"",path:"",env:""}),t(1,o=await jie())});async function a(){s.name!==""&&s.name!==null&&s.name!=="new"&&await fetch(`http://localhost:9978/api/scripts/ext/${s.name}`,{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(s)})}async function h(){await fetch(`http://localhost:9978/api/scripts/ext/${s.name}`,{method:"DELETE",headers:{"Content-type":"application/json"}}),B2(),u()}function u(){l("changeView",{view:"lists",config:{}})}function f(){s.name=this.value,t(0,s),t(1,o)}function c(){s.script=this.value,t(0,s),t(1,o)}function d(){s.path=this.value,t(0,s),t(1,o)}function g(){s.env=D2(this),t(0,s),t(1,o)}const w=()=>{a(),u()};return r.$$set=S=>{"config"in S&&t(6,n=S.config)},[s,o,i,a,h,u,n,f,c,d,g,w]}class Hie extends _i{constructor(e){super(),Pi(this,e,Fie,Wie,ki,{config:6})}}function qie(r){let e,t;return e=new Hie({props:{config:r[1]}}),e.$on("changeView",r[3]),{c(){Kt(e.$$.fragment)},m(i,n){Vt(e,i,n),t=!0},p(i,n){const s={};n&2&&(s.config=i[1]),e.$set(s)},i(i){t||(Se(e.$$.fragment,i),t=!0)},o(i){Me(e.$$.fragment,i),t=!1},d(i){jt(e,i)}}}function Xie(r){let e,t,i;return t=new zie({}),t.$on("changeView",r[3]),{c(){e=B("div"),Kt(t.$$.fragment),P(e,"id","listviews"),P(e,"class","svelte-1ix4abu")},m(n,s){K(n,e,s),Vt(t,e,null),i=!0},p:lt,i(n){i||(Se(t.$$.fragment,n),i=!0)},o(n){Me(t.$$.fragment,n),i=!1},d(n){n&&Y(e),jt(t)}}}function Zie(r){let e,t,i,n;const s=[Xie,qie],o=[];function l(a,h){return a[0]==="lists"?0:a[0]==="script"?1:-1}return~(t=l(r))&&(i=o[t]=s[t](r)),{c(){e=B("div"),i&&i.c(),P(e,"id","ExtScriptEditor"),O(e,"color",r[2].textcolor),O(e,"background-color",r[2].appBackground),P(e,"class","svelte-1ix4abu")},m(a,h){K(a,e,h),~t&&o[t].m(e,null),n=!0},p(a,[h]){let u=t;t=l(a),t===u?~t&&o[t].p(a,h):(i&&(Bn(),Me(o[u],1,1,()=>{o[u]=null}),Nn()),~t?(i=o[t],i?i.p(a,h):(i=o[t]=s[t](a),i.c()),Se(i,1),i.m(e,null)):i=null),(!n||h&4)&&O(e,"color",a[2].textcolor),(!n||h&4)&&O(e,"background-color",a[2].appBackground)},i(a){n||(Se(i),n=!0)},o(a){Me(i),n=!1},d(a){a&&Y(e),~t&&o[t].d()}}}function Gie(r,e,t){let i;Re(r,et,l=>t(2,i=l));let n="lists",s={};function o(l){t(0,n=l.detail.view),t(1,s=l.detail.config)}return[n,s,i,o]}class Uie extends _i{constructor(e){super(),Pi(this,e,Gie,Zie,ki,{})}}function a4(r,e,t){const i=r.slice();return i[9]=e[t],i}function h4(r){let e,t,i=r[9]+"",n,s,o,l;function a(){return r[6](r[9])}return{c(){e=B("li"),t=B("span"),n=ne(i),s=F(),P(t,"class","envName svelte-1xg0rtz")},m(h,u){K(h,e,u),A(e,t),A(t,n),A(e,s),o||(l=U(t,"click",a),o=!0)},p(h,u){r=h,u&1&&i!==(i=r[9]+"")&&tt(n,i)},d(h){h&&Y(e),o=!1,l()}}}function u4(r){let e,t,i,n;return{c(){e=B("button"),t=ne("Create Default"),P(e,"id","default"),P(e,"class","buttonStyle svelte-1xg0rtz"),O(e,"background-color",r[2].textAreaColor),O(e,"color",r[2].textColor),O(e,"font-name",r[2].font),O(e,"font-size",r[2].fontSize),P(e,"type","button")},m(s,o){K(s,e,o),A(e,t),i||(n=U(e,"click",r[5]),i=!0)},p(s,o){o&4&&O(e,"background-color",s[2].textAreaColor),o&4&&O(e,"color",s[2].textColor),o&4&&O(e,"font-name",s[2].font),o&4&&O(e,"font-size",s[2].fontSize)},d(s){s&&Y(e),i=!1,n()}}}function Yie(r){let e,t,i,n,s,o,l,a,h,u,f,c=r[0],d=[];for(let w=0;w<c.length;w+=1)d[w]=h4(a4(r,c,w));let g=r[1]&&u4(r);return{c(){e=B("div"),t=B("h2"),t.textContent="Environments",i=F(),n=B("ol");for(let w=0;w<d.length;w+=1)d[w].c();s=F(),o=B("div"),l=B("button"),a=ne("New Environment"),h=F(),g&&g.c(),P(t,"class","svelte-1xg0rtz"),P(n,"class","svelte-1xg0rtz"),P(l,"id","new"),P(l,"class","buttonStyle svelte-1xg0rtz"),O(l,"background-color",r[2].textAreaColor),O(l,"color",r[2].textColor),O(l,"font-name",r[2].font),O(l,"font-size",r[2].fontSize),P(l,"type","button"),P(o,"id","buttonRow"),P(o,"class","svelte-1xg0rtz"),P(e,"id","envlist"),P(e,"class","svelte-1xg0rtz")},m(w,S){K(w,e,S),A(e,t),A(e,i),A(e,n);for(let x=0;x<d.length;x+=1)d[x].m(n,null);A(e,s),A(e,o),A(o,l),A(l,a),A(o,h),g&&g.m(o,null),u||(f=U(l,"click",r[3]),u=!0)},p(w,[S]){if(S&17){c=w[0];let x;for(x=0;x<c.length;x+=1){const Q=a4(w,c,x);d[x]?d[x].p(Q,S):(d[x]=h4(Q),d[x].c(),d[x].m(n,null))}for(;x<d.length;x+=1)d[x].d(1);d.length=c.length}S&4&&O(l,"background-color",w[2].textAreaColor),S&4&&O(l,"color",w[2].textColor),S&4&&O(l,"font-name",w[2].font),S&4&&O(l,"font-size",w[2].fontSize),w[1]?g?g.p(w,S):(g=u4(w),g.c(),g.m(o,null)):g&&(g.d(1),g=null)},i:lt,o:lt,d(w){w&&Y(e),In(d,w),g&&g.d(),u=!1,f()}}}function Kie(r,e,t){let i;Re(r,et,c=>t(2,i=c));let n=[],s=!1;const o=Xa();Sr(async()=>{await l();var c=n.filter(d=>d=="Default");Array.isArray(c)&&c.length===0&&t(1,s=!0)});async function l(){var c=await fetch("http://localhost:9978/api/scripts/env/list");t(0,n=await c.json())}async function a(){o("changeView",{view:"env",config:{env:"new",envVar:[]}})}function h(c){o("changeView",{view:"env",config:{env:c}})}async function u(){await fetch("http://localhost:9978/api/scripts/env/Default",{method:"PUT"}),o("changeView",{view:"env",config:{env:"Default"}})}return[n,s,i,a,h,u,c=>{h(c)}]}class Jie extends _i{constructor(e){super(),Pi(this,e,Kie,Yie,ki,{})}}function ene(r){let e,t,i,n,s,o,l,a,h,u,f,c,d;return{c(){e=B("td"),t=B("span"),t.textContent="\u270F\uFE0F",i=F(),n=B("td"),s=B("span"),s.textContent="\u274C",o=F(),l=B("td"),a=ne(r[0]),h=F(),u=B("td"),f=ne(r[1]),P(e,"class","editTD svelte-iq93qk"),O(s,"width","10px"),O(s,"cursor","pointer"),P(n,"class","deleteTD svelte-iq93qk")},m(g,w){K(g,e,w),A(e,t),K(g,i,w),K(g,n,w),A(n,s),K(g,o,w),K(g,l,w),A(l,a),K(g,h,w),K(g,u,w),A(u,f),c||(d=[U(t,"click",r[10]),U(s,"click",r[6])],c=!0)},p(g,w){w&1&&tt(a,g[0]),w&2&&tt(f,g[1])},d(g){g&&Y(e),g&&Y(i),g&&Y(n),g&&Y(o),g&&Y(l),g&&Y(h),g&&Y(u),c=!1,yt(d)}}}function tne(r){let e,t,i,n,s,o,l,a,h,u;return{c(){e=B("td"),t=B("td"),i=F(),n=B("td"),s=B("input"),o=F(),l=B("td"),a=B("input"),P(s,"type","text"),O(s,"padding-left","10px"),O(s,"border-radius","10px"),O(s,"border-color",r[4].borderColor),O(s,"background-color",r[4].textAreaColor),O(s,"color",r[4].textColor),O(s,"font-family","'"+r[4].font+"'"),O(s,"font-size",r[4].fontSize),P(a,"type","text"),O(a,"padding-left","10px"),O(a,"border-radius","10px"),O(a,"border-color",r[4].borderColor),O(a,"background-color",r[4].textAreaColor),O(a,"color",r[4].textColor),O(a,"font-family",r[4].font),O(a,"font-size",r[4].fontSize)},m(f,c){K(f,e,c),K(f,t,c),K(f,i,c),K(f,n,c),A(n,s),r[7](s),Xe(s,r[0]),K(f,o,c),K(f,l,c),A(l,a),Xe(a,r[1]),h||(u=[U(s,"input",r[8]),U(a,"input",r[9]),U(a,"blur",r[5])],h=!0)},p(f,c){c&16&&O(s,"border-color",f[4].borderColor),c&16&&O(s,"background-color",f[4].textAreaColor),c&16&&O(s,"color",f[4].textColor),c&16&&O(s,"font-family","'"+f[4].font+"'"),c&16&&O(s,"font-size",f[4].fontSize),c&1&&s.value!==f[0]&&Xe(s,f[0]),c&16&&O(a,"border-color",f[4].borderColor),c&16&&O(a,"background-color",f[4].textAreaColor),c&16&&O(a,"color",f[4].textColor),c&16&&O(a,"font-family",f[4].font),c&16&&O(a,"font-size",f[4].fontSize),c&2&&a.value!==f[1]&&Xe(a,f[1])},d(f){f&&Y(e),f&&Y(t),f&&Y(i),f&&Y(n),r[7](null),f&&Y(o),f&&Y(l),h=!1,yt(u)}}}function ine(r){let e;function t(s,o){return s[2]?tne:ene}let i=t(r),n=i(r);return{c(){e=B("tr"),n.c()},m(s,o){K(s,e,o),n.m(e,null)},p(s,[o]){i===(i=t(s))&&n?n.p(s,o):(n.d(1),n=i(s),n&&(n.c(),n.m(e,null)))},i:lt,o:lt,d(s){s&&Y(e),n.d()}}}function nne(r,e,t){let i;Re(r,et,w=>t(4,i=w));const n=Xa();let{name:s}=e,{value:o}=e;var l=!1,a;jh(()=>{l&&a.focus()});function h(){t(2,l=!1),n("editRow",{name:s,value:o})}function u(){n("deleteRow",{name:s,value:o})}function f(w){sr[w?"unshift":"push"](()=>{a=w,t(3,a)})}function c(){s=this.value,t(0,s)}function d(){o=this.value,t(1,o)}const g=()=>{t(2,l=!0)};return r.$$set=w=>{"name"in w&&t(0,s=w.name),"value"in w&&t(1,o=w.value)},[s,o,l,a,i,h,u,f,c,d,g]}class rne extends _i{constructor(e){super(),Pi(this,e,nne,ine,ki,{name:0,value:1})}}function f4(r,e,t){const i=r.slice();return i[19]=e[t],i}function c4(r){let e,t,i,n,s,o,l,a,h,u=r[0].envVar!=="undefined"&&d4(r);return{c(){e=B("div"),t=B("label"),t.textContent="Name of the Environment",i=F(),n=B("input"),s=F(),u&&u.c(),o=bn(),P(t,"id","envName"),P(t,"for","envName"),P(n,"id","envName"),P(n,"name","envName"),O(n,"padding-left","10px"),O(n,"margin-top","-5px"),O(n,"margin-left","20px"),O(n,"border-radius","10px"),O(n,"border-color",r[4].borderColor),O(n,"background-color",r[4].textAreaColor),O(n,"font-family",r[4].font),O(n,"color",r[4].textColor),O(n,"font-size",r[4].fontSize),O(n,"border","solid 3px "+r[4].borderColor),O(e,"display","flex"),O(e,"flex-direction","row")},m(f,c){K(f,e,c),A(e,t),A(e,i),A(e,n),Xe(n,r[0].name),K(f,s,c),u&&u.m(f,c),K(f,o,c),l=!0,a||(h=[U(n,"blur",r[5]),U(n,"input",r[11])],a=!0)},p(f,c){(!l||c&16)&&O(n,"border-color",f[4].borderColor),(!l||c&16)&&O(n,"background-color",f[4].textAreaColor),(!l||c&16)&&O(n,"font-family",f[4].font),(!l||c&16)&&O(n,"color",f[4].textColor),(!l||c&16)&&O(n,"font-size",f[4].fontSize),(!l||c&16)&&O(n,"border","solid 3px "+f[4].borderColor),c&1&&n.value!==f[0].name&&Xe(n,f[0].name),f[0].envVar!=="undefined"?u?(u.p(f,c),c&1&&Se(u,1)):(u=d4(f),u.c(),Se(u,1),u.m(o.parentNode,o)):u&&(Bn(),Me(u,1,1,()=>{u=null}),Nn())},i(f){l||(Se(u),l=!0)},o(f){Me(u),l=!1},d(f){f&&Y(e),f&&Y(s),u&&u.d(f),f&&Y(o),a=!1,yt(h)}}}function d4(r){let e,t,i,n,s,o=Object.entries(r[0].envVar).length>0,l,a,h=o&&p4(r);function u(d,g){return d[1]?one:sne}let f=u(r),c=f(r);return{c(){e=B("div"),t=B("table"),i=B("thead"),i.innerHTML=`<tr><th class="svelte-13talvl"></th> 
              <th class="svelte-13talvl"></th> 
              <th class="svelte-13talvl">Name</th> 
              <th class="svelte-13talvl">Value</th></tr>`,n=F(),s=B("tbody"),h&&h.c(),l=F(),c.c(),P(e,"id","EnvTable"),P(e,"class","svelte-13talvl")},m(d,g){K(d,e,g),A(e,t),A(t,i),A(t,n),A(t,s),h&&h.m(s,null),A(s,l),c.m(s,null),a=!0},p(d,g){g&1&&(o=Object.entries(d[0].envVar).length>0),o?h?(h.p(d,g),g&1&&Se(h,1)):(h=p4(d),h.c(),Se(h,1),h.m(s,l)):h&&(Bn(),Me(h,1,1,()=>{h=null}),Nn()),f===(f=u(d))&&c?c.p(d,g):(c.d(1),c=f(d),c&&(c.c(),c.m(s,null)))},i(d){a||(Se(h),a=!0)},o(d){Me(h),a=!1},d(d){d&&Y(e),h&&h.d(),c.d()}}}function p4(r){let e,t,i=Object.entries(r[0].envVar),n=[];for(let o=0;o<i.length;o+=1)n[o]=g4(f4(r,i,o));const s=o=>Me(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=bn()},m(o,l){for(let a=0;a<n.length;a+=1)n[a].m(o,l);K(o,e,l),t=!0},p(o,l){if(l&769){i=Object.entries(o[0].envVar);let a;for(a=0;a<i.length;a+=1){const h=f4(o,i,a);n[a]?(n[a].p(h,l),Se(n[a],1)):(n[a]=g4(h),n[a].c(),Se(n[a],1),n[a].m(e.parentNode,e))}for(Bn(),a=i.length;a<n.length;a+=1)s(a);Nn()}},i(o){if(!t){for(let l=0;l<i.length;l+=1)Se(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)Me(n[l]);t=!1},d(o){In(n,o),o&&Y(e)}}}function g4(r){let e,t;function i(){return r[12](r[19])}return e=new rne({props:{name:r[19][0],value:r[19][1]}}),e.$on("deleteRow",i),e.$on("editRow",r[13]),{c(){Kt(e.$$.fragment)},m(n,s){Vt(e,n,s),t=!0},p(n,s){r=n;const o={};s&1&&(o.name=r[19][0]),s&1&&(o.value=r[19][1]),e.$set(o)},i(n){t||(Se(e.$$.fragment,n),t=!0)},o(n){Me(e.$$.fragment,n),t=!1},d(n){jt(e,n)}}}function sne(r){let e,t,i,n,s;return{c(){e=B("tr"),t=B("td"),i=B("span"),i.textContent="+",P(i,"class","addNewItem svelte-13talvl"),P(t,"span","2"),P(t,"class","svelte-13talvl")},m(o,l){K(o,e,l),A(e,t),A(t,i),n||(s=U(i,"click",r[16]),n=!0)},p:lt,d(o){o&&Y(e),n=!1,s()}}}function one(r){let e,t,i,n,s,o,l,a,h,u;return{c(){e=B("tr"),t=B("td"),i=B("input"),s=F(),o=B("td"),l=B("input"),P(i,"class","inputKV"),P(i,"type","text"),P(i,"style",n="background-color: "+r[4].textAreaColor+"; text= "+r[4].textColor+"; font-name: "+r[4].font+"; font-size: "+r[4].fontSize+";"),P(t,"class","svelte-13talvl"),P(l,"class","inputKV"),P(l,"type","text"),P(l,"style",a="background-color: "+r[4].textAreaColor+"; text= "+r[4].textColor+"; font-name: "+r[4].font+"; font-size: "+r[4].fontSize+";"),P(o,"class","svelte-13talvl")},m(f,c){K(f,e,c),A(e,t),A(t,i),Xe(i,r[2]),A(e,s),A(e,o),A(o,l),Xe(l,r[3]),h||(u=[U(i,"input",r[14]),U(l,"input",r[15]),U(l,"blur",r[8])],h=!0)},p(f,c){c&16&&n!==(n="background-color: "+f[4].textAreaColor+"; text= "+f[4].textColor+"; font-name: "+f[4].font+"; font-size: "+f[4].fontSize+";")&&P(i,"style",n),c&4&&i.value!==f[2]&&Xe(i,f[2]),c&16&&a!==(a="background-color: "+f[4].textAreaColor+"; text= "+f[4].textColor+"; font-name: "+f[4].font+"; font-size: "+f[4].fontSize+";")&&P(l,"style",a),c&8&&l.value!==f[3]&&Xe(l,f[3])},d(f){f&&Y(e),h=!1,yt(u)}}}function lne(r){let e,t,i,n,s,o,l,a,h,u,f,c=typeof r[0]!="undefined"&&c4(r);return{c(){e=B("div"),c&&c.c(),t=F(),i=B("div"),n=B("button"),s=ne("Return"),o=F(),l=B("button"),a=ne("Delete"),P(n,"id","goback"),P(n,"class","buttonStyle svelte-13talvl"),P(n,"type","button"),O(n,"background-color",r[4].textAreaColor),O(n,"color",r[4].textColor),O(n,"font-name",r[4].font),O(n,"font-size",r[4].fontSize),P(l,"class","buttonStyle svelte-13talvl"),P(l,"type","button"),O(l,"background-color",r[4].textAreaColor),O(l,"color",r[4].textColor),O(l,"font-name",r[4].font),O(l,"font-size",r[4].fontSize),P(i,"id","buttonRow"),P(i,"class","svelte-13talvl"),P(e,"id","env"),O(e,"color",r[4].textColor),O(e,"background-color",r[4].textareaColor),P(e,"class","svelte-13talvl")},m(d,g){K(d,e,g),c&&c.m(e,null),A(e,t),A(e,i),A(i,n),A(n,s),A(i,o),A(i,l),A(l,a),h=!0,u||(f=[U(n,"click",r[17]),U(l,"click",r[6])],u=!0)},p(d,[g]){typeof d[0]!="undefined"?c?(c.p(d,g),g&1&&Se(c,1)):(c=c4(d),c.c(),Se(c,1),c.m(e,t)):c&&(Bn(),Me(c,1,1,()=>{c=null}),Nn()),(!h||g&16)&&O(n,"background-color",d[4].textAreaColor),(!h||g&16)&&O(n,"color",d[4].textColor),(!h||g&16)&&O(n,"font-name",d[4].font),(!h||g&16)&&O(n,"font-size",d[4].fontSize),(!h||g&16)&&O(l,"background-color",d[4].textAreaColor),(!h||g&16)&&O(l,"color",d[4].textColor),(!h||g&16)&&O(l,"font-name",d[4].font),(!h||g&16)&&O(l,"font-size",d[4].fontSize),(!h||g&16)&&O(e,"color",d[4].textColor),(!h||g&16)&&O(e,"background-color",d[4].textareaColor)},i(d){h||(Se(c),h=!0)},o(d){Me(c),h=!1},d(d){d&&Y(e),c&&c.d(),u=!1,yt(f)}}}async function m4(r){var e=await fetch(`http://localhost:9978/api/scripts/env/${r}`),t=await e.json();return t}async function ane(r){await fetch(`http://localhost:9978/api/scripts/env/${r.name}`,{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(r)})}async function hne(r){await fetch(`http://localhost:9978/api/scripts/env/${r}`,{method:"DELETE"})}function une(r,e,t){let i;Re(r,et,m=>t(4,i=m));let{config:n}=e,s,o=!1,l="",a="";const h=Xa();Sr(async()=>{typeof n.env!="undefined"&&(n.env!=="new"&&n.env!==null?(n.env==="default"&&t(10,n.env="Default",n),t(0,s=await m4(n.env))):t(0,s={name:"new",envVar:{}}))});async function u(){typeof s!="undefined"&&s!==null&&s.name!==""&&s.name!==null&&s.name!=="new"&&await ane(s)}async function f(){typeof s!="undefined"&&s.name!==null&&s.name!=="new"&&s.name!==""&&(await hne(s.name),B2(),c())}function c(){h("changeView",{view:"lists",config:{}})}async function d(){t(0,s.envVar[l]=a,s),t(1,o=!1),t(2,l=""),t(3,a=""),await u()}async function g(m){delete s.envVar[m[0]],await u(),t(0,s=await m4(n.env))}function w(){s.name=this.value,t(0,s)}const S=m=>{g(m)},x=m=>{t(0,s.envVar[m.detail.name]=m.detail.value,s),d()};function Q(){l=this.value,t(2,l)}function M(){a=this.value,t(3,a)}const p=()=>{t(1,o=!0)},b=()=>{u(),c()};return r.$$set=m=>{"config"in m&&t(10,n=m.config)},[s,o,l,a,i,u,f,c,d,g,n,w,S,x,Q,M,p,b]}class fne extends _i{constructor(e){super(),Pi(this,e,une,lne,ki,{config:10})}}function cne(r){let e,t;return e=new fne({props:{config:r[1]}}),e.$on("changeView",r[3]),{c(){Kt(e.$$.fragment)},m(i,n){Vt(e,i,n),t=!0},p(i,n){const s={};n&2&&(s.config=i[1]),e.$set(s)},i(i){t||(Se(e.$$.fragment,i),t=!0)},o(i){Me(e.$$.fragment,i),t=!1},d(i){jt(e,i)}}}function dne(r){let e,t,i;return t=new Jie({}),t.$on("changeView",r[3]),{c(){e=B("div"),Kt(t.$$.fragment),P(e,"id","listviews"),P(e,"class","svelte-gorzvb")},m(n,s){K(n,e,s),Vt(t,e,null),i=!0},p:lt,i(n){i||(Se(t.$$.fragment,n),i=!0)},o(n){Me(t.$$.fragment,n),i=!1},d(n){n&&Y(e),jt(t)}}}function pne(r){let e,t,i,n;const s=[dne,cne],o=[];function l(a,h){return a[0]==="lists"?0:a[0]==="env"?1:-1}return~(t=l(r))&&(i=o[t]=s[t](r)),{c(){e=B("div"),i&&i.c(),P(e,"id","EnvEditor"),O(e,"color",r[2].textColor),O(e,"background-color",r[2].backgroundColor),P(e,"class","svelte-gorzvb")},m(a,h){K(a,e,h),~t&&o[t].m(e,null),n=!0},p(a,[h]){let u=t;t=l(a),t===u?~t&&o[t].p(a,h):(i&&(Bn(),Me(o[u],1,1,()=>{o[u]=null}),Nn()),~t?(i=o[t],i?i.p(a,h):(i=o[t]=s[t](a),i.c()),Se(i,1),i.m(e,null)):i=null),(!n||h&4)&&O(e,"color",a[2].textColor),(!n||h&4)&&O(e,"background-color",a[2].backgroundColor)},i(a){n||(Se(i),n=!0)},o(a){Me(i),n=!1},d(a){a&&Y(e),~t&&o[t].d()}}}function gne(r,e,t){let i;Re(r,et,l=>t(2,i=l));let n="lists",s={env:"Default"};function o(l){t(0,n=l.detail.view),t(1,s=l.detail.config)}return[n,s,i,o]}class mne extends _i{constructor(e){super(),Pi(this,e,gne,pne,ki,{})}}function b4(r,e,t){const i=r.slice();return i[10]=e[t],i}function bne(r){let e,t=r[10].name+"",i,n,s,o;function l(){return r[6](r[10])}return{c(){e=B("li"),i=ne(t),n=F(),P(e,"class","tabName svelte-1c0xrvo"),O(e,"border-color","gray")},m(a,h){K(a,e,h),A(e,i),A(e,n),s||(o=U(e,"click",l),s=!0)},p(a,h){r=a},d(a){a&&Y(e),s=!1,o()}}}function One(r){let e,t=r[10].name+"",i,n;return{c(){e=B("li"),i=ne(t),n=F(),P(e,"class","tabName svelte-1c0xrvo"),O(e,"border-bottom","3px "+r[1].backgroundColor),O(e,"z-index","100")},m(s,o){K(s,e,o),A(e,i),A(e,n)},p(s,o){o&2&&O(e,"border-bottom","3px "+s[1].backgroundColor)},d(s){s&&Y(e)}}}function O4(r){let e;function t(s,o){return s[10].name===s[0]?One:bne}let i=t(r),n=i(r);return{c(){n.c(),e=bn()},m(s,o){n.m(s,o),K(s,e,o)},p(s,o){i===(i=t(s))&&n?n.p(s,o):(n.d(1),n=i(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){n.d(s),s&&Y(e)}}}function kne(r){let e,t;return e=new mne({}),{c(){Kt(e.$$.fragment)},m(i,n){Vt(e,i,n),t=!0},i(i){t||(Se(e.$$.fragment,i),t=!0)},o(i){Me(e.$$.fragment,i),t=!1},d(i){jt(e,i)}}}function wne(r){let e,t;return e=new Uie({}),{c(){Kt(e.$$.fragment)},m(i,n){Vt(e,i,n),t=!0},i(i){t||(Se(e.$$.fragment,i),t=!0)},o(i){Me(e.$$.fragment,i),t=!1},d(i){jt(e,i)}}}function yne(r){let e,t;return e=new Cie({}),{c(){Kt(e.$$.fragment)},m(i,n){Vt(e,i,n),t=!0},i(i){t||(Se(e.$$.fragment,i),t=!0)},o(i){Me(e.$$.fragment,i),t=!1},d(i){jt(e,i)}}}function vne(r){let e,t;return e=new Bie({}),{c(){Kt(e.$$.fragment)},m(i,n){Vt(e,i,n),t=!0},i(i){t||(Se(e.$$.fragment,i),t=!0)},o(i){Me(e.$$.fragment,i),t=!1},d(i){jt(e,i)}}}function Sne(r){let e,t;return e=new Pie({}),{c(){Kt(e.$$.fragment)},m(i,n){Vt(e,i,n),t=!0},i(i){t||(Se(e.$$.fragment,i),t=!0)},o(i){Me(e.$$.fragment,i),t=!1},d(i){jt(e,i)}}}function xne(r){let e,t,i,n,s,o,l,a,h,u,f,c,d,g,w,S,x=r[2],Q=[];for(let m=0;m<x.length;m+=1)Q[m]=O4(b4(r,x,m));const M=[Sne,vne,yne,wne,kne],p=[];function b(m,k){return m[0]==="General"?0:m[0]==="Theme"?1:m[0]==="Node-Red"?2:m[0]==="External Scripts"?3:m[0]==="Environments"?4:-1}return~(s=b(r))&&(o=p[s]=M[s](r)),{c(){e=B("div"),t=B("ul");for(let m=0;m<Q.length;m+=1)Q[m].c();i=F(),n=B("div"),o&&o.c(),l=F(),a=B("div"),h=B("button"),u=ne("EmailIt+"),f=F(),c=B("button"),d=ne("Notes"),P(t,"id","tabs"),P(t,"class","svelte-1c0xrvo"),P(n,"id","prefListWrap"),P(n,"class","svelte-1c0xrvo"),O(h,"background-color",r[1].textAreaColor),O(h,"font-family",r[1].font),O(h,"color",r[1].textColor),O(h,"font-size",r[1].fontSize),P(h,"class","svelte-1c0xrvo"),O(c,"background-color",r[1].textAreaColor),O(c,"font-family",r[1].font),O(c,"color",r[1].textColor),O(c,"font-size",r[1].fontSize),P(c,"class","svelte-1c0xrvo"),P(a,"id","buttonPanel"),P(a,"class","svelte-1c0xrvo"),P(e,"id","PreferencePanel"),O(e,"background-color",r[1].backgroundColor),O(e,"font-family",r[1].font),O(e,"color",r[1].textColor),O(e,"font-size",r[1].fontSize),P(e,"class","svelte-1c0xrvo")},m(m,k){K(m,e,k),A(e,t);for(let C=0;C<Q.length;C+=1)Q[C].m(t,null);A(e,i),A(e,n),~s&&p[s].m(n,null),A(e,l),A(e,a),A(a,h),A(h,u),A(a,f),A(a,c),A(c,d),g=!0,w||(S=[U(h,"click",r[7]),U(c,"click",r[8])],w=!0)},p(m,[k]){if(k&15){x=m[2];let v;for(v=0;v<x.length;v+=1){const y=b4(m,x,v);Q[v]?Q[v].p(y,k):(Q[v]=O4(y),Q[v].c(),Q[v].m(t,null))}for(;v<Q.length;v+=1)Q[v].d(1);Q.length=x.length}let C=s;s=b(m),s!==C&&(o&&(Bn(),Me(p[C],1,1,()=>{p[C]=null}),Nn()),~s?(o=p[s],o||(o=p[s]=M[s](m),o.c()),Se(o,1),o.m(n,null)):o=null),(!g||k&2)&&O(h,"background-color",m[1].textAreaColor),(!g||k&2)&&O(h,"font-family",m[1].font),(!g||k&2)&&O(h,"color",m[1].textColor),(!g||k&2)&&O(h,"font-size",m[1].fontSize),(!g||k&2)&&O(c,"background-color",m[1].textAreaColor),(!g||k&2)&&O(c,"font-family",m[1].font),(!g||k&2)&&O(c,"color",m[1].textColor),(!g||k&2)&&O(c,"font-size",m[1].fontSize),(!g||k&2)&&O(e,"background-color",m[1].backgroundColor),(!g||k&2)&&O(e,"font-family",m[1].font),(!g||k&2)&&O(e,"color",m[1].textColor),(!g||k&2)&&O(e,"font-size",m[1].fontSize)},i(m){g||(Se(o),g=!0)},o(m){Me(o),g=!1},d(m){m&&Y(e),In(Q,m),~s&&p[s].d(),w=!1,yt(S)}}}function Cne(r,e,t){let i,n;Re(r,Ci,d=>t(9,i=d)),Re(r,et,d=>t(1,n=d));let s="General",o=[{name:"General"},{name:"Theme"},{name:"Node-Red"},{name:"External Scripts"},{name:"Environments"}];function l(d){t(0,s=d)}function a(){fe(Ci,i="emailit",i)}function h(){fe(Ci,i="notes",i)}return[s,n,o,l,a,h,d=>{l(d.name)},()=>{a()},d=>{h()}]}class Ane extends _i{constructor(e){super(),Pi(this,e,Cne,xne,ki,{})}}function Tne(r){let e,t;return e=new Ane({}),{c(){Kt(e.$$.fragment)},m(i,n){Vt(e,i,n),t=!0},i(i){t||(Se(e.$$.fragment,i),t=!0)},o(i){Me(e.$$.fragment,i),t=!1},d(i){jt(e,i)}}}function Pne(r){let e,t;return e=new vie({}),{c(){Kt(e.$$.fragment)},m(i,n){Vt(e,i,n),t=!0},i(i){t||(Se(e.$$.fragment,i),t=!0)},o(i){Me(e.$$.fragment,i),t=!1},d(i){jt(e,i)}}}function _ne(r){let e,t;return e=new kie({}),{c(){Kt(e.$$.fragment)},m(i,n){Vt(e,i,n),t=!0},i(i){t||(Se(e.$$.fragment,i),t=!0)},o(i){Me(e.$$.fragment,i),t=!1},d(i){jt(e,i)}}}function $ne(r){let e,t;return e=new Fte({}),{c(){Kt(e.$$.fragment)},m(i,n){Vt(e,i,n),t=!0},i(i){t||(Se(e.$$.fragment,i),t=!0)},o(i){Me(e.$$.fragment,i),t=!1},d(i){jt(e,i)}}}function Mne(r){let e,t;return e=new Wte({}),{c(){Kt(e.$$.fragment)},m(i,n){Vt(e,i,n),t=!0},i(i){t||(Se(e.$$.fragment,i),t=!0)},o(i){Me(e.$$.fragment,i),t=!1},d(i){jt(e,i)}}}function Rne(r){let e,t;return e=new Ete({}),{c(){Kt(e.$$.fragment)},m(i,n){Vt(e,i,n),t=!0},i(i){t||(Se(e.$$.fragment,i),t=!0)},o(i){Me(e.$$.fragment,i),t=!1},d(i){jt(e,i)}}}function Qne(r){let e,t,i,n,s,o,l,a,h,u,f;const c=[Rne,Mne,$ne,_ne,Pne,Tne],d=[];function g(w,S){return w[0]==="emailit"?0:w[0]==="viewlog"?1:w[0]==="notes"?2:w[0]==="scripts"?3:w[0]==="templates"?4:w[0]==="preferences"?5:-1}return~(i=g(r))&&(n=d[i]=c[i](r)),o=new Xte({}),a=new Ute({}),{c(){e=B("div"),t=F(),n&&n.c(),s=F(),Kt(o.$$.fragment),l=F(),Kt(a.$$.fragment),P(e,"id","dragbar"),P(e,"data-wails-drag",""),P(e,"class","svelte-wpwr83")},m(w,S){K(w,e,S),K(w,t,S),~i&&d[i].m(w,S),K(w,s,S),Vt(o,w,S),K(w,l,S),Vt(a,w,S),h=!0,u||(f=U(window,"keydown",r[1]),u=!0)},p(w,[S]){let x=i;i=g(w),i!==x&&(n&&(Bn(),Me(d[x],1,1,()=>{d[x]=null}),Nn()),~i?(n=d[i],n||(n=d[i]=c[i](w),n.c()),Se(n,1),n.m(s.parentNode,s)):n=null)},i(w){h||(Se(n),Se(o.$$.fragment,w),Se(a.$$.fragment,w),h=!0)},o(w){Me(n),Me(o.$$.fragment,w),Me(a.$$.fragment,w),h=!1},d(w){w&&Y(e),w&&Y(t),~i&&d[i].d(w),w&&Y(s),jt(o,w),w&&Y(l),jt(a,w),u=!1,f()}}}function Dne(r,e,t){let i,n,s,o,l,a;Re(r,Ci,d=>t(0,i=d)),Re(r,is,d=>t(3,n=d)),Re(r,ts,d=>t(4,s=d)),Re(r,Kd,d=>t(5,o=d)),Re(r,Yd,d=>t(6,l=d)),Re(r,et,d=>t(7,a=d)),Sr(()=>{u(),f(),h()}),jh(()=>{});function h(){fetch("http://localhost:9978/api/theme",{method:"GET",headers:{"Content-type":"application/json"}}).then(d=>d.json()).then(d=>{fe(et,a=d.theme,a),typeof callback!="undefined"&&callback()})}function u(){fetch("http://localhost:9978/api/scripts/list",{method:"GET",headers:{"Content-type":"application/json"}}).then(d=>d.json()).then(d=>{fe(Yd,l=d.data,l),typeof callback!="undefined"&&callback()})}function f(){fetch("http://localhost:9978/api/template/list",{method:"GET",headers:{"Content-type":"application/json"}}).then(d=>d.json()).then(d=>{fe(Kd,o=d.templates,o),typeof callback!="undefined"&&callback()})}function c(d){if(d.metaKey&&d.key===",")d.preventDefault(),fe(Ci,i="preferences",i);else if(d.ctrlKey)switch(d.key){case"e":fe(Ci,i="emailit",i),d.preventDefault();break;case"v":fe(Ci,i="viewlog",i),d.preventDefault();break;case"n":fe(Ci,i="notes",i),d.preventDefault();break;case"m":fe(ts,s=!s,s),d.preventDefault();break;case"t":fe(is,n=!n,n),d.preventDefault();break;case"p":fe(Ci,i="preferences",i),d.preventDefault()}}return[i,c]}class Ene extends _i{constructor(e){super(),Pi(this,e,Dne,Qne,ki,{})}}new Ene({target:document.body,props:{}});
